/*! For license information please see TechChartLib.js.LICENSE.txt */
!function(t){function e(i){if(a[i])return a[i].exports;var r=a[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var a={};e.m=t,e.c=a,e.d=function(t,a,i){e.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:i})},e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,a){if(1&a&&(t=e(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(e.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var r in t)e.d(i,r,function(e){return t[e]}.bind(null,r));return i},e.n=function(t){var a=t&&t.__esModule?function e(){return t.default}:function e(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}({"./node_modules/axios/index.js":function(t,e,a){t.exports=a("./node_modules/axios/lib/axios.js")},"./node_modules/axios/lib/adapters/xhr.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/utils.js"),r=a("./node_modules/axios/lib/core/settle.js"),s=a("./node_modules/axios/lib/helpers/buildURL.js"),n=a("./node_modules/axios/lib/core/buildFullPath.js"),o=a("./node_modules/axios/lib/helpers/parseHeaders.js"),h=a("./node_modules/axios/lib/helpers/isURLSameOrigin.js"),c=a("./node_modules/axios/lib/core/createError.js");t.exports=function t(e){return new Promise((function t(l,A){var d=e.data,p=e.headers;i.isFormData(d)&&delete p["Content-Type"];var u=new XMLHttpRequest;if(e.auth){var g=e.auth.username||"",f=e.auth.password||"";p.Authorization="Basic "+btoa(g+":"+f)}var w=n(e.baseURL,e.url);if(u.open(e.method.toUpperCase(),s(w,e.params,e.paramsSerializer),!0),u.timeout=e.timeout,u.onreadystatechange=function t(){if(u&&4===u.readyState&&(0!==u.status||u.responseURL&&0===u.responseURL.indexOf("file:"))){var a="getAllResponseHeaders"in u?o(u.getAllResponseHeaders()):null,i={data:e.responseType&&"text"!==e.responseType?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:a,config:e,request:u};r(l,A,i),u=null}},u.onabort=function t(){u&&(A(c("Request aborted",e,"ECONNABORTED",u)),u=null)},u.onerror=function t(){A(c("Network Error",e,null,u)),u=null},u.ontimeout=function t(){var a="timeout of "+e.timeout+"ms exceeded";e.timeoutErrorMessage&&(a=e.timeoutErrorMessage),A(c(a,e,"ECONNABORTED",u)),u=null},i.isStandardBrowserEnv()){var v=a("./node_modules/axios/lib/helpers/cookies.js"),y=(e.withCredentials||h(w))&&e.xsrfCookieName?v.read(e.xsrfCookieName):void 0;y&&(p[e.xsrfHeaderName]=y)}if("setRequestHeader"in u&&i.forEach(p,(function t(e,a){"undefined"===typeof d&&"content-type"===a.toLowerCase()?delete p[a]:u.setRequestHeader(a,e)})),i.isUndefined(e.withCredentials)||(u.withCredentials=!!e.withCredentials),e.responseType)try{u.responseType=e.responseType}catch(m){if("json"!==e.responseType)throw m}"function"===typeof e.onDownloadProgress&&u.addEventListener("progress",e.onDownloadProgress),"function"===typeof e.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function t(e){u&&(u.abort(),A(e),u=null)})),void 0===d&&(d=null),u.send(d)}))}},"./node_modules/axios/lib/axios.js":function(t,e,a){"use strict";function i(t){var e=new n(t),a=s(n.prototype.request,e);return r.extend(a,n.prototype,e),r.extend(a,e),a}var r=a("./node_modules/axios/lib/utils.js"),s=a("./node_modules/axios/lib/helpers/bind.js"),n=a("./node_modules/axios/lib/core/Axios.js"),o=a("./node_modules/axios/lib/core/mergeConfig.js"),h=i(a("./node_modules/axios/lib/defaults.js"));h.Axios=n,h.create=function t(e){return i(o(h.defaults,e))},h.Cancel=a("./node_modules/axios/lib/cancel/Cancel.js"),h.CancelToken=a("./node_modules/axios/lib/cancel/CancelToken.js"),h.isCancel=a("./node_modules/axios/lib/cancel/isCancel.js"),h.all=function t(e){return Promise.all(e)},h.spread=a("./node_modules/axios/lib/helpers/spread.js"),t.exports=h,t.exports.default=h},"./node_modules/axios/lib/cancel/Cancel.js":function(t){"use strict";function e(t){this.message=t}e.prototype.toString=function t(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},"./node_modules/axios/lib/cancel/CancelToken.js":function(t,e,a){"use strict";function i(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function t(a){e=a}));var a=this;t((function t(i){a.reason||(a.reason=new r(i),e(a.reason))}))}var r=a("./node_modules/axios/lib/cancel/Cancel.js");i.prototype.throwIfRequested=function t(){if(this.reason)throw this.reason},i.source=function t(){var e;return{token:new i((function t(a){e=a})),cancel:e}},t.exports=i},"./node_modules/axios/lib/cancel/isCancel.js":function(t){"use strict";t.exports=function t(e){return!(!e||!e.__CANCEL__)}},"./node_modules/axios/lib/core/Axios.js":function(t,e,a){"use strict";function i(t){this.defaults=t,this.interceptors={request:new n,response:new n}}var r=a("./node_modules/axios/lib/utils.js"),s=a("./node_modules/axios/lib/helpers/buildURL.js"),n=a("./node_modules/axios/lib/core/InterceptorManager.js"),o=a("./node_modules/axios/lib/core/dispatchRequest.js"),h=a("./node_modules/axios/lib/core/mergeConfig.js");i.prototype.request=function t(e){"string"===typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=h(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var a=[o,void 0],i=Promise.resolve(e);for(this.interceptors.request.forEach((function t(e){a.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function t(e){a.push(e.fulfilled,e.rejected)}));a.length;)i=i.then(a.shift(),a.shift());return i},i.prototype.getUri=function t(e){return e=h(this.defaults,e),s(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function t(e){i.prototype[e]=function(t,a){return this.request(r.merge(a||{},{method:e,url:t}))}})),r.forEach(["post","put","patch"],(function t(e){i.prototype[e]=function(t,a,i){return this.request(r.merge(i||{},{method:e,url:t,data:a}))}})),t.exports=i},"./node_modules/axios/lib/core/InterceptorManager.js":function(t,e,a){"use strict";function i(){this.handlers=[]}var r=a("./node_modules/axios/lib/utils.js");i.prototype.use=function t(e,a){return this.handlers.push({fulfilled:e,rejected:a}),this.handlers.length-1},i.prototype.eject=function t(e){this.handlers[e]&&(this.handlers[e]=null)},i.prototype.forEach=function t(e){r.forEach(this.handlers,(function t(a){null!==a&&e(a)}))},t.exports=i},"./node_modules/axios/lib/core/buildFullPath.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/helpers/isAbsoluteURL.js"),r=a("./node_modules/axios/lib/helpers/combineURLs.js");t.exports=function t(e,a){return e&&!i(a)?r(e,a):a}},"./node_modules/axios/lib/core/createError.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/core/enhanceError.js");t.exports=function t(e,a,r,s,n){var o=new Error(e);return i(o,a,r,s,n)}},"./node_modules/axios/lib/core/dispatchRequest.js":function(t,e,a){"use strict";function i(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var r=a("./node_modules/axios/lib/utils.js"),s=a("./node_modules/axios/lib/core/transformData.js"),n=a("./node_modules/axios/lib/cancel/isCancel.js"),o=a("./node_modules/axios/lib/defaults.js");t.exports=function t(e){return i(e),e.headers=e.headers||{},e.data=s(e.data,e.headers,e.transformRequest),e.headers=r.merge(e.headers.common||{},e.headers[e.method]||{},e.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function t(a){delete e.headers[a]})),(e.adapter||o.adapter)(e).then((function t(a){return i(e),a.data=s(a.data,a.headers,e.transformResponse),a}),(function t(a){return n(a)||(i(e),a&&a.response&&(a.response.data=s(a.response.data,a.response.headers,e.transformResponse))),Promise.reject(a)}))}},"./node_modules/axios/lib/core/enhanceError.js":function(t){"use strict";t.exports=function t(e,a,i,r,s){return e.config=a,i&&(e.code=i),e.request=r,e.response=s,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},"./node_modules/axios/lib/core/mergeConfig.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/utils.js");t.exports=function t(e,a){a=a||{};var r={},s=["url","method","params","data"],n=["headers","auth","proxy"],o=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];i.forEach(s,(function t(e){"undefined"!==typeof a[e]&&(r[e]=a[e])})),i.forEach(n,(function t(s){i.isObject(a[s])?r[s]=i.deepMerge(e[s],a[s]):"undefined"!==typeof a[s]?r[s]=a[s]:i.isObject(e[s])?r[s]=i.deepMerge(e[s]):"undefined"!==typeof e[s]&&(r[s]=e[s])})),i.forEach(o,(function t(i){"undefined"!==typeof a[i]?r[i]=a[i]:"undefined"!==typeof e[i]&&(r[i]=e[i])}));var h=s.concat(n).concat(o),c=Object.keys(a).filter((function t(e){return-1===h.indexOf(e)}));return i.forEach(c,(function t(i){"undefined"!==typeof a[i]?r[i]=a[i]:"undefined"!==typeof e[i]&&(r[i]=e[i])})),r}},"./node_modules/axios/lib/core/settle.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/core/createError.js");t.exports=function t(e,a,r){var s=r.config.validateStatus;!s||s(r.status)?e(r):a(i("Request failed with status code "+r.status,r.config,null,r.request,r))}},"./node_modules/axios/lib/core/transformData.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/utils.js");t.exports=function t(e,a,r){return i.forEach(r,(function t(i){e=i(e,a)})),e}},"./node_modules/axios/lib/defaults.js":function(t,e,a){"use strict";(function(e){function i(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var r=a("./node_modules/axios/lib/utils.js"),s=a("./node_modules/axios/lib/helpers/normalizeHeaderName.js"),n={"Content-Type":"application/x-www-form-urlencoded"},o={adapter:function h(){var t;return("undefined"!==typeof XMLHttpRequest||"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e))&&(t=a("./node_modules/axios/lib/adapters/xhr.js")),t}(),transformRequest:[function t(e,a){return s(a,"Accept"),s(a,"Content-Type"),r.isFormData(e)||r.isArrayBuffer(e)||r.isBuffer(e)||r.isStream(e)||r.isFile(e)||r.isBlob(e)?e:r.isArrayBufferView(e)?e.buffer:r.isURLSearchParams(e)?(i(a,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):r.isObject(e)?(i(a,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function t(e){if("string"===typeof e)try{e=JSON.parse(e)}catch(a){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function t(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function t(e){o.headers[e]={}})),r.forEach(["post","put","patch"],(function t(e){o.headers[e]=r.merge(n)})),t.exports=o}).call(this,a("./node_modules/process/browser.js"))},"./node_modules/axios/lib/helpers/bind.js":function(t){"use strict";t.exports=function t(e,a){return function t(){for(var i=new Array(arguments.length),r=0;r<i.length;r++)i[r]=arguments[r];return e.apply(a,i)}}},"./node_modules/axios/lib/helpers/buildURL.js":function(t,e,a){"use strict";function i(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var r=a("./node_modules/axios/lib/utils.js");t.exports=function t(e,a,s){if(!a)return e;var n;if(s)n=s(a);else if(r.isURLSearchParams(a))n=a.toString();else{var o=[];r.forEach(a,(function t(e,a){null!==e&&"undefined"!==typeof e&&(r.isArray(e)?a+="[]":e=[e],r.forEach(e,(function t(e){r.isDate(e)?e=e.toISOString():r.isObject(e)&&(e=JSON.stringify(e)),o.push(i(a)+"="+i(e))})))})),n=o.join("&")}if(n){var h=e.indexOf("#");-1!==h&&(e=e.slice(0,h)),e+=(-1===e.indexOf("?")?"?":"&")+n}return e}},"./node_modules/axios/lib/helpers/combineURLs.js":function(t){"use strict";t.exports=function t(e,a){return a?e.replace(/\/+$/,"")+"/"+a.replace(/^\/+/,""):e}},"./node_modules/axios/lib/helpers/cookies.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/utils.js");t.exports=i.isStandardBrowserEnv()?function t(){return{write:function t(e,a,r,s,n,o){var h=[];h.push(e+"="+encodeURIComponent(a)),i.isNumber(r)&&h.push("expires="+new Date(r).toGMTString()),i.isString(s)&&h.push("path="+s),i.isString(n)&&h.push("domain="+n),!0===o&&h.push("secure"),document.cookie=h.join("; ")},read:function t(e){var a=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function t(e){this.write(e,"",Date.now()-864e5)}}}():{write:function t(){},read:function t(){return null},remove:function t(){}}},"./node_modules/axios/lib/helpers/isAbsoluteURL.js":function(t){"use strict";t.exports=function t(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},"./node_modules/axios/lib/helpers/isURLSameOrigin.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/utils.js");t.exports=i.isStandardBrowserEnv()?function t(){function e(t){var e=t;return r&&(s.setAttribute("href",e),e=s.href),s.setAttribute("href",e),{href:s.href,protocol:s.protocol?s.protocol.replace(/:$/,""):"",host:s.host,search:s.search?s.search.replace(/^\?/,""):"",hash:s.hash?s.hash.replace(/^#/,""):"",hostname:s.hostname,port:s.port,pathname:"/"===s.pathname.charAt(0)?s.pathname:"/"+s.pathname}}var a,r=/(msie|trident)/i.test(navigator.userAgent),s=document.createElement("a");return a=e(window.location.href),function t(r){var s=i.isString(r)?e(r):r;return s.protocol===a.protocol&&s.host===a.host}}():function t(){return!0}},"./node_modules/axios/lib/helpers/normalizeHeaderName.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/utils.js");t.exports=function t(e,a){i.forEach(e,(function t(i,r){r!==a&&r.toUpperCase()===a.toUpperCase()&&(e[a]=i,delete e[r])}))}},"./node_modules/axios/lib/helpers/parseHeaders.js":function(t,e,a){"use strict";var i=a("./node_modules/axios/lib/utils.js"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function t(e){var a,s,n,o={};return e?(i.forEach(e.split("\n"),(function t(e){if(n=e.indexOf(":"),a=i.trim(e.substr(0,n)).toLowerCase(),s=i.trim(e.substr(n+1)),a){if(o[a]&&r.indexOf(a)>=0)return;o[a]="set-cookie"===a?(o[a]?o[a]:[]).concat([s]):o[a]?o[a]+", "+s:s}})),o):o}},"./node_modules/axios/lib/helpers/spread.js":function(t){"use strict";t.exports=function t(e){return function t(a){return e.apply(null,a)}}},"./node_modules/axios/lib/utils.js":function(t,e,a){"use strict";function i(t){return"[object Array]"===c.call(t)}function r(t){return"undefined"===typeof t}function s(t){return null!==t&&"object"===typeof t}function n(t){return"[object Function]"===c.call(t)}function o(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),i(t))for(var a=0,r=t.length;a<r;a++)e.call(null,t[a],a,t);else for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.call(null,t[s],s,t)}var h=a("./node_modules/axios/lib/helpers/bind.js"),c=Object.prototype.toString;t.exports={isArray:i,isArrayBuffer:function l(t){return"[object ArrayBuffer]"===c.call(t)},isBuffer:function A(t){return null!==t&&!r(t)&&null!==t.constructor&&!r(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function d(t){return"undefined"!==typeof FormData&&t instanceof FormData},isArrayBufferView:function p(t){return"undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function u(t){return"string"===typeof t},isNumber:function g(t){return"number"===typeof t},isObject:s,isUndefined:r,isDate:function f(t){return"[object Date]"===c.call(t)},isFile:function w(t){return"[object File]"===c.call(t)},isBlob:function v(t){return"[object Blob]"===c.call(t)},isFunction:n,isStream:function y(t){return s(t)&&n(t.pipe)},isURLSearchParams:function m(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function B(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!==typeof window&&"undefined"!==typeof document},forEach:o,merge:function t(){function e(e,i){"object"===typeof a[i]&&"object"===typeof e?a[i]=t(a[i],e):a[i]=e}for(var a={},i=0,r=arguments.length;i<r;i++)o(arguments[i],e);return a},deepMerge:function t(){function e(e,i){"object"===typeof a[i]&&"object"===typeof e?a[i]=t(a[i],e):a[i]="object"===typeof e?t({},e):e}for(var a={},i=0,r=arguments.length;i<r;i++)o(arguments[i],e);return a},extend:function C(t,e,a){return o(e,(function e(i,r){t[r]=a&&"function"===typeof i?h(i,a):i})),t},trim:function D(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}}},"./node_modules/process/browser.js":function(t){function e(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function i(t){if(h===setTimeout)return setTimeout(t,0);if((h===e||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(a){try{return h.call(null,t,0)}catch(a){return h.call(this,t,0)}}}function r(){p&&A&&(p=!1,A.length?d=A.concat(d):u=-1,d.length&&s())}function s(){if(!p){var t=i(r);p=!0;for(var e=d.length;e;){for(A=d,d=[];++u<e;)A&&A[u].run();u=-1,e=d.length}A=null,p=!1,function s(t){if(c===clearTimeout)return clearTimeout(t);if((c===a||!c)&&clearTimeout)return c=clearTimeout,clearTimeout(t);try{c(t)}catch(e){try{return c.call(null,t)}catch(e){return c.call(this,t)}}}(t)}}function n(t,e){this.fun=t,this.array=e}function o(){}var h,c,l=t.exports={};!function(){try{h="function"===typeof setTimeout?setTimeout:e}catch(t){h=e}try{c="function"===typeof clearTimeout?clearTimeout:a}catch(t){c=a}}();var A,d=[],p=!1,u=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var a=1;a<arguments.length;a++)e[a-1]=arguments[a];d.push(new n(t,e)),1!==d.length||p||i(s)},n.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=o,l.addListener=o,l.once=o,l.off=o,l.removeListener=o,l.removeAllListeners=o,l.emit=o,l.prependListener=o,l.prependOnceListener=o,l.listeners=function(){return[]},l.binding=function(){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},"./src/scripts/Config/Languages/Locales/ar.json":function(t){t.exports={"1-minute":"1 دقيقة","5-minutes":"5 دقائق","15-minutes":"15 دقائق","30-minutes":"30 دقيقة","1-hour":"1 ساعة","4-hours":"4 ساعات","8-hours":"8 ساعات","1-day":"1 يوم","1-week":"1 اسبوع","1-month":"1 شهر","1m":"1 د","5m":"5 د","15m":"15 د","30m":"30 د","1h":"1 س","4h":"4 س","8h":"8 س","1D":"1 يوم","1W":"1 ثا","1M":"1 شهر","color-bars-based":"لون القضبان إستنادا على الإغلاق السابق",borders:"السكتة الدماغية",border:"السكتة الدماغية",wick:"فتيلة","price-line":"خط السعر",scale:"سلم",scales:"النطاقات","override-min":"تجاوز الحد الأدنى للقراد","price-source":"مصدر السعر",price:"السعر",barNumber:"الحانات",line:"خط",fill:"ملء",type:"نوع","hlc-bars":"قضبان - HLC","up-color":"اللون أعلاه","down-color":"اللون أسفله",default:"افتراضيا",ok:"حسنا",cancel:"إلغاء",closeBtn:"قريب",style:"أسلوب",inputs:"مساهمات",period:"فترة",K:"ك",D:"د",KLine:"الخط ك",DLine:"الخط د",ADX:"ADX",DIM:"DI-",DIP:"DI+",fastLength:"طول سريع",slowLength:"طول بطئ",signalLength:"إشارة التمهيد",histogram:"الرسم البياني",signal:"إشارة",U:"الأعلى",M:"الأوسط",L:"ضعيف",cloud:"سحابة",cloudU:"سحابة",cloudL:"سحابة",smallPeriod:"مدة قصيرة",middlePeriod:"مدة متوسطة",largePeriod:"مدة طويلة",TenkanSen:"Tenkan sen",KijunSen:"Kijun sen",ChinkouSpan:"Chinkou span",SenkouSpanA:"Senkou span A",SenkouSpanB:"Senkou span B",A:"أ",B:"ب",lenght:"الطول",percent:"نسبه مئويه",average:"متوسط",startAf:"بدء",stepAf:"خطوة",maxAf:"ماكس",multi:"متعدد",lineUp:"خط للأعلى",lineDown:"خط للسفل",background:"خلفية","auto-scale":"السلم التلقائي","scale-series":"تجاهل مقياس المؤشر",notecolor:"ملاحظة اللون","vert-grid-lines":"الخط العمودي للشبكة","horz-grid-lines":"الخط الأفقي للشبكة","scales-text":"النص على المقاييس","scales-lines":"مقياس الخطوط",watermark:"العلامة المائية",crosshair:"التقاطع","navigation-buttons":"أزرار التنقل","symbol-description":"رمز الوصف","ohlc-values":"قيم OHLC","indicator-titles":"أسماء المؤشرات","indicator-arguments":"حجج المؤشرات","indicator-values":"معنى المؤشر","min-max-prices":"Min/Max values","visible-on mouse":"مرئية على الماوس ","always-visible":"مرئية دائما","always-invisible":"دائما غير مرئية",themes:"المواضيع",blue:"سماوي",black:"أسود",grey:"رمادي",white:"White",dark:"Dark",indicators:"مؤشرات","type-indicator":"أدخل اسم المؤشر","bears-power":"قوة الدببة","bulls-power":"قوة الثيران",stochastic:"العشوائية","simple-moving":"متوسط متحرك بسيط","exponential-moving":"المتوسط المتحرك الأسي","bollinger-bands":"خطوط بولينجر","williams-fractal":"كسورية ويليامز","ichimoku-cloud":"إيشيموكو كلاود","double-exponential":"المتوسط المتحرك المزدوج","parabolic-sar":"مؤشر مكافئ SAR","standard-deviation":"الانحراف المعياري",envelope:"ظرف","williams-%r":"نسبة ويليامز",atr:"ATR",rsi:"RSI",adx:"ADX","awesome-oscillator":"المذبذب العجيب","acceleration/deceleration":"التسارع / التباطؤ","keltner-channels":"قنوات كيلتنر","donchian-channel":"قناة دونشيان",macd:"MACD","zoom-in":"تكبير","zoom-out":"تصغير","zoom-zero":"Zoom Restore",lock:"إصلاح كل الأشياء المقدمة",clear:"مسح كل الأشياء المرسومة",save:"حفظ",restore:"إعادة ","stay-in-drawing":"البقاء في وضع الرسم","show-hide":"إخفاء جميع الأشياءالمقدمة","magnet-mode":"مغناطيس","roulette-mode":"روليت",more:"أكثر","vertical-line":"خط عمودي","horizontal-line":"خط أفقي","trend-line":"اتجاه الخط","trend-angle":"زاوية الاتجاه","horizontal-ray":"شعاع أفقي",arrow:"سهم",ray:"شعاع ","parallel-channel":"قناة","disjoint-angle":"زاوية متباينة","flat-top/bottom":"شقة أعلى / أسفل",dot:"نقطة",cross:"تقاطع",brush:"فرشاة",rectangle:"مستطيل","rotated-rectangle":"مستطيل مستدير",ellipse:"قطعة ناقصة",triangle:"مثلث",polyline:"خط متقطع",curve:"منحنى","double-curve":"Double Curve -ar",arc:"قوس",text:"نص","anchored-text":"نص راسخ","arrow-mark":"سهم مارك","arrow-mark-left":"سهم موجه لليسار","arrow-mark-right":"سهم موجه لليمين","arrow-mark-up":"سهم موجه للأسفل","arrow-mark-down":"سهم موجه للأعلى",flag:"علم",flagcolor:"لون العلم",note:"ملحوظة","anchored-note":"ملاحظة راسخة",all:"الكل",commodity:"سلعة",currency:"عملة",index:"مؤشر",stock:"سهم",crypto:"مشفرة","no-financial":"لاتوجد أداة مالية مطابقة للمعايير الخاصة بك","indicator-not-found":"لا توجد مؤشرات تطابق معاييرك",candle:"الشمعات اليابانية",area:"منطقة",bar:"الحانات",hollow:"الشموع الفارغة",heikin:"Heikin Ashi",bid:"عرض",ask:"اسأل",mid:"متوسط",open:"فتح",high:"مرتفع",low:"منخفض",close:"غلق",value:"القيمة",delete:"حذف",params:"المعايير .إعدادات.خيارات",coordinates:"إحداثيات",visibility:"رؤية",normal:"عادي",dash:"اندفاع",point:"نقاط",points:"نقاط","show-price":"اظهار السعر","show-price-range":"هامش إظهار السعر","show-text":"إظهار النص","show-time":"هامش إظهار النص","text-color":"إحصائيات لون النص","text-alignment":"محاذاة النص","left-end":"نهاية اليسار","right-end":"النهاية اليمنى","show-bars-range":"هامش إظهار القضبان","show-date-time-range":"هامش إظهار التاريخ الزمني","show-distance":"إظهار المسافة","show-angle":"إظهار الزاوية","always-show-stats":" إظهار الإحصاءات دائما ",middle:"المتوسط",signals:"الإشارات",simple:"بسيط","with-markers":"مع علامات",step:"خطوة","custom-color":"Custom color-ar","bars-roulete":" bars, ","day-roulete":" d, ","hour-roulete":" h, ","minute-roulete":" m ","open-prise-source":"Open","high-prise-source":"Hight","low-prise-source":"Low","close-prise-source":"Close","hl2-prise-source":"(H+L)/2","hlc3-prise-source":"(H+L+C)/3","ohlc4-prise-source":"(O+H+L+C)/4",lri:"LRI","linear-regression":"Linear Regression Indicator",deviation:"deviation",RSIP:"Period RSI",obv:"OBV","on-balance":"On Balance Volume","stochastic-rsi":"Stochastic RSI",d:"d",h:"h","candle-timer":"Countdown To Bar Close",buy:"شراء",sell:"بيع",length:"فترة"}},"./src/scripts/Config/Languages/Locales/de.json":function(t){t.exports={"1-minute":"1 minute","5-minutes":"5 minuten","15-minutes":"15 minuten","30-minutes":"30 minuten","1-hour":"1 stunde","4-hours":"4 stunden","8-hours":"8 stunden","1-day":"1 tag","1-week":"1 woche","1-month":"1 monat","1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1std","4h":"4std","8h":"8std","1D":"1T","1W":"1W","1M":"1M","color-bars-based":"Farbe basiert auf dem vorherigen schlusskurs",borders:"Grenze",border:"Grenze",wick:"Docht","price-line":"Preislinie",scale:"Skala",scales:"Skalen","override-min":"Mindestpreisänderung","price-source":"Preisquelle",price:"Preis anzeigen",barNumber:"Stab Nr.",line:"Linie",fill:"Füllfarbe",type:"Art","hlc-bars":"HLC - Stäbe","up-color":"Wachsende Farbe","down-color":"Abnehmende Farbe",default:"Standardmäßig",ok:"Anwenden",cancel:"Stornieren",closeBtn:"Schließen",style:"Stil",inputs:"Daten",period:"Periode",K:"K",D:"D",KLine:"KLine",DLine:"DLine",ADX:"ADX",DIM:"DIM",DIP:"DIP",fastLength:"Schnelle Linie",slowLength:"Langsame Linie",signalLength:"Signallinie",histogram:"Histogramm",signal:"Signal",U:"U",M:"M",L:"L",cloud:"Cloud",cloudU:"Cloud",cloudL:"Cloud",smallPeriod:"Kleine Periode",middlePeriod:"Mittlere Periode",largePeriod:"Große Periode",TenkanSen:"Umkehr linie",KijunSen:"Haupt linie",ChinkouSpan:"Langsame linie",SenkouSpanA:"Führungs linie A",SenkouSpanB:"Führungs linie B",A:"A",B:"B",lenght:"Breite",percent:"Prozent",average:"Durchschnitt",startAf:"Anfangswert",stepAf:"Schritt",maxAf:"Anzahl der Übergänge",multi:"Schritt",lineUp:"Linie nach oben",lineDown:"Linie nach unten",background:"Hintergrund","auto-scale":"Automatische Skalierung","scale-series":"Indikatorleiste ignorieren",notecolor:"Beschriftungsfarbe","vert-grid-lines":"Vertikale Gitterlinien","horz-grid-lines":"Horizontale Gitterlinien","scales-text":"Text auf den Skalen","scales-lines":"Skalalinien",watermark:"Wasserzeichen",crosshair:"Fadenkreuz","navigation-buttons":"Navigationstasten","symbol-description":"Instrument beschreibung","ohlc-values":"EHMS-Werte","indicator-titles":"Indikatornamen","indicator-arguments":"Indikator parameter","indicator-values":"Indikatorwerte","min-max-prices":"Min/Max values","visible-on mouse":"Sichtbar bei Mouse-Over","always-visible":"Immer sichtbar","always-invisible":"Immer unsichtbar",themes:"Modi",blue:"Blau",black:"Schwarz",grey:"Grau",white:"Licht",dark:"Dunkel",indicators:"Indikatoren","type-indicator":"Geben Sie den Indikatornamen ein","bears-power":"Bullenkraft","bulls-power":"Bärenkraft",stochastic:"Stochastischer Oszillator","simple-moving":"Gleitender Durchschnitt","exponential-moving":"Exponentieller gleitender Durchschnitt","bollinger-bands":"Bollinger Bänder","williams-fractal":"Williams-Fraktal","ichimoku-cloud":"Ichimoku Kinko Hyo","double-exponential":"Doppelter gleitender Durchschnitt","parabolic-sar":"Parabolischer SAR-Indikator","standard-deviation":"Standardabweichung",envelope:"Envelopes","williams-%r":"Williams Prozent Range",atr:"ATR",rsi:"RSI",adx:"ADX","awesome-oscillator":"Bill Williams Oscillator","acceleration/deceleration":"Beschleunigung/Verzögerung","keltner-channels":"Keltner Channel","donchian-channel":"Donchian Channel",macd:"MACD","zoom-in":"Vergrößern","zoom-out":"Verkleinern","zoom-zero":"Zoom zurücksetzen",lock:"Alle Zeichentools sperren",clear:"Alle Zeichentools löschen",save:"Speichern",restore:"Wiederherstellen","stay-in-drawing":"Im Zeichenmodus bleiben","show-hide":"Alle Zeichentools ausblenden","magnet-mode":"Magnet","roulette-mode":"Roulette",more:"Mehr","vertical-line":"Vertikale Linie","horizontal-line":"Horizontale Linie","trend-line":"Trendlinie","trend-angle":"Trendwinkel","horizontal-ray":"Horizontaler Strahl",arrow:"Pfeil",ray:"Strahl","parallel-channel":"Paralleler Kanal","disjoint-angle":"Abweichender Winkel","flat-top/bottom":"Flach oben/unten",dot:"Punkt",cross:"Fadenkreuz",brush:"Pinsel",rectangle:"Rechteck","rotated-rectangle":"Rotierendes Rechteck",ellipse:"Ellipse",triangle:"Dreieck",polyline:"Polylinie",curve:"Kurve","double-curve":"Doppelkurve",arc:"Bogen",text:"Text","anchored-text":"Bildschirmtext","arrow-mark":"Pfeil","arrow-mark-left":"Pfeil nach links","arrow-mark-right":"Pfeil nach rechts","arrow-mark-up":"Pfeil nach oben","arrow-mark-down":"Pfeil nach unten",flag:"Flag",flagcolor:"Flag farbe",note:"Notiz","anchored-note":"Bildschirmnotiz",all:"Alle",commodity:"Rohstoffe",currency:"Währung",index:"Indizes",stock:"Aktien",crypto:"Krypto","no-financial":"Keine geeigneten finanzinstrumente gefunden","indicator-not-found":"Keine den suchkriterien entsprechenden indikatoren",candle:"Kerzen",area:"Bereich",bar:"Stäbe",hollow:"Leere Kerzen",heikin:"Heikin Ashi",bid:"Bid",ask:"Ask",mid:"Mid",open:"Eröffnungs",high:"Höchst",low:"Mindest",close:"Schluß",value:"Wert",delete:"Löschen",params:"Parameter",coordinates:"Koordinaten",visibility:"Sichtbarkeit",normal:"Normale",dash:"Strich",point:"Punkt",points:"Punkte","show-price":"Preis anzeigen","show-price-range":"Preis anzeigen","show-text":"Text anzeigen","show-time":"Zeit anzeigen","text-color":"Textfarbe","text-alignment":"Textausrichtung","left-end":"Linker Rand","right-end":"Rechter Rand","show-bars-range":"Bereich in Stäben anzeigen","show-date-time-range":"Zeitbereich anzeigen","show-distance":"Abstand anzeigen","show-angle":"Winkel anzeigen","always-show-stats":"Text immer anzeigen",middle:"Mitte",signals:"Signale",simple:"Einfach","with-markers":"Punkte",step:"Schritte","custom-color":"Farbeinstellung","bars-roulete":"Stäbe","day-roulete":"t,","hour-roulete":"s, ","minute-roulete":"m, ","open-prise-source":"Eröffnungs","high-prise-source":"Höchst","low-prise-source":"Mindest","close-prise-source":"Schluß","hl2-prise-source":"(H+M)/2'","hlc3-prise-source":"(H+M+S)/3","ohlc4-prise-source":"(E+H+M+S)/4",lri:"LRI","linear-regression":"Lineare Regression Indikator",deviation:"Abweichung",RSIP:"Periode RSI",obv:"OBV","on-balance":"On Balance Volume","stochastic-rsi":"Stochastic RSI",d:"d",h:"h","candle-timer":"Countdown zum nächsten Balken",buy:"Kaufen",sell:"Verkauf",length:"Periode"}},"./src/scripts/Config/Languages/Locales/en.json":function(t){t.exports={"1-minute":"1 minute","5-minutes":"5 minutes","15-minutes":"15 minutes","30-minutes":"30 minutes","1-hour":"1 hour","4-hours":"4 hours","8-hours":"8 hours","1-day":"1 day","1-week":"1 week","1-month":"1 month","1m":"1m","5m":"5m","15m":"15m","30m":"30m","1h":"1h","4h":"4h","8h":"8h","1D":"1D","1W":"1W","1M":"1M","color-bars-based":"Color bars based on previous close",borders:"Border",border:"Border",wick:"Wick","price-line":"Price Line",scale:"Scale",scales:"Scales","override-min":"Override Min Tick","price-source":"Price Source",price:"Price",barNumber:"Bar #",line:"Line",fill:"Fill",type:"Type","hlc-bars":"HLC - Bars","up-color":"Up Color","down-color":"Down Color",default:"Defaults",ok:"Ok",cancel:"Cancel",closeBtn:"Close",style:"Style",inputs:"Inputs",period:"Period",K:"K",D:"D",KLine:"KLine",DLine:"DLine",ADX:"ADX",DIM:"DIM",DIP:"DIP",fastLength:"fastLength",slowLength:"slowLength",signalLength:"signalLength",histogram:"histogram",signal:"signal",U:"U",M:"M",L:"L",cloud:"Cloud",cloudL:"Cloud",cloudU:"Cloud",smallPeriod:"Small period",middlePeriod:"Middle period",largePeriod:"Large period",TenkanSen:"TenkanSen",KijunSen:"KijunSen",ChinkouSpan:"ChinkouSpan",SenkouSpanA:"SenkouSpan A",SenkouSpanB:"SenkouSpan B",A:"A",B:"B",lenght:"Lenght",percent:"Percent",average:"Average",startAf:"StartAf",stepAf:"StepAf",maxAf:"MaxAf",multi:"Multi",lineUp:"LineUp",lineDown:"LineDown",background:"Background","auto-scale":"Auto Scale","scale-series":"Scale Series Only",notecolor:"Note color","vert-grid-lines":"Vert Grid Lines","horz-grid-lines":"Horz Grid Lines","scales-text":"Scales Text","scales-lines":"Scales Lines",watermark:"Watermark",crosshair:"Crosshair","navigation-buttons":"Navigation Buttons","symbol-description":"Symbol Description","ohlc-values":"OHLC Values","indicator-titles":"Indicator Titles","indicator-arguments":"Indicator Arguments","indicator-values":"Indicator Values","min-max-prices":"Min/Max values","visible-on mouse":"Visible on Mouse Over","always-visible":"Always Visible","always-invisible":"Always Invisible",themes:"Themes",blue:"Blue",black:"Black",grey:"Gray",white:"Light",dark:"Dark",indicators:"Indicators","type-indicator":"Type indicator name","bears-power":"Bears power","bulls-power":"Bulls power ",stochastic:"Stochastic","simple-moving":"Simple Moving Average","exponential-moving":"Exponential Moving Average","bollinger-bands":"Bollinger Bands","williams-fractal":"Williams Fractal","ichimoku-cloud":"Ichimoku Cloud","double-exponential":"Double Exponential Moving Average","parabolic-sar":"Parabolic Sar","standard-deviation":"Standard Deviation",envelope:"Envelope","williams-%r":"Williams %R",atr:"ATR",rsi:"RSI",adx:"ADX","awesome-oscillator":"Awesome Oscillator","acceleration/deceleration":"Acceleration/Deceleration","keltner-channels":"Keltner channel","donchian-channel":"Donchian channel",macd:"MACD",lri:"LRI","linear-regression":"Linear Regression Indicator",deviation:"Deviation","zoom-in":"Zoom In","zoom-out":"Zoom Out","zoom-zero":"Reset zoom",lock:"Lock All Drawing Tools",clear:"Remove All Drawing Tools",save:"Save",restore:"Restore","stay-in-drawing":"Stay in Drawing Mode","show-hide":"Hide All Drawing Tools","magnet-mode":"Magnet Mode","roulette-mode":"Roulette Mode",more:"More","vertical-line":"Vertical Line","horizontal-line":"Horizontal Line","trend-line":"Trend Line","trend-angle":"Trend Angle","horizontal-ray":"Horizontal Ray",arrow:"Arrow",ray:"Ray","parallel-channel":"Parallel Channel","disjoint-angle":"Disjoint Angle","flat-top/bottom":"Flat Top/Bottom",dot:"Dot",cross:"Cross",brush:"Brush",rectangle:"Rectangle","rotated-rectangle":"Rotated Rectangle",ellipse:"Ellipse",triangle:"Triangle",polyline:"Polyline",curve:"Curve","double-curve":"Double Curve",arc:"Arc",text:"Text","anchored-text":"Anchored Text","arrow-mark":"Arrow Mark","arrow-mark-left":"Arrow Mark Left","arrow-mark-right":"Arrow Mark Right","arrow-mark-up":"Arrow Mark Up","arrow-mark-down":"Arrow Mark Down",flag:"Flag",flagcolor:"FlagColor",note:"Note","anchored-note":"AnchoredNote",all:"All",commodity:"Commodities",currency:"Currency",index:"Indices",stock:"Stocks",crypto:"Crypto","no-financial":"No financial instrument matched your criteria","indicator-not-found":"No indicators matched your criteria",candle:"Candles",area:"Area",bar:"Bars",hollow:"Hollow Candles",heikin:"Heikin Ashi",bid:"Bid",ask:"Ask",mid:"Mid",open:"Open",high:"High",low:"Low",close:"Close",value:"Value",delete:"Delete",params:"  Parameters",coordinates:"Coordinates",visibility:"Visibility",normal:"Normal",dash:"Dash",point:"Points",points:"Points","show-price":"Show Price","show-price-range":"Show Price Range","show-text":"Show Text","show-time":"Show Time Range","text-color":"Stats Text Color","text-alignment":"Text Alignment","left-end":"Left End","right-end":"Right End","show-bars-range":"Show Bars Range","show-date-time-range":"Show date time range","show-distance":"Show Distance","show-angle":"Show Angle","always-show-stats":"Always Show Stats",middle:"Middle",signals:"Signals",simple:"Simple","with-markers":"With Markers",step:"Step","custom-color":"Custom color","bars-roulete":" bars, ","day-roulete":" d, ","hour-roulete":" h, ","minute-roulete":" m ","open-prise-source":"Open","high-prise-source":"Hight","low-prise-source":"Low","close-prise-source":"Close","hl2-prise-source":"(H+L)/2","hlc3-prise-source":"(H+L+C)/3","ohlc4-prise-source":"(O+H+L+C)/4",RSIP:"Period RSI",obv:"OBV","on-balance":"On Balance Volume (OBV)","stochastic-rsi":"Stochastic RSI",d:"d",h:"h","candle-timer":"Countdown To Bar Close",buy:"Buy",sell:"Sell",length:"Period"}},"./src/scripts/Config/Languages/Locales/es.json":function(t){t.exports={"1-minute":"1 minuto","5-minutes":"5 minutos","15-minutes":"15 minutos","30-minutes":"30 minutos","1-hour":"1 hora","4-hours":"4 horas","8-hours":"8 horas","1-day":"1 día","1-week":"1 semana","1-month":"1 mes","1m":"1min","5m":"5min","15m":"15min","30m":"30min","1h":"1h","4h":"4h","8h":"8h","1D":"1d","1W":"1sem","1M":"1mes","color-bars-based":"Barras de color basadas en el anterior cierre",borders:"Borde",border:"Borde",wick:"Mecha de la vela","price-line":"Línea de precios",scale:"Escala",scales:"Escalas","override-min":"Anule la marca de un minuto","price-source":"Fuente del precio",price:"Precio",barNumber:"Barras #",line:"Linea",fill:"Llenar",type:"Tipo","hlc-bars":"Barras - HLC","up-color":"Color arriba","down-color":"Color abajo",default:"Por defecto",ok:"Ok",cancel:"Cancelar",closeBtn:"Cerrar",style:"Estilo",inputs:"Entrada",period:"Periodo",K:"K",D:"D",KLine:"Linea K",DLine:"Linea D",ADX:"ADX",DIM:"DI-",DIP:"DI+",fastLength:"Longuitud Rapida",slowLength:"Longuitud Lenta",signalLength:"Allanamiento de la Señal",histogram:"Histograma",signal:"Señal",U:"Superior",M:"Medio",L:"Inferior",cloud:"Nube",cloudU:"Nube",cloudL:"Nube",smallPeriod:"Periodo Pequeño",middlePeriod:"Periodo Medio",largePeriod:"Periodo Grande",TenkanSen:"Tenkan Sen",KijunSen:"Kijun Sen",ChinkouSpan:"Chinkou Span",SenkouSpanA:"Senkou Span A",SenkouSpanB:"Senkou Span B",A:"A",B:"B",lenght:"Longuitud",percent:"Por ciento",average:"Promedio",startAf:"Comienzo",stepAf:"Paso",maxAf:"Max",multi:"Multi",lineUp:"Linea hacia arriba",lineDown:"Linea hacia abajo",background:"Fondo","auto-scale":"Escala automática","scale-series":"Serie de la escala sólo",notecolor:"Nota de color","vert-grid-lines":"Línea de la rejilla vertical","horz-grid-lines":"Línea de la rejilla horizontal","scales-text":"Texto de escalas","scales-lines":"Líneas de escalas",watermark:"Filigrana",crosshair:"Cruz","navigation-buttons":"Botones de Navegacion","symbol-description":"Descripcion del Simbolo","ohlc-values":"Valores de OHLC","indicator-titles":"Títulos del indicador","indicator-arguments":"Indicador de Argumentos","indicator-values":"Valores del indicador","min-max-prices":"Min/Max values","visible-on mouse":"Visibilidad del mouse sobre","always-visible":"Siempre Visible","always-invisible":"Siempre Invicible",themes:"Temas",blue:"Azul",black:"Negro",grey:"Gris",white:"Brillante",dark:"Oscuro",indicators:"Indicadores","type-indicator":"Nombre del tipo de indicador","bears-power":"Energía de osos","bulls-power":"Energía de toros",stochastic:"Estocastico","simple-moving":"Promedio del Movimiento Simple","exponential-moving":"Valor medio en momiento exponencial","bollinger-bands":"Grupos de Bollinger","williams-fractal":"Wiliams Fractal","ichimoku-cloud":"Ichimoku Cloud","double-exponential":"Promedio del moviemto doble exponencial","parabolic-sar":"Parabolico de SAR","standard-deviation":"Desviacion Estandar",envelope:"Sobre (Envelope)","williams-%r":"Variedad del porcentaje de Williams",atr:"ATR",rsi:"RSI",adx:"ADX","awesome-oscillator":"Increible oscilador","acceleration/deceleration":"Aceleración/desaceleracion","keltner-channels":"Canal de Keltner","donchian-channel":"Canal de Donchian",macd:"MACD","zoom-in":"Aumentar el zoom","zoom-out":"Disminuir el zoom","zoom-zero":"Restablecer zoom",lock:"Fijar todas herramientas del dibujo",clear:"Eliminar todas las herramientas del dibujo",save:"Guardar",restore:"Restaurar","stay-in-drawing":"Quedarse en modo dibujo","show-hide":"Ocultar todas las herramientas de dibujo","magnet-mode":"Modo Iman","roulette-mode":"Modo Ruleta",more:"Mas","vertical-line":"Línea Vertical","horizontal-line":"Línea Horizontal","trend-line":"Línea de tendecnia","trend-angle":"Angulo de tendencia","horizontal-ray":"Haz horizontal",arrow:"Flecha",ray:"Haz","parallel-channel":"Canal paralelo","disjoint-angle":"Angulo divergente","flat-top/bottom":"Plano Superior/inferior",dot:"Punto",cross:"Cruzado",brush:"Cepillo",rectangle:"Rectangulo","rotated-rectangle":"Rectangulo Girado",ellipse:"Elipse",triangle:"Triangulo",polyline:"Polilinea",curve:"Curva","double-curve":"Double Curve -es",arc:"Arco",text:"Texto","anchored-text":"Texto Anclado","arrow-mark":"Marca de Flecha","arrow-mark-left":"Marca de flecha izquierda","arrow-mark-right":"Marca de flecha derecha","arrow-mark-up":"Marca de flecha arriba","arrow-mark-down":"Marca de flecha abajo",flagcolor:"Color de la bandera",flag:"Bandera",note:"Nota","anchored-note":"Nota anclada",all:"Todo",commodity:"Mercancia",currency:"Moneda",index:"Indice",stock:"Stock",crypto:"Crypto","no-financial":"Ningun Instrumento Financiero coincide con su criterio","indicator-not-found":"Ningun indicador emparejo con sus criterios",candle:"Velas Japonesas",area:"Area",bar:"Barras",hollow:"Velas vacias",heikin:"Heikin Ashi",bid:"Oferta",ask:"Preguntar",mid:"Media",open:"Abierto",high:"Alto",low:"Bajo",close:"Cerrado",value:"Valor",delete:"Eliminar",params:"Parametros",coordinates:"Coordenadas",visibility:"Vsibilidad",normal:"Normal",dash:"Guion",point:"Puntos",points:"Puntos","show-price":"Mostrar el Precio","show-price-range":"Mostrar el Rango de Precio","show-text":"Mostrar el Texto","show-time":"Mostrar el Intervalo de Tiempo","text-color":"Color del Texto De Estadistica","text-alignment":"Alineacion del Texto","left-end":"Final Izquiero","right-end":"Final Derecho","show-bars-range":"Mostrar la Variedad de Barras","show-date-time-range":"Muestre el Rango del Tiempo Fecha","show-distance":"Mostrar Distancia","show-angle":"Mostrar Angulo","always-show-stats":"Mostrar Siempre Estadisticas",middle:"Media",signals:"Señales",simple:"Simple","with-markers":"Con Marcadores",step:"Paso","custom-color":"Color personalizado","bars-roulete":" bars, ","day-roulete":" d, ","hour-roulete":" h, ","minute-roulete":" m ","open-prise-source":"Abierto","high-prise-source":"Alto","low-prise-source":"Bajo","close-prise-source":"Cerrar","hl2-prise-source":"(H+L)/2","hlc3-prise-source":"(H+L+C)/3","ohlc4-prise-source":"(O+H+L+C)/4",lri:"LRI","linear-regression":"Indicador de Regresión Lineal",deviation:"Desviación",RSIP:"Periodo RSI",obv:"OBV","on-balance":"Balance de volúmenes (OBV)","stochastic-rsi":"Estocástica (Stoch RSI)",d:"d",h:"h","candle-timer":"Cuenta atrás para el cierre de barra",buy:"Comprar",sell:"Vender",length:"Periodo"}},"./src/scripts/Config/Languages/Locales/ru.json":function(t){t.exports={"1-minute":"1 минута","5-minutes":"5 минут","15-minutes":"15 минут","30-minutes":"30 минут","1-hour":"1 час","4-hours":"4 часа","8-hours":"8 часов","1-day":"1 день","1-week":"1 неделя","1-month":"1 месяц","1m":"1мин","5m":"5мин","15m":"15мин","30m":"30мин","1h":"1ч","4h":"4ч","8h":"8ч","1D":"1д","1W":"1н","1M":"1мес","color-bars-based":"Цвет основан на предыдущей цене закрытия",borders:"Обводка свечи",border:"Обводка",wick:"Фитиль","price-line":"Линия цены",scale:"Шкала",scales:"Шкалы","override-min":"Минимальное изменение цены","price-source":"Источник цены",price:"Цена",barNumber:"Бар №",line:"Линия",fill:"Цвет заполнения",type:"Тип","hlc-bars":"HLC - бары","up-color":"Растущий цвет","down-color":"Падающий цвет",default:"По умолчанию",ok:"Применить",cancel:"Отмена",closeBtn:"Закрыть",style:"Стиль",inputs:"Данные",period:"Период",K:"K",D:"D",KLine:"KLine",DLine:"DLine",ADX:"ADX",DIM:"DIM",DIP:"DIP",fastLength:"Быстрая линия",slowLength:"Запаздывающая линия",signalLength:"Сигнальная линия",histogram:"Гистограмма",signal:"Сигнал",U:"Верхняя линия",M:"Средняя линия",L:"Нижняя линия",cloud:"Облако",cloudU:"Облако",cloudL:"Облако",smallPeriod:"Минимальный период",middlePeriod:"Средний период",largePeriod:"Максимальный период",TenkanSen:"разворотная линия ",KijunSen:"основная линия ",ChinkouSpan:"запаздывающая линия ",SenkouSpanA:"опережающая линия А ",SenkouSpanB:"опережающая линия Б ",A:"A ",B:"B ",lenght:"Ширина",percent:"Процент",average:"Среднее",startAf:"Начальное значение",stepAf:"Шаг",maxAf:"Количество переходов",multi:"Шаг",lineUp:"Линия вверх",lineDown:"Линия вниз",background:"Заливка","auto-scale":"Автоматический масштаб","scale-series":"Игнорировать шкалу индикаторов",notecolor:"Цвет метки","vert-grid-lines":"Верт. линии сетки","horz-grid-lines":"Гор. линии сетки","scales-text":"Текст на шкалах","scales-lines":"Линии шкал",watermark:"Водяной знак",crosshair:"Перекрестие","navigation-buttons":"Навигационные кнопки","symbol-description":"Описание инструмента","ohlc-values":"Значениe ОТКР-МАКС-МИН-ЗАКР","indicator-titles":"Названия индикаторов","indicator-arguments":"Параметры индикатора","indicator-values":"Значения индикатора","min-max-prices":"Min/Max values","visible-on mouse":"Видимый при наведении мыши","always-visible":"Всегда видимый","always-invisible":"Всегда невидимый",themes:"Темы",blue:"Голубая",black:"Черная",grey:"Серая",white:"Белая",dark:"Темная",indicators:"Индикаторы","type-indicator":"Введите название индикатора","bulls-power":"Сила быков","bears-power":"Сила медведей",stochastic:"Стохастический осциллятор","simple-moving":"Скользящее среднее","exponential-moving":"Экспоненциальная скользящая средняя","bollinger-bands":"Полосы Боллинджера","williams-fractal":"Фрактал Вильямса","ichimoku-cloud":"Ишимоку Кинко Хайо","double-exponential":"Двойная скользящая средняя","parabolic-sar":"Параболический индикатор SAR","standard-deviation":"Стандартное отклонение",envelope:"Огибающая  (Envelope)","williams-%r":"Процент Вильямса",atr:"Средний истинный диапазон",rsi:"Индекс относительной силы",adx:"Индикатор среднего направленного движения","awesome-oscillator":"Осциллятор Билла Вильямса","acceleration/deceleration":"Ускорение/Замедление","keltner-channels":"Канал Кельтнера","donchian-channel":"Канал Дончиана",macd:"Схождение расхождение скользящих средних",lri:"LRI","linear-regression":"Индикатор линейной регрессии",deviation:"Отклонение","zoom-in":"Увеличить масштаб","zoom-out":"Уменьшить масштаб","zoom-zero":"Сбросить масштаб",lock:"Зафиксировать все отрисованные объекты",clear:"Удалить все отрисованные объекты",save:"Сохранить",restore:"Восстановить","stay-in-drawing":"Оставаться в режиме рисования","show-hide":"Скрыть все отрисованные объекты","magnet-mode":"Магнит","roulette-mode":"Рулетка",more:"Другое","vertical-line":"Вертикальная линия","horizontal-line":"Горизонтальная линия","trend-line":"Трендовая линия","trend-angle":"Угол тренда","horizontal-ray":"Горизонтальный луч",arrow:"Стрелка",ray:"Луч","parallel-channel":"Канал","disjoint-angle":"Расходящийся угол","flat-top/bottom":"Плоский верх/низ",dot:"Точка",cross:"Перекрестие",brush:"Кисть",rectangle:"Прямоугольник","rotated-rectangle":"Вращ. прямоугольник",ellipse:"Эллипс",triangle:"Треугольник",polyline:"Ломаная линия",curve:"Кривая","double-curve":"Двойная кривая",arc:"Дуга",text:"Текст","anchored-text":"Текст на экране","arrow-mark":"Стрелка","arrow-mark-left":"Стрелка влево","arrow-mark-right":"Стрелка вправо","arrow-mark-up":"Стрелка вверх","arrow-mark-down":"Стрелка вниз",flag:"Флаг",flagcolor:"Цвет флага",note:"Заметка","anchored-note":"Заметка на экране",all:"Все",commodity:"Товары",currency:"Валюта",index:"Индексы",stock:"Акции",crypto:"Крипто","no-financial":"Подходящих финансовых инструментов не найдено","indicator-not-found":"Нет индикаторов, соответствующим критериям поиска",candle:"Японские свечи",area:"Область",bar:"Бары",hollow:"Пустые свечи",heikin:"Heikin Ashi",bid:"Bid",ask:"Ask",mid:"Mid",open:"ОТКР.",high:"МАКС.",low:"МИН.",close:"ЗАКР.",value:"Значение",delete:"Удалить",params:"Свойства",coordinates:"Координаты",visibility:"Видимость",normal:"Обычная",dash:"Пунктир",point:"Точка",points:"Точка","show-price":"Отображать цену","show-price-range":"Отображать цену","show-text":"Отображать текст","show-time":"Отображать время","text-color":"Цвет текста","text-alignment":"Выравнивание текста","left-end":"Левый край","right-end":"Правый край","show-bars-range":"Отображать диапазон в барах","show-date-time-range":"Отображать временной диапазон","show-distance":"Отображать растояние","show-angle":"Отображать угол","always-show-stats":"Всегда отображать текст",middle:"Центр",signals:"Сигналы",simple:"Простая","with-markers":"Точки",step:"Ступени","custom-color":"Настройка цвета","bars-roulete":" баров, ","day-roulete":" д, ","hour-roulete":" ч, ","minute-roulete":" м ","open-prise-source":"ОТКР.","high-prise-source":"МАКС.","low-prise-source":"МИН.","close-prise-source":"ЗАКР.","hl2-prise-source":"(М+М)/2","hlc3-prise-source":"(М+М+З)/3","ohlc4-prise-source":"(О+М+М+З)/4",RSIP:"Период RSI",obv:"OBV","on-balance":"Балансовый объём","stochastic-rsi":"Стохастический индекс относительной силы",d:"d",h:"h","candle-timer":"Обратный отсчет до закрытия бара",buy:"Купить",sell:"Продать",length:"Период"}},"./src/scripts/Connector/Connector.js":function(t,e,a){"use strict";function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function r(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}a.r(e),a.d(e,"default",(function(){return o}));var s=a("./node_modules/axios/index.js"),n=a.n(s),o=function t(e){var a=this;!function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r(this,"cloneObject",(function(t){if(t&&"object"===i(t))return JSON.parse(JSON.stringify(t))})),r(this,"addListener",(function(t){a.listeners.push(t)})),r(this,"getNews",(function(t){a.getDataFromNetwork(a.options.newsSourceUrl,(function(e){if(e){var i="".concat(e,"&from=").concat(t.interval.from,"&to=").concat(t.interval.to,"&count=100");a.getData(i,[t.listener],t)}}))})),r(this,"getEvents",(function(t){a.getDataFromNetwork(a.options.eventsSourceUrl,(function(e){if(e){var i=a.convertUnixToEventsAPIDate(t.interval.from),r=a.convertUnixToEventsAPIDate(t.interval.to),s="".concat(e,"?f=json&view=range&volatility=2&start=").concat(i,"&end=").concat(r,"&culture=").concat(t.lang,"&countrycode=").concat(t.countries.join(","));a.getData(s,[t.listener],t)}}))})),r(this,"convertUnixToEventsAPIDate",(function(t){var e=new Date(1e3*t),a=e.getUTCFullYear().toString(),i=(e.getUTCMonth()+1).toString();i=i.length>1?i:"0"+i;var r=e.getUTCDate().toString();return r=r.length>1?r:"0"+r,"".concat(a).concat(i).concat(r)})),r(this,"getData",(function(t,e,a){n.a.get(t).then((function(t){if(200!==t.status){var i=new Error(t.statusText);throw i.res=t,i}for(var r=0;r<e.length;r++)e[r].onConnectorMessage(t.data,e[r],a)})).catch((function(t){console.warn(t)}))})),r(this,"getQuotationCountries",(function(t){a.getDataFromNetwork(a.options.quotationCountriesUrl,(function(e){var a=e.reduce((function(t,e){return function a(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){r(t,e,a[e])}))}return t}({},t,r({},e.Name,e.Countries))}),{});t(a)}))})),r(this,"getSettings",(function(t){a.getDataFromNetwork(a.options.settingsUrl,(function(e){return t(e)}))})),r(this,"getDataFromNetwork",(function(t,e){n.a.get(t).then((function(t){if(200!==t.status){var a=new Error(t.statusText);throw a.res=t,a}e(t.data)})).catch((function(t){console.warn(t)}))})),r(this,"parseSignals",(function(t){var e=JSON.parse(t).map((function(t){switch(t.patternType){case"fibonacciPattern":return a.fillFibonacciSignals(t);case"keyLevelsPattern":return a.fillKeyLevelsSignals(t);case"chartPattern":default:return a.fillChartPatternsSignals(t)}}));return a.combineSignals(e)})),r(this,"fillFibonacciSignals",(function(t){return t?{id:t.resultUid,timeA:t.timeA,timeB:t.timeB,timeC:t.timeC,timeD:t.timeD,timeX:t.timeX,symbol:t.symbol,period:a.convertIntervalToPeriod(t.interval),priceA:t.priceA,priceB:t.priceB,priceC:t.priceC,priceD:t.priceD,priceX:t.priceX,pattern:t.pattern,target0:t.target0,target3:t.target3,target5:t.target5,target6:t.target6,target7:t.target7,target10:t.target10,target12:t.target12,target16:t.target16,interval:t.interval,strength:a.getSignalStrength(t.quality),forecast:a.getTradingSide(t.direction),direction:t.direction,directionA:t.directionA,directionB:t.directionB,directionC:t.directionC,directionX:t.directionX,patternType:"fibonacciPattern",patternEndTime:t.patternEndTime}:{}})),r(this,"fillKeyLevelsSignals",(function(t){return t?{id:t.resultUid,price:t.price,point:a.getKeyLevelOldestPoint(t),symbol:t.symbol,period:a.convertIntervalToPeriod(t.interval),pattern:t.pattern,interval:t.interval,strength:a.getSignalStrength(t.quality),forecast:a.getTradingSide(t.direction),direction:t.direction,patternType:"keyLevelsPattern",patternEndTime:t.patternEndTime,predictionTimeTo:t.predictionTimeTo?t.predictionTimeTo:void 0,predictionPriceTo:t.predictionPriceTo?t.predictionPriceTo:void 0,predictionTimeFrom:t.predictionTimeFrom?t.predictionTimeFrom:void 0,predictionPriceFrom:t.predictionPriceFrom?t.predictionPriceFrom:void 0}:{}})),r(this,"fillChartPatternsSignals",(function(t){return t?{id:t.resultUid,symbol:t.symbol,period:a.convertIntervalToPeriod(t.interval),pattern:t.pattern,interval:t.interval,strength:a.getSignalStrength(t.quality),forecast:a.getTradingSide(t.direction),supportx0:t.supportX0,supportx1:t.supportX1,supporty0:t.supportY0,supporty1:t.supportY1,direction:t.direction,patternType:"chartPattern",resistancex0:t.resistanceX0,resistancex1:t.resistanceX1,resistancey0:t.resistanceY0,resistancey1:t.resistanceY1,patternEndTime:t.patternEndTime,predictionTimeTo:t.predictionTimeTo,predictionPriceTo:t.predictionPriceTo,predictionTimeFrom:t.predictionTimeFrom,predictionPriceFrom:t.predictionPriceFrom}:{}})),r(this,"getKeyLevelOldestPoint",(function(t){return t&&Object.keys(t).filter((function(t){return t.includes("point")})).map((function(e){return t[e]})).filter((function(t){return t})).sort()[0]||0})),r(this,"getSignalStrength",(function(t){return 10*parseInt(t+"")})),r(this,"getTradingSide",(function(t){if("string"===typeof t){var e=t.toUpperCase();return"LONG"===e||"BUY"===e?"BUY":"SELL"}return"number"===typeof t&&t>0?"BUY":"SELL"})),r(this,"combineSignals",(function(t){for(var e={},a=0;a<t.length;a++)e[t[a].symbol]||(e[t[a].symbol]={}),e[t[a].symbol][t[a].id]=t[a];return e})),r(this,"convertIntervalToPeriod",(function(t){switch(t){case 1:return"minute";case 5:return"minute5";case 15:return"minute15";case 30:return"minute30";case 60:return"hour";case 240:return"hour4";case 480:return"hour8";case 1440:case"day":return"day";case"week":return"week";case"month":return"month";case"minute":return"minute";case"minute5":return"minute5";case"minute15":return"minute15";case"minute30":return"minute30";case"hour":return"hour";default:return"minute"}})),r(this,"getServerPeriod",(function(t){switch(t){case"1":return"Minute";case"5":return"Minute5";case"15":return"Minute15";case"30":return"Minute30";case"60":return"Hour";case"hour4":return"Hour4";case"hour8":return"Hour8";case"day":return"Day";case"week":return"Week";case"month":return"Month";case"minute":return"Minute";case"minute5":return"Minute5";case"minute15":return"Minute15";case"minute30":return"Minute30";case"hour":return"Hour";default:return"Minute"}})),r(this,"getMiddlePrice",(function(t,e,a){return((parseFloat(t)+parseFloat(e))/2).toFixed(a)})),r(this,"createWebSocketConn",(function(t){var e=String(a.options.wsUrl.replace("https:","wss:")).replace("informer","".concat(t)).concat("?subscriber=true");a.client=null,a.client=new WebSocket(e),a.client.onmessage=function(t){if(a.listeners)for(var e=0;e<a.listeners.length;e++){var i=a.processRatesData(JSON.parse(t.data));a.listeners[e].onConnectorMessage(i,a.listeners[e])}},a.client.onopen=function(){a.client.connected=!0,a.subscriptions=[],a.updateSubscription();for(var t=0;t<a.listeners.length;t++)a.listeners[t].onConnect()},a.client.onclose=function(){},a.client.onerror=function(){console.warn("Internet connection lost")}})),r(this,"onReconnect",(function(){var t=(new Date).getTime();setInterval((function(){var e=(new Date).getTime();a.client&&3===a.client.readyState?a.getConnectionSettings():e>t+5e3&&setTimeout((function(){a.getConnectionSettings()}),3e3),t=e}),3e3)})),r(this,"updateSubscription",(function(){if(a.client){for(var t=[],e=0;e<a.listeners.length;e++){for(var i=!1,r=0;r<t.length;r++)if(t[r].id===a.listeners[e].id&&t[r].period===a.getServerPeriod(a.listeners[e].period.toString())){i=!0;break}i||t.push({id:a.listeners[e].id,period:a.getServerPeriod(a.listeners[e].period.toString())})}JSON.stringify(t.sort())!==JSON.stringify(a.subscriptions.sort())&&(a.subscriptions=t,a.subscribe(a.subscriptions))}})),r(this,"getBars",(function(t){if(a.client&&a.client.connected){var e="",i=a.getServerPeriod(t.period);switch(t.cmd){case"getFirstData":e="".concat(a.options.url).concat(t.pair.ID,"/").concat(i,"/").concat(t.numb,"/?withCurrentBar=true&param=full"),a.getBarsData(e,t.listener,t);break;case"getDataOnUpdate":e="".concat(a.options.wsUrl.replace("ws","http"),"?command=getfirstbar&id=").concat(t.pair.ID,"&period=").concat(i,"&param=full"),a.getBarsData(e,t.listener,t);break;case"getDataFromSeconds":e="".concat(a.options.url).concat(t.pair.ID,"/").concat(i,"/").concat(t.numb,"/").concat(t.startSeconds,"?param=full"),a.getBarsData(e,t.listener,t)}}})),r(this,"processRatesData",(function(t){var e=[],i=null;if(t.data){i=JSON.parse(t.data);for(var r=0;r<i.length;r++)e.push({security:i[r].Name,bidPrice:i[r].CurrentValue})}else if(t.updated){for(var s=[],n=!1,o=0;o<a.listeners.length;o++){var h=a.listeners[o];if(h.session&&"open"===h.session&&t.updated%h.getCurrentTimeStep()===0&&h.chart){for(var c=h.pair,l=h.period,A=0;A<s.length;A++){s[A].pair.ID===c.ID&&s[A].period===l&&h.chart&&(s[A].pair=c,s[A].period=l,s[A].callBacks.push({listener:h,callBack:h.chart.updateChart})),n=!0;break}n||s.push({pair:c,period:l,callBacks:[{listener:h,callBack:h.chart.updateChart}]})}}for(var d=0;d<s.length;d++)a.getDataOnUpdate(s[d]);s=null}var p={};if(t.module)if("rates"===t.module)for(var u=0;u<t.args.length;u++)e.push({security:t.args[u].Name,bid:t.args[u].Bid,ask:t.args[u].Ask});else if("bars"===t.module&&"update"===t.cmd){var g=a.cloneObject(t);g.args.bar&&(g.args.bar=a.processModuleBarItem(g.args.bar)),p={module:g.module,cmd:g.cmd,args:g.args}}else"signals"===t.module&&("list"===t.cmd?a.processSignalsList(t.args):a.processSignals(t.args));return{rates:e,mdata:Object.keys(p).length?p:void 0}})),r(this,"processModuleBarItem",(function(t,e){var i,r=e;if(!r)for(var s in r=0,t)t.hasOwnProperty(s)&&"time"!==s&&(i=t[s].replace(",",".").split(".")).length>1&&i[1].length>r&&(r=i[1].length);return{ask:{low:t.lowAsk,high:t.highAsk,open:t.openAsk,close:t.closeAsk,date:t.time},bid:{low:t.lowBid,high:t.highBid,open:t.openBid,close:t.closeBid,date:t.time},mid:{low:a.getMiddlePrice(t.lowBid,t.lowAsk,r),high:a.getMiddlePrice(t.highBid,t.highAsk,r),open:a.getMiddlePrice(t.openBid,t.openAsk,r),close:a.getMiddlePrice(t.closeBid,t.closeAsk,r),date:t.time}}})),r(this,"getDataOnUpdate",(function(t){var e="".concat(a.options.url).concat(t.pair.ID,"/").concat(t.period,"/1");n.a.get(e).then((function(e){if(200!==e.status){var i=new Error(e.statusText);throw i.res=e,i}for(var r=a.processChartDataBars(e.data,e.headers),s=0;s<t.callBacks.length;s++){var n={pair:t.pair,period:t.period,callBack:t.callBacks[s].callBack};t.callBacks[s].listener.onConnectorMessage(r.bars[0],t.callBacks[s].listener,n)}})).catch((function(t){console.warn(t)}))})),r(this,"processChartDataBars",(function(t,e){for(var i={ask:[],bid:[],mid:[]},r=e.precission,s=0;s<t.length;s++)t[s-1]&&t[s]&&t[s].T>=t[s-1].T||(i.ask.push({low:parseFloat(t[s].LA).toFixed(r),high:parseFloat(t[s].HA).toFixed(r),open:parseFloat(t[s].OA).toFixed(r),close:parseFloat(t[s].CA).toFixed(r),date:t[s].T}),i.bid.push({low:parseFloat(t[s].LB).toFixed(r),high:parseFloat(t[s].HB).toFixed(r),open:parseFloat(t[s].OB).toFixed(r),close:parseFloat(t[s].CB).toFixed(r),date:t[s].T}),i.mid.push({low:a.getMiddlePrice(t[s].LB,t[s].LA,r),high:a.getMiddlePrice(t[s].HB,t[s].HA,r),open:a.getMiddlePrice(t[s].OB,t[s].OA,r),close:a.getMiddlePrice(t[s].CB,t[s].CA,r),date:t[s].T}));return{bars:i,precission:r,quotation:e.quotation,session:e.session?e.session.toLowerCase():"open"}})),r(this,"getBarsData",(function(t,e,i){n.a.get(t).then((function(t){if(200!==t.status){var r=new Error(t.statusText);throw r.res=t,r}var s=a.processChartDataBars(JSON.parse(t.data),t.headers);"getFirstData"===i.cmd&&s.bars&&Object.keys(s.bars).length&&!e.hasNextData&&(s.bars.ask[0].isCurrentData=!0,s.bars.bid[0].isCurrentData=!0,s.bars.mid[0].isCurrentData=!0),e.onConnectorMessage(s,e,i)})).catch((function(t){console.warn(t)}))})),r(this,"getAutoChartistSignals",(function(){a.client&&a.client.send(JSON.stringify({module:"signals",cmd:"",args:JSON.stringify(a.getNamesOfCurrencies())}))})),r(this,"getAutoChartistSignalsList",(function(){a.client&&a.client.send(JSON.stringify({module:"signals",cmd:"list"}))})),r(this,"processSignals",(function(t){if(a.client){var e=a.parseSignals(t);if(a.listeners)for(var i=0;i<a.listeners.length;i++){var r=e[a.listeners[i].pair.Name];r?a.listeners[i].onConnectorMessage(r,a.listeners[i]):a.listeners[i].chart&&(a.listeners[i].signalsData={},a.listeners[i].chart.updateSignals())}}})),r(this,"processSignalsList",(function(t){if(a.client){var e=JSON.parse(t);a.listeners&&(a.listeners[0].techChart.signalsList=e,a.listeners[0].techChart.updateSignalsDropdown(e))}})),r(this,"getNamesOfCurrencies",(function(){return a.listeners.map((function(t){return t.pair.Name}))})),r(this,"getConnectionSettings",(function(){var t=a.options.wsUrl.split("?")[0].concat("?command=getConnectingStr");n.a.get(t).then((function(t){if(200!==t.status){var e=new Error(t.statusText);throw e.res=t,e}a.createWebSocketConn(t.data)})).catch((function(t){console.warn(t)}))})),r(this,"subscribe",(function(t){a.client.send(JSON.stringify({module:"binding",cmd:"update",args:t}))})),this.listeners=[],this.client=null,this.subscriptions=[],this.options=this.cloneObject(e),this.getConnectionSettings(),this.onReconnect()}},"./src/scripts/Libs/html2canvas.min.js":function(t,e,a){function i(t){return(i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}var r,s;!function(n,o){"object"==i(e)&&"undefined"!=typeof t?t.exports=o():void 0===(s="function"===typeof(r=o)?r.call(e,a,e,t):r)||(t.exports=s)}(0,(function(){"use strict";function t(t,e){function a(){this.constructor=t}Rt(t,e),t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)}function e(t,e,a,i){return new(a||(a=Promise))((function(r,s){function n(t){try{h(i.next(t))}catch(t){s(t)}}function o(t){try{h(i.throw(t))}catch(t){s(t)}}function h(t){t.done?r(t.value):new a((function(e){e(t.value)})).then(n,o)}h((i=i.apply(t,e||[])).next())}))}function a(t,e){function a(a){return function(n){return function(a){if(i)throw new TypeError("Generator is already executing.");for(;o;)try{if(i=1,r&&(s=2&a[0]?r.return:a[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,a[1])).done)return s;switch(r=0,s&&(a=[2&a[0],s.value]),a[0]){case 0:case 1:s=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(s=0<(s=o.trys).length&&s[s.length-1])&&(6===a[0]||2===a[0])){o=0;continue}if(3===a[0]&&(!s||a[1]>s[0]&&a[1]<s[3])){o.label=a[1];break}if(6===a[0]&&o.label<s[1]){o.label=s[1],s=a;break}if(s&&o.label<s[2]){o.label=s[2],o.ops.push(a);break}s[2]&&o.ops.pop(),o.trys.pop();continue}a=e.call(t,o)}catch(n){a=[6,n],r=0}finally{i=s=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,n])}}var i,r,s,n,o={label:0,sent:function t(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return n={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n}function i(t,e,a,i){this.left=t,this.top=e,this.width=a,this.height=i}function r(t,e,a){return t.slice?t.slice(e,a):new Uint16Array(Array.prototype.slice.call(t,e,a))}function s(t,e,a,i,r,s){this.initialValue=t,this.errorValue=e,this.highStart=a,this.highValueIndex=i,this.index=r,this.data=s}function n(t,e,a,i){var r=i[a];if(Array.isArray(t)?-1!==t.indexOf(r):t===r)for(var s=a;s<=i.length;){if((h=i[++s])===e)return!0;if(h!==ie)break}if(r===ie)for(s=a;0<s;){var n=i[--s];if(Array.isArray(t)?-1!==t.indexOf(n):t===n)for(var o=a;o<=i.length;){var h;if((h=i[++o])===e)return!0;if(h!==ie)break}if(n!==ie)break}return!1}function o(t,e){for(var a=t;0<=a;){var i=e[a];if(i!==ie)return i;a--}return 0}function h(t,e,a,i,r){if(0===a[i])return Se;var s=i-1;if(Array.isArray(r)&&!0===r[s])return Se;var h=s-1,c=1+s,l=e[s],A=0<=h?e[h]:0,d=e[c];if(2===l&&3===d)return Se;if(-1!==Ee.indexOf(l))return"!";if(-1!==Ee.indexOf(d))return Se;if(-1!==Le.indexOf(d))return Se;if(8===o(s,e))return"÷";if(11===Pe.get(t[s])&&(d===Ce||d===ve||d===ye))return Se;if(7===l||7===d)return Se;if(9===l)return Se;if(-1===[ie,re,se].indexOf(l)&&9===d)return Se;if(-1!==[ne,oe,he,de,fe].indexOf(d))return Se;if(o(s,e)===Ae)return Se;if(n(23,Ae,s,e))return Se;if(n([ne,oe],le,s,e))return Se;if(n(12,12,s,e))return Se;if(l===ie)return"÷";if(23===l||23===d)return Se;if(16===d||16===l)return"÷";if(-1!==[re,se,le].indexOf(d)||14===l)return Se;if(36===A&&-1!==He.indexOf(l))return Se;if(l===fe&&36===d)return Se;if(d===ce&&-1!==Te.concat(ce,he,pe,Ce,ve,ye).indexOf(l))return Se;if(-1!==Te.indexOf(d)&&l===pe||-1!==Te.indexOf(l)&&d===pe)return Se;if(l===ge&&-1!==[Ce,ve,ye].indexOf(d)||-1!==[Ce,ve,ye].indexOf(l)&&d===ue)return Se;if(-1!==Te.indexOf(l)&&-1!==Qe.indexOf(d)||-1!==Qe.indexOf(l)&&-1!==Te.indexOf(d))return Se;if(-1!==[ge,ue].indexOf(l)&&(d===pe||-1!==[Ae,se].indexOf(d)&&e[1+c]===pe)||-1!==[Ae,se].indexOf(l)&&d===pe||l===pe&&-1!==[pe,fe,de].indexOf(d))return Se;if(-1!==[pe,fe,de,ne,oe].indexOf(d))for(var p=s;0<=p;){if((u=e[p])===pe)return Se;if(-1===[fe,de].indexOf(u))break;p--}if(-1!==[ge,ue].indexOf(d))for(p=-1!==[ne,oe].indexOf(l)?h:s;0<=p;){var u;if((u=e[p])===pe)return Se;if(-1===[fe,de].indexOf(u))break;p--}if(De===l&&-1!==[De,be,me,Be].indexOf(d)||-1!==[be,me].indexOf(l)&&-1!==[be,xe].indexOf(d)||-1!==[xe,Be].indexOf(l)&&d===xe)return Se;if(-1!==Ue.indexOf(l)&&-1!==[ce,ue].indexOf(d)||-1!==Ue.indexOf(d)&&l===ge)return Se;if(-1!==Te.indexOf(l)&&-1!==Te.indexOf(d))return Se;if(l===de&&-1!==Te.indexOf(d))return Se;if(-1!==Te.concat(pe).indexOf(l)&&d===Ae||-1!==Te.concat(pe).indexOf(d)&&l===oe)return Se;if(41===l&&41===d){for(var g=a[s],f=1;0<g&&41===e[--g];)f++;if(f%2!=0)return Se}return l===ve&&d===ye?Se:"÷"}function c(t,e,a,i){this.codePoints=t,this.required="!"===e,this.start=a,this.end=i}function l(t){return 48<=t&&t<=57}function A(t){return l(t)||65<=t&&t<=70||97<=t&&t<=102}function d(t){return 10===t||9===t||32===t}function p(t){return function(t){return function(t){return 97<=t&&t<=122}(t)||function(t){return 65<=t&&t<=90}(t)}(t)||function(t){return 128<=t}(t)||95===t}function u(t){return p(t)||l(t)||45===t}function g(t,e){return 92===t&&10!==e}function f(t,e,a){return 45===t?p(e)||g(e,a):!!p(t)||!(92!==t||!g(t,e))}function w(t,e,a){return 43===t||45===t?!!l(e)||46===e&&l(a):l(46===t?e:t)}function v(){this._value=[]}function y(t){this._tokens=t}function m(t){return t.type===te.DIMENSION_TOKEN}function B(t){return t.type===te.NUMBER_TOKEN}function C(t){return t.type===te.IDENT_TOKEN}function D(t){return t.type===te.STRING_TOKEN}function b(t,e){return C(t)&&t.value===e}function x(t){return t.type!==te.WHITESPACE_TOKEN}function F(t){return t.type!==te.WHITESPACE_TOKEN&&t.type!==te.COMMA_TOKEN}function S(t){var e=[],a=[];return t.forEach((function(t){if(t.type===te.COMMA_TOKEN){if(0===a.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(a),void(a=[])}t.type!==te.WHITESPACE_TOKEN&&a.push(t)})),a.length&&e.push(a),e}function P(t){return t.type===te.NUMBER_TOKEN||t.type===te.DIMENSION_TOKEN}function T(t){return t.type===te.PERCENTAGE_TOKEN||P(t)}function E(t){return 1<t.length?[t[0],t[1]]:[t[0]]}function L(t,e,a){var i=t[0],r=t[1];return[ua(i,e),ua(void 0!==r?r:i,a)]}function Q(t){return t.type===te.DIMENSION_TOKEN&&("deg"===t.unit||"grad"===t.unit||"rad"===t.unit||"turn"===t.unit)}function O(t){switch(t.filter(C).map((function(t){return t.value})).join(" ")){case"to bottom right":case"to right bottom":case"left top":case"top left":return[Aa,Aa];case"to top":case"bottom":return fa(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[Aa,pa];case"to right":case"left":return fa(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[pa,pa];case"to bottom":case"top":return fa(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[pa,Aa];case"to left":case"right":return fa(270)}return 0}function U(t){return 0==(255&t)}function H(t){var e=255&t,a=255&t>>8,i=255&t>>16,r=255&t>>24;return e<255?"rgba("+r+","+i+","+a+","+e/255+")":"rgb("+r+","+i+","+a+")"}function k(t,e){if(t.type===te.NUMBER_TOKEN)return t.number;if(t.type!==te.PERCENTAGE_TOKEN)return 0;var a=3===e?1:255;return 3===e?t.number/100*a:Math.round(t.number/100*a)}function N(t){var e=t.filter(F);if(3===e.length){var a=e.map(k),i=a[0],r=a[1],s=a[2];return va(i,r,s,1)}if(4!==e.length)return 0;var n=e.map(k),o=(i=n[0],r=n[1],s=n[2],n[3]);return va(i,r,s,o)}function I(t,e,a){return a<0&&(a+=1),1<=a&&(a-=1),a<1/6?(e-t)*a*6+t:a<.5?e:a<2/3?6*(e-t)*(2/3-a)+t:t}function M(t){var e=t.filter(F),a=e[0],i=e[1],r=e[2],s=e[3],n=(a.type===te.NUMBER_TOKEN?fa(a.number):ga(a))/(2*Math.PI),o=T(i)?i.number/100:0,h=T(r)?r.number/100:0,c=void 0!==s&&T(s)?ua(s,1):1;if(0==o)return va(255*h,255*h,255*h,1);var l=h<=.5?h*(1+o):h+o-h*o,A=2*h-l,d=I(A,l,n+1/3),p=I(A,l,n),u=I(A,l,n-1/3);return va(255*d,255*p,255*u,c)}function R(t){var e=wa(t[0]),a=t[1];return a&&T(a)?{color:e,stop:a}:{color:e,stop:null}}function K(t,e){var a=t[0],i=t[t.length-1];null===a.stop&&(a.stop=Aa),null===i.stop&&(i.stop=pa);for(var r=[],s=0,n=0;n<t.length;n++){var o=t[n].stop;if(null!==o){var h=ua(o,e);s<h?r.push(h):r.push(s),s=h}else r.push(null)}var c=null;for(n=0;n<r.length;n++){var l=r[n];if(null===l)null===c&&(c=n);else if(null!==c){for(var A=n-c,d=(l-r[c-1])/(1+A),p=1;p<=A;p++)r[c+p-1]=d*p;c=null}}return t.map((function(t,a){return{color:t.color,stop:Math.max(Math.min(1,r[a]/e),0)}}))}function j(t,e){return Math.sqrt(t*t+e*e)}function V(t,e,a,i,r){return[[0,0],[0,e],[t,0],[t,e]].reduce((function(t,e){var s=e[0],n=e[1],o=j(a-s,i-n);return(r?o<t.optimumDistance:o>t.optimumDistance)?{optimumCorner:e,optimumDistance:o}:t}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner}function _(t){var e=fa(180),a=[];return S(t).forEach((function(t,i){if(0===i){var r=t[0];if(r.type===te.IDENT_TOKEN&&-1!==["top","left","right","bottom"].indexOf(r.value))return void(e=O(t));if(Q(r))return void(e=(ga(r)+fa(270))%fa(360))}var s=R(t);a.push(s)})),{angle:e,stops:a,type:Ba.LINEAR_GRADIENT}}function z(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]}function X(t){var e=t.id,a=t.enabled;this.id=e,this.enabled=a,this.start=Date.now()}function W(){}function Y(t,e){this.id=t,this._options=e,this._cache={}}function q(t){var e=Da.CIRCLE,a=xa.FARTHEST_CORNER,i=[],r=[];return S(t).forEach((function(t,s){var n=!0;if(0===s?n=t.reduce((function(t,e){if(C(e))switch(e.value){case"center":return r.push(da),!1;case"top":case"left":return r.push(Aa),!1;case"right":case"bottom":return r.push(pa),!1}else if(T(e)||P(e))return r.push(e),!1;return t}),n):1===s&&(n=t.reduce((function(t,i){if(C(i))switch(i.value){case"circle":return e=Da.CIRCLE,!1;case Wa:return e=Da.ELLIPSE,!1;case Ya:case Va:return a=xa.CLOSEST_SIDE,!1;case _a:return a=xa.FARTHEST_SIDE,!1;case za:return a=xa.CLOSEST_CORNER,!1;case"cover":case Xa:return a=xa.FARTHEST_CORNER,!1}else if(P(i)||T(i))return Array.isArray(a)||(a=[]),a.push(i),!1;return t}),n)),n){var o=R(t);i.push(o)}})),{size:a,shape:e,stops:i,position:r,type:Ba.RADIAL_GRADIENT}}function G(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:Ne.TYPE_VALUE,format:"color"}}function J(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:Ne.LIST,parse:function t(e){return E(e.filter(T))}}}function Z(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"none":return ni.NONE}return ni.SOLID}}}function $(t){return{name:"border-"+t+"-width",initialValue:"0",type:Ne.VALUE,prefix:!1,parse:function t(e){return m(e)?e.number:0}}}function tt(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:Ne.TOKEN_VALUE}}function et(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:Ne.TYPE_VALUE,format:"length-percentage"}}function at(t,e){return 0!=(t&e)}function it(t,e,a){if(!t)return"";var i=t[Math.min(e,t.length-1)];return i?a?i.open:i.close:""}function rt(t){this.backgroundClip=as(Sa,t.backgroundClip),this.backgroundColor=as(Pa,t.backgroundColor),this.backgroundImage=as($a,t.backgroundImage),this.backgroundOrigin=as(ti,t.backgroundOrigin),this.backgroundPosition=as(ei,t.backgroundPosition),this.backgroundRepeat=as(ri,t.backgroundRepeat),this.backgroundSize=as(hi,t.backgroundSize),this.borderTopColor=as(li,t.borderTopColor),this.borderRightColor=as(Ai,t.borderRightColor),this.borderBottomColor=as(di,t.borderBottomColor),this.borderLeftColor=as(pi,t.borderLeftColor),this.borderTopLeftRadius=as(ui,t.borderTopLeftRadius),this.borderTopRightRadius=as(gi,t.borderTopRightRadius),this.borderBottomRightRadius=as(fi,t.borderBottomRightRadius),this.borderBottomLeftRadius=as(wi,t.borderBottomLeftRadius),this.borderTopStyle=as(mi,t.borderTopStyle),this.borderRightStyle=as(Bi,t.borderRightStyle),this.borderBottomStyle=as(Ci,t.borderBottomStyle),this.borderLeftStyle=as(Di,t.borderLeftStyle),this.borderTopWidth=as(bi,t.borderTopWidth),this.borderRightWidth=as(xi,t.borderRightWidth),this.borderBottomWidth=as(Fi,t.borderBottomWidth),this.borderLeftWidth=as(Si,t.borderLeftWidth),this.boxShadow=as(Zr,t.boxShadow),this.color=as(Pi,t.color),this.display=as(Ti,t.display),this.float=as(Hi,t.cssFloat),this.fontFamily=as(Lr,t.fontFamily),this.fontSize=as(Or,t.fontSize),this.fontStyle=as(Wr,t.fontStyle),this.fontVariant=as(Hr,t.fontVariant),this.fontWeight=as(Ur,t.fontWeight),this.letterSpacing=as(ki,t.letterSpacing),this.lineBreak=as(Ni,t.lineBreak),this.lineHeight=as(Ii,t.lineHeight),this.listStyleImage=as(Mi,t.listStyleImage),this.listStylePosition=as(ji,t.listStylePosition),this.listStyleType=as(zi,t.listStyleType),this.marginTop=as(Xi,t.marginTop),this.marginRight=as(Wi,t.marginRight),this.marginBottom=as(Yi,t.marginBottom),this.marginLeft=as(qi,t.marginLeft),this.opacity=as(Pr,t.opacity);var e=as(tr,t.overflow);this.overflowX=e[0],this.overflowY=e[1<e.length?1:0],this.overflowWrap=as(er,t.overflowWrap),this.paddingTop=as(ar,t.paddingTop),this.paddingRight=as(ir,t.paddingRight),this.paddingBottom=as(rr,t.paddingBottom),this.paddingLeft=as(sr,t.paddingLeft),this.position=as(Ar,t.position),this.textAlign=as(hr,t.textAlign),this.textDecorationColor=as(Tr,t.textDecorationColor||t.color),this.textDecorationLine=as(Er,t.textDecorationLine),this.textShadow=as(dr,t.textShadow),this.textTransform=as(gr,t.textTransform),this.transform=as(fr,t.transform),this.transformOrigin=as(mr,t.transformOrigin),this.visibility=as(Dr,t.visibility),this.wordBreak=as(Fr,t.wordBreak),this.zIndex=as(Sr,t.zIndex)}function st(t){var e=kr.call(this,t)||this;return e.src=t.currentSrc||t.src,e.intrinsicWidth=t.naturalWidth,e.intrinsicHeight=t.naturalHeight,Oa.getInstance().addImage(e.src),e}function nt(t){var e=Nr.call(this,t)||this;return e.canvas=t,e.intrinsicWidth=t.width,e.intrinsicHeight=t.height,e}function ot(t){var e=Ir.call(this,t)||this,a=new XMLSerializer;return e.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(t)),e.intrinsicWidth=t.width.baseVal.value,e.intrinsicHeight=t.height.baseVal.value,Oa.getInstance().addImage(e.svg),e}function ht(t){var e=Mr.call(this,t)||this;return e.value=t.value,e}function ct(t){var e=Rr.call(this,t)||this;return e.start=t.start,e.reversed="boolean"==typeof t.reversed&&!0===t.reversed,e}function lt(t){var e=Kr.call(this,t)||this;switch(e.type=t.type.toLowerCase(),e.checked=t.checked,e.value=function(t){var e="password"===t.type?new Array(t.value.length+1).join("•"):t.value;return 0===e.length?t.placeholder||"":e}(t),e.type!==fs&&e.type!==ws||(e.styles.backgroundColor=3739148031,e.styles.borderTopColor=e.styles.borderRightColor=e.styles.borderBottomColor=e.styles.borderLeftColor=2779096575,e.styles.borderTopWidth=e.styles.borderRightWidth=e.styles.borderBottomWidth=e.styles.borderLeftWidth=1,e.styles.borderTopStyle=e.styles.borderRightStyle=e.styles.borderBottomStyle=e.styles.borderLeftStyle=ni.SOLID,e.styles.backgroundClip=[Me.BORDER_BOX],e.styles.backgroundOrigin=[0],e.bounds=function(t){return t.width>t.height?new jt(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new jt(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t}(e.bounds)),e.type){case fs:e.styles.borderTopRightRadius=e.styles.borderTopLeftRadius=e.styles.borderBottomRightRadius=e.styles.borderBottomLeftRadius=us;break;case ws:e.styles.borderTopRightRadius=e.styles.borderTopLeftRadius=e.styles.borderBottomRightRadius=e.styles.borderBottomLeftRadius=gs}return e}function At(t){var e=jr.call(this,t)||this,a=t.options[t.selectedIndex||0];return e.value=a&&a.text||"",e}function dt(t){var e=Vr.call(this,t)||this;return e.value=t.value,e}function pt(t){return wa(ca.create(t).parseComponentValue())}function ut(t){var e=_r.call(this,t)||this;e.src=t.src,e.width=parseInt(t.width,10)||0,e.height=parseInt(t.height,10)||0,e.backgroundColor=e.styles.backgroundColor;try{if(t.contentWindow&&t.contentWindow.document&&t.contentWindow.document.documentElement){e.tree=xs(t.contentWindow.document.documentElement);var a=t.contentWindow.document.documentElement?pt(getComputedStyle(t.contentWindow.document.documentElement).backgroundColor):ma.TRANSPARENT,i=t.contentWindow.document.body?pt(getComputedStyle(t.contentWindow.document.body).backgroundColor):ma.TRANSPARENT;e.backgroundColor=U(a)?U(i)?e.styles.backgroundColor:i:a}}catch(t){}return e}function gt(t){return"STYLE"===t.tagName}function ft(){this.counters={}}function wt(t,e,a,i,r,s){return t<e||a<t?Ws(t,r,0<s.length):i.integers.reduce((function(e,a,r){for(;a<=t;)t-=a,e+=i.values[r];return e}),"")+s}function vt(t,e,a,i){for(var r="";a||t--,r=i(t)+r,e<=(t/=e)*e;);return r}function yt(t,e,a,i,r){var s=a-e+1;return(t<0?"-":"")+(vt(Math.abs(t),s,i,(function(t){return zt(Math.floor(t%s)+e)}))+r)}function mt(t,e,a){void 0===a&&(a=". ");var i=e.length;return vt(Math.abs(t),i,!1,(function(t){return e[Math.floor(t%i)]}))+a}function Bt(t,e,a,i,r,s){if(t<-9999||9999<t)return Ws(t,Ri.CJK_DECIMAL,0<r.length);var n=Math.abs(t),o=r;if(0===n)return e[0]+o;for(var h=0;0<n&&h<=4;h++){var c=n%10;0==c&&at(s,1)&&""!==o?o=e[c]+o:1<c||1==c&&0===h||1==c&&1===h&&at(s,2)||1==c&&1===h&&at(s,4)&&100<t||1==c&&1<h&&at(s,8)?o=e[c]+(0<h?a[h-1]:"")+o:1==c&&0<h&&(o=a[h-1]+o),n=Math.floor(n/10)}return(t<0?i:"")+o}function Ct(t,e){if(this.options=e,this.scrolledElements=[],this.referenceElement=t,this.counters=new Ks,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement)}function Dt(t,e){return t.length===e.length&&t.some((function(t,a){return t===e[a]}))}function bt(t,e){this.type=Gs.VECTOR,this.x=t,this.y=e}function xt(t,e,a){return new dn(t.x+(e.x-t.x)*a,t.y+(e.y-t.y)*a)}function Ft(t,e,a,i){this.type=Gs.BEZIER_CURVE,this.start=t,this.startControl=e,this.endControl=a,this.end=i}function St(t){return t.type===Gs.BEZIER_CURVE}function Pt(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]}function Tt(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]}function Et(t,e){if(this.container=t,this.effects=e.slice(0),this.curves=new un(t),null!==t.styles.transform){var a=t.bounds.left+t.styles.transformOrigin[0].number,i=t.bounds.top+t.styles.transformOrigin[1].number,r=t.styles.transform;this.effects.push(new fn(a,i,r))}if(t.styles.overflowX!==Vi.VISIBLE){var s=Pt(this.curves),n=Tt(this.curves);Dt(s,n)?this.effects.push(new wn(s,6)):(this.effects.push(new wn(s,2)),this.effects.push(new wn(n,4)))}}function Lt(t){var e=t.bounds,a=t.styles;return e.add(a.borderLeftWidth,a.borderTopWidth,-(a.borderRightWidth+a.borderLeftWidth),-(a.borderTopWidth+a.borderBottomWidth))}function Qt(t){var e=t.styles,a=t.bounds,i=ua(e.paddingLeft,a.width),r=ua(e.paddingRight,a.width),s=ua(e.paddingTop,a.width),n=ua(e.paddingBottom,a.width);return a.add(i+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+i+r),-(e.borderTopWidth+e.borderBottomWidth+s+n))}function Ot(t,e,a){var i=function(t,e){return 0===t?e.bounds:2===t?Qt(e):Lt(e)}(Dn(t.styles.backgroundOrigin,e),t),r=function(t,e){return t===Me.BORDER_BOX?e.bounds:t===Me.CONTENT_BOX?Qt(e):Lt(e)}(Dn(t.styles.backgroundClip,e),t),s=Cn(Dn(t.styles.backgroundSize,e),a,i),n=s[0],o=s[1],h=L(Dn(t.styles.backgroundPosition,e),i.width-n,i.height-o);return[bn(Dn(t.styles.backgroundRepeat,e),h,s,i,r),Math.round(i.left+h[0]),Math.round(i.top+h[1]),n,o]}function Ut(t){return C(t)&&t.value===ai.AUTO}function Ht(t){return"number"==typeof t}function kt(t){this._data={},this._document=t}function Nt(t){this._activeEffects=[],this.canvas=t.canvas?t.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),(this.options=t).canvas||(this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px"),this.fontMetrics=new Fn(document),this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x+t.scrollX,-t.y+t.scrollY),this.ctx.textBaseline="bottom",this._activeEffects=[],Qa.getInstance(t.id).debug("Canvas renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale)}function It(t){this.canvas=t.canvas?t.canvas:document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.options=t,this.canvas.width=Math.floor(t.width*t.scale),this.canvas.height=Math.floor(t.height*t.scale),this.canvas.style.width=t.width+"px",this.canvas.style.height=t.height+"px",this.ctx.scale(this.options.scale,this.options.scale),this.ctx.translate(-t.x+t.scrollX,-t.y+t.scrollY),Qa.getInstance(t.id).debug("EXPERIMENTAL ForeignObject renderer initialized ("+t.width+"x"+t.height+" at "+t.x+","+t.y+") with scale "+t.scale)}function Mt(t){return wa(ca.create(t).parseComponentValue())}for(var Rt=function t(e,a){return(Rt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a])})(e,a)},Kt=function t(){return(Kt=Object.assign||function(t){for(var e,a=1,i=arguments.length;a<i;a++)for(var r in e=arguments[a])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},jt=(i.prototype.add=function(t,e,a,r){return new i(this.left+t,this.top+e,this.width+a,this.height+r)},i.fromClientRect=function(t){return new i(t.left,t.top,t.width,t.height)},i),Vt=function t(e){return jt.fromClientRect(e.getBoundingClientRect())},_t=function t(e){for(var a=[],i=0,r=e.length;i<r;){var s=e.charCodeAt(i++);if(55296<=s&&s<=56319&&i<r){var n=e.charCodeAt(i++);56320==(64512&n)?a.push(((1023&s)<<10)+(1023&n)+65536):(a.push(s),i--)}else a.push(s)}return a},zt=function t(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var i=e.length;if(!i)return"";for(var r=[],s=-1,n="";++s<i;){var o=e[s];o<=65535?r.push(o):(o-=65536,r.push(55296+(o>>10),o%1024+56320)),(s+1===i||16384<r.length)&&(n+=String.fromCharCode.apply(String,r),r.length=0)}return n},Xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Wt="undefined"==typeof Uint8Array?[]:new Uint8Array(256),Yt=0;Yt<Xt.length;Yt++)Wt[Xt.charCodeAt(Yt)]=Yt;var qt,Gt,Jt,Zt,$t,te,ee,ae=(s.prototype.get=function(t){var e;if(0<=t){if(t<55296||56319<t&&t<=65535)return e=((e=this.index[t>>5])<<2)+(31&t),this.data[e];if(t<=65535)return e=((e=this.index[2048+(t-55296>>5)])<<2)+(31&t),this.data[e];if(t<this.highStart)return e=2080+(t>>11),e=this.index[e],e+=t>>5&63,e=((e=this.index[e])<<2)+(31&t),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},s),ie=10,re=13,se=15,ne=17,oe=18,he=19,ce=20,le=21,Ae=22,de=24,pe=25,ue=26,ge=27,fe=28,we=30,ve=32,ye=33,me=34,Be=35,Ce=37,De=38,be=39,xe=40,Fe=42,Se="×",Pe=(qt=function(t){var e,a,i,r,s,n=.75*t.length,o=t.length,h=0;"="===t[t.length-1]&&(n--,"="===t[t.length-2]&&n--);var c="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&void 0!==Uint8Array.prototype.slice?new ArrayBuffer(n):new Array(n),l=Array.isArray(c)?c:new Uint8Array(c);for(e=0;e<o;e+=4)a=Wt[t.charCodeAt(e)],i=Wt[t.charCodeAt(e+1)],r=Wt[t.charCodeAt(e+2)],s=Wt[t.charCodeAt(e+3)],l[h++]=a<<2|i>>4,l[h++]=(15&i)<<4|r>>2,l[h++]=(3&r)<<6|63&s;return c}("KwAAAAAAAAAACA4AIDoAAPAfAAACAAAAAAAIABAAGABAAEgAUABYAF4AZgBeAGYAYABoAHAAeABeAGYAfACEAIAAiACQAJgAoACoAK0AtQC9AMUAXgBmAF4AZgBeAGYAzQDVAF4AZgDRANkA3gDmAOwA9AD8AAQBDAEUARoBIgGAAIgAJwEvATcBPwFFAU0BTAFUAVwBZAFsAXMBewGDATAAiwGTAZsBogGkAawBtAG8AcIBygHSAdoB4AHoAfAB+AH+AQYCDgIWAv4BHgImAi4CNgI+AkUCTQJTAlsCYwJrAnECeQKBAk0CiQKRApkCoQKoArACuALAAsQCzAIwANQC3ALkAjAA7AL0AvwCAQMJAxADGAMwACADJgMuAzYDPgOAAEYDSgNSA1IDUgNaA1oDYANiA2IDgACAAGoDgAByA3YDfgOAAIQDgACKA5IDmgOAAIAAogOqA4AAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAK8DtwOAAIAAvwPHA88D1wPfAyAD5wPsA/QD/AOAAIAABAQMBBIEgAAWBB4EJgQuBDMEIAM7BEEEXgBJBCADUQRZBGEEaQQwADAAcQQ+AXkEgQSJBJEEgACYBIAAoASoBK8EtwQwAL8ExQSAAIAAgACAAIAAgACgAM0EXgBeAF4AXgBeAF4AXgBeANUEXgDZBOEEXgDpBPEE+QQBBQkFEQUZBSEFKQUxBTUFPQVFBUwFVAVcBV4AYwVeAGsFcwV7BYMFiwWSBV4AmgWgBacFXgBeAF4AXgBeAKsFXgCyBbEFugW7BcIFwgXIBcIFwgXQBdQF3AXkBesF8wX7BQMGCwYTBhsGIwYrBjMGOwZeAD8GRwZNBl4AVAZbBl4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAGMGXgBqBnEGXgBeAF4AXgBeAF4AXgBeAF4AXgB5BoAG4wSGBo4GkwaAAIADHgR5AF4AXgBeAJsGgABGA4AAowarBrMGswagALsGwwbLBjAA0wbaBtoG3QbaBtoG2gbaBtoG2gblBusG8wb7BgMHCwcTBxsHCwcjBysHMAc1BzUHOgdCB9oGSgdSB1oHYAfaBloHaAfaBlIH2gbaBtoG2gbaBtoG2gbaBjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHbQdeAF4ANQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQd1B30HNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B4MH2gaKB68EgACAAIAAgACAAIAAgACAAI8HlwdeAJ8HpweAAIAArwe3B14AXgC/B8UHygcwANAH2AfgB4AA6AfwBz4B+AcACFwBCAgPCBcIogEYAR8IJwiAAC8INwg/CCADRwhPCFcIXwhnCEoDGgSAAIAAgABvCHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIfQh3CHgIeQh6CHsIfAh9CHcIeAh5CHoIewh8CH0Idwh4CHkIegh7CHwIhAiLCI4IMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAANQc1BzUHNQc1BzUHNQc1BzUHNQc1B54INQc1B6II2gaqCLIIugiAAIAAvgjGCIAAgACAAIAAgACAAIAAgACAAIAAywiHAYAA0wiAANkI3QjlCO0I9Aj8CIAAgACAAAIJCgkSCRoJIgknCTYHLwk3CZYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiWCJYIlgiAAIAAAAFAAXgBeAGAAcABeAHwAQACQAKAArQC9AJ4AXgBeAE0A3gBRAN4A7AD8AMwBGgEAAKcBNwEFAUwBXAF4QkhCmEKnArcCgAHHAsABz4LAAcABwAHAAd+C6ABoAG+C/4LAAcABwAHAAc+DF4MAAcAB54M3gweDV4Nng3eDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEeDqABVg6WDqABoQ6gAaABoAHXDvcONw/3DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DvcO9w73DncPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB7cPPwlGCU4JMACAAIAAgABWCV4JYQmAAGkJcAl4CXwJgAkwADAAMAAwAIgJgACLCZMJgACZCZ8JowmrCYAAswkwAF4AXgB8AIAAuwkABMMJyQmAAM4JgADVCTAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAqwYWBNkIMAAwADAAMADdCeAJ6AnuCR4E9gkwAP4JBQoNCjAAMACAABUK0wiAAB0KJAosCjQKgAAwADwKQwqAAEsKvQmdCVMKWwowADAAgACAALcEMACAAGMKgABrCjAAMAAwADAAMAAwADAAMAAwADAAMAAeBDAAMAAwADAAMAAwADAAMAAwADAAMAAwAIkEPQFzCnoKiQSCCooKkAqJBJgKoAqkCokEGAGsCrQKvArBCjAAMADJCtEKFQHZCuEK/gHpCvEKMAAwADAAMACAAIwE+QowAIAAPwEBCzAAMAAwADAAMACAAAkLEQswAIAAPwEZCyELgAAOCCkLMAAxCzkLMAAwADAAMAAwADAAXgBeAEELMAAwADAAMAAwADAAMAAwAEkLTQtVC4AAXAtkC4AAiQkwADAAMAAwADAAMAAwADAAbAtxC3kLgAuFC4sLMAAwAJMLlwufCzAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAApwswADAAMACAAIAAgACvC4AAgACAAIAAgACAALcLMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAvwuAAMcLgACAAIAAgACAAIAAyguAAIAAgACAAIAA0QswADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAANkLgACAAIAA4AswADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACJCR4E6AswADAAhwHwC4AA+AsADAgMEAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMACAAIAAGAwdDCUMMAAwAC0MNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQw1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHPQwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADUHNQc1BzUHNQc1BzUHNQc2BzAAMAA5DDUHNQc1BzUHNQc1BzUHNQc1BzUHNQdFDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAgACAAIAATQxSDFoMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAF4AXgBeAF4AXgBeAF4AYgxeAGoMXgBxDHkMfwxeAIUMXgBeAI0MMAAwADAAMAAwAF4AXgCVDJ0MMAAwADAAMABeAF4ApQxeAKsMswy7DF4Awgy9DMoMXgBeAF4AXgBeAF4AXgBeAF4AXgDRDNkMeQBqCeAM3Ax8AOYM7Az0DPgMXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgBeAF4AXgCgAAANoAAHDQ4NFg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAeDSYNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIAAgACAAIAAgACAAC4NMABeAF4ANg0wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAD4NRg1ODVYNXg1mDTAAbQ0wADAAMAAwADAAMAAwADAA2gbaBtoG2gbaBtoG2gbaBnUNeg3CBYANwgWFDdoGjA3aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gaUDZwNpA2oDdoG2gawDbcNvw3HDdoG2gbPDdYN3A3fDeYN2gbsDfMN2gbaBvoN/g3aBgYODg7aBl4AXgBeABYOXgBeACUG2gYeDl4AJA5eACwO2w3aBtoGMQ45DtoG2gbaBtoGQQ7aBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDjUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B1EO2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQdZDjUHNQc1BzUHNQc1B2EONQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHaA41BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B3AO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gY1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1BzUHNQc1B2EO2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gZJDtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBtoG2gbaBkkOeA6gAKAAoAAwADAAMAAwAKAAoACgAKAAoACgAKAAgA4wADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAD//wQABAAEAAQABAAEAAQABAAEAA0AAwABAAEAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAKABMAFwAeABsAGgAeABcAFgASAB4AGwAYAA8AGAAcAEsASwBLAEsASwBLAEsASwBLAEsAGAAYAB4AHgAeABMAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAFgAbABIAHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYADQARAB4ABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkAFgAaABsAGwAbAB4AHQAdAB4ATwAXAB4ADQAeAB4AGgAbAE8ATwAOAFAAHQAdAB0ATwBPABcATwBPAE8AFgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwArAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAAQABAANAA0ASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAUAArACsAKwArACsAKwArACsABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAGgAaAFAAUABQAFAAUABMAB4AGwBQAB4AKwArACsABAAEAAQAKwBQAFAAUABQAFAAUAArACsAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUAArAFAAUAArACsABAArAAQABAAEAAQABAArACsAKwArAAQABAArACsABAAEAAQAKwArACsABAArACsAKwArACsAKwArAFAAUABQAFAAKwBQACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwAEAAQAUABQAFAABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUAArACsABABQAAQABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQAKwArAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeABsAKwArACsAKwArACsAKwBQAAQABAAEAAQABAAEACsABAAEAAQAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArAAQABAArACsABAAEAAQAKwArACsAKwArACsAKwArAAQABAArACsAKwArAFAAUAArAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwAeAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwAEAFAAKwBQAFAAUABQAFAAUAArACsAKwBQAFAAUAArAFAAUABQAFAAKwArACsAUABQACsAUAArAFAAUAArACsAKwBQAFAAKwArACsAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQAKwArACsABAAEAAQAKwAEAAQABAAEACsAKwBQACsAKwArACsAKwArAAQAKwArACsAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAB4AHgAeAB4AHgAeABsAHgArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArAFAAUABQACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAB4AUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABAArACsAKwArACsAKwArAAQABAArACsAKwArACsAKwArAFAAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwArAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAKwBcAFwAKwBcACsAKwBcACsAKwArACsAKwArAFwAXABcAFwAKwBcAFwAXABcAFwAXABcACsAXABcAFwAKwBcACsAXAArACsAXABcACsAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgArACoAKgBcACsAKwBcAFwAXABcAFwAKwBcACsAKgAqACoAKgAqACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAFwAXABcAFwAUAAOAA4ADgAOAB4ADgAOAAkADgAOAA0ACQATABMAEwATABMACQAeABMAHgAeAB4ABAAEAB4AHgAeAB4AHgAeAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUAANAAQAHgAEAB4ABAAWABEAFgARAAQABABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAAQABAAEAAQABAANAAQABABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsADQANAB4AHgAeAB4AHgAeAAQAHgAeAB4AHgAeAB4AKwAeAB4ADgAOAA0ADgAeAB4AHgAeAB4ACQAJACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgAeAB4AHgBcAFwAXABcAFwAXAAqACoAKgAqAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAKgAqACoAKgAqACoAKgBcAFwAXAAqACoAKgAqAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAXAAqAEsASwBLAEsASwBLAEsASwBLAEsAKgAqACoAKgAqACoAUABQAFAAUABQAFAAKwBQACsAKwArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQACsAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwAEAAQABAAeAA0AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAEQArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAADQANAA0AUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAA0ADQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQACsABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoADQANABUAXAANAB4ADQAbAFwAKgArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAB4AHgATABMADQANAA4AHgATABMAHgAEAAQABAAJACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAUABQAFAAUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwAeACsAKwArABMAEwBLAEsASwBLAEsASwBLAEsASwBLAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwBcAFwAXABcAFwAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcACsAKwArACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwAeAB4AXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsABABLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKgAqACoAKgAqACoAKgBcACoAKgAqACoAKgAqACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAUABQAFAAUABQAFAAUAArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4ADQANAA0ADQAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAHgAeAB4AHgBQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwANAA0ADQANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwBQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsABAAEAAQAHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAABABQAFAAUABQAAQABAAEAFAAUAAEAAQABAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAKwBQACsAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAKwArAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAKwAeAB4AHgAeAB4AHgAeAA4AHgArAA0ADQANAA0ADQANAA0ACQANAA0ADQAIAAQACwAEAAQADQAJAA0ADQAMAB0AHQAeABcAFwAWABcAFwAXABYAFwAdAB0AHgAeABQAFAAUAA0AAQABAAQABAAEAAQABAAJABoAGgAaABoAGgAaABoAGgAeABcAFwAdABUAFQAeAB4AHgAeAB4AHgAYABYAEQAVABUAFQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgANAB4ADQANAA0ADQAeAA0ADQANAAcAHgAeAB4AHgArAAQABAAEAAQABAAEAAQABAAEAAQAUABQACsAKwBPAFAAUABQAFAAUAAeAB4AHgAWABEATwBQAE8ATwBPAE8AUABQAFAAUABQAB4AHgAeABYAEQArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAaABsAGwAbABsAGgAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgBQABoAHgAdAB4AUAAeABoAHgAeAB4AHgAeAB4AHgAeAB4ATwAeAFAAGwAeAB4AUABQAFAAUABQAB4AHgAeAB0AHQAeAFAAHgBQAB4AUAAeAFAATwBQAFAAHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AUABQAFAAUABPAE8AUABQAFAAUABQAE8AUABQAE8AUABPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAE8ATwBPAE8ATwBPAE8ATwBPAE8AUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAATwAeAB4AKwArACsAKwAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB0AHQAeAB4AHgAdAB0AHgAeAB0AHgAeAB4AHQAeAB0AGwAbAB4AHQAeAB4AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB0AHgAdAB4AHQAdAB0AHQAdAB0AHgAdAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAdAB0AHQAdAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAlACUAHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBQAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAeAB4AHgAeAB0AHQAeAB4AHgAeAB0AHQAdAB4AHgAdAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB0AHQAeAB4AHQAeAB4AHgAeAB0AHQAeAB4AHgAeACUAJQAdAB0AJQAeACUAJQAlACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAHgAeAB4AHgAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHQAdAB0AHgAdACUAHQAdAB4AHQAdAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHQAdAB0AHQAlAB4AJQAlACUAHQAlACUAHQAdAB0AJQAlAB0AHQAlAB0AHQAlACUAJQAeAB0AHgAeAB4AHgAdAB0AJQAdAB0AHQAdAB0AHQAlACUAJQAlACUAHQAlACUAIAAlAB0AHQAlACUAJQAlACUAJQAlACUAHgAeAB4AJQAlACAAIAAgACAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeABcAFwAXABcAFwAXAB4AEwATACUAHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACUAJQBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwArACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAE8ATwBPAE8ATwBPAE8ATwAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeACsAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUAArACsAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQBQAFAAUABQACsAKwArACsAUABQAFAAUABQAFAAUABQAA0AUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAABAAEAAQAKwAEAAQAKwArACsAKwArAAQABAAEAAQAUABQAFAAUAArAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsABAAEAAQAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsADQANAA0ADQANAA0ADQANAB4AKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAUABQAFAAUABQAA0ADQANAA0ADQANABQAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwANAA0ADQANAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAeAAQABAAEAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLACsADQArAB4AKwArAAQABAAEAAQAUABQAB4AUAArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwAEAAQABAAEAAQABAAEAAQABAAOAA0ADQATABMAHgAeAB4ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0AUABQAFAAUAAEAAQAKwArAAQADQANAB4AUAArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXABcAA0ADQANACoASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUAArACsAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANACsADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEcARwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQACsAKwAeAAQABAANAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAEAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUAArACsAUAArACsAUABQACsAKwBQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AKwArAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAeAB4ADQANAA0ADQAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAArAAQABAArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAEAAQABAAEAAQABAAEACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAFgAWAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAKwBQACsAKwArACsAKwArAFAAKwArACsAKwBQACsAUAArAFAAKwBQAFAAUAArAFAAUAArAFAAKwArAFAAKwBQACsAUAArAFAAKwBQACsAUABQACsAUAArACsAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAUABQAFAAUAArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUAArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAlACUAJQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeACUAJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeACUAJQAlACUAJQAeACUAJQAlACUAJQAgACAAIAAlACUAIAAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIQAhACEAIQAhACUAJQAgACAAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAIAAlACUAJQAlACAAJQAgACAAIAAgACAAIAAgACAAIAAlACUAJQAgACUAJQAlACUAIAAgACAAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeACUAHgAlAB4AJQAlACUAJQAlACAAJQAlACUAJQAeACUAHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAIAAgACAAIAAgAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFwAXABcAFQAVABUAHgAeAB4AHgAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAIAAgACAAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAlACAAIAAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsA"),Gt=Array.isArray(qt)?function(t){for(var e=t.length,a=[],i=0;i<e;i+=4)a.push(t[i+3]<<24|t[i+2]<<16|t[i+1]<<8|t[i]);return a}(qt):new Uint32Array(qt),Zt=r(Jt=Array.isArray(qt)?function(t){for(var e=t.length,a=[],i=0;i<e;i+=2)a.push(t[i+1]<<8|t[i]);return a}(qt):new Uint16Array(qt),12,Gt[4]/2),$t=2===Gt[5]?r(Jt,(24+Gt[4])/2):function(t,e,a){return t.slice?t.slice(e,a):new Uint32Array(Array.prototype.slice.call(t,e,a))}(Gt,Math.ceil((24+Gt[4])/4)),new ae(Gt[0],Gt[1],Gt[2],Gt[3],Zt,$t)),Te=[we,36],Ee=[1,2,3,5],Le=[ie,8],Qe=[ge,ue],Oe=Ee.concat(Le),Ue=[De,be,xe,me,Be],He=[se,re],ke=(c.prototype.slice=function(){return zt.apply(void 0,this.codePoints.slice(this.start,this.end))},c);(ee=te||(te={}))[ee.STRING_TOKEN=0]="STRING_TOKEN",ee[ee.BAD_STRING_TOKEN=1]="BAD_STRING_TOKEN",ee[ee.LEFT_PARENTHESIS_TOKEN=2]="LEFT_PARENTHESIS_TOKEN",ee[ee.RIGHT_PARENTHESIS_TOKEN=3]="RIGHT_PARENTHESIS_TOKEN",ee[ee.COMMA_TOKEN=4]="COMMA_TOKEN",ee[ee.HASH_TOKEN=5]="HASH_TOKEN",ee[ee.DELIM_TOKEN=6]="DELIM_TOKEN",ee[ee.AT_KEYWORD_TOKEN=7]="AT_KEYWORD_TOKEN",ee[ee.PREFIX_MATCH_TOKEN=8]="PREFIX_MATCH_TOKEN",ee[ee.DASH_MATCH_TOKEN=9]="DASH_MATCH_TOKEN",ee[ee.INCLUDE_MATCH_TOKEN=10]="INCLUDE_MATCH_TOKEN",ee[ee.LEFT_CURLY_BRACKET_TOKEN=11]="LEFT_CURLY_BRACKET_TOKEN",ee[ee.RIGHT_CURLY_BRACKET_TOKEN=12]="RIGHT_CURLY_BRACKET_TOKEN",ee[ee.SUFFIX_MATCH_TOKEN=13]="SUFFIX_MATCH_TOKEN",ee[ee.SUBSTRING_MATCH_TOKEN=14]="SUBSTRING_MATCH_TOKEN",ee[ee.DIMENSION_TOKEN=15]="DIMENSION_TOKEN",ee[ee.PERCENTAGE_TOKEN=16]="PERCENTAGE_TOKEN",ee[ee.NUMBER_TOKEN=17]="NUMBER_TOKEN",ee[ee.FUNCTION=18]="FUNCTION",ee[ee.FUNCTION_TOKEN=19]="FUNCTION_TOKEN",ee[ee.IDENT_TOKEN=20]="IDENT_TOKEN",ee[ee.COLUMN_TOKEN=21]="COLUMN_TOKEN",ee[ee.URL_TOKEN=22]="URL_TOKEN",ee[ee.BAD_URL_TOKEN=23]="BAD_URL_TOKEN",ee[ee.CDC_TOKEN=24]="CDC_TOKEN",ee[ee.CDO_TOKEN=25]="CDO_TOKEN",ee[ee.COLON_TOKEN=26]="COLON_TOKEN",ee[ee.SEMICOLON_TOKEN=27]="SEMICOLON_TOKEN",ee[ee.LEFT_SQUARE_BRACKET_TOKEN=28]="LEFT_SQUARE_BRACKET_TOKEN",ee[ee.RIGHT_SQUARE_BRACKET_TOKEN=29]="RIGHT_SQUARE_BRACKET_TOKEN",ee[ee.UNICODE_RANGE_TOKEN=30]="UNICODE_RANGE_TOKEN",ee[ee.WHITESPACE_TOKEN=31]="WHITESPACE_TOKEN",ee[ee.EOF_TOKEN=32]="EOF_TOKEN";var Ne,Ie,Me,Re,Ke={type:te.LEFT_PARENTHESIS_TOKEN},je={type:te.RIGHT_PARENTHESIS_TOKEN},Ve={type:te.COMMA_TOKEN},_e={type:te.SUFFIX_MATCH_TOKEN},ze={type:te.PREFIX_MATCH_TOKEN},Xe={type:te.COLUMN_TOKEN},We={type:te.DASH_MATCH_TOKEN},Ye={type:te.INCLUDE_MATCH_TOKEN},qe={type:te.LEFT_CURLY_BRACKET_TOKEN},Ge={type:te.RIGHT_CURLY_BRACKET_TOKEN},Je={type:te.SUBSTRING_MATCH_TOKEN},Ze={type:te.BAD_URL_TOKEN},$e={type:te.BAD_STRING_TOKEN},ta={type:te.CDO_TOKEN},ea={type:te.CDC_TOKEN},aa={type:te.COLON_TOKEN},ia={type:te.SEMICOLON_TOKEN},ra={type:te.LEFT_SQUARE_BRACKET_TOKEN},sa={type:te.RIGHT_SQUARE_BRACKET_TOKEN},na={type:te.WHITESPACE_TOKEN},oa={type:te.EOF_TOKEN},ha=(v.prototype.write=function(t){this._value=this._value.concat(_t(t))},v.prototype.read=function(){for(var t=[],e=this.consumeToken();e!==oa;)t.push(e),e=this.consumeToken();return t},v.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case 34:return this.consumeStringToken(34);case 35:var e=this.peekCodePoint(0),a=this.peekCodePoint(1),i=this.peekCodePoint(2);if(u(e)||g(a,i)){var r=f(e,a,i)?2:1,s=this.consumeName();return{type:te.HASH_TOKEN,value:s,flags:r}}break;case 36:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),_e;break;case 39:return this.consumeStringToken(39);case 40:return Ke;case 41:return je;case 42:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Je;break;case 43:if(w(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 44:return Ve;case 45:var n=t,o=this.peekCodePoint(0),h=this.peekCodePoint(1);if(w(n,o,h))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(f(n,o,h))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(45===o&&62===h)return this.consumeCodePoint(),this.consumeCodePoint(),ea;break;case 46:if(w(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case 47:if(42===this.peekCodePoint(0))for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(42===c&&47===(c=this.consumeCodePoint()))return this.consumeToken();if(-1===c)return this.consumeToken()}break;case 58:return aa;case 59:return ia;case 60:if(33===this.peekCodePoint(0)&&45===this.peekCodePoint(1)&&45===this.peekCodePoint(2))return this.consumeCodePoint(),this.consumeCodePoint(),ta;break;case 64:if(f(this.peekCodePoint(0),this.peekCodePoint(1),this.peekCodePoint(2)))return s=this.consumeName(),{type:te.AT_KEYWORD_TOKEN,value:s};break;case 91:return ra;case 92:if(g(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case 93:return sa;case 61:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),ze;break;case 123:return qe;case 125:return Ge;case 117:case 85:var v=this.peekCodePoint(0),y=this.peekCodePoint(1);return 43!==v||!A(y)&&63!==y||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case 124:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),We;if(124===this.peekCodePoint(0))return this.consumeCodePoint(),Xe;break;case 126:if(61===this.peekCodePoint(0))return this.consumeCodePoint(),Ye;break;case-1:return oa}return d(t)?(this.consumeWhiteSpace(),na):l(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):p(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:te.DELIM_TOKEN,value:zt(t)}},v.prototype.consumeCodePoint=function(){var t=this._value.shift();return void 0===t?-1:t},v.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},v.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},v.prototype.consumeUnicodeRangeToken=function(){for(var t=[],e=this.consumeCodePoint();A(e)&&t.length<6;)t.push(e),e=this.consumeCodePoint();for(var a=!1;63===e&&t.length<6;)t.push(e),e=this.consumeCodePoint(),a=!0;if(a){var i=parseInt(zt.apply(void 0,t.map((function(t){return 63===t?48:t}))),16),r=parseInt(zt.apply(void 0,t.map((function(t){return 63===t?70:t}))),16);return{type:te.UNICODE_RANGE_TOKEN,start:i,end:r}}var s=parseInt(zt.apply(void 0,t),16);if(45===this.peekCodePoint(0)&&A(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();for(var n=[];A(e)&&n.length<6;)n.push(e),e=this.consumeCodePoint();return r=parseInt(zt.apply(void 0,n),16),{type:te.UNICODE_RANGE_TOKEN,start:s,end:r}}return{type:te.UNICODE_RANGE_TOKEN,start:s,end:s}},v.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&40===this.peekCodePoint(0)?(this.consumeCodePoint(),this.consumeUrlToken()):40===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:te.FUNCTION_TOKEN,value:t}):{type:te.IDENT_TOKEN,value:t}},v.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),-1===this.peekCodePoint(0))return{type:te.URL_TOKEN,value:""};var e,a=this.peekCodePoint(0);if(39===a||34===a){var i=this.consumeStringToken(this.consumeCodePoint());return i.type===te.STRING_TOKEN&&(this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0))?(this.consumeCodePoint(),{type:te.URL_TOKEN,value:i.value}):(this.consumeBadUrlRemnants(),Ze)}for(;;){var r=this.consumeCodePoint();if(-1===r||41===r)return{type:te.URL_TOKEN,value:zt.apply(void 0,t)};if(d(r))return this.consumeWhiteSpace(),-1===this.peekCodePoint(0)||41===this.peekCodePoint(0)?(this.consumeCodePoint(),{type:te.URL_TOKEN,value:zt.apply(void 0,t)}):(this.consumeBadUrlRemnants(),Ze);if(34===r||39===r||40===r||0<=(e=r)&&e<=8||11===e||14<=e&&e<=31||127===e)return this.consumeBadUrlRemnants(),Ze;if(92===r){if(!g(r,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),Ze;t.push(this.consumeEscapedCodePoint())}else t.push(r)}},v.prototype.consumeWhiteSpace=function(){for(;d(this.peekCodePoint(0));)this.consumeCodePoint()},v.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(41===t||-1===t)return;g(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},v.prototype.consumeStringSlice=function(t){for(var e="";0<t;){var a=Math.min(6e4,t);e+=zt.apply(void 0,this._value.splice(0,a)),t-=a}return this._value.shift(),e},v.prototype.consumeStringToken=function(t){for(var e="",a=0;;){var i=this._value[a];if(-1===i||void 0===i||i===t)return e+=this.consumeStringSlice(a),{type:te.STRING_TOKEN,value:e};if(10===i)return this._value.splice(0,a),$e;if(92===i){var r=this._value[a+1];-1!==r&&void 0!==r&&(10===r?(e+=this.consumeStringSlice(a),a=-1,this._value.shift()):g(i,r)&&(e+=this.consumeStringSlice(a),e+=zt(this.consumeEscapedCodePoint()),a=-1))}a++}},v.prototype.consumeNumber=function(){var t=[],e=4,a=this.peekCodePoint(0);for(43!==a&&45!==a||t.push(this.consumeCodePoint());l(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(46===a&&l(i))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;l(this.peekCodePoint(0));)t.push(this.consumeCodePoint());a=this.peekCodePoint(0),i=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((69===a||101===a)&&((43===i||45===i)&&l(r)||l(i)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=8;l(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[function(t){var e=0,a=1;43!==t[e]&&45!==t[e]||(45===t[e]&&(a=-1),e++);for(var i=[];l(t[e]);)i.push(t[e++]);var r=i.length?parseInt(zt.apply(void 0,i),10):0;46===t[e]&&e++;for(var s=[];l(t[e]);)s.push(t[e++]);var n=s.length,o=n?parseInt(zt.apply(void 0,s),10):0;69!==t[e]&&101!==t[e]||e++;var h=1;43!==t[e]&&45!==t[e]||(45===t[e]&&(h=-1),e++);for(var c=[];l(t[e]);)c.push(t[e++]);var A=c.length?parseInt(zt.apply(void 0,c),10):0;return a*(r+o*Math.pow(10,-n))*Math.pow(10,h*A)}(t),e]},v.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],a=t[1],i=this.peekCodePoint(0);if(f(i,this.peekCodePoint(1),this.peekCodePoint(2))){var r=this.consumeName();return{type:te.DIMENSION_TOKEN,number:e,flags:a,unit:r}}return 37===i?(this.consumeCodePoint(),{type:te.PERCENTAGE_TOKEN,number:e,flags:a}):{type:te.NUMBER_TOKEN,number:e,flags:a}},v.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(A(t)){for(var e=zt(t);A(this.peekCodePoint(0))&&e.length<6;)e+=zt(this.consumeCodePoint());d(this.peekCodePoint(0))&&this.consumeCodePoint();var a=parseInt(e,16);return 0===a||function(t){return 55296<=t&&t<=57343}(a)||1114111<a?65533:a}return-1===t?65533:t},v.prototype.consumeName=function(){for(var t="";;){var e=this.consumeCodePoint();if(u(e))t+=zt(e);else{if(!g(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=zt(this.consumeEscapedCodePoint())}}},v),ca=(y.create=function(t){var e=new ha;return e.write(t),new y(e.read())},y.parseValue=function(t){return y.create(t).parseComponentValue()},y.parseValues=function(t){return y.create(t).parseComponentValues()},y.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===te.WHITESPACE_TOKEN;)t=this.consumeToken();if(t.type===te.EOF_TOKEN)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);for(var e=this.consumeComponentValue();(t=this.consumeToken()).type===te.WHITESPACE_TOKEN;);if(t.type===te.EOF_TOKEN)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},y.prototype.parseComponentValues=function(){for(var t=[];;){var e=this.consumeComponentValue();if(e.type===te.EOF_TOKEN)return t;t.push(e),t.push()}},y.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case te.LEFT_CURLY_BRACKET_TOKEN:case te.LEFT_SQUARE_BRACKET_TOKEN:case te.LEFT_PARENTHESIS_TOKEN:return this.consumeSimpleBlock(t.type);case te.FUNCTION_TOKEN:return this.consumeFunction(t)}return t},y.prototype.consumeSimpleBlock=function(t){for(var e={type:t,values:[]},a=this.consumeToken();;){if(a.type===te.EOF_TOKEN||la(a,t))return e;this.reconsumeToken(a),e.values.push(this.consumeComponentValue()),a=this.consumeToken()}},y.prototype.consumeFunction=function(t){for(var e={name:t.value,values:[],type:te.FUNCTION};;){var a=this.consumeToken();if(a.type===te.EOF_TOKEN||a.type===te.RIGHT_PARENTHESIS_TOKEN)return e;this.reconsumeToken(a),e.values.push(this.consumeComponentValue())}},y.prototype.consumeToken=function(){var t=this._tokens.shift();return void 0===t?oa:t},y.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},y),la=function t(e,a){return a===te.LEFT_CURLY_BRACKET_TOKEN&&e.type===te.RIGHT_CURLY_BRACKET_TOKEN||a===te.LEFT_SQUARE_BRACKET_TOKEN&&e.type===te.RIGHT_SQUARE_BRACKET_TOKEN||a===te.LEFT_PARENTHESIS_TOKEN&&e.type===te.RIGHT_PARENTHESIS_TOKEN},Aa={type:te.NUMBER_TOKEN,number:0,flags:4},da={type:te.PERCENTAGE_TOKEN,number:50,flags:4},pa={type:te.PERCENTAGE_TOKEN,number:100,flags:4},ua=function t(e,a){if(e.type===te.PERCENTAGE_TOKEN)return e.number/100*a;if(m(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},ga=function t(e){if(e.type===te.DIMENSION_TOKEN)switch(e.unit){case"deg":return Math.PI*e.number/180;case"grad":return Math.PI/200*e.number;case"rad":return e.number;case"turn":return 2*Math.PI*e.number}throw new Error("Unsupported angle type")},fa=function t(e){return Math.PI*e/180},wa=function t(e){if(e.type===te.FUNCTION){var a=ya[e.name];if(void 0===a)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return a(e.values)}if(e.type===te.HASH_TOKEN){if(3===e.value.length){var i=e.value.substring(0,1),r=e.value.substring(1,2),s=e.value.substring(2,3);return va(parseInt(i+i,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(4===e.value.length){i=e.value.substring(0,1),r=e.value.substring(1,2),s=e.value.substring(2,3);var n=e.value.substring(3,4);return va(parseInt(i+i,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(n+n,16)/255)}if(6===e.value.length)return i=e.value.substring(0,2),r=e.value.substring(2,4),s=e.value.substring(4,6),va(parseInt(i,16),parseInt(r,16),parseInt(s,16),1);if(8===e.value.length)return i=e.value.substring(0,2),r=e.value.substring(2,4),s=e.value.substring(4,6),n=e.value.substring(6,8),va(parseInt(i,16),parseInt(r,16),parseInt(s,16),parseInt(n,16)/255)}if(e.type===te.IDENT_TOKEN){var o=ma[e.value.toUpperCase()];if(void 0!==o)return o}return ma.TRANSPARENT},va=function t(e,a,i,r){return(e<<24|a<<16|i<<8|Math.round(255*r)<<0)>>>0},ya={hsl:M,hsla:M,rgb:N,rgba:N},ma={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199};(Ie=Ne||(Ne={}))[Ie.VALUE=0]="VALUE",Ie[Ie.LIST=1]="LIST",Ie[Ie.IDENT_VALUE=2]="IDENT_VALUE",Ie[Ie.TYPE_VALUE=3]="TYPE_VALUE",Ie[Ie.TOKEN_VALUE=4]="TOKEN_VALUE",(Re=Me||(Me={}))[Re.BORDER_BOX=0]="BORDER_BOX",Re[Re.PADDING_BOX=1]="PADDING_BOX";var Ba,Ca,Da,ba,xa,Fa,Sa={name:"background-clip",initialValue:"border-box",prefix:!(Re[Re.CONTENT_BOX=2]="CONTENT_BOX"),type:Ne.LIST,parse:function t(e){return e.map((function(t){if(C(t))switch(t.value){case"padding-box":return Me.PADDING_BOX;case"content-box":return Me.CONTENT_BOX}return Me.BORDER_BOX}))}},Pa={name:"background-color",initialValue:"transparent",prefix:!1,type:Ne.TYPE_VALUE,format:"color"},Ta=function t(e,a,i,r,s){var n="http://www.w3.org/2000/svg",o=document.createElementNS(n,"svg"),h=document.createElementNS(n,"foreignObject");return o.setAttributeNS(null,"width",e.toString()),o.setAttributeNS(null,"height",a.toString()),h.setAttributeNS(null,"width","100%"),h.setAttributeNS(null,"height","100%"),h.setAttributeNS(null,"x",i.toString()),h.setAttributeNS(null,"y",r.toString()),h.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(h),h.appendChild(s),o},Ea=function t(e){return new Promise((function(t,a){var i=new Image;i.onload=function(){return t(i)},i.onerror=a,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))},La={get SUPPORT_RANGE_BOUNDS(){var t=function(t){if(t.createRange){var e=t.createRange();if(e.getBoundingClientRect){var a=t.createElement("boundtest");a.style.height="123px",a.style.display="block",t.body.appendChild(a),e.selectNode(a);var i=e.getBoundingClientRect(),r=Math.round(i.height);if(t.body.removeChild(a),123===r)return!0}}return!1}(document);return Object.defineProperty(La,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=function(t){var e=new Image,a=t.createElement("canvas"),i=a.getContext("2d");if(!i)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(e,0,0),a.toDataURL()}catch(t){return!1}return!0}(document);return Object.defineProperty(La,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"==typeof Array.from&&"function"==typeof window.fetch?function(t){var e=t.createElement("canvas"),a=100;e.width=a,e.height=a;var i=e.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,a,a);var r=new Image,s=e.toDataURL();r.src=s;var n=Ta(a,a,0,0,r);return i.fillStyle="red",i.fillRect(0,0,a,a),Ea(n).then((function(e){i.drawImage(e,0,0);var r=i.getImageData(0,0,a,a).data;i.fillStyle="red",i.fillRect(0,0,a,a);var n=t.createElement("div");return n.style.backgroundImage="url("+s+")",n.style.height="100px",z(r)?Ea(Ta(a,a,0,0,n)):Promise.reject(!1)})).then((function(t){return i.drawImage(t,0,0),z(i.getImageData(0,0,a,a).data)})).catch((function(){return!1}))}(document):Promise.resolve(!1);return Object.defineProperty(La,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=void 0!==(new Image).crossOrigin;return Object.defineProperty(La,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t="string"==typeof(new XMLHttpRequest).responseType;return Object.defineProperty(La,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(La,"SUPPORT_CORS_XHR",{value:t}),t}},Qa=(X.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.debug?console.debug.apply(console,[this.id,this.getTime()+"ms"].concat(t)):this.info.apply(this,t))},X.prototype.getTime=function(){return Date.now()-this.start},X.create=function(t){X.instances[t.id]=new X(t)},X.destroy=function(t){delete X.instances[t]},X.getInstance=function(t){var e=X.instances[t];if(void 0===e)throw new Error("No logger instance found with id "+t);return e},X.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!=typeof window&&window.console&&"function"==typeof console.info&&console.info.apply(console,[this.id,this.getTime()+"ms"].concat(t))},X.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!=typeof window&&window.console&&"function"==typeof console.error?console.error.apply(console,[this.id,this.getTime()+"ms"].concat(t)):this.info.apply(this,t))},X.instances={},X),Oa=(W.create=function(t,e){return W._caches[t]=new Ua(t,e)},W.destroy=function(t){delete W._caches[t]},W.open=function(t){var e=W._caches[t];if(void 0!==e)return e;throw new Error('Cache with key "'+t+'" not found')},W.getOrigin=function(t){var e=W._link;return e?(e.href=t,e.href=e.href,e.protocol+e.hostname+e.port):"about:blank"},W.isSameOrigin=function(t){return W.getOrigin(t)===W._origin},W.setContext=function(t){W._link=t.document.createElement("a"),W._origin=W.getOrigin(t.location.href)},W.getInstance=function(){var t=W._current;if(null===t)throw new Error("No cache instance attached");return t},W.attachInstance=function(t){W._current=t},W.detachInstance=function(){W._current=null},W._caches={},W._origin="about:blank",W._current=null,W),Ua=(Y.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)||(Ka(t)||Ia(t))&&(this._cache[t]=this.loadImage(t)),e},Y.prototype.match=function(t){return this._cache[t]},Y.prototype.loadImage=function(t){return e(this,void 0,void 0,(function(){var e,i,r,s,n=this;return a(this,(function(a){switch(a.label){case 0:return e=Oa.isSameOrigin(t),i=!Ma(t)&&!0===this._options.useCORS&&La.SUPPORT_CORS_IMAGES&&!e,r=!Ma(t)&&!e&&"string"==typeof this._options.proxy&&La.SUPPORT_CORS_XHR&&!i,e||!1!==this._options.allowTaint||Ma(t)||r||i?(s=t,r?[4,this.proxy(s)]:[3,2]):[2];case 1:s=a.sent(),a.label=2;case 2:return Qa.getInstance(this.id).debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,e){var a=new Image;a.onload=function(){return t(a)},a.onerror=e,(Ra(s)||i)&&(a.crossOrigin="anonymous"),a.src=s,!0===a.complete&&setTimeout((function(){return t(a)}),500),0<n._options.imageTimeout&&setTimeout((function(){return e("Timed out ("+n._options.imageTimeout+"ms) loading image")}),n._options.imageTimeout)}))];case 3:return[2,a.sent()]}}))}))},Y.prototype.has=function(t){return void 0!==this._cache[t]},Y.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},Y.prototype.proxy=function(t){var e=this,a=this._options.proxy;if(!a)throw new Error("No proxy defined");var i=t.substring(0,256);return new Promise((function(r,s){var n=La.SUPPORT_RESPONSE_TYPE?"blob":"text",o=new XMLHttpRequest;if(o.onload=function(){if(200===o.status)if("text"==n)r(o.response);else{var t=new FileReader;t.addEventListener("load",(function(){return r(t.result)}),!1),t.addEventListener("error",(function(t){return s(t)}),!1),t.readAsDataURL(o.response)}else s("Failed to proxy resource "+i+" with status code "+o.status)},o.onerror=s,o.open("GET",a+"?url="+encodeURIComponent(t)+"&responseType="+n),"text"!=n&&o instanceof XMLHttpRequest&&(o.responseType=n),e._options.imageTimeout){var h=e._options.imageTimeout;o.timeout=h,o.ontimeout=function(){return s("Timed out ("+h+"ms) proxying "+i)}}o.send()}))},Y),Ha=/^data:image\/svg\+xml/i,ka=/^data:image\/.*;base64,/i,Na=/^data:image\/.*/i,Ia=function t(e){return La.SUPPORT_SVG_DRAWING||!ja(e)},Ma=function t(e){return Na.test(e)},Ra=function t(e){return ka.test(e)},Ka=function t(e){return"blob"===e.substr(0,4)},ja=function t(e){return"svg"===e.substr(-3).toLowerCase()||Ha.test(e)},Va="closest-side",_a="farthest-side",za="closest-corner",Xa="farthest-corner",Wa="ellipse",Ya="contain";(Ca=Ba||(Ba={}))[Ca.URL=0]="URL",Ca[Ca.LINEAR_GRADIENT=1]="LINEAR_GRADIENT",Ca[Ca.RADIAL_GRADIENT=2]="RADIAL_GRADIENT",(ba=Da||(Da={}))[ba.CIRCLE=0]="CIRCLE",ba[ba.ELLIPSE=1]="ELLIPSE",(Fa=xa||(xa={}))[Fa.CLOSEST_SIDE=0]="CLOSEST_SIDE",Fa[Fa.FARTHEST_SIDE=1]="FARTHEST_SIDE",Fa[Fa.CLOSEST_CORNER=2]="CLOSEST_CORNER",Fa[Fa.FARTHEST_CORNER=3]="FARTHEST_CORNER";var qa,Ga,Ja=function t(e){if(e.type===te.URL_TOKEN){var a={url:e.value,type:Ba.URL};return Oa.getInstance().addImage(e.value),a}if(e.type!==te.FUNCTION)throw new Error("Unsupported image type");var i=Za[e.name];if(void 0===i)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return i(e.values)},Za={"linear-gradient":function t(e){var a=fa(180),i=[];return S(e).forEach((function(t,e){if(0===e){var r=t[0];if(r.type===te.IDENT_TOKEN&&"to"===r.value)return void(a=O(t));if(Q(r))return void(a=ga(r))}var s=R(t);i.push(s)})),{angle:a,stops:i,type:Ba.LINEAR_GRADIENT}},"-moz-linear-gradient":_,"-ms-linear-gradient":_,"-o-linear-gradient":_,"-webkit-linear-gradient":_,"radial-gradient":function t(e){var a=Da.CIRCLE,i=xa.FARTHEST_CORNER,r=[],s=[];return S(e).forEach((function(t,e){var n=!0;if(0===e){var o=!1;n=t.reduce((function(t,e){if(o)if(C(e))switch(e.value){case"center":return s.push(da),t;case"top":case"left":return s.push(Aa),t;case"right":case"bottom":return s.push(pa),t}else(T(e)||P(e))&&s.push(e);else if(C(e))switch(e.value){case"circle":return a=Da.CIRCLE,!1;case Wa:return a=Da.ELLIPSE,!1;case"at":return!(o=!0);case Va:return i=xa.CLOSEST_SIDE,!1;case"cover":case _a:return i=xa.FARTHEST_SIDE,!1;case Ya:case za:return i=xa.CLOSEST_CORNER,!1;case Xa:return i=xa.FARTHEST_CORNER,!1}else if(P(e)||T(e))return Array.isArray(i)||(i=[]),i.push(e),!1;return t}),n)}if(n){var h=R(t);r.push(h)}})),{size:i,shape:a,stops:r,position:s,type:Ba.RADIAL_GRADIENT}},"-moz-radial-gradient":q,"-ms-radial-gradient":q,"-o-radial-gradient":q,"-webkit-radial-gradient":q,"-webkit-gradient":function t(e){var a=fa(180),i=[],r=Ba.LINEAR_GRADIENT,s=Da.CIRCLE,n=xa.FARTHEST_CORNER;return S(e).forEach((function(t,e){var a=t[0];if(0===e){if(C(a)&&"linear"===a.value)return void(r=Ba.LINEAR_GRADIENT);if(C(a)&&"radial"===a.value)return void(r=Ba.RADIAL_GRADIENT)}if(a.type===te.FUNCTION)if("from"===a.name){var s=wa(a.values[0]);i.push({stop:Aa,color:s})}else if("to"===a.name)s=wa(a.values[0]),i.push({stop:pa,color:s});else if("color-stop"===a.name){var n=a.values.filter(F);if(2===n.length){s=wa(n[1]);var o=n[0];B(o)&&i.push({stop:{type:te.PERCENTAGE_TOKEN,number:100*o.number,flags:o.flags},color:s})}}})),r===Ba.LINEAR_GRADIENT?{angle:(a+fa(180))%fa(360),stops:i,type:r}:{size:n,shape:s,stops:i,position:[],type:r}}},$a={name:"background-image",initialValue:"none",type:Ne.LIST,prefix:!1,parse:function t(e){if(0===e.length)return[];var a=e[0];return a.type===te.IDENT_TOKEN&&"none"===a.value?[]:e.filter((function(t){return F(t)&&function(t){return t.type!==te.FUNCTION||Za[t.name]}(t)})).map(Ja)}},ti={name:"background-origin",initialValue:"border-box",prefix:!1,type:Ne.LIST,parse:function t(e){return e.map((function(t){if(C(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},ei={name:"background-position",initialValue:"0% 0%",type:Ne.LIST,prefix:!1,parse:function t(e){return S(e).map((function(t){return t.filter(T)})).map(E)}};(Ga=qa||(qa={}))[Ga.REPEAT=0]="REPEAT",Ga[Ga.NO_REPEAT=1]="NO_REPEAT",Ga[Ga.REPEAT_X=2]="REPEAT_X";var ai,ii,ri={name:"background-repeat",initialValue:"repeat",prefix:!(Ga[Ga.REPEAT_Y=3]="REPEAT_Y"),type:Ne.LIST,parse:function t(e){return S(e).map((function(t){return t.filter(C).map((function(t){return t.value})).join(" ")})).map(si)}},si=function t(e){switch(e){case"no-repeat":return qa.NO_REPEAT;case"repeat-x":case"repeat no-repeat":return qa.REPEAT_X;case"repeat-y":case"no-repeat repeat":return qa.REPEAT_Y;case"repeat":default:return qa.REPEAT}};(ii=ai||(ai={})).AUTO="auto",ii.CONTAIN="contain";var ni,oi,hi={name:"background-size",initialValue:"0",prefix:!(ii.COVER="cover"),type:Ne.LIST,parse:function t(e){return S(e).map((function(t){return t.filter(ci)}))}},ci=function t(e){return C(e)||T(e)},li=G("top"),Ai=G("right"),di=G("bottom"),pi=G("left"),ui=J("top-left"),gi=J("top-right"),fi=J("bottom-right"),wi=J("bottom-left");(oi=ni||(ni={}))[oi.NONE=0]="NONE",oi[oi.SOLID=1]="SOLID";var vi,yi,mi=Z("top"),Bi=Z("right"),Ci=Z("bottom"),Di=Z("left"),bi=$("top"),xi=$("right"),Fi=$("bottom"),Si=$("left"),Pi={name:"color",initialValue:"transparent",prefix:!1,type:Ne.TYPE_VALUE,format:"color"},Ti={name:"display",initialValue:"inline-block",prefix:!1,type:Ne.LIST,parse:function t(e){return e.filter(C).reduce((function(t,e){return t|Ei(e.value)}),0)}},Ei=function t(e){switch(e){case"block":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0};(yi=vi||(vi={}))[yi.NONE=0]="NONE",yi[yi.LEFT=1]="LEFT",yi[yi.RIGHT=2]="RIGHT",yi[yi.INLINE_START=3]="INLINE_START";var Li,Qi,Oi,Ui,Hi={name:"float",initialValue:"none",prefix:!(yi[yi.INLINE_END=4]="INLINE_END"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"left":return vi.LEFT;case"right":return vi.RIGHT;case"inline-start":return vi.INLINE_START;case"inline-end":return vi.INLINE_END}return vi.NONE}},ki={name:"letter-spacing",initialValue:"0",prefix:!1,type:Ne.VALUE,parse:function t(e){return e.type===te.IDENT_TOKEN&&"normal"===e.value?0:e.type===te.NUMBER_TOKEN||e.type===te.DIMENSION_TOKEN?e.number:0}},Ni={name:"line-break",initialValue:(Qi=Li||(Li={})).NORMAL="normal",prefix:!(Qi.STRICT="strict"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"strict":return Li.STRICT;case"normal":default:return Li.NORMAL}}},Ii={name:"line-height",initialValue:"normal",prefix:!1,type:Ne.TOKEN_VALUE},Mi={name:"list-style-image",initialValue:"none",type:Ne.VALUE,prefix:!1,parse:function t(e){return e.type===te.IDENT_TOKEN&&"none"===e.value?null:Ja(e)}};(Ui=Oi||(Oi={}))[Ui.INSIDE=0]="INSIDE";var Ri,Ki,ji={name:"list-style-position",initialValue:"outside",prefix:!(Ui[Ui.OUTSIDE=1]="OUTSIDE"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"inside":return Oi.INSIDE;case"outside":default:return Oi.OUTSIDE}}};(Ki=Ri||(Ri={}))[Ki.NONE=-1]="NONE",Ki[Ki.DISC=0]="DISC",Ki[Ki.CIRCLE=1]="CIRCLE",Ki[Ki.SQUARE=2]="SQUARE",Ki[Ki.DECIMAL=3]="DECIMAL",Ki[Ki.CJK_DECIMAL=4]="CJK_DECIMAL",Ki[Ki.DECIMAL_LEADING_ZERO=5]="DECIMAL_LEADING_ZERO",Ki[Ki.LOWER_ROMAN=6]="LOWER_ROMAN",Ki[Ki.UPPER_ROMAN=7]="UPPER_ROMAN",Ki[Ki.LOWER_GREEK=8]="LOWER_GREEK",Ki[Ki.LOWER_ALPHA=9]="LOWER_ALPHA",Ki[Ki.UPPER_ALPHA=10]="UPPER_ALPHA",Ki[Ki.ARABIC_INDIC=11]="ARABIC_INDIC",Ki[Ki.ARMENIAN=12]="ARMENIAN",Ki[Ki.BENGALI=13]="BENGALI",Ki[Ki.CAMBODIAN=14]="CAMBODIAN",Ki[Ki.CJK_EARTHLY_BRANCH=15]="CJK_EARTHLY_BRANCH",Ki[Ki.CJK_HEAVENLY_STEM=16]="CJK_HEAVENLY_STEM",Ki[Ki.CJK_IDEOGRAPHIC=17]="CJK_IDEOGRAPHIC",Ki[Ki.DEVANAGARI=18]="DEVANAGARI",Ki[Ki.ETHIOPIC_NUMERIC=19]="ETHIOPIC_NUMERIC",Ki[Ki.GEORGIAN=20]="GEORGIAN",Ki[Ki.GUJARATI=21]="GUJARATI",Ki[Ki.GURMUKHI=22]="GURMUKHI",Ki[Ki.HEBREW=22]="HEBREW",Ki[Ki.HIRAGANA=23]="HIRAGANA",Ki[Ki.HIRAGANA_IROHA=24]="HIRAGANA_IROHA",Ki[Ki.JAPANESE_FORMAL=25]="JAPANESE_FORMAL",Ki[Ki.JAPANESE_INFORMAL=26]="JAPANESE_INFORMAL",Ki[Ki.KANNADA=27]="KANNADA",Ki[Ki.KATAKANA=28]="KATAKANA",Ki[Ki.KATAKANA_IROHA=29]="KATAKANA_IROHA",Ki[Ki.KHMER=30]="KHMER",Ki[Ki.KOREAN_HANGUL_FORMAL=31]="KOREAN_HANGUL_FORMAL",Ki[Ki.KOREAN_HANJA_FORMAL=32]="KOREAN_HANJA_FORMAL",Ki[Ki.KOREAN_HANJA_INFORMAL=33]="KOREAN_HANJA_INFORMAL",Ki[Ki.LAO=34]="LAO",Ki[Ki.LOWER_ARMENIAN=35]="LOWER_ARMENIAN",Ki[Ki.MALAYALAM=36]="MALAYALAM",Ki[Ki.MONGOLIAN=37]="MONGOLIAN",Ki[Ki.MYANMAR=38]="MYANMAR",Ki[Ki.ORIYA=39]="ORIYA",Ki[Ki.PERSIAN=40]="PERSIAN",Ki[Ki.SIMP_CHINESE_FORMAL=41]="SIMP_CHINESE_FORMAL",Ki[Ki.SIMP_CHINESE_INFORMAL=42]="SIMP_CHINESE_INFORMAL",Ki[Ki.TAMIL=43]="TAMIL",Ki[Ki.TELUGU=44]="TELUGU",Ki[Ki.THAI=45]="THAI",Ki[Ki.TIBETAN=46]="TIBETAN",Ki[Ki.TRAD_CHINESE_FORMAL=47]="TRAD_CHINESE_FORMAL",Ki[Ki.TRAD_CHINESE_INFORMAL=48]="TRAD_CHINESE_INFORMAL",Ki[Ki.UPPER_ARMENIAN=49]="UPPER_ARMENIAN",Ki[Ki.DISCLOSURE_OPEN=50]="DISCLOSURE_OPEN";var Vi,_i,zi={name:"list-style-type",initialValue:"none",prefix:!(Ki[Ki.DISCLOSURE_CLOSED=51]="DISCLOSURE_CLOSED"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"disc":return Ri.DISC;case"circle":return Ri.CIRCLE;case"square":return Ri.SQUARE;case"decimal":return Ri.DECIMAL;case"cjk-decimal":return Ri.CJK_DECIMAL;case"decimal-leading-zero":return Ri.DECIMAL_LEADING_ZERO;case"lower-roman":return Ri.LOWER_ROMAN;case"upper-roman":return Ri.UPPER_ROMAN;case"lower-greek":return Ri.LOWER_GREEK;case"lower-alpha":return Ri.LOWER_ALPHA;case"upper-alpha":return Ri.UPPER_ALPHA;case"arabic-indic":return Ri.ARABIC_INDIC;case"armenian":return Ri.ARMENIAN;case"bengali":return Ri.BENGALI;case"cambodian":return Ri.CAMBODIAN;case"cjk-earthly-branch":return Ri.CJK_EARTHLY_BRANCH;case"cjk-heavenly-stem":return Ri.CJK_HEAVENLY_STEM;case"cjk-ideographic":return Ri.CJK_IDEOGRAPHIC;case"devanagari":return Ri.DEVANAGARI;case"ethiopic-numeric":return Ri.ETHIOPIC_NUMERIC;case"georgian":return Ri.GEORGIAN;case"gujarati":return Ri.GUJARATI;case"gurmukhi":return Ri.GURMUKHI;case"hebrew":return Ri.HEBREW;case"hiragana":return Ri.HIRAGANA;case"hiragana-iroha":return Ri.HIRAGANA_IROHA;case"japanese-formal":return Ri.JAPANESE_FORMAL;case"japanese-informal":return Ri.JAPANESE_INFORMAL;case"kannada":return Ri.KANNADA;case"katakana":return Ri.KATAKANA;case"katakana-iroha":return Ri.KATAKANA_IROHA;case"khmer":return Ri.KHMER;case"korean-hangul-formal":return Ri.KOREAN_HANGUL_FORMAL;case"korean-hanja-formal":return Ri.KOREAN_HANJA_FORMAL;case"korean-hanja-informal":return Ri.KOREAN_HANJA_INFORMAL;case"lao":return Ri.LAO;case"lower-armenian":return Ri.LOWER_ARMENIAN;case"malayalam":return Ri.MALAYALAM;case"mongolian":return Ri.MONGOLIAN;case"myanmar":return Ri.MYANMAR;case"oriya":return Ri.ORIYA;case"persian":return Ri.PERSIAN;case"simp-chinese-formal":return Ri.SIMP_CHINESE_FORMAL;case"simp-chinese-informal":return Ri.SIMP_CHINESE_INFORMAL;case"tamil":return Ri.TAMIL;case"telugu":return Ri.TELUGU;case"thai":return Ri.THAI;case"tibetan":return Ri.TIBETAN;case"trad-chinese-formal":return Ri.TRAD_CHINESE_FORMAL;case"trad-chinese-informal":return Ri.TRAD_CHINESE_INFORMAL;case"upper-armenian":return Ri.UPPER_ARMENIAN;case"disclosure-open":return Ri.DISCLOSURE_OPEN;case"disclosure-closed":return Ri.DISCLOSURE_CLOSED;case"none":default:return Ri.NONE}}},Xi=tt("top"),Wi=tt("right"),Yi=tt("bottom"),qi=tt("left");(_i=Vi||(Vi={}))[_i.VISIBLE=0]="VISIBLE",_i[_i.HIDDEN=1]="HIDDEN",_i[_i.SCROLL=2]="SCROLL";var Gi,Ji,Zi,$i,tr={name:"overflow",initialValue:"visible",prefix:!(_i[_i.AUTO=3]="AUTO"),type:Ne.LIST,parse:function t(e){return e.filter(C).map((function(t){switch(t.value){case"hidden":return Vi.HIDDEN;case"scroll":return Vi.SCROLL;case"auto":return Vi.AUTO;case"visible":default:return Vi.VISIBLE}}))}},er={name:"overflow-wrap",initialValue:(Ji=Gi||(Gi={})).NORMAL="normal",prefix:!(Ji.BREAK_WORD="break-word"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"break-word":return Gi.BREAK_WORD;case"normal":default:return Gi.NORMAL}}},ar=et("top"),ir=et("right"),rr=et("bottom"),sr=et("left");($i=Zi||(Zi={}))[$i.LEFT=0]="LEFT",$i[$i.CENTER=1]="CENTER";var nr,or,hr={name:"text-align",initialValue:"left",prefix:!($i[$i.RIGHT=2]="RIGHT"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"right":return Zi.RIGHT;case"center":case"justify":return Zi.CENTER;case"left":default:return Zi.LEFT}}};(or=nr||(nr={}))[or.STATIC=0]="STATIC",or[or.RELATIVE=1]="RELATIVE",or[or.ABSOLUTE=2]="ABSOLUTE",or[or.FIXED=3]="FIXED";var cr,lr,Ar={name:"position",initialValue:"static",prefix:!(or[or.STICKY=4]="STICKY"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"relative":return nr.RELATIVE;case"absolute":return nr.ABSOLUTE;case"fixed":return nr.FIXED;case"sticky":return nr.STICKY}return nr.STATIC}},dr={name:"text-shadow",initialValue:"none",type:Ne.LIST,prefix:!1,parse:function t(e){return 1===e.length&&b(e[0],"none")?[]:S(e).map((function(t){for(var e={color:ma.TRANSPARENT,offsetX:Aa,offsetY:Aa,blur:Aa},a=0,i=0;i<t.length;i++){var r=t[i];P(r)?(0===a?e.offsetX=r:1===a?e.offsetY=r:e.blur=r,a++):e.color=wa(r)}return e}))}};(lr=cr||(cr={}))[lr.NONE=0]="NONE",lr[lr.LOWERCASE=1]="LOWERCASE",lr[lr.UPPERCASE=2]="UPPERCASE";var pr,ur,gr={name:"text-transform",initialValue:"none",prefix:!(lr[lr.CAPITALIZE=3]="CAPITALIZE"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"uppercase":return cr.UPPERCASE;case"lowercase":return cr.LOWERCASE;case"capitalize":return cr.CAPITALIZE}return cr.NONE}},fr={name:"transform",initialValue:"none",prefix:!0,type:Ne.VALUE,parse:function t(e){if(e.type===te.IDENT_TOKEN&&"none"===e.value)return null;if(e.type!==te.FUNCTION)return null;var a=wr[e.name];if(void 0===a)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return a(e.values)}},wr={matrix:function t(e){var a=e.filter((function(t){return t.type===te.NUMBER_TOKEN})).map((function(t){return t.number}));return 6===a.length?a:null},matrix3d:function t(e){var a=e.filter((function(t){return t.type===te.NUMBER_TOKEN})).map((function(t){return t.number})),i=a[0],r=a[1],s=(a[2],a[3],a[4]),n=a[5],o=(a[6],a[7],a[8],a[9],a[10],a[11],a[12]),h=a[13];return a[14],a[15],16===a.length?[i,r,s,n,o,h]:null}},vr={type:te.PERCENTAGE_TOKEN,number:50,flags:4},yr=[vr,vr],mr={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:Ne.LIST,parse:function t(e){var a=e.filter(T);return 2!==a.length?yr:[a[0],a[1]]}};(ur=pr||(pr={}))[ur.VISIBLE=0]="VISIBLE",ur[ur.HIDDEN=1]="HIDDEN";var Br,Cr,Dr={name:"visible",initialValue:"none",prefix:!(ur[ur.COLLAPSE=2]="COLLAPSE"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"hidden":return pr.HIDDEN;case"collapse":return pr.COLLAPSE;case"visible":default:return pr.VISIBLE}}};(Cr=Br||(Br={})).NORMAL="normal",Cr.BREAK_ALL="break-all";var br,xr,Fr={name:"word-break",initialValue:"normal",prefix:!(Cr.KEEP_ALL="keep-all"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"break-all":return Br.BREAK_ALL;case"keep-all":return Br.KEEP_ALL;case"normal":default:return Br.NORMAL}}},Sr={name:"z-index",initialValue:"auto",prefix:!1,type:Ne.VALUE,parse:function t(e){if(e.type===te.IDENT_TOKEN)return{auto:!0,order:0};if(B(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},Pr={name:"opacity",initialValue:"1",type:Ne.VALUE,prefix:!1,parse:function t(e){return B(e)?e.number:1}},Tr={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:Ne.TYPE_VALUE,format:"color"},Er={name:"text-decoration-line",initialValue:"none",prefix:!1,type:Ne.LIST,parse:function t(e){return e.filter(C).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},Lr={name:"font-family",initialValue:"",prefix:!1,type:Ne.LIST,parse:function t(e){return e.filter(Qr).map((function(t){return t.value}))}},Qr=function t(e){return e.type===te.STRING_TOKEN||e.type===te.IDENT_TOKEN},Or={name:"font-size",initialValue:"0",prefix:!1,type:Ne.TYPE_VALUE,format:"length"},Ur={name:"font-weight",initialValue:"normal",type:Ne.VALUE,prefix:!1,parse:function t(e){if(B(e))return e.number;if(C(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},Hr={name:"font-variant",initialValue:"none",type:Ne.LIST,prefix:!1,parse:function t(e){return e.filter(C).map((function(t){return t.value}))}};(xr=br||(br={})).NORMAL="normal",xr.ITALIC="italic";var kr,Nr,Ir,Mr,Rr,Kr,jr,Vr,_r,zr,Xr,Wr={name:"font-style",initialValue:"normal",prefix:!(xr.OBLIQUE="oblique"),type:Ne.IDENT_VALUE,parse:function t(e){switch(e){case"oblique":return br.OBLIQUE;case"italic":return br.ITALIC;case"normal":default:return br.NORMAL}}},Yr={name:"content",initialValue:"none",type:Ne.LIST,prefix:!1,parse:function t(e){if(0===e.length)return[];var a=e[0];return a.type===te.IDENT_TOKEN&&"none"===a.value?[]:e}},qr={name:"counter-increment",initialValue:"none",prefix:!0,type:Ne.LIST,parse:function t(e){if(0===e.length)return null;var a=e[0];if(a.type===te.IDENT_TOKEN&&"none"===a.value)return null;for(var i=[],r=e.filter(x),s=0;s<r.length;s++){var n=r[s],o=r[s+1];if(n.type===te.IDENT_TOKEN){var h=o&&B(o)?o.number:1;i.push({counter:n.value,increment:h})}}return i}},Gr={name:"counter-reset",initialValue:"none",prefix:!0,type:Ne.LIST,parse:function t(e){if(0===e.length)return[];for(var a=[],i=e.filter(x),r=0;r<i.length;r++){var s=i[r],n=i[r+1];if(C(s)&&"none"!==s.value){var o=n&&B(n)?n.number:0;a.push({counter:s.value,reset:o})}}return a}},Jr={name:"quotes",initialValue:"none",prefix:!0,type:Ne.LIST,parse:function t(e){if(0===e.length)return null;var a=e[0];if(a.type===te.IDENT_TOKEN&&"none"===a.value)return null;var i=[],r=e.filter(D);if(r.length%2!=0)return null;for(var s=0;s<r.length;s+=2){var n=r[s].value,o=r[s+1].value;i.push({open:n,close:o})}return i}},Zr={name:"box-shadow",initialValue:"none",type:Ne.LIST,prefix:!1,parse:function t(e){return 1===e.length&&b(e[0],"none")?[]:S(e).map((function(t){for(var e={color:255,offsetX:Aa,offsetY:Aa,blur:Aa,spread:Aa,inset:!1},a=0,i=0;i<t.length;i++){var r=t[i];b(r,"inset")?e.inset=!0:P(r)?(0===a?e.offsetX=r:1===a?e.offsetY=r:2===a?e.blur=r:e.spread=r,a++):e.color=wa(r)}return e}))}},$r=(rt.prototype.isVisible=function(){return 0<this.display&&0<this.opacity&&this.visibility===pr.VISIBLE},rt.prototype.isTransparent=function(){return U(this.backgroundColor)},rt.prototype.isTransformed=function(){return null!==this.transform},rt.prototype.isPositioned=function(){return this.position!==nr.STATIC},rt.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},rt.prototype.isFloating=function(){return this.float!==vi.NONE},rt.prototype.isInlineLevel=function(){return at(this.display,4)||at(this.display,33554432)||at(this.display,268435456)||at(this.display,536870912)||at(this.display,67108864)||at(this.display,134217728)},rt),ts=function t(e){this.content=as(Yr,e.content),this.quotes=as(Jr,e.quotes)},es=function t(e){this.counterIncrement=as(qr,e.counterIncrement),this.counterReset=as(Gr,e.counterReset)},as=function t(e,a){var i=new ha,r=null!=a?a.toString():e.initialValue;i.write(r);var s=new ca(i.read());switch(e.type){case Ne.IDENT_VALUE:var n=s.parseComponentValue();return e.parse(C(n)?n.value:e.initialValue);case Ne.VALUE:return e.parse(s.parseComponentValue());case Ne.LIST:return e.parse(s.parseComponentValues());case Ne.TOKEN_VALUE:return s.parseComponentValue();case Ne.TYPE_VALUE:switch(e.format){case"angle":return ga(s.parseComponentValue());case"color":return wa(s.parseComponentValue());case"image":return Ja(s.parseComponentValue());case"length":var o=s.parseComponentValue();return P(o)?o:Aa;case"length-percentage":var h=s.parseComponentValue();return T(h)?h:Aa}}throw new Error("Attempting to parse unsupported css format type "+e.format)},is=function t(e){this.styles=new $r(window.getComputedStyle(e,null)),this.textNodes=[],this.elements=[],null!==this.styles.transform&&Es(e)&&(e.style.transform="none"),this.bounds=Vt(e),this.flags=0},rs=function t(e,a){this.text=e,this.bounds=a},ss=function t(e,a){this.text=ns(e.data,a.textTransform),this.textBounds=function(t,e,a){var i=function t(e,a){return 0!==a.letterSpacing?_t(e).map((function(t){return zt(t)})):function t(e,a){for(var i,r=function(t,e){var a=_t(t),i=function r(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var a=function(t,e){void 0===e&&(e="strict");var a=[],i=[],r=[];return t.forEach((function(t,s){var n=Pe.get(t);if(50<n?(r.push(!0),n-=50):r.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return i.push(s),a.push(16);if(4!==n&&11!==n)return i.push(s),31===n?a.push("strict"===e?le:Ce):n===Fe||29===n?a.push(we):43===n?131072<=t&&t<=196605||196608<=t&&t<=262141?a.push(Ce):a.push(we):void a.push(n);if(0===s)return i.push(s),a.push(we);var o=a[s-1];return-1===Oe.indexOf(o)?(i.push(i[s-1]),a.push(o)):(i.push(s),a.push(we))})),[i,a,r]}(t,e.lineBreak),i=a[0],r=a[1],s=a[2];return"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(r=r.map((function(t){return-1!==[pe,we,Fe].indexOf(t)?Ce:t}))),[i,r,"keep-all"===e.wordBreak?s.map((function(e,a){return e&&19968<=t[a]&&t[a]<=40959})):void 0]}(a,e),s=i[0],n=i[1],o=i[2],c=a.length,l=0,A=0;return{next:function t(){if(c<=A)return{done:!0,value:null};for(var e=Se;A<c&&(e=h(a,n,s,++A,o))===Se;);if(e===Se&&A!==c)return{done:!0,value:null};var i=new ke(a,e,l,A);return l=A,{value:i,done:!1}}}}(e,{lineBreak:a.lineBreak,wordBreak:a.overflowWrap===Gi.BREAK_WORD?"break-word":a.wordBreak}),s=[];!(i=r.next()).done;)i.value&&s.push(i.value.slice());return s}(e,a)}(t,e),r=[],s=0;return i.forEach((function(t){if(e.textDecorationLine.length||0<t.trim().length)if(La.SUPPORT_RANGE_BOUNDS)r.push(new rs(t,function t(e,a,i){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(e,a),s.setEnd(e,a+i),jt.fromClientRect(s.getBoundingClientRect())}(a,s,t.length)));else{var i=a.splitText(t.length);r.push(new rs(t,function t(e){var a=e.ownerDocument;if(a){var i=a.createElement("html2canvaswrapper");i.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(i,e);var s=Vt(i);return i.firstChild&&r.replaceChild(i.firstChild,i),s}}return new jt(0,0,0,0)}(a))),a=i}else La.SUPPORT_RANGE_BOUNDS||(a=a.splitText(t.length));s+=t.length})),r}(this.text,a,e)},ns=function t(e,a){switch(a){case cr.LOWERCASE:return e.toLowerCase();case cr.CAPITALIZE:return e.replace(os,hs);case cr.UPPERCASE:return e.toUpperCase();default:return e}},os=/(^|\s|:|-|\(|\))([a-z])/g,hs=function t(e,a,i){return 0<e.length?a+i.toUpperCase():e},cs=(t(st,kr=is),st),ls=(t(nt,Nr=is),nt),As=(t(ot,Ir=is),ot),ds=(t(ht,Mr=is),ht),ps=(t(ct,Rr=is),ct),us=[{type:te.DIMENSION_TOKEN,flags:0,unit:"px",number:3}],gs=[{type:te.PERCENTAGE_TOKEN,flags:0,number:50}],fs="checkbox",ws="radio",vs=707406591,ys=(t(lt,Kr=is),lt),ms=(t(At,jr=is),At),Bs=(t(dt,Vr=is),dt),Cs=(t(ut,_r=is),ut),Ds=["OL","UL","MENU"],bs=function t(e){return Ns(e)?new cs(e):ks(e)?new ls(e):Us(e)?new As(e):Ls(e)?new ds(e):Qs(e)?new ps(e):Os(e)?new ys(e):Rs(e)?new ms(e):Ms(e)?new Bs(e):Is(e)?new Cs(e):new is(e)},xs=function t(e){var a=bs(e);return a.flags|=4,function t(e,a,i){for(var r=e.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,Ps(r)&&0<r.data.trim().length)a.textNodes.push(new ss(r,a.styles));else if(Ts(r)){var n=bs(r);n.styles.isVisible()&&(Fs(r,n,i)?n.flags|=4:Ss(n.styles)&&(n.flags|=2),-1!==Ds.indexOf(r.tagName)&&(n.flags|=8),a.elements.push(n),Ms(r)||Us(r)||Rs(r)||t(r,n,i))}}(e,a,a),a},Fs=function t(e,a,i){return a.styles.isPositionedWithZIndex()||a.styles.opacity<1||a.styles.isTransformed()||Hs(e)&&i.styles.isTransparent()},Ss=function t(e){return e.isPositioned()||e.isFloating()},Ps=function t(e){return e.nodeType===Node.TEXT_NODE},Ts=function t(e){return e.nodeType===Node.ELEMENT_NODE},Es=function t(e){return void 0!==e.style},Ls=function t(e){return"LI"===e.tagName},Qs=function t(e){return"OL"===e.tagName},Os=function t(e){return"INPUT"===e.tagName},Us=function t(e){return"svg"===e.tagName},Hs=function t(e){return"BODY"===e.tagName},ks=function t(e){return"CANVAS"===e.tagName},Ns=function t(e){return"IMG"===e.tagName},Is=function t(e){return"IFRAME"===e.tagName},Ms=function t(e){return"TEXTAREA"===e.tagName},Rs=function t(e){return"SELECT"===e.tagName},Ks=(ft.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},ft.prototype.getCounterValues=function(t){return this.counters[t]||[]},ft.prototype.pop=function(t){var e=this;t.forEach((function(t){return e.counters[t].pop()}))},ft.prototype.parse=function(t){var e=this,a=t.counterIncrement,i=t.counterReset,r=!0;null!==a&&a.forEach((function(t){var a=e.counters[t.counter];a&&0!==t.increment&&(r=!1,a[Math.max(0,a.length-1)]+=t.increment)}));var s=[];return r&&i.forEach((function(t){var a=e.counters[t.counter];s.push(t.counter),a||(a=e.counters[t.counter]=[]),a.push(t.reset)})),s},ft),js={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},Vs={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},_s={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},zs={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},Xs="마이너스",Ws=function t(e,a,i){var r=i?". ":"",s=i?"、":"",n=i?", ":"",o=i?" ":"";switch(a){case Ri.DISC:return"•"+o;case Ri.CIRCLE:return"◦"+o;case Ri.SQUARE:return"◾"+o;case Ri.DECIMAL_LEADING_ZERO:var h=yt(e,48,57,!0,r);return h.length<4?"0"+h:h;case Ri.CJK_DECIMAL:return mt(e,"〇一二三四五六七八九",s);case Ri.LOWER_ROMAN:return wt(e,1,3999,js,Ri.DECIMAL,r).toLowerCase();case Ri.UPPER_ROMAN:return wt(e,1,3999,js,Ri.DECIMAL,r);case Ri.LOWER_GREEK:return yt(e,945,969,!1,r);case Ri.LOWER_ALPHA:return yt(e,97,122,!1,r);case Ri.UPPER_ALPHA:return yt(e,65,90,!1,r);case Ri.ARABIC_INDIC:return yt(e,1632,1641,!0,r);case Ri.ARMENIAN:case Ri.UPPER_ARMENIAN:return wt(e,1,9999,Vs,Ri.DECIMAL,r);case Ri.LOWER_ARMENIAN:return wt(e,1,9999,Vs,Ri.DECIMAL,r).toLowerCase();case Ri.BENGALI:return yt(e,2534,2543,!0,r);case Ri.CAMBODIAN:case Ri.KHMER:return yt(e,6112,6121,!0,r);case Ri.CJK_EARTHLY_BRANCH:return mt(e,"子丑寅卯辰巳午未申酉戌亥",s);case Ri.CJK_HEAVENLY_STEM:return mt(e,"甲乙丙丁戊己庚辛壬癸",s);case Ri.CJK_IDEOGRAPHIC:case Ri.TRAD_CHINESE_INFORMAL:return Bt(e,"零一二三四五六七八九","十百千萬","負",s,14);case Ri.TRAD_CHINESE_FORMAL:return Bt(e,"零壹貳參肆伍陸柒捌玖","拾佰仟萬","負",s,15);case Ri.SIMP_CHINESE_INFORMAL:return Bt(e,"零一二三四五六七八九","十百千萬","负",s,14);case Ri.SIMP_CHINESE_FORMAL:return Bt(e,"零壹贰叁肆伍陆柒捌玖","拾佰仟萬","负",s,15);case Ri.JAPANESE_INFORMAL:return Bt(e,"〇一二三四五六七八九","十百千万","マイナス",s,0);case Ri.JAPANESE_FORMAL:return Bt(e,"零壱弐参四伍六七八九","拾百千万","マイナス",s,7);case Ri.KOREAN_HANGUL_FORMAL:return Bt(e,"영일이삼사오육칠팔구","십백천만",Xs,n,7);case Ri.KOREAN_HANJA_INFORMAL:return Bt(e,"零一二三四五六七八九","十百千萬",Xs,n,0);case Ri.KOREAN_HANJA_FORMAL:return Bt(e,"零壹貳參四五六七八九","拾百千",Xs,n,7);case Ri.DEVANAGARI:return yt(e,2406,2415,!0,r);case Ri.GEORGIAN:return wt(e,1,19999,zs,Ri.DECIMAL,r);case Ri.GUJARATI:return yt(e,2790,2799,!0,r);case Ri.GURMUKHI:return yt(e,2662,2671,!0,r);case Ri.HEBREW:return wt(e,1,10999,_s,Ri.DECIMAL,r);case Ri.HIRAGANA:return mt(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case Ri.HIRAGANA_IROHA:return mt(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case Ri.KANNADA:return yt(e,3302,3311,!0,r);case Ri.KATAKANA:return mt(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case Ri.KATAKANA_IROHA:return mt(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case Ri.LAO:return yt(e,3792,3801,!0,r);case Ri.MONGOLIAN:return yt(e,6160,6169,!0,r);case Ri.MYANMAR:return yt(e,4160,4169,!0,r);case Ri.ORIYA:return yt(e,2918,2927,!0,r);case Ri.PERSIAN:return yt(e,1776,1785,!0,r);case Ri.TAMIL:return yt(e,3046,3055,!0,r);case Ri.TELUGU:return yt(e,3174,3183,!0,r);case Ri.THAI:return yt(e,3664,3673,!0,r);case Ri.TIBETAN:return yt(e,3872,3881,!0,r);case Ri.DECIMAL:default:return yt(e,48,57,!0,r)}},Ys="data-html2canvas-ignore",qs=(Ct.prototype.toIFrame=function(t,i){var r=this,s=Zs(t,i);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var n=t.defaultView.pageXOffset,o=t.defaultView.pageYOffset,h=s.contentWindow,c=h.document,l=$s(s).then((function(){return e(r,void 0,void 0,(function(){var t;return a(this,(function(e){switch(e.label){case 0:return this.scrolledElements.forEach(rn),h&&(h.scrollTo(i.left,i.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||h.scrollY===i.top&&h.scrollX===i.left||(c.documentElement.style.top=-i.top+"px",c.documentElement.style.left=-i.left+"px",c.documentElement.style.position="absolute")),t=this.options.onclone,void 0===this.clonedReferenceElement?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:c.fonts&&c.fonts.ready?[4,c.fonts.ready]:[3,2];case 1:e.sent(),e.label=2;case 2:return"function"==typeof t?[2,Promise.resolve().then((function(){return t(c)})).then((function(){return s}))]:[2,s]}}))}))}));return c.open(),c.write(en(document.doctype)+"<html></html>"),an(this.referenceElement.ownerDocument,n,o),c.replaceChild(c.adoptNode(this.documentElement),c.documentElement),c.close(),l},Ct.prototype.createElementClone=function(t){return ks(t)?this.createCanvasClone(t):gt(t)?this.createStyleClone(t):t.cloneNode(!1)},Ct.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var a=[].slice.call(e.cssRules,0).reduce((function(t,e){return e&&"string"==typeof e.cssText?t+e.cssText:t}),""),i=t.cloneNode(!1);return i.textContent=a,i}}catch(t){if(Qa.getInstance(this.options.id).error("Unable to access cssRules property",t),"SecurityError"!==t.name)throw t}return t.cloneNode(!1)},Ct.prototype.createCanvasClone=function(t){if(this.options.inlineImages&&t.ownerDocument){var e=t.ownerDocument.createElement("img");try{return e.src=t.toDataURL(),e}catch(t){Qa.getInstance(this.options.id).info("Unable to clone canvas contents, canvas is tainted")}}var a=t.cloneNode(!1);try{a.width=t.width,a.height=t.height;var i=t.getContext("2d"),r=a.getContext("2d");return r&&(i?r.putImageData(i.getImageData(0,0,t.width,t.height),0,0):r.drawImage(t,0,0)),a}catch(t){}return a},Ct.prototype.cloneNode=function(t){if(Ps(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var e=t.ownerDocument.defaultView;if(Es(t)&&e){var a=this.createElementClone(t),i=e.getComputedStyle(t),r=e.getComputedStyle(t,":before"),s=e.getComputedStyle(t,":after");this.referenceElement===t&&(this.clonedReferenceElement=a),Hs(a)&&hn(a);for(var n=this.counters.parse(new es(i)),o=this.resolvePseudoContent(t,a,r,zr.BEFORE),h=t.firstChild;h;h=h.nextSibling)Ts(h)&&("SCRIPT"===h.tagName||h.hasAttribute(Ys)||"function"==typeof this.options.ignoreElements&&this.options.ignoreElements(h))||this.options.copyStyles&&Ts(h)&&gt(h)||a.appendChild(this.cloneNode(h));o&&a.insertBefore(o,a.firstChild);var c=this.resolvePseudoContent(t,a,s,zr.AFTER);return c&&a.appendChild(c),this.counters.pop(n),i&&this.options.copyStyles&&!Is(t)&&tn(i,a),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([a,t.scrollLeft,t.scrollTop]),(Ms(t)||Rs(t))&&(Ms(a)||Rs(a))&&(a.value=t.value),a}return t.cloneNode(!1)},Ct.prototype.resolvePseudoContent=function(t,e,a,i){var r=this;if(a){var s=a.content,n=e.ownerDocument;if(n&&s&&"none"!==s&&"-moz-alt-content"!==s&&"none"!==a.display){this.counters.parse(new es(a));var o=new ts(a),h=n.createElement("html2canvaspseudoelement");return tn(a,h),o.content.forEach((function(e){if(e.type===te.STRING_TOKEN)h.appendChild(n.createTextNode(e.value));else if(e.type===te.URL_TOKEN){var a=n.createElement("img");a.src=e.value,a.style.opacity="1",h.appendChild(a)}else if(e.type===te.FUNCTION){if("attr"===e.name){var i=e.values.filter(C);i.length&&h.appendChild(n.createTextNode(t.getAttribute(i[0].value)||""))}else if("counter"===e.name){var s=e.values.filter(F),c=s[0],l=s[1];if(c&&C(c)){var A=r.counters.getCounterValue(c.value),d=l&&C(l)?zi.parse(l.value):Ri.DECIMAL;h.appendChild(n.createTextNode(Ws(A,d,!1)))}}else if("counters"===e.name){var p=e.values.filter(F),u=(c=p[0],p[1]);if(l=p[2],c&&C(c)){var g=r.counters.getCounterValues(c.value),f=l&&C(l)?zi.parse(l.value):Ri.DECIMAL,w=u&&u.type===te.STRING_TOKEN?u.value:"",v=g.map((function(t){return Ws(t,f,!1)})).join(w);h.appendChild(n.createTextNode(v))}}}else if(e.type===te.IDENT_TOKEN)switch(e.value){case"open-quote":h.appendChild(n.createTextNode(it(o.quotes,r.quoteDepth++,!0)));break;case"close-quote":h.appendChild(n.createTextNode(it(o.quotes,--r.quoteDepth,!1)));break;default:h.appendChild(n.createTextNode(e.value))}})),h.className=sn+" "+nn,e.className+=i===zr.BEFORE?" "+sn:" "+nn,h}}},Ct.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},Ct);(Xr=zr||(zr={}))[Xr.BEFORE=0]="BEFORE",Xr[Xr.AFTER=1]="AFTER";var Gs,Js,Zs=function t(e,a){var i=e.createElement("iframe");return i.className="html2canvas-container",i.style.visibility="hidden",i.style.position="fixed",i.style.left="-10000px",i.style.top="0px",i.style.border="0",i.width=a.width.toString(),i.height=a.height.toString(),i.scrolling="no",i.setAttribute(Ys,"true"),e.body.appendChild(i),i},$s=function t(e){return new Promise((function(t,a){var i=e.contentWindow;if(!i)return a("No window assigned for iframe");var r=i.document;i.onload=e.onload=r.onreadystatechange=function(){i.onload=e.onload=r.onreadystatechange=null;var a=setInterval((function(){0<r.body.childNodes.length&&"complete"===r.readyState&&(clearInterval(a),t(e))}),50)}}))},tn=function t(e,a){for(var i=e.length-1;0<=i;i--){var r=e.item(i);"content"!==r&&a.style.setProperty(r,e.getPropertyValue(r))}return a},en=function t(e){var a="";return e&&(a+="<!DOCTYPE ",e.name&&(a+=e.name),e.internalSubset&&(a+=e.internalSubset),e.publicId&&(a+='"'+e.publicId+'"'),e.systemId&&(a+='"'+e.systemId+'"'),a+=">"),a},an=function t(e,a,i){e&&e.defaultView&&(a!==e.defaultView.pageXOffset||i!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(a,i)},rn=function t(e){var a=e[0],i=e[1],r=e[2];a.scrollLeft=i,a.scrollTop=r},sn="___html2canvas___pseudoelement_before",nn="___html2canvas___pseudoelement_after",on='{\n    content: "" !important;\n    display: none !important;\n}',hn=function t(e){cn(e,"."+sn+":before"+on+"\n         ."+nn+":after"+on)},cn=function t(e,a){var i=e.ownerDocument;if(i){var r=i.createElement("style");r.textContent=a,e.appendChild(r)}};(Js=Gs||(Gs={}))[Js.VECTOR=0]="VECTOR",Js[Js.BEZIER_CURVE=1]="BEZIER_CURVE";var ln,An,dn=(bt.prototype.add=function(t,e){return new bt(this.x+t,this.y+e)},bt),pn=(Ft.prototype.subdivide=function(t,e){var a=xt(this.start,this.startControl,t),i=xt(this.startControl,this.endControl,t),r=xt(this.endControl,this.end,t),s=xt(a,i,t),n=xt(i,r,t),o=xt(s,n,t);return e?new Ft(this.start,a,s,o):new Ft(o,n,r,this.end)},Ft.prototype.add=function(t,e){return new Ft(this.start.add(t,e),this.startControl.add(t,e),this.endControl.add(t,e),this.end.add(t,e))},Ft.prototype.reverse=function(){return new Ft(this.end,this.endControl,this.startControl,this.start)},Ft),un=function t(e){var a=e.styles,i=e.bounds,r=L(a.borderTopLeftRadius,i.width,i.height),s=r[0],n=r[1],o=L(a.borderTopRightRadius,i.width,i.height),h=o[0],c=o[1],l=L(a.borderBottomRightRadius,i.width,i.height),A=l[0],d=l[1],p=L(a.borderBottomLeftRadius,i.width,i.height),u=p[0],g=p[1],f=[];f.push((s+h)/i.width),f.push((u+A)/i.width),f.push((n+g)/i.height),f.push((c+d)/i.height);var w=Math.max.apply(Math,f);1<w&&(s/=w,n/=w,h/=w,c/=w,A/=w,d/=w,u/=w,g/=w);var v=i.width-h,y=i.height-d,m=i.width-A,B=i.height-g,C=a.borderTopWidth,D=a.borderRightWidth,b=a.borderBottomWidth,x=a.borderLeftWidth,F=ua(a.paddingTop,e.bounds.width),S=ua(a.paddingRight,e.bounds.width),P=ua(a.paddingBottom,e.bounds.width),T=ua(a.paddingLeft,e.bounds.width);this.topLeftBorderBox=0<s||0<n?gn(i.left,i.top,s,n,ln.TOP_LEFT):new dn(i.left,i.top),this.topRightBorderBox=0<h||0<c?gn(i.left+v,i.top,h,c,ln.TOP_RIGHT):new dn(i.left+i.width,i.top),this.bottomRightBorderBox=0<A||0<d?gn(i.left+m,i.top+y,A,d,ln.BOTTOM_RIGHT):new dn(i.left+i.width,i.top+i.height),this.bottomLeftBorderBox=0<u||0<g?gn(i.left,i.top+B,u,g,ln.BOTTOM_LEFT):new dn(i.left,i.top+i.height),this.topLeftPaddingBox=0<s||0<n?gn(i.left+x,i.top+C,Math.max(0,s-x),Math.max(0,n-C),ln.TOP_LEFT):new dn(i.left+x,i.top+C),this.topRightPaddingBox=0<h||0<c?gn(i.left+Math.min(v,i.width+x),i.top+C,v>i.width+x?0:h-x,c-C,ln.TOP_RIGHT):new dn(i.left+i.width-D,i.top+C),this.bottomRightPaddingBox=0<A||0<d?gn(i.left+Math.min(m,i.width-x),i.top+Math.min(y,i.height+C),Math.max(0,A-D),d-b,ln.BOTTOM_RIGHT):new dn(i.left+i.width-D,i.top+i.height-b),this.bottomLeftPaddingBox=0<u||0<g?gn(i.left+x,i.top+B,Math.max(0,u-x),g-b,ln.BOTTOM_LEFT):new dn(i.left+x,i.top+i.height-b),this.topLeftContentBox=0<s||0<n?gn(i.left+x+T,i.top+C+F,Math.max(0,s-(x+T)),Math.max(0,n-(C+F)),ln.TOP_LEFT):new dn(i.left+x+T,i.top+C+F),this.topRightContentBox=0<h||0<c?gn(i.left+Math.min(v,i.width+x+T),i.top+C+F,v>i.width+x+T?0:h-x+T,c-(C+F),ln.TOP_RIGHT):new dn(i.left+i.width-(D+S),i.top+C+F),this.bottomRightContentBox=0<A||0<d?gn(i.left+Math.min(m,i.width-(x+T)),i.top+Math.min(y,i.height+C+F),Math.max(0,A-(D+S)),d-(b+P),ln.BOTTOM_RIGHT):new dn(i.left+i.width-(D+S),i.top+i.height-(b+P)),this.bottomLeftContentBox=0<u||0<g?gn(i.left+x+T,i.top+B,Math.max(0,u-(x+T)),g-(b+P),ln.BOTTOM_LEFT):new dn(i.left+x+T,i.top+i.height-(b+P))};(An=ln||(ln={}))[An.TOP_LEFT=0]="TOP_LEFT",An[An.TOP_RIGHT=1]="TOP_RIGHT",An[An.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",An[An.BOTTOM_LEFT=3]="BOTTOM_LEFT";var gn=function t(e,a,i,r,s){var n=(Math.sqrt(2)-1)/3*4,o=i*n,h=r*n,c=e+i,l=a+r;switch(s){case ln.TOP_LEFT:return new pn(new dn(e,l),new dn(e,l-h),new dn(c-o,a),new dn(c,a));case ln.TOP_RIGHT:return new pn(new dn(e,a),new dn(e+o,a),new dn(c,l-h),new dn(c,l));case ln.BOTTOM_RIGHT:return new pn(new dn(c,a),new dn(c,a+h),new dn(e+o,l),new dn(e,l));case ln.BOTTOM_LEFT:default:return new pn(new dn(c,l),new dn(c-o,l),new dn(e,a+h),new dn(e,a))}},fn=function t(e,a,i){this.type=0,this.offsetX=e,this.offsetY=a,this.matrix=i,this.target=6},wn=function t(e,a){this.type=1,this.target=a,this.path=e},vn=function t(e){this.element=e,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]},yn=(Et.prototype.getParentEffects=function(){var t=this.effects.slice(0);if(this.container.styles.overflowX!==Vi.VISIBLE){var e=Pt(this.curves),a=Tt(this.curves);Dt(e,a)||t.push(new wn(a,6))}return t},Et),mn=function t(e,a){for(var i=e instanceof ps?e.start:1,r=e instanceof ps&&e.reversed,s=0;s<a.length;s++){var n=a[s];n.container instanceof ds&&"number"==typeof n.container.value&&0!==n.container.value&&(i=n.container.value),n.listValue=Ws(i,n.container.styles.listStyleType,!0),i+=r?-1:1}},Bn=function t(e,a,i,r){var s=[];return St(e)?s.push(e.subdivide(.5,!1)):s.push(e),St(i)?s.push(i.subdivide(.5,!0)):s.push(i),St(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),St(a)?s.push(a.subdivide(.5,!1).reverse()):s.push(a),s},Cn=function t(e,a,i){var r=a[0],s=a[1],n=a[2],o=e[0],h=e[1];if(T(o)&&h&&T(h))return[ua(o,i.width),ua(h,i.height)];var c=Ht(n);if(C(o)&&(o.value===ai.CONTAIN||o.value===ai.COVER))return Ht(n)?i.width/i.height<n!=(o.value===ai.COVER)?[i.width,i.width/n]:[i.height*n,i.height]:[i.width,i.height];var l=Ht(r),A=Ht(s),d=l||A;if(Ut(o)&&(!h||Ut(h)))return l&&A?[r,s]:c||d?d&&c?[l?r:s*n,A?s:r/n]:[l?r:i.width,A?s:i.height]:[i.width,i.height];if(c){var p=0,u=0;return T(o)?p=ua(o,i.width):T(h)&&(u=ua(h,i.height)),Ut(o)?p=u*n:h&&!Ut(h)||(u=p/n),[p,u]}var g=null,f=null;if(T(o)?g=ua(o,i.width):h&&T(h)&&(f=ua(h,i.height)),null===g||h&&!Ut(h)||(f=l&&A?g/r*s:i.height),null!==f&&Ut(o)&&(g=l&&A?f/s*r:i.width),null!==g&&null!==f)return[g,f];throw new Error("Unable to calculate background-size for element")},Dn=function t(e,a){var i=e[a];return void 0===i?e[0]:i},bn=function t(e,a,i,r,s){var n=a[0],o=a[1],h=i[0],c=i[1];switch(e){case qa.REPEAT_X:return[new dn(Math.round(r.left),Math.round(r.top+o)),new dn(Math.round(r.left+r.width),Math.round(r.top+o)),new dn(Math.round(r.left+r.width),Math.round(c+r.top+o)),new dn(Math.round(r.left),Math.round(c+r.top+o))];case qa.REPEAT_Y:return[new dn(Math.round(r.left+n),Math.round(r.top)),new dn(Math.round(r.left+n+h),Math.round(r.top)),new dn(Math.round(r.left+n+h),Math.round(r.height+r.top)),new dn(Math.round(r.left+n),Math.round(r.height+r.top))];case qa.NO_REPEAT:return[new dn(Math.round(r.left+n),Math.round(r.top+o)),new dn(Math.round(r.left+n+h),Math.round(r.top+o)),new dn(Math.round(r.left+n+h),Math.round(r.top+o+c)),new dn(Math.round(r.left+n),Math.round(r.top+o+c))];default:return[new dn(Math.round(s.left),Math.round(s.top)),new dn(Math.round(s.left+s.width),Math.round(s.top)),new dn(Math.round(s.left+s.width),Math.round(s.height+s.top)),new dn(Math.round(s.left),Math.round(s.height+s.top))]}},xn="Hidden Text",Fn=(kt.prototype.parseMetrics=function(t,e){var a=this._document.createElement("div"),i=this._document.createElement("img"),r=this._document.createElement("span"),s=this._document.body;a.style.visibility="hidden",a.style.fontFamily=t,a.style.fontSize=e,a.style.margin="0",a.style.padding="0",s.appendChild(a),i.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",r.style.fontFamily=t,r.style.fontSize=e,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(xn)),a.appendChild(r),a.appendChild(i);var n=i.offsetTop-r.offsetTop+2;a.removeChild(r),a.appendChild(this._document.createTextNode(xn)),a.style.lineHeight="normal",i.style.verticalAlign="super";var o=i.offsetTop-a.offsetTop+2;return s.removeChild(a),{baseline:n,middle:o}},kt.prototype.getMetrics=function(t,e){var a=t+" "+e;return void 0===this._data[a]&&(this._data[a]=this.parseMetrics(t,e)),this._data[a]},kt),Sn=(Nt.prototype.applyEffects=function(t,e){for(var a=this;this._activeEffects.length;)this.popEffect();t.filter((function(t){return at(t.target,e)})).forEach((function(t){return a.applyEffect(t)}))},Nt.prototype.applyEffect=function(t){this.ctx.save(),function(t){return 0===t.type}(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),function(t){return 1===t.type}(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},Nt.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},Nt.prototype.renderStack=function(t){return e(this,void 0,void 0,(function(){var e;return a(this,(function(a){switch(a.label){case 0:return(e=t.element.container.styles).isVisible()?(this.ctx.globalAlpha=e.opacity,[4,this.renderStackContent(t)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}}))}))},Nt.prototype.renderNode=function(t){return e(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},Nt.prototype.renderTextWithLetterSpacing=function(t,e){var a=this;0===e?this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height):_t(t.text).map((function(t){return zt(t)})).reduce((function(e,i){return a.ctx.fillText(i,e,t.bounds.top+t.bounds.height),e+a.ctx.measureText(i).width}),t.bounds.left)},Nt.prototype.createFontStyle=function(t){var e=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),a=t.fontFamily.join(", "),i=m(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,i,a].join(" "),a,i]},Nt.prototype.renderTextNode=function(t,i){return e(this,void 0,void 0,(function(){var e,r,s,n,o=this;return a(this,(function(){return e=this.createFontStyle(i),r=e[0],s=e[1],n=e[2],this.ctx.font=r,t.textBounds.forEach((function(t){o.ctx.fillStyle=H(i.color),o.renderTextWithLetterSpacing(t,i.letterSpacing);var e=i.textShadow;e.length&&t.text.trim().length&&(e.slice(0).reverse().forEach((function(e){o.ctx.shadowColor=H(e.color),o.ctx.shadowOffsetX=e.offsetX.number*o.options.scale,o.ctx.shadowOffsetY=e.offsetY.number*o.options.scale,o.ctx.shadowBlur=e.blur.number,o.ctx.fillText(t.text,t.bounds.left,t.bounds.top+t.bounds.height)})),o.ctx.shadowColor="",o.ctx.shadowOffsetX=0,o.ctx.shadowOffsetY=0,o.ctx.shadowBlur=0),i.textDecorationLine.length&&(o.ctx.fillStyle=H(i.textDecorationColor||i.color),i.textDecorationLine.forEach((function(e){switch(e){case 1:var a=o.fontMetrics.getMetrics(s,n).baseline;o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+a),t.bounds.width,1);break;case 2:o.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:var i=o.fontMetrics.getMetrics(s,n).middle;o.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+i),t.bounds.width,1)}})))})),[2]}))}))},Nt.prototype.renderReplacedElement=function(t,e,a){if(a&&0<t.intrinsicWidth&&0<t.intrinsicHeight){var i=Qt(t),r=Tt(e);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(a,0,0,t.intrinsicWidth,t.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},Nt.prototype.renderNodeContent=function(t){return e(this,void 0,void 0,(function(){var e,i,r,s,n,o,h,c,l,A,d,p,u,g;return a(this,(function(a){switch(a.label){case 0:this.applyEffects(t.effects,4),e=t.container,i=t.curves,r=e.styles,s=0,n=e.textNodes,a.label=1;case 1:return s<n.length?(o=n[s],[4,this.renderTextNode(o,r)]):[3,4];case 2:a.sent(),a.label=3;case 3:return s++,[3,1];case 4:if(!(e instanceof cs))return[3,8];a.label=5;case 5:return a.trys.push([5,7,,8]),[4,this.options.cache.match(e.src)];case 6:return p=a.sent(),this.renderReplacedElement(e,i,p),[3,8];case 7:return a.sent(),Qa.getInstance(this.options.id).error("Error loading image "+e.src),[3,8];case 8:if(e instanceof ls&&this.renderReplacedElement(e,i,e.canvas),!(e instanceof As))return[3,12];a.label=9;case 9:return a.trys.push([9,11,,12]),[4,this.options.cache.match(e.svg)];case 10:return p=a.sent(),this.renderReplacedElement(e,i,p),[3,12];case 11:return a.sent(),Qa.getInstance(this.options.id).error("Error loading svg "+e.svg.substring(0,255)),[3,12];case 12:return e instanceof Cs&&e.tree?[4,new Nt({id:this.options.id,scale:this.options.scale,backgroundColor:e.backgroundColor,x:0,y:0,scrollX:0,scrollY:0,width:e.width,height:e.height,cache:this.options.cache,windowWidth:e.width,windowHeight:e.height}).render(e.tree)]:[3,14];case 13:h=a.sent(),e.width&&e.height&&this.ctx.drawImage(h,0,0,e.width,e.height,e.bounds.left,e.bounds.top,e.bounds.width,e.bounds.height),a.label=14;case 14:if(e instanceof ys&&(c=Math.min(e.bounds.width,e.bounds.height),e.type===fs?e.checked&&(this.ctx.save(),this.path([new dn(e.bounds.left+.39363*c,e.bounds.top+.79*c),new dn(e.bounds.left+.16*c,e.bounds.top+.5549*c),new dn(e.bounds.left+.27347*c,e.bounds.top+.44071*c),new dn(e.bounds.left+.39694*c,e.bounds.top+.5649*c),new dn(e.bounds.left+.72983*c,e.bounds.top+.23*c),new dn(e.bounds.left+.84*c,e.bounds.top+.34085*c),new dn(e.bounds.left+.39363*c,e.bounds.top+.79*c)]),this.ctx.fillStyle=H(vs),this.ctx.fill(),this.ctx.restore()):e.type===ws&&e.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(e.bounds.left+c/2,e.bounds.top+c/2,c/4,0,2*Math.PI,!0),this.ctx.fillStyle=H(vs),this.ctx.fill(),this.ctx.restore())),Pn(e)&&e.value.length){switch(this.ctx.font=this.createFontStyle(r)[0],this.ctx.fillStyle=H(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign=En(e.styles.textAlign),g=Qt(e),l=0,e.styles.textAlign){case Zi.CENTER:l+=g.width/2;break;case Zi.RIGHT:l+=g.width}A=g.add(l,0,0,-g.height/2+1),this.ctx.save(),this.path([new dn(g.left,g.top),new dn(g.left+g.width,g.top),new dn(g.left+g.width,g.top+g.height),new dn(g.left,g.top+g.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new rs(e.value,A),r.letterSpacing),this.ctx.restore(),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"}if(!at(e.styles.display,2048))return[3,20];if(null===e.styles.listStyleImage)return[3,19];if((d=e.styles.listStyleImage).type!==Ba.URL)return[3,18];p=void 0,u=d.url,a.label=15;case 15:return a.trys.push([15,17,,18]),[4,this.options.cache.match(u)];case 16:return p=a.sent(),this.ctx.drawImage(p,e.bounds.left-(p.width+10),e.bounds.top),[3,18];case 17:return a.sent(),Qa.getInstance(this.options.id).error("Error loading list-style-image "+u),[3,18];case 18:return[3,20];case 19:t.listValue&&e.styles.listStyleType!==Ri.NONE&&(this.ctx.font=this.createFontStyle(r)[0],this.ctx.fillStyle=H(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",g=new jt(e.bounds.left,e.bounds.top+ua(e.styles.paddingTop,e.bounds.width),e.bounds.width,function(t,e){return C(t)&&"normal"===t.value?1.2*e:t.type===te.NUMBER_TOKEN?e*t.number:T(t)?ua(t,e):e}(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new rs(t.listValue,g),r.letterSpacing),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),a.label=20;case 20:return[2]}}))}))},Nt.prototype.renderStackContent=function(t){return e(this,void 0,void 0,(function(){var e,i,r,s,n,o,h,c,l,A,d,p,u,g,f;return a(this,(function(a){switch(a.label){case 0:return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:a.sent(),e=0,i=t.negativeZIndex,a.label=2;case 2:return e<i.length?(f=i[e],[4,this.renderStack(f)]):[3,5];case 3:a.sent(),a.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:a.sent(),r=0,s=t.nonInlineLevel,a.label=7;case 7:return r<s.length?(f=s[r],[4,this.renderNode(f)]):[3,10];case 8:a.sent(),a.label=9;case 9:return r++,[3,7];case 10:n=0,o=t.nonPositionedFloats,a.label=11;case 11:return n<o.length?(f=o[n],[4,this.renderStack(f)]):[3,14];case 12:a.sent(),a.label=13;case 13:return n++,[3,11];case 14:h=0,c=t.nonPositionedInlineLevel,a.label=15;case 15:return h<c.length?(f=c[h],[4,this.renderStack(f)]):[3,18];case 16:a.sent(),a.label=17;case 17:return h++,[3,15];case 18:l=0,A=t.inlineLevel,a.label=19;case 19:return l<A.length?(f=A[l],[4,this.renderNode(f)]):[3,22];case 20:a.sent(),a.label=21;case 21:return l++,[3,19];case 22:d=0,p=t.zeroOrAutoZIndexOrTransformedOrOpacity,a.label=23;case 23:return d<p.length?(f=p[d],[4,this.renderStack(f)]):[3,26];case 24:a.sent(),a.label=25;case 25:return d++,[3,23];case 26:u=0,g=t.positiveZIndex,a.label=27;case 27:return u<g.length?(f=g[u],[4,this.renderStack(f)]):[3,30];case 28:a.sent(),a.label=29;case 29:return u++,[3,27];case 30:return[2]}}))}))},Nt.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},Nt.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},Nt.prototype.formatPath=function(t){var e=this;t.forEach((function(t,a){var i=St(t)?t.start:t;0===a?e.ctx.moveTo(i.x,i.y):e.ctx.lineTo(i.x,i.y),St(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},Nt.prototype.renderRepeat=function(t,e,a,i){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(a,i),this.ctx.fill(),this.ctx.translate(-a,-i)},Nt.prototype.resizeImage=function(t,e,a){if(t.width===e&&t.height===a)return t;var i=this.canvas.ownerDocument.createElement("canvas");return i.width=e,i.height=a,i.getContext("2d").drawImage(t,0,0,t.width,t.height,0,0,e,a),i},Nt.prototype.renderBackgroundImage=function(t){return e(this,void 0,void 0,(function(){var e,i,r,s,n,o;return a(this,(function(h){switch(h.label){case 0:e=t.styles.backgroundImage.length-1,i=function i(s){var n,o,h,c,l,A,d,p,u,g,f,w,v,y,m,B,C,D,b,x,F,S,P,T,E,L,Q,O,U,k,N;return a(this,(function(a){switch(a.label){case 0:if(s.type!==Ba.URL)return[3,5];n=void 0,o=s.url,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,r.options.cache.match(o)];case 2:return n=a.sent(),[3,4];case 3:return a.sent(),Qa.getInstance(r.options.id).error("Error loading background-image "+o),[3,4];case 4:return n&&(h=Ot(t,e,[n.width,n.height,n.width/n.height]),B=h[0],S=h[1],P=h[2],b=h[3],x=h[4],y=r.ctx.createPattern(r.resizeImage(n,b,x),"repeat"),r.renderRepeat(B,y,S,P)),[3,6];case 5:!function(t){return t.type===Ba.LINEAR_GRADIENT}(s)?function(t){return t.type===Ba.RADIAL_GRADIENT}(s)&&(m=Ot(t,e,[null,null,null]),B=m[0],C=m[1],D=m[2],b=m[3],x=m[4],F=0===s.position.length?[da]:s.position,S=ua(F[0],b),P=ua(F[F.length-1],x),T=function(t,e,a,i,r){var s=0,n=0;switch(t.size){case xa.CLOSEST_SIDE:t.shape===Da.CIRCLE?s=n=Math.min(Math.abs(e),Math.abs(e-i),Math.abs(a),Math.abs(a-r)):t.shape===Da.ELLIPSE&&(s=Math.min(Math.abs(e),Math.abs(e-i)),n=Math.min(Math.abs(a),Math.abs(a-r)));break;case xa.CLOSEST_CORNER:if(t.shape===Da.CIRCLE)s=n=Math.min(j(e,a),j(e,a-r),j(e-i,a),j(e-i,a-r));else if(t.shape===Da.ELLIPSE){var o=Math.min(Math.abs(a),Math.abs(a-r))/Math.min(Math.abs(e),Math.abs(e-i)),h=V(i,r,e,a,!0),c=h[0],l=h[1];n=o*(s=j(c-e,(l-a)/o))}break;case xa.FARTHEST_SIDE:t.shape===Da.CIRCLE?s=n=Math.max(Math.abs(e),Math.abs(e-i),Math.abs(a),Math.abs(a-r)):t.shape===Da.ELLIPSE&&(s=Math.max(Math.abs(e),Math.abs(e-i)),n=Math.max(Math.abs(a),Math.abs(a-r)));break;case xa.FARTHEST_CORNER:if(t.shape===Da.CIRCLE)s=n=Math.max(j(e,a),j(e,a-r),j(e-i,a),j(e-i,a-r));else if(t.shape===Da.ELLIPSE){o=Math.max(Math.abs(a),Math.abs(a-r))/Math.max(Math.abs(e),Math.abs(e-i));var A=V(i,r,e,a,!1);n=o*(s=j((c=A[0])-e,((l=A[1])-a)/o))}}return Array.isArray(t.size)&&(s=ua(t.size[0],i),n=2===t.size.length?ua(t.size[1],r):s),[s,n]}(s,S,P,b,x),E=T[0],L=T[1],0<E&&0<E&&(Q=r.ctx.createRadialGradient(C+S,D+P,0,C+S,D+P,E),K(s.stops,2*E).forEach((function(t){return Q.addColorStop(t.stop,H(t.color))})),r.path(B),r.ctx.fillStyle=Q,E!==L?(O=t.bounds.left+.5*t.bounds.width,U=t.bounds.top+.5*t.bounds.height,N=1/(k=L/E),r.ctx.save(),r.ctx.translate(O,U),r.ctx.transform(1,0,0,k,0,0),r.ctx.translate(-O,-U),r.ctx.fillRect(C,N*(D-U)+U,b,x*N),r.ctx.restore()):r.ctx.fill())):(c=Ot(t,e,[null,null,null]),B=c[0],S=c[1],P=c[2],b=c[3],x=c[4],l=function i(t,e,a){var i="number"==typeof t?t:function(t,e,a){var i=e/2,r=a/2,s=ua(t[0],e)-i,n=r-ua(t[1],a);return(Math.atan2(n,s)+2*Math.PI)%(2*Math.PI)}(t,e,a),r=Math.abs(e*Math.sin(i))+Math.abs(a*Math.cos(i)),s=e/2,n=a/2,o=r/2,h=Math.sin(i-Math.PI/2)*o,c=Math.cos(i-Math.PI/2)*o;return[r,s-c,s+c,n-h,n+h]}(s.angle,b,x),A=l[0],d=l[1],p=l[2],u=l[3],g=l[4],(f=document.createElement("canvas")).width=b,f.height=x,w=f.getContext("2d"),v=w.createLinearGradient(d,u,p,g),K(s.stops,A).forEach((function(t){return v.addColorStop(t.stop,H(t.color))})),w.fillStyle=v,w.fillRect(0,0,b,x),0<b&&0<x&&(y=r.ctx.createPattern(f,"repeat"),r.renderRepeat(B,y,S,P))),a.label=6;case 6:return e--,[2]}}))},r=this,s=0,n=t.styles.backgroundImage.slice(0).reverse(),h.label=1;case 1:return s<n.length?(o=n[s],[5,i(o)]):[3,4];case 2:h.sent(),h.label=3;case 3:return s++,[3,1];case 4:return[2]}}))}))},Nt.prototype.renderBorder=function(t,i,r){return e(this,void 0,void 0,(function(){return a(this,(function(){return this.path(function(t,e){switch(e){case 0:return Bn(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return Bn(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return Bn(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return Bn(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}}(r,i)),this.ctx.fillStyle=H(t),this.ctx.fill(),[2]}))}))},Nt.prototype.renderNodeBackgroundAndBorders=function(t){return e(this,void 0,void 0,(function(){var e,i,r,s,n,o,h,c,l=this;return a(this,(function(a){switch(a.label){case 0:return this.applyEffects(t.effects,2),e=t.container.styles,i=!U(e.backgroundColor)||e.backgroundImage.length,r=[{style:e.borderTopStyle,color:e.borderTopColor},{style:e.borderRightStyle,color:e.borderRightColor},{style:e.borderBottomStyle,color:e.borderBottomColor},{style:e.borderLeftStyle,color:e.borderLeftColor}],s=Tn(Dn(e.backgroundClip,0),t.curves),i||e.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),U(e.backgroundColor)||(this.ctx.fillStyle=H(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:a.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){l.ctx.save();var a=Pt(t.curves),i=e.inset?0:1e4,r=function(t,e,a,i,r){return t.map((function(t,s){switch(s){case 0:return t.add(e,a);case 1:return t.add(e+i,a);case 2:return t.add(e+i,a+r);case 3:return t.add(e,a+r)}return t}))}(a,-i+(e.inset?1:-1)*e.spread.number,(e.inset?1:-1)*e.spread.number,e.spread.number*(e.inset?-2:2),e.spread.number*(e.inset?-2:2));e.inset?(l.path(a),l.ctx.clip(),l.mask(r)):(l.mask(a),l.ctx.clip(),l.path(r)),l.ctx.shadowOffsetX=e.offsetX.number+i,l.ctx.shadowOffsetY=e.offsetY.number,l.ctx.shadowColor=H(e.color),l.ctx.shadowBlur=e.blur.number,l.ctx.fillStyle=e.inset?H(e.color):"rgba(0,0,0,1)",l.ctx.fill(),l.ctx.restore()})),a.label=2;case 2:o=n=0,h=r,a.label=3;case 3:return o<h.length?(c=h[o]).style===ni.NONE||U(c.color)?[3,5]:[4,this.renderBorder(c.color,n,t.curves)]:[3,7];case 4:a.sent(),a.label=5;case 5:n++,a.label=6;case 6:return o++,[3,3];case 7:return[2]}}))}))},Nt.prototype.render=function(t){return e(this,void 0,void 0,(function(){var e;return a(this,(function(a){switch(a.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=H(this.options.backgroundColor),this.ctx.fillRect(this.options.x-this.options.scrollX,this.options.y-this.options.scrollY,this.options.width,this.options.height)),e=function(t){var e=new yn(t,[]),a=new vn(e),i=[];return function t(e,a,i,r){e.container.elements.forEach((function(s){var n=at(s.flags,4),o=at(s.flags,2),h=new yn(s,e.getParentEffects());at(s.styles.display,2048)&&r.push(h);var c=at(s.flags,8)?[]:r;if(n||o){var l=n||s.styles.isPositioned()?i:a,A=new vn(h);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var d=s.styles.zIndex.order;if(d<0){var p=0;l.negativeZIndex.some((function(t,e){return d>t.element.container.styles.zIndex.order?(p=e,!1):0<p})),l.negativeZIndex.splice(p,0,A)}else if(0<d){var u=0;l.positiveZIndex.some((function(t,e){return d>t.element.container.styles.zIndex.order?(u=e+1,!1):0<u})),l.positiveZIndex.splice(u,0,A)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(A)}else s.styles.isFloating()?l.nonPositionedFloats.push(A):l.nonPositionedInlineLevel.push(A);t(h,A,n?A:i,c)}else s.styles.isInlineLevel()?a.inlineLevel.push(h):a.nonInlineLevel.push(h),t(h,a,i,c);at(s.flags,8)&&mn(s,c)}))}(e,a,a,i),mn(e.container,i),a}(t),[4,this.renderStack(e)];case 1:return a.sent(),this.applyEffects([],2),[2,this.canvas]}}))}))},Nt),Pn=function t(e){return e instanceof Bs||e instanceof ms||e instanceof ys&&e.type!==ws&&e.type!==fs},Tn=function t(e,a){switch(e){case Me.BORDER_BOX:return Pt(a);case Me.CONTENT_BOX:return function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]}(a);case Me.PADDING_BOX:default:return Tt(a)}},En=function t(e){switch(e){case Zi.CENTER:return"center";case Zi.RIGHT:return"right";case Zi.LEFT:default:return"left"}},Ln=(It.prototype.render=function(t){return e(this,void 0,void 0,(function(){var e,i;return a(this,(function(a){switch(a.label){case 0:return e=Ta(Math.max(this.options.windowWidth,this.options.width)*this.options.scale,Math.max(this.options.windowHeight,this.options.height)*this.options.scale,this.options.scrollX*this.options.scale,this.options.scrollY*this.options.scale,t),[4,Qn(e)];case 1:return i=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=H(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(i,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},It),Qn=function t(e){return new Promise((function(t,a){var i=new Image;i.onload=function(){t(i)},i.onerror=a,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(e))}))};return Oa.setContext(window),function(t,i){return void 0===i&&(i={}),function t(i,r){return e(void 0,void 0,void 0,(function(){var t,e,s,n,o,h,c,l,A,d,p,u,g,f,w,v,y,m,B,C,D,b,x;return a(this,(function(a){switch(a.label){case 0:if(!(t=i.ownerDocument))throw new Error("Element is not attached to a Document");if(!(e=t.defaultView))throw new Error("Document is not attached to a Window");return s=(Math.round(1e3*Math.random())+Date.now()).toString(16),n=Hs(i)||function(t){return"HTML"===t.tagName}(i)?function(t){var e=t.body,a=t.documentElement;if(!e||!a)throw new Error("Unable to get document size");var i=Math.max(Math.max(e.scrollWidth,a.scrollWidth),Math.max(e.offsetWidth,a.offsetWidth),Math.max(e.clientWidth,a.clientWidth)),r=Math.max(Math.max(e.scrollHeight,a.scrollHeight),Math.max(e.offsetHeight,a.offsetHeight),Math.max(e.clientHeight,a.clientHeight));return new jt(0,0,i,r)}(t):Vt(i),o=n.width,h=n.height,c=n.left,l=n.top,A=Kt({},{allowTaint:!1,imageTimeout:15e3,proxy:void 0,useCORS:!1},r),d={backgroundColor:"#ffffff",cache:r.cache?r.cache:Oa.create(s,A),logging:!0,removeContainer:!0,foreignObjectRendering:!1,scale:e.devicePixelRatio||1,windowWidth:e.innerWidth,windowHeight:e.innerHeight,scrollX:e.pageXOffset,scrollY:e.pageYOffset,x:c,y:l,width:Math.ceil(o),height:Math.ceil(h),id:s},p=Kt({},d,A,r),u=new jt(p.scrollX,p.scrollY,p.windowWidth,p.windowHeight),Qa.create({id:s,enabled:p.logging}),Qa.getInstance(s).debug("Starting document clone"),g=new qs(i,{id:s,onclone:p.onclone,ignoreElements:p.ignoreElements,inlineImages:p.foreignObjectRendering,copyStyles:p.foreignObjectRendering}),(f=g.clonedReferenceElement)?[4,g.toIFrame(t,u)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return w=a.sent(),v=t.documentElement?Mt(getComputedStyle(t.documentElement).backgroundColor):ma.TRANSPARENT,y=t.body?Mt(getComputedStyle(t.body).backgroundColor):ma.TRANSPARENT,m=r.backgroundColor,B="string"==typeof m?Mt(m):null===m?ma.TRANSPARENT:4294967295,C=i===t.documentElement?U(v)?U(y)?B:y:v:B,D={id:s,cache:p.cache,canvas:p.canvas,backgroundColor:C,scale:p.scale,x:p.x,y:p.y,scrollX:p.scrollX,scrollY:p.scrollY,width:p.width,height:p.height,windowWidth:p.windowWidth,windowHeight:p.windowHeight},p.foreignObjectRendering?(Qa.getInstance(s).debug("Document cloned, using foreign object rendering"),[4,new Ln(D).render(f)]):[3,3];case 2:return b=a.sent(),[3,5];case 3:return Qa.getInstance(s).debug("Document cloned, using computed rendering"),Oa.attachInstance(p.cache),Qa.getInstance(s).debug("Starting DOM parsing"),x=xs(f),Oa.detachInstance(),C===x.styles.backgroundColor&&(x.styles.backgroundColor=ma.TRANSPARENT),Qa.getInstance(s).debug("Starting renderer"),[4,new Sn(D).render(x)];case 4:b=a.sent(),a.label=5;case 5:return!0===p.removeContainer&&(qs.destroy(w)||Qa.getInstance(s).error("Cannot detach cloned iframe as it is not in the DOM anymore")),Qa.getInstance(s).debug("Finished rendering"),Qa.destroy(s),Oa.destroy(s),[2,b]}}))}))}(t,i)}}))},"./src/scripts/index.js":function(t,e,i){"use strict";function r(){}function s(t){return parseFloat(t.toString().slice(0,15))}function n(t,e){return t.T>e.T?1:t.T<e.T?-1:0}function o(t,e){return t.T>e.T?-1:t.T<e.T?1:0}function h(t){return Object.values(t).sort(o)}function c(t){return JSON.parse(JSON.stringify(t))}function l(){}function A(t,e){this.id=A.getNextId(),this.name=e.name,this.fullName=e.fullName,this.params=Object.assign({},e.params),this.colors=Object.assign({},e.colors),this.opacity=Object.assign({},e.opacity),this.lineWidth=Object.assign({},e.lineWidth),this.oldParams={period:{},lineWidth:{}},this.type=e.type,this.data=[],this.showData=[],this.chartData=t,this.hidden=!!e.hidden&&e.hidden,this.h=e.h,this.top=e.top,this.oscillatorPrecission=6,this.oscillatorPrecissionFlag=!0}function d(t){var e;t.dragObject=this,this.parent=t,this.forTrget=t.classList.contains("tch-move-tools"),this.maxLeft,this.maxTop,this.minLeft,this.minTop,this.fixPos={top:!1,right:!1,bottom:!1,left:!1},this.fixMinMax={top:!1,right:!1,bottom:!1,left:!1},this.geom={},this.reCalculationSize(),this.bodyTop=document.body.getBoundingClientRect().top,this.bord={},this.s=t.style,ie.makeDraggable(t);var a,i={opacity:".3",boxShadow:""},r={};this.onDragStart=function(t){e={top:this.s.top,left:this.s.left,position:this.s.position},this.s.position="absolute",this.upStyle();var i=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);this.minLeft=parseFloat(getComputedStyle(this.parent).left)-this.parent.getBoundingClientRect().left,this.minTop=parseFloat(getComputedStyle(this.parent).top)-this.parent.getBoundingClientRect().top-window.scrollY,this.maxLeft=document.documentElement.clientWidth-(this.geom.borderLeftWidth+this.geom.borderRightWidth)+this.minLeft-this.geom.width,this.maxTop=i-(this.geom.borderTopWidth+this.geom.borderBottomWidth)+this.minTop-this.geom.height,a=t},this.hide=function(){t.style.display="none"},this.show=function(){t.style.display=""},this.onDragMove=function(e,i,r){var s={};parseFloat(t.style.left),i=e.pageX-a.x,r=e.pageY-a.y,this.minLeft>=i?(s.left=s.right=this.minLeft,this.fixMinMax.left=!0):this.maxLeft<=i?(s.left=s.right=this.maxLeft,this.fixMinMax.right=!0):(s.left=s.right=i,this.fixMinMax.left=!1,this.fixMinMax.right=!1),this.minTop>=r?(s.top=s.bottom=this.minTop,this.fixMinMax.top=!0):this.maxTop<=e.pageY+this.minTop?(s.top=s.bottom=this.maxTop,this.fixMinMax.bottom=!0):(s.top=s.bottom=r-window.scrollY,this.fixMinMax.top=!1,this.fixMinMax.bottom=!1),t.style.top=s.top+"px",t.style.left=s.left+"px";var n=this.lipnetOF(s);0!=Object.keys(n).length?this.lipShow(n,t):(t.style.boxShadow="",t.classList.toggle("tch-border",!1))},this.onDragSuccess=function(){},this.onDragFail=function(){this.s.top=e.top,this.s.left=e.left,this.s.position=e.position},this.toString=function(){return t.id},this.lipnetOF=function(t){var e={};return this.bord.bottom+this.deltaLip>t.top&&this.bord.top-this.deltaLip<t.top&&(this.bord.left-this.deltaLip<t.left&&this.bord.left+this.deltaLip>t.left&&(e.left=this.bord.left-t.left),this.bord.right-this.deltaLip<t.right&&this.bord.right+this.deltaLip>t.right&&(e.right=this.bord.right-t.right)),this.bord.right+this.deltaLip>t.left&&this.bord.left-this.deltaLip<t.left&&(this.bord.top-this.deltaLip<t.top&&this.bord.top+this.deltaLip>t.top&&(e.top=this.bord.top-t.top),this.bord.bottom-this.deltaLip<t.bottom&&this.bord.bottom+this.deltaLip>t.bottom&&(e.bottom=this.bord.bottom-t.bottom)),e},this.lipShow=function(t,e){var a=t.hasOwnProperty("top")?t.top:0+t.hasOwnProperty("bottom")?t.bottom:0,i=t.hasOwnProperty("left")?t.left:0+t.hasOwnProperty("right")?t.right:0;e.style.boxShadow="rgba(0, 0, 0, .35) 0px 0px 10px 5px, "+i+"px "+a+"px 0px -1px rgba(200, 200, 200, .8), "+i+"px "+a+"px 5px 5px red",e.classList.toggle("tch-border",!0)},this.upStyle=function(){for(var t in i)i.hasOwnProperty(t)&&(r[t]=this.s[t],this.s[t]=i[t])},this.downStyle=function(){for(var t in i)i.hasOwnProperty(t)&&(this.s[t]=r[t]);this.s.opacity=1,this.boxShadow="",this.parent.classList.toggle("tch-border",!1),this.rememberStyle={}},this.downLip=function(){var t=parseFloat(""===this.s.left?getComputedStyle(this.parent).left:this.s.left),e=parseFloat(""===this.s.top?getComputedStyle(this.parent).top:this.s.top);for(var a in this.fixPos)this.fixPos.hasOwnProperty(a)&&(this.fixPos[a]=!1);this.bord.bottom+this.deltaLip>e&&this.bord.top-this.deltaLip<e&&(Math.abs(this.bord.left-t)<this.deltaLip&&(this.s.left=this.bord.left+"px",this.fixPos.left=!0),Math.abs(this.bord.right-t)<this.deltaLip&&(this.s.left=this.bord.right+"px",this.fixPos.right=!0)),this.bord.right+this.deltaLip>t&&this.bord.left-this.deltaLip<t&&(Math.abs(this.bord.top-e)<this.deltaLip&&(this.s.top=this.bord.top+"px",this.fixPos.top=!0),Math.abs(this.bord.bottom-e)<this.deltaLip&&(this.s.top=this.bord.bottom+"px",this.fixPos.bottom=!0))},this.changeContainer=function(){}}function p(t,e){t.dropTarget=this,this.classNameBar=e+"OK",this.canAccept=function(){return!0},this.accept=function(t,e){this.onLeave(e,!0)},this.onLeave=function(e,a){t.classList.toggle(this.classOK,!1),e.classList.toggle(this.classNameBar,!1),a&&this.stuck(t,e)},this.stuck=function(t,e){var a=t.getBoundingClientRect().top,i=t.getBoundingClientRect().left;e.classList.toggle(this.classNameBar,!0),e.style.top=a,e.style.left=i},this.onEnter=function(e){e.classList.toggle(this.classNameBar,!0),t.classList.toggle(this.classOK,!0)},this.toString=function(){return t.id}}function u(t){var e=t||window.event;if(null===e.pageX&&null!==e.clientX){var a=document.documentElement,i=document.body;e.pageX=e.clientX+(a&&a.scrollLeft||i&&i.scrollLeft||0)-(a.clientLeft||0),e.pageY=e.clientY+(a&&a.scrollTop||i&&i.scrollTop||0)-(a.clientTop||0)}return!e.which&&e.button&&(e.which=1&e.button?1:2&e.button?3:4&e.button?2:0),e}function g(t,e){this.techChart=e,this.parent=t,this.rgba=[0,0,0,1],this.init()}function f(t){arguments&&arguments.length&&ut.apply(this,arguments),this.chartData=t,this.color="#0000FF",this.isChanged=!1,this.circles=[],this.width=1,this.state="edit",this.periods=[],this.lineType="normal",this.classType="Line",this.fillSettingsPanel=function(t){t.innerHTML=this.htmlSettingsPanel(),this.addSettingsLineEvent(t)},this.convertToDTO=function(){var t=ut.prototype.convertToDTO.apply(this,arguments);return t.circles=this.cloneCircles(this.circles),this.updateCustomPropsByObj(t,this),t},this.applyRestoredParams=function(t){ut.prototype.applyRestoredParams.apply(this,arguments),t.type||(t.type=t.classType),this.circles=this.restoreCircles(t),this.updateCustomPropsByObj(this,t)}}function w(t){arguments&&arguments.length&&f.apply(this,arguments),this.chartData=t,this.color="rgba(101,101,101,1)",this.fontFamily="Arial",this.fontSize=40,this.textArea="Text",this.fill=!1,this.fillColor="rgba(255,0,0,1)",this.border=!1,this.borderColor="rgba(0,255,0,1)",this.bold="off",this.italic="off",this.textSpan=null,this.rect={},this.classType="Text",this.draw=function(){this.chartData&&this.chartData.chart&&(this.textSpan||(this.textSpan=document.createElement("span"),this.textSpan.setAttribute("id",this.id),this.textSpan.style.position="absolute",this.textSpan.style.display="block",this.textSpan.style.padding="3px",this.textSpan.style.whiteSpace="nowrap"),this.chartData.chart.drawingTextContainer&&!this.chartData.chart.drawingTextContainer.querySelector("span#"+this.id)&&this.chartData.chart.drawingTextContainer.appendChild(this.textSpan),this.applyTextParams())},this.isFocused=function(t,e){var a=parseFloat(this.points[0].x),i=parseFloat(this.points[0].y),r={x1:a,x2:a+this.rect.width,y1:i,y2:i+this.rect.height};return this.isObjectEdit=pt.isPointInRect(r,{x:t,y:e},5),this.isObjectEdit},this.shiftTo=function(t,e,a,i,r){if(0!==e||0!==t)for(var s=0;s<this.points.length;s++)this.points[s].y-=e,this.points[s].x-=t,this.data[s].d-=i,this.data[s].v-=r},this.removeDrawingObject=this.remove,this.remove=function(){this.removeDrawingObject(),this.chartData.chart.drawingTextContainer.removeChild(this.textSpan)},this.applyValue=function(t,e){this[e]=t,this.draw(),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id)},this.getStyleRows=function(){return[this.getTextStyleRow(),this.getTextAreaRow(),this.getBackgroundRow(),this.getBorderRow()]},this.createLineSettingsPanel=function(t){this.createSettingsPanel(t),this.fillSettingsPanelFull(t),t.isSettingsPanelOpen=!0,this.addPanelLineSettingEvent(t),this.setCoordinateSettingsPanel(t)},this.setCoordinateSettingsPanel=function(t){var e=parseFloat(this.points[0].y),a=t.parentElement.getClientRects(),i=t.getClientRects();e+this.rect.height+i[0].height<a[0].height?t.style.top=e+this.rect.height+"px":t.style.top=e-i[0].height+"px",this.points[0].x+i[0].width<a[0].width?t.style.left=this.points[0].x+"px":t.style.left=this.points[0].x-i[0].width+"px"},this.fillSettingsPanelFull=function(t){t.innerHTML=this.htmlFullSettingsPanel(),t.removeAttribute("tch-line-type"),t.setAttribute("tch-text-type",this.classType),this.fillLineStyle(t)},this.fillLineStyle=function(t){var e=t.querySelector(".tch-line-settings-style");e.innerHTML="";var a=this.getStyleRows();this.fillDivWithRows(e,a)},this.cancelPanelSettingLine=function(t,e){for(var a=this.getStylePropsNames(),i=0;i<a.length;i++){var r=e.querySelector("#tch-settingsStyle-input-"+a[i]).oldValue;void 0!==r&&(this[a[i]]=r)}this.draw(),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id),e.classList.toggle("tch-hidden"),t.preventDefault(),t.stopPropagation()},this.updateCustomPropsByObj=function(t,e){t.periods=e.periods.slice(0);for(var a=this.getStylePropsNames(),i=0;i<a.length;i++)t[a[i]]=e[a[i]];this.draw()},this.convertToDTO=function(){var t=ut.prototype.convertToDTO.apply(this,arguments);return this.updateCustomPropsByObj(t,this),t},this.applyRestoredParams=function(t){ut.prototype.applyRestoredParams.apply(this,arguments),t.type||(t.type=t.classType),this.updateCustomPropsByObj(this,t)}}function v(){arguments&&arguments.length&&ut.apply(this,arguments),this.radius=5,this.lineWidth=1,this.classType="Circle",this.convertToDTO=function(){var t=ut.prototype.convertToDTO.apply(this,arguments);return this.updateCustomPropsByObj(t,this),t},this.applyRestoredParams=function(t){ut.prototype.applyRestoredParams.apply(this,arguments),this.updateCustomPropsByObj(this,t)}}function y(t){arguments&&arguments.length&&(w.apply(this,arguments),this.chartData=t,this.chartData.chart&&(this.circles=[],this.points=[{x:this.points[0].x,y:this.points[0].y,active:!0}],this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[{x:this.points[0].x,y:this.points[0].y}]})),this.circles[0].radius=4),this.size=25,this.fontSize=20,this.textArea="Text",this.colorMark="rgba(38,176,197,1)",this.divText=null,this.icon=null,this.centeringSvg={x:0,y:0},this.viewbox={x:0,y:0,width:300,height:300},this.classType="ArrowMark"),this.isFocused=function(t,e){if(this.isObjectEdit=!1,this.isObjectEdit=this.isFocusedCircle(t,e),!this.isObjectEdit){var a=this.getRect();this.isObjectEdit=pt.isPointInRect(a,{x:t,y:e},5)}return this.isObjectEdit},this.isFocusedCircle=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;for(var a=!1,i=0,r=0;r<this.circles.length;r++){if(i++,pt.isPointOnCircle(this.circles[r],{x:t,y:e})){this.circles[r].points[0].active=!0,this.points[r].active=!0,a=!0;break}this.circles[r].points[0].active=!1,this.points[r].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;return!!a||void 0},this.textCreateTextSpan=this.draw,this.draw=function(t){t&&this.chartData.chart&&(this.divText=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id),this.divText||(this.createDiv(),this.chartData.chart.drawingTextContainer.appendChild(this.divText),this.createArrowMarkIcon(t),this.divText.appendChild(this.icon)),this.applyArrowMarkPosition(),this.drawCircle(t),this.textCreateTextSpan())},this.updatePixels=function(){this.isPressed||(this.points[0].x=this.chartData.chart.toXPixels(this.data[0].d),this.points[0].y=this.chartData.chart.toYPixels(this.data[0].v),this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]])},this.shiftTo=function(t,e,a,i,r){0===e&&0===t||(this.points[0].y-=e,this.points[0].x-=t,this.data[0].d-=i,this.data[0].v-=r,this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]])},this.removeDrawingObject=ut.prototype.remove,this.remove=function(){this.removeDrawingObject(),this.chartData.chart.drawingTextContainer.removeChild(this.textSpan),this.chartData.chart.drawingTextContainer.removeChild(this.divText)},this.getStyleRows=function(){return[this.getTextStyleRow(),this.getTextAreaRow(),this.getArrowMarkRow()]},this.convertToDTO=function(){var t=ut.prototype.convertToDTO.apply(this,arguments);return t.circles=this.cloneCircles(this.circles),this.updateCustomPropsByObj(t,this),t},this.applyRestoredParams=function(t){ut.prototype.applyRestoredParams.apply(this,arguments),t.type||(t.type=t.classType),this.circles=this.restoreCircles(t),this.updateCustomPropsByObj(this,t)}}function m(){arguments&&arguments.length&&(y.apply(this,arguments),this.viewbox={x:0,y:50,width:300,height:300},this.classType="ArrowMarkLeft")}function B(){arguments&&arguments.length&&(y.apply(this,arguments),this.viewbox={x:100,y:50,width:300,height:300},this.centeringSvg={x:-this.size,y:0},this.classType="ArrowMarkRight"),this.applyTextPosition=function(){var t=this.getPoint();this.textSpan.style.left=t.x-this.size-this.rect.width+"px",this.textSpan.style.top=t.y-this.size/2+"px"},this.getRect=function(){var t=this.getPoint();return{x1:this.rect.width<=6?t.x-this.size:t.x-this.rect.width-this.size,y1:t.y-this.size/2,x2:t.x,y2:t.y+this.size/2}}}function C(){arguments&&arguments.length&&(y.apply(this,arguments),this.viewbox={x:30,y:0,width:275,height:275},this.centeringSvg={x:-this.size/2,y:-this.size/2},this.classType="ArrowMarkUp"),this.isFocused=function(t,e){if(this.isObjectEdit=!1,this.isObjectEdit=this.isFocusedCircle(t,e),!this.isObjectEdit){var a=this.getRectSvg(),i=this.getRectSpan();(pt.isPointInRect(a,{x:t,y:e},5)||pt.isPointInRect(i,{x:t,y:e},5))&&(this.isObjectEdit=!0)}return this.isObjectEdit},this.applyTextPosition=function(){var t=this.getPoint();this.textSpan.style.left=t.x-this.rect.width/2+"px",this.textSpan.style.top=t.y+this.size+"px"},this.getRectSvg=function(){var t=this.getPoint();return{x1:t.x-this.size/2,y1:t.y,x2:t.x+this.size/2,y2:t.y+this.size}},this.getRectSpan=function(){var t=this.getPoint();return{x1:t.x-this.rect.width/2,y1:t.y+this.size,x2:t.x+this.rect.width/2,y2:this.rect.height<=6?t.y+this.size:t.y+this.size+this.rect.height}}}function D(){arguments&&arguments.length&&(y.apply(this,arguments),this.viewbox={x:25,y:70,width:250,height:250},this.centeringSvg={x:-this.size/2,y:this.size/2},this.classType="ArrowMarkDown"),this.isFocused=function(t,e){if(this.isObjectEdit=!1,this.isObjectEdit=this.isFocusedCircle(t,e),!this.isObjectEdit){var a=this.getRectSvg(),i=this.getRectSpan();(pt.isPointInRect(a,{x:t,y:e},5)||pt.isPointInRect(i,{x:t,y:e},5))&&(this.isObjectEdit=!0)}return this.isObjectEdit},this.applyTextPosition=function(){var t=this.getPoint();this.textSpan.style.left=t.x-this.rect.width/2+"px",this.textSpan.style.top=t.y-2*this.size+"px"},this.getRectSvg=function(){var t=this.getPoint();return{x1:t.x-this.size/2,y1:t.y-this.size,x2:t.x+this.size/2,y2:t.y}},this.getRectSpan=function(){var t=this.getPoint();return{x1:t.x-this.rect.width/2,y1:this.rect.height<=6?t.y-this.size:t.y-this.size-this.rect.height,x2:t.x+this.rect.width/2,y2:t.y-this.size}}}function b(){arguments&&arguments.length&&(f.apply(this,arguments),this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.circles.push(new v(this.chartData,{data:[this.data[1]],points:[this.points[1]]})),this.drawingStage={current:0,max:1},this.leftEnd=!1,this.rightEnd=!1,this.leftEndType="normal",this.rightEndType="normal",this.wingsLength=20,this.wingsAngle=15,this.rightEndPoint=null,this.leftEndPoint=null,this.statsTextColor="#00ff00",this.showPriceRange=!1,this.showBarsRange=!1,this.showDateRange=!1,this.showDistance=!1,this.showAngle=!1,this.alwaysShowStats=!1,this.classType="TrendLine"),this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1,this.isChanged=!1;for(var a=!1,i=0,r=0;r<this.circles.length;r++){if(i++,pt.isPointOnCircle(this.circles[r],{x:t,y:e})){this.circles[r].points[0].active=!0,this.points[r].active=!0,this.isChanged=!0,a=!0;break}this.circles[r].points[0].active=!1,this.points[r].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(a)return!0;var s=this.points[0].x,n=this.points[1].x,o=this.points[0].y,h=this.points[1].y;if(this.leftEnd&&(s=this.leftEndPoint.x,o=this.leftEndPoint.y),this.rightEnd&&(n=this.rightEndPoint.x,h=this.rightEndPoint.y),pt.isPointOnLine({x1:s,x2:n,y1:o,y2:h},{x:t,y:e})){for(var c=0;c<this.points.length;c++)this.points[c].active=!0,this.circles&&this.circles[c]&&(this.circles[c].points[0].active=!0);this.isObjectEdit=!0,a=!0}return a},this.updateLastPoint=function(t,e){var a=this.data.length-1;this.data[a]=t,this.points[a]=e,this.circles[a].points[0]=this.points[a]},this.appendPoint=function(t,e){this.data.push(t),this.points.push(e),this.circles.push(new v(this.chartData,{data:[this.data[this.data.length-1]],points:[this.points[this.points.length-1]]}))},this.updateValues=function(){for(var t=0;t<this.points.length;t++)this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y)},this.shiftTo=function(t,e,a,i,r){if(0!==e||0!==t)for(var s=0;s<this.points.length;s++)this.points[s].active&&(this.points[s].y-=e,this.points[s].x-=t,this.data[s].d-=i,this.data[s].v-=r),this.circles[s].points=[this.points[s]],this.circles[s].data=[this.data[s]]},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=a.x,this.points[i].y=a.y,this.data[i].d=a.dateSeconds,this.data[i].v=a.value),i<this.circles.length&&(this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]])},this.updatePixels=function(){for(var t=0;t<this.points.length;t++){if(this.isPressed)return;this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points[0]=this.points[t],this.circles[t].data[0]=this.data[t]}},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e,a,i=this.points[0].x,s=this.points[1].x,n=this.points[0].y,o=this.points[1].y,h=i,c=s,l=n,A=o,d=null;if(("arrow"===this.leftEndType||"arrow"===this.rightEndType||this.leftEnd||this.rightEnd)&&(d=pt.findLineAngleDeg({x1:i,y1:n,x2:s,y2:o})),"arrow"===this.leftEndType&&(e=r.getPosition(this.points[0].x,this.width),a=r.getPosition(this.points[0].y,this.width),this.drawArrow(t,{x:e,y:a},d,this.wingsLength,this.wingsAngle,"down")),"arrow"===this.rightEndType&&(e=r.getPosition(this.points[1].x,this.width),a=r.getPosition(this.points[1].y,this.width),this.drawArrow(t,{x:e,y:a},d,this.wingsLength,this.wingsAngle,"up")),this.leftEnd&&(this.leftEndPoint=this.getLeftEndPoint({x1:i,y1:n,x2:s,y2:o},this.chartData.chart.w,this.chartData.chart.h,d),h=this.leftEndPoint.x,l=this.leftEndPoint.y),this.rightEnd&&(this.rightEndPoint=this.getRightEndPoint({x1:i,y1:n,x2:s,y2:o},this.chartData.chart.w,this.chartData.chart.h,d),c=this.rightEndPoint.x,A=this.rightEndPoint.y),h=r.getPosition(h,this.width),l=r.getPosition(l,this.width),c=r.getPosition(c,this.width),A=r.getPosition(A,this.width),r.drawLine(null,t,h,l,c,A,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,1),"edit"!==this.state&&"active"!==this.state||r.drawLine(null,t,h,l,c,A,this.color,[],parseFloat(this.width)+10,.1),"edit"===this.state||"active"===this.state){for(var p=0;p<this.circles.length;p++)this.circles[p].points[0].active||this.circles[p].drawWithShadow(t,"white",this.color,.1);for(var u=0;u<this.circles.length;u++)this.circles[u].points[0].active&&this.circles[u].drawWithShadow(t,"red",this.color,.1)}return!0},this.lineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=this.lineGetStyleRows(),e=[this.getLeftEndRow(),this.getRightEndRow(),this.getStatsTextColorRow(),this.getShowPriceRangeRow(),this.getShowBarsRangeRow(),this.getShowDateTimeRangeRow(),this.getShowDistance(),this.getShowAngleRow(),this.getAlwaysShowStatsRow()];return t.concat(e)},this.remove=function(){b.prototype.remove.apply(this,arguments)},this.lineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.lineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.lineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.lineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.updateCustomPropsByObj=function(t,e){f.prototype.updateCustomPropsByObj.apply(this,arguments),t.leftEnd=e.leftEnd,t.rightEnd=e.rightEnd,t.leftEndType=e.leftEndType,t.rightEndType=e.rightEndType,t.wingsLength=e.wingsLength,t.wingsAngle=e.wingsAngle,t.rightEndPoint=ut.cloneObject(e.rightEndPoint),t.leftEndPoint=ut.cloneObject(e.leftEndPoint),t.statsTextColor=e.statsTextColor,t.showPriceRange=e.showPriceRange,t.showBarsRange=e.showBarsRange,t.showDateRange=e.showDateRange,t.showDistance=e.showDistance,t.showAngle=e.showAngle,t.alwaysShowStats=e.alwaysShowStats}}function x(){arguments&&arguments.length&&(f.apply(this,arguments),this.chartData.chart?this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[{x:this.chartData.chart.w/2,y:this.points[0].y}]})):this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[{x:this.points[0].x,y:this.points[0].y}]})),this.showText=!1,this.showPrice=!1,this.textColor="#0000FF",this.textFamily="veranda",this.textSize="10",this.textAlignHorizontal="center",this.textAlignVertical="top",this.textArea="HelloWorld",this.classType="HorizontalLine"),this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1,this.isObjectEdit=!1;var a=!1;if(pt.isPointOnCircle(this.circles[0],{x:t,y:e})&&(this.isChanged=!0,a=!0),a||pt.isPointOnLine({x1:this.points[0].x,x2:this.points[1].x,y1:this.points[0].y,y2:this.points[1].y},{x:t,y:e})&&(this.isObjectEdit=!0,a=!0),a){this.circles[0].points[0].active=!0;for(var i=0;i<this.points.length;i++)this.points[i].active=!0}else{this.circles[0].points[0].active=!1;for(var r=0;r<this.points.length;r++)this.points[r].active=!1}return a},this.updateValues=function(){},this.draw=function(t){this.points[0].x=0,this.points[1].x=this.chartData.chart.w;var e=r.getPosition(this.points[0].x,this.width),a=r.getPosition(this.points[1].x,this.width),i=r.getPosition(this.points[0].y,this.width),s=r.getPosition(this.points[1].y,this.width);return f.prototype.draw.apply(this,[t,e,a,i,s])},this.updatePixels=function(){this.points[0].y=this.chartData.chart.toYPixels(this.data[0].v),this.points[1].y=this.points[0].y,this.circles[0].points[0].y=this.points[0].y,this.circles[0].points[0].x=this.chartData.chart.w/2},this.shiftTo=function(t,e,a){if(0!==e){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].y=a.y,this.circles[0].points[0].y=a.y,this.circles[0].points[0].x=this.chartData.chart.w/2);this.data[0].v=a.value}},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].y=a.y,this.circles[0].points[0].y=a.y,this.circles[0].points[0].x=this.chartData.chart.w/2);this.data[0].v=a.value},this.lineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=this.lineGetStyleRows(),e=[this.getShowPriceRow(),this.getShowTextRow(),this.getTextStyleRow(),this.getTextAlignRow(),this.getTextAreaRow()];return t.concat(e)},this.lineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.lineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.lineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.lineUpdateCustomPropsByObj(t,e),t.showText=e.showText,t.showPrice=e.showPrice,t.textColor=e.textColor,t.textFamily=e.textFamily,t.textSize=e.textSize,t.textAlignHorizontal=e.textAlignHorizontal,t.textAlignVertical=e.textAlignVertical,t.textArea=e.textArea},this.updateByObject=function(t){ut.prototype.updateByObject.apply(this,arguments),this.circles[0].points[0]={x:this.chartData.chart.w/2,y:this.circles[0].points[0].y}}}function F(){arguments&&arguments.length&&(f.apply(this,arguments),this.classType="VerticalLine",this.chartData.chart?this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[{x:this.points[0].x,y:this.chartData.chart.h/2}]})):this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[{x:this.points[0].x,y:this.points[0].y}]}))),this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1;var a=!1;if(pt.isPointOnCircle(this.circles[0],{x:t,y:e})&&(this.isChanged=!0,a=!0),a||pt.isPointOnLine({x1:this.points[0].x,x2:this.points[1].x,y1:this.points[0].y,y2:this.points[1].y},{x:t,y:e})&&(this.isObjectEdit=!0,a=!0),a){this.circles[0].points[0].active=!0;for(var i=0;i<this.points.length;i++)this.points[i].active=!0}else{this.circles[0].points[0].active=!1;for(var r=0;r<this.points.length;r++)this.points[r].active=!1}return a},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.points[0].y=0,this.points[1].y=this.chartData.chart.h;var e=r.getPosition(this.points[0].x,this.width),a=r.getPosition(this.points[1].x,this.width),i=r.getPosition(this.points[0].y,this.width),s=r.getPosition(this.points[1].y,this.width);return f.prototype.draw.apply(this,[t,e,a,i,s])},this.updatePixels=function(){this.points[0].x=this.chartData.chart.toXPixels(this.data[0].d),this.points[1].x=this.points[0].x,this.circles[0].points[0].x=this.points[0].x,this.circles[0].points[0].y=this.chartData.chart.h/2},this.updateValues=function(){this.data[0].d=this.chartData.chart.toXValue(this.points[0].x)},this.shiftTo=function(t,e,a){if(0!==t){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=a.x,this.circles[0].points[0].x=a.x);this.data[0].d=a.dateSeconds}},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=a.x);this.data[0].d=a.dateSeconds,this.circles[0].points[0].x=a.x},this.lineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=this.lineGetStyleRows(),e=[this.getShowDateRow()];return t.concat(e)},this.updateByObject=function(t){ut.prototype.updateByObject.apply(this,arguments),this.circles[0].points[0]={x:this.circles[0].points[0].x,y:this.chartData.chart.h/2}}}function S(){b.apply(this,arguments),this.color="#1E90FF",this.rightEndType="arrow",this.classType="Arrow"}function P(){b.apply(this,arguments),this.color="#008000",this.rightEnd=!0,this.leftEnd=!1,this.classType="Ray"}function T(){arguments&&arguments.length&&(x.apply(this,arguments),this.color="#FF1493",this.circles[0]=new v(this.chartData,{data:[this.data[0]],points:[this.points[0]]}),this.classType="HorizontalRay"),this.draw=function(t){this.points[1].x=this.chartData.chart.w;var e=r.getPosition(this.points[0].x,this.width),a=r.getPosition(this.points[1].x,this.width),i=r.getPosition(this.points[0].y,this.width),s=r.getPosition(this.points[1].y,this.width);return f.prototype.draw.apply(this,[t,e,a,i,s])},this.updatePixels=function(){this.points[0].y=this.chartData.chart.toYPixels(this.data[0].v),this.points[0].x=this.chartData.chart.toXPixels(this.data[0].d),this.points[1].y=this.points[0].y,this.circles[0].points[0].y=this.points[0].y,this.circles[0].points[0].x=this.points[0].x},this.shiftTo=function(t,e,a,i,r){if(0!==e||0!==t){for(var s=0;s<this.points.length;s++)this.points[s].active&&(this.points[s].y-=e,this.points[s].x-=t,this.data[s].d-=i,this.data[s].v-=r);this.circles[0].points[0].y=this.points[0].y,this.circles[0].points[0].x=this.points[0].x}},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=a.x,this.points[i].y=a.y,this.data[i].d=a.dateSeconds,this.data[i].v=a.value);this.circles[0].points[0].y=this.points[0].y,this.circles[0].points[0].x=this.points[0].x},this.updateValues=function(){for(var t=0;t<this.points.length;t++)this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y)},this.updateByObject=function(t){ut.prototype.updateByObject.apply(this,arguments)}}function E(){arguments&&arguments.length&&(b.apply(this,arguments),this.rightEnd=!1,this.angleSpan=null,this.color="#0000FF",this.textColor="#0000FF",this.textFamily="veranda",this.textSize="10",this.textBold=!1,this.textItalic=!1,this.dx=0,this.dy=0,this.classType="TrendAngle"),this.trendLineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=this.trendLineGetStyleRows();return(t=this.removeStyleMenuElementByNames(t,["rightEndType","leftEndType","showDateRange","showDistance","showAngle"])).splice(1,0,this.getTextStyleRow()),t},this.updatePixels=function(){this.isPressed||(this.dy=this.points[1].y-this.points[0].y,this.dx=this.points[1].x-this.points[0].x,this.points[0].x=this.chartData.chart.toXPixels(this.data[0].d),this.points[0].y=this.chartData.chart.toYPixels(this.data[0].v),this.points[1].x=this.points[0].x+this.dx,this.points[1].y=this.points[0].y+this.dy,this.data[1].d=this.chartData.chart.toXValue(this.points[1].x),this.data[1].v=this.chartData.chart.toYValue(this.points[1].y),this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]],this.circles[1].points=[this.points[1]],this.circles[1].data=[this.data[1]])},this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1,this.isObjectEdit=!1;var a,i=!1;for(a=0;a<this.circles.length;a++){if(pt.isPointOnCircle(this.circles[a],{x:t,y:e})){0===a&&(this.isObjectEdit=!0),i=!0,this.isChanged=!0;break}this.circles[a].points[0].active=!1}if(i){for(var r=0;r<this.points.length;r++)this.isObjectEdit?(this.points[r].active=!0,this.circles[r].points[0].active=!0):this.points[r].active=!1;return this.circles[a].points[0].active=!0,!0}var s=this.points[0].x,n=this.points[1].x,o=this.points[0].y,h=this.points[1].y;if(this.leftEnd&&(s=this.leftEndPoint.x,o=this.leftEndPoint.y),this.rightEnd&&(n=this.rightEndPoint.x,h=this.rightEndPoint.y),pt.isPointOnLine({x1:s,x2:n,y1:o,y2:h},{x:t,y:e})){for(var c=0;c<this.points.length;c++)this.points[c].active=!0,this.circles&&this.circles[c]&&(this.circles[c].points[0].active=!0);this.isObjectEdit=!0,i=!0}return i},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)this.points[i].active&&0!==i&&(this.points[i].x=a.x,this.points[i].y=a.y,this.data[i].d=a.dateSeconds,this.data[i].v=a.value,this.dx=this.points[i].x-this.points[0].x,this.dy=this.points[i].y-this.points[0].y,this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]])},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return this.angleSpan.remove(),!1;this.angleSpan||this.createAngleBlock();var e,a=this.points[0].x,i=this.points[1].x,s=this.points[0].y,n=this.points[1].y,o=a,h=i,c=s,l=n,A=pt.findLineAngleDeg({x1:a,y1:s,x2:i,y2:n});e=!(Math.round(A)<0);var d=Math.round(A)+"°",p=A>=0?1:-1;if(Array.prototype.indexOf.call(this.chartData.chart.drawingTextContainer.children,this.angleSpan)<0&&this.chartData.chart.drawingTextContainer.appendChild(this.angleSpan),this.angleSpan.innerText=d,this.angleSpan.style.left=(parseFloat(o)+this.removalLength).toFixed(1)+"px",this.angleSpan.style.top=(parseFloat(c)-this.angleSpan.height/2+p*this.angleSpan.height/2).toFixed(1)+"px",this.angleSpan.style.color=this.textColor,this.leftEnd&&(this.leftEndPoint=this.getLeftEndPoint({x1:a,y1:s,x2:i,y2:n},this.chartData.chart.w,this.chartData.chart.h,A),o=this.leftEndPoint.x,c=this.leftEndPoint.y),this.rightEnd&&(this.rightEndPoint=this.getRightEndPoint({x1:a,y1:s,x2:i,y2:n},this.chartData.chart.w,this.chartData.chart.h,A),h=this.rightEndPoint.x,l=this.rightEndPoint.y),o=r.getPosition(o,this.width),c=r.getPosition(c,this.width),h=r.getPosition(h,this.width),l=r.getPosition(l,this.width),r.drawLine(null,t,o,c,h,l,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,1),r.drawLine(null,t,a,s,parseFloat(a)+this.removalLength,s,this.color,[2],1,1),r.drawArc(null,t,a,s,0,Math.round(A),this.removalLength,this.color,[3],1,1,e),"edit"!==this.state&&"active"!==this.state||r.drawLine(null,t,o,c,h,l,this.color,[],parseFloat(this.width)+10,.1),"edit"===this.state||"active"===this.state){for(var u=0;u<this.circles.length;u++)this.circles[u].points[0].active||this.circles[u].drawWithShadow(t,"white",this.color,.1);for(var g=0;g<this.circles.length;g++)this.circles[g].points[0].active&&this.circles[g].drawWithShadow(t,"red",this.color,.1)}return!0},this.remove=function(){this.angleSpan&&this.chartData.chart.drawingTextContainer.removeChild(this.angleSpan),b.prototype.remove.apply(this,arguments)},this.createAngleBlock=function(){var t=this.chartData.chart.parent.querySelector(".tch-drawing-text");this.angleSpan=document.createElement("span"),this.angleSpan.classList.toggle("tch-chart-angle-text",!0),this.angleSpan.innerText="0",t.appendChild(this.angleSpan),this.angleSpan.height=parseFloat(this.angleSpan.getBoundingClientRect().height)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.trendLineUpdateCustomPropsByObj(t,e),t.dx=e.dx,t.dy=e.dy,t.textColor=e.textColor,t.textFamily=e.textFamily,t.textSize=e.textSize,t.textBold=e.textBold,t.textItalic=e.textItalic}}function L(){arguments&&arguments.length&&b.apply(this,arguments),this.drawingStage={current:0,max:2},this.heightData={v:0,y:0},this.fill=!0,this.fillColor="#0000ff",this.opacity=.1,this.drawMiddle=!0,this.middleColor="#00ff00",this.middleWidth=1,this.middleType="dash",this.rightEnd=!1,this.leftEnd=!1,this.classType="ParallelChannel",this.trendLineIsFocused=this.isFocused,this.isFocused=function(t,e){if(this.trendLineIsFocused(t,e))return!0;if(pt.isPointOnLine({x1:this.rightEndPoint.x,x2:this.leftEndPoint.x,y1:r.getPosition(parseFloat(this.rightEndPoint.y)-parseFloat(this.heightData.y),this.width),y2:r.getPosition(parseFloat(this.leftEndPoint.y)-parseFloat(this.heightData.y),this.width)},{x:t,y:e})){for(var a=0;a<this.points.length;a++)this.points[a].active=!0,this.circles&&this.circles[a]&&(this.circles[a].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e,a,i,s,n,o,h=this.points[0].x,c=this.points[1].x,l=this.points[0].y,A=this.points[1].y;if(this.chartData.techChart.charts.length>1)for(var d=0;d<this.chartData.techChart.charts.length;d++)this.chartData.techChart.charts[d].canvasDrawingActive&&this.points[1].y>this.chartData.techChart.charts[d].canvasDrawingActive.clientHeight&&(this.points[1].y=0);var p=pt.findLineAngleDeg({x1:h,y1:l,x2:c,y2:A});if(n=this.getEndPoints(h,l,c,A,p),this.leftEndPoint=n.lep,this.rightEndPoint=n.rep,this.drawingStage.current>1){if(i=r.getPosition(parseFloat(l)-parseFloat(this.heightData.y),this.width),s=r.getPosition(parseFloat(A)-parseFloat(this.heightData.y),this.width),o=this.getEndPoints(h,i,c,s,p),this.fill){var u=[];u.push([n.lep.x,n.lep.y]),u.push([n.rep.x,n.rep.y]),u.push([o.rep.x,o.rep.y]),u.push([o.lep.x,o.lep.y]),r.drawPolygon(null,t,u,this.fillColor,!1,!0,0,4,this.opacity)}if(e=r.getPosition(n.lep.x,this.width),a=r.getPosition(n.rep.x,this.width),i=r.getPosition(n.lep.y,this.width),s=r.getPosition(n.rep.y,this.width),f.prototype.draw.apply(this,[t,e,a,i,s]),e=r.getPosition(o.lep.x,this.width),a=r.getPosition(o.rep.x,this.width),i=r.getPosition(o.lep.y,this.width),s=r.getPosition(o.rep.y,this.width),f.prototype.draw.apply(this,[t,e,a,i,s]),this.drawMiddle){i=parseFloat(l)-parseFloat(this.heightData.y)/2,s=parseFloat(A)-parseFloat(this.heightData.y)/2;var g=this.getEndPoints(h,i,c,s,p);e=r.getPosition(g.lep.x,this.width),a=r.getPosition(g.rep.x,this.width),i=r.getPosition(g.lep.y,this.width),s=r.getPosition(g.rep.y,this.width),r.drawLine(null,t,e,i,a,s,this.middleColor,this.getLineTypeArray(this.middleType,this.middleWidth),this.middleWidth,1)}}else e=r.getPosition(this.points[0].x,this.width),a=r.getPosition(this.points[1].x,this.width),i=r.getPosition(this.points[0].y,this.width),s=r.getPosition(this.points[1].y,this.width),f.prototype.draw.apply(this,[t,e,a,i,s]);return!0},this.updatePixels=function(){if(!this.isPressed){for(var t=0;t<this.points.length;t++)2!==t&&(this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]);if(this.heightData.y=this.heightData.v/this.chartData.scaleParams.deltaY,this.points[2]){var e=this.getMiddleData(this.data[0],this.data[1]),a=this.getMiddlePoint(this.points[0],this.points[1]);this.points[2].x=a.x,this.points[2].y=parseFloat(a.y)-parseFloat(this.heightData.y),this.data[2].d=e.d,this.data[2].v=e.v+this.heightData.v,this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]]}}},this.appendPoint=function(t,e){this.data.push(t),this.points.push(e),this.circles.push(new v(this.chartData,{data:[this.data[this.data.length-1]],points:[this.points[this.points.length-1]]}))},this.updateLastPoint=function(t,e){var a=this.data.length-1;a<2&&(this.data[a]=t,this.points[a]=e,this.circles[a].points=[this.points[a]]),this.completeFigure(t,e)},this.moveTo=function(t,e,a){for(var i,r,s=0;s<this.points.length;s++)this.points[s].active&&(this.points.length<3?(this.points[s].x=a.x,this.points[s].y=a.y,this.data[s].d=a.dateSeconds,this.data[s].v=a.value,this.circles[s].points=[this.points[s]],this.circles[s].data=[this.data[s]]):2===s?this.drawingStage.current<3?(this.points[s].x=this.points[1].x,this.points[s].y=a.y,this.data[s].d=this.data[1].d,this.data[s].v=a.value,this.heightData={v:a.value-this.data[1].v,y:this.points[1].y-a.y},this.circles[s].points=[this.points[s]],this.circles[s].data=[this.data[s]]):(i=this.getMiddleData(this.data[0],this.data[1]),r=this.getMiddlePoint(this.points[0],this.points[1]),this.points[s].x=r.x,this.points[s].y=a.y,this.data[s].d=i.d,this.data[s].v=a.value,this.heightData={v:a.value-i.v,y:r.y-a.y},this.circles[s].points=[this.points[s]],this.circles[s].data=[this.data[s]]):(this.points[s].x=a.x,this.points[s].y=a.y,this.data[s].d=a.dateSeconds,this.data[s].v=a.value,i=this.getMiddleData(this.data[0],this.data[1]),r=this.getMiddlePoint(this.points[0],this.points[1]),this.points[2].x=r.x,this.points[2].y=parseFloat(r.y)-parseFloat(this.heightData.y),this.data[2].d=i.d,this.data[2].v=i.v+this.heightData.v,this.circles[s].points=[this.points[s]],this.circles[s].data=[this.data[s]],this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]]))},this.getStyleRows=function(){var t=f.prototype.getStyleRows.apply(this,arguments),e=this,a=[e.getMiddleSettingsRow(),e.getBackgroundRow(),e.getRightEndRow(),e.getLeftEndRow()];return t.concat(a)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.trendLineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.trendLineUpdateCustomPropsByObj(t,e),t.heightData=ut.cloneObject(e.heightData),t.fill=e.fill,t.fillColor=e.fillColor,t.opacity=e.opacity,t.drawMiddle=e.drawMiddle,t.middleColor=e.middleColor,t.middleWidth=e.middleWidth,t.middleType=e.middleType}}function Q(){arguments&&arguments.length&&L.apply(this,arguments),this.color="#00ff00",this.fillColor="#00ff00",this.opacity=.3,this.textColor="#0000FF",this.textFamily="veranda",this.textSize="10",this.textBold=!1,this.textItalic=!1,this.classType="DisjointAngle",this.isFocused=function(t,e){if(this.trendLineIsFocused(t,e))return!0;if(3===this.points.length&&pt.isPointOnLine({x1:this.points[2].x,x2:this.points[3].x,y1:this.points[2].y,y2:this.points[3].y},{x:t,y:e})){for(var a=0;a<this.points.length;a++)this.points[a].active=!0,this.circles&&this.circles[a]&&(this.circles[a].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1},this.getStyleRows=function(){var t=f.prototype.getStyleRows.apply(this,arguments),e=this,a=[e.getTextStyleRow(),e.getBackgroundRow(),e.getLeftEndRow(),e.getRightEndRow(),e.getShowPriceRow(),e.getBackgroundRow()];return t.concat(a)},this.parallelChannelApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.parallelChannelApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.draw=function(t){if(this.chartData.techChart.charts.length>1)for(var e=0;e<this.chartData.techChart.charts.length;e++)this.chartData.techChart.charts[e].canvasDrawingActive&&this.points[1].y>this.chartData.techChart.charts[e].canvasDrawingActive.clientHeight&&(this.points[1].y=0,f.prototype.draw.apply(this,[t,this.points[0].x,this.points[1].x,this.points[0].y,this.points[1].y]));if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a,i,s,n,o,h,c,l,A,d,p,u,g,w,v,y,m=this.points[0].x,B=this.points[1].x,C=this.points[0].y,D=this.points[1].y;if(v=pt.findLineAngleDeg({x1:m,y1:C,x2:B,y2:D}),g=this.getEndPoints(m,C,B,D,v),this.leftEndPoint=g.lep,this.rightEndPoint=g.rep,a=r.getPosition(g.lep.x,this.width),i=r.getPosition(g.rep.x,this.width),o=r.getPosition(g.lep.y,this.width),h=r.getPosition(g.rep.y,this.width),this.points.length<3)f.prototype.draw.apply(this,[t,a,i,o,h]);else if(3===this.points.length){var b=this.points[1].y-this.points[0].y,x=this.points[2].y-this.points[1].y;p=B,A=m,d=r.getPosition(parseFloat(this.points[0].y)+2*b+x,this.width),u=r.getPosition(parseFloat(this.points[1].y)+x,this.width),y=pt.findLineAngleDeg({x1:A,y1:d,x2:p,y2:u}),w=this.getEndPoints(A,d,p,u,y),s=r.getPosition(w.lep.x,this.width),n=r.getPosition(w.rep.x,this.width),c=r.getPosition(w.lep.y,this.width),l=r.getPosition(w.rep.y,this.width),this.fill&&this.fillFigure(t,a,o,i,h,s,c,n,l),f.prototype.draw.apply(this,[t,a,i,o,h]),f.prototype.draw.apply(this,[t,s,n,c,l])}else p=r.getPosition(this.points[2].x,this.width),A=r.getPosition(this.points[3].x,this.width),u=r.getPosition(this.points[2].y,this.width),d=r.getPosition(this.points[3].y,this.width),y=pt.findLineAngleDeg({x1:A,y1:d,x2:p,y2:u}),w=this.getEndPoints(A,d,p,u,y),s=r.getPosition(w.lep.x,this.width),n=r.getPosition(w.rep.x,this.width),c=r.getPosition(w.lep.y,this.width),l=r.getPosition(w.rep.y,this.width),this.fill&&this.fillFigure(t,a,o,i,h,s,c,n,l),f.prototype.draw.apply(this,[t,a,i,o,h]),f.prototype.draw.apply(this,[t,s,n,c,l]);return!0},this.updatePixels=function(){if(!this.isPressed)for(var t=0;t<this.points.length;t++)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]},this.updateLastPoint=function(t,e){var a=this.data.length-1;a<2&&(this.data[a]=t,this.points[a]=e,this.circles[a].points=[this.points[a]]),this.completeFigure(t,e)},this.moveTo=function(t,e,a){for(var i,r,s,n,o=0;o<this.points.length;o++)this.points[o].active&&(this.points.length<3?(this.points[o].x=a.x,this.points[o].y=a.y,this.data[o].d=a.dateSeconds,this.data[o].v=a.value):2===o?(r=this.points[o].y,i=this.data[o].v,this.points[o].x=this.points[1].x,this.points[o].y=a.y,this.data[o].d=this.data[1].d,this.data[o].v=a.value,this.points.length>3&&(r-=this.points[o].y,i-=this.data[o].v,this.points[3].y-=r,this.data[3].v-=i,this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]])):(this.points[o].x=a.x,this.points[o].y=a.y,this.data[o].d=a.dateSeconds,this.data[o].v=a.value,0===o?(s=this.points[1].y-this.points[0].y,n=this.data[1].v-this.data[0].v,this.points[3].y=parseFloat(this.points[2].y)+s,this.points[3].x=this.points[0].x,this.data[3].v=parseFloat(this.data[2].v)+n,this.data[3].d=this.data[0].d,this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]]):1===o?(s=this.points[1].y-this.points[0].y,n=this.data[1].v-this.data[0].v,this.points[2].y=parseFloat(this.points[3].y)-s,this.points[2].x=this.points[1].x,this.data[2].v=parseFloat(this.data[3].v)-n,this.data[2].d=this.data[1].d,this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]]):3===o&&(s=this.points[3].y-this.points[2].y,n=this.data[3].v-this.data[2].v,this.points[0].y=parseFloat(this.points[1].y)-s,this.points[0].x=this.points[3].x,this.data[0].v=parseFloat(this.data[1].v)-n,this.data[0].d=this.data[3].d,this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]])),this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]])},this.completeFigure=function(){if(!(this.points.length<3)){var t=this.points[1].y-this.points[0].y,e=this.points[2].y-this.points[1].y,a=this.points[0].x,i=this.points[1].x,r=parseFloat(this.points[0].y)+2*t+e,s=parseFloat(this.points[1].y)+e;this.points[2].x=i,this.points[2].y=s,this.data[2].d=this.data[1].d,this.data[2].v=this.chartData.chart.toYValue(s),this.points.push({x:a,y:r}),this.data.push({d:this.data[0].d,v:this.chartData.chart.toYValue(r)}),this.circles[2].data=[this.data[2]],this.circles[2].points=[this.points[2]],this.circles.push(new v(this.chartData,{data:[this.data[3]],points:[this.points[3]]})),this.draw(this.chartData.chart.canvasDrawingContext)}},this.parallelChannelUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.parallelChannelUpdateCustomPropsByObj(t,e),t.textColor=e.textColor,t.textFamily=e.textFamily,t.textSize=e.textSize,t.textBold=e.textBold,t.textItalic=e.textItalic}}function O(){arguments&&arguments.length&&Q.apply(this,arguments),this.color="#800080",this.fillColor="#800080",this.opacity=.3,this.classType="FlatTopBottom",this.draw=function(t){if(this.chartData.techChart.charts.length>1)for(var e=0;e<this.chartData.techChart.charts.length;e++)this.chartData.techChart.charts[e].canvasDrawingActive&&this.points[1].y>this.chartData.techChart.charts[e].canvasDrawingActive.clientHeight&&(this.points[1].y=0,f.prototype.draw.apply(this,[t,this.points[0].x,this.points[1].x,this.points[0].y,this.points[1].y]));if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a,i,s,n,o,h,c,l,A,d,p=this.points[0].x,u=this.points[1].x,g=this.points[0].y,w=this.points[1].y,v=pt.findLineAngleDeg({x1:p,y1:g,x2:u,y2:w});if(A=this.getEndPoints(p,g,u,w,v),this.leftEndPoint=A.lep,this.rightEndPoint=A.rep,a=r.getPosition(A.lep.x,this.width),i=r.getPosition(A.rep.x,this.width),o=r.getPosition(A.lep.y,this.width),h=r.getPosition(A.rep.y,this.width),this.points.length<3)f.prototype.draw.apply(this,[t,a,i,o,h]);else if(3===this.points.length){var y=this.points[2].y-this.points[1].y;s=r.getPosition(A.lep.x,this.width),n=r.getPosition(A.rep.x,this.width),c=l=r.getPosition(parseFloat(this.points[1].y)+y,this.width),s=(d=this.fixFlatLineEnds(s,n)).x2,n=d.x3,this.fill&&this.fillFigure(t,a,o,i,h,s,c,n,l),f.prototype.draw.apply(this,[t,a,i,o,h]),f.prototype.draw.apply(this,[t,s,n,c,l])}else s=r.getPosition(A.rep.x,this.width),n=a,c=r.getPosition(this.points[2].y,this.width),l=r.getPosition(this.points[3].y,this.width),s=(d=this.fixFlatLineEnds(s,n)).x2,n=d.x3,this.fill&&this.fillFigure(t,a,o,i,h,n,l,s,c),f.prototype.draw.apply(this,[t,a,i,o,h]),f.prototype.draw.apply(this,[t,s,n,c,l]);return!0},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points.length<3?(this.points[i].x=a.x,this.points[i].y=a.y,this.data[i].d=a.dateSeconds,this.data[i].v=a.value):2===i?(this.points[i].x=this.points[1].x,this.points[i].y=a.y,this.data[i].d=this.data[1].d,this.data[i].v=a.value,this.points.length>3&&(this.points[3].y=this.points[i].y,this.data[3].v=this.data[i].v,this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]])):(this.points[i].x=a.x,this.data[i].d=a.dateSeconds,0===i?(this.points[i].y=a.y,this.data[i].v=a.value,this.points[3].y=this.points[2].y,this.points[3].x=this.points[0].x,this.data[3].v=this.data[2].v,this.data[3].d=this.data[2].d,this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]]):1===i?(this.points[i].y=a.y,this.data[i].v=a.value,this.points[2].x=this.points[1].x,this.data[2].d=this.data[1].d,this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]]):3===i&&(this.points[0].x=this.points[3].x,this.data[0].d=this.data[3].d,this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]])),this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]])},this.completeFigure=function(){if(!(this.points.length<3)){var t=this.points[2].y-this.points[1].y,e=this.points[0].x,a=this.points[1].x,i=parseFloat(this.points[1].y)+t,r=i;this.points[2].x=a,this.points[2].y=i,this.data[2].d=this.data[1].d,this.data[2].v=this.chartData.chart.toYValue(i),this.points.push({x:e,y:r}),this.data.push({d:this.data[0].d,v:this.data[2].v}),this.circles[2].data=[this.data[2]],this.circles[2].points=[this.points[2]],this.circles.push(new v(this.chartData,{data:[this.data[3]],points:[this.points[3]]})),this.draw(this.chartData.chart.canvasDrawingContext)}},this.disjointAngleUpdateByObject=this.updateByObject,this.updateByObject=function(t){this.disjointAngleUpdateByObject(t)}}function U(){b.apply(this,arguments),this.color="#008000",this.fill=!0,this.fillColor="#e89a66",this.opacity=.3,this.rightEnd=!1,this.leftEnd=!1,this.drawingStage={current:0,max:100},this.isClosed=!1,this.classType="Polyline",this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;if(this.chartData.techChart.charts.length>1)for(var e=0;e<this.chartData.techChart.charts.length;e++)this.chartData.techChart.charts[e].canvasDrawingActive&&this.points[1].y>this.chartData.techChart.charts[e].canvasDrawingActive.clientHeight&&(this.points[1].y=0,f.prototype.draw.apply(this,[t,this.points[0].x,this.points[1].x,this.points[0].y,this.points[1].y]));if(this.isClosed){for(var a=[],i=0;i<this.points.length;i++)a.push([this.points[i].x,this.points[i].y]);this.fill?r.drawPolygon(null,t,a,this.fillColor,this.color,!0,this.width,a.length,this.opacity,this.getLineTypeArray(this.lineType,this.width)):r.drawPolygon(null,t,a,null,this.color,!0,this.width,a.length,this.opacity,this.getLineTypeArray(this.lineType,this.width))}else for(var s=0;s<this.points.length-1;s++){var n=this.points[s].x,o=this.points[s+1].x,h=this.points[s].y,c=this.points[s+1].y;n=r.getPosition(n,this.width),h=r.getPosition(h,this.width),o=r.getPosition(o,this.width),c=r.getPosition(c,this.width),r.drawLine(null,t,n,h,o,c,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,1),"edit"!==this.state&&"active"!==this.state||r.drawLine(null,t,n,h,o,c,this.color,[],parseFloat(this.width)+10,.1)}if("edit"===this.state||"active"===this.state){for(var l=0;l<this.circles.length;l++)this.circles[l].points[0].active||this.circles[l].drawWithShadow(t,"white",this.color,.1);for(l=0;l<this.circles.length;l++)this.circles[l].points[0].active&&this.circles[l].drawWithShadow(t,"red",this.color,.1)}return!0},this.getStyleRows=function(){var t=f.prototype.getStyleRows.apply(this,arguments),e=this,a=[e.getBackgroundRow()];return t.concat(a)},this.updateLastPoint=function(t,e){this.isClosed=this.checkClosed(t,e),this.isClosed&&(this.drawingStage.current=100,t=ut.cloneObject(this.data[0]),e=ut.cloneObject(this.points[0]));var a=this.data.length-1;this.data[a]=t,this.points[a]=e,this.circles[a].points[0]=this.points[a]},this.updateLastPointForBreak=function(){this.drawingStage.current=100;var t=ut.cloneObject(this.data[0]),e=ut.cloneObject(this.points[0]),a=this.data.length-1;this.data[a]=t,this.points[a]=e,this.circles[a].points[0]=this.points[a],this.isClosed=!0},this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1,this.isChanged=!1;for(var a=!1,i=0,r=0;r<this.circles.length;r++){if(i++,pt.isPointOnCircle(this.circles[r],{x:t,y:e})){this.circles[r].points[0].active=!0,this.points[r].active=!0,a=!0,this.isChanged=!0;break}this.circles[r].points[0].active=!1,this.points[r].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(this.circles[0].points[0].active&&this.isClosed&&(this.circles[this.circles.length-1].points[0].active=!0,this.points[this.circles.length-1].active=!0),a)return!0;for(var s=0;s<this.points.length-1;s++){var n=this.points[s].x,o=this.points[s+1].x,h=this.points[s].y,c=this.points[s+1].y;if(pt.isPointOnLine({x1:n,x2:o,y1:h,y2:c},{x:t,y:e})){for(var l=0;l<this.points.length;l++)this.points[l].active=!0,this.circles&&this.circles[l]&&(this.circles[l].points[0].active=!0);this.isObjectEdit=!0,a=!0}}return a},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.trendLineUpdateCustomPropsByObj(t,e),t.isClosed=e.isClosed,t.fill=e.fill,t.fillColor=e.fillColor}}function H(){b.apply(this,arguments),this.circles=[],this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.circles.push(new v(this.chartData,{data:[this.data[1]],points:[this.points[1]]})),this.color="#008000",this.rightEnd=!1,this.leftEnd=!1,this.heightData={v:0,y:0},this.fill=!0,this.fillColor="#0000ff",this.opacity=.1,this.classType="Rectangle",this.trendLineIsFocused=this.isFocused,this.isFocused=function(t,e){if(this.trendLineIsFocused(t,e))return!0;this.isObjectEdit=!1;var a=this.getPosition(),i=pt.isPointOnLine({x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2},{x:t,y:e}),r=pt.isPointOnLine({x1:a.x2,x2:a.x3,y1:a.y2,y2:a.y3},{x:t,y:e}),s=pt.isPointOnLine({x1:a.x3,x2:a.x0,y1:a.y3,y2:a.y0},{x:t,y:e});if(i||r||s){for(var n=0;n<this.points.length;n++)this.points[n].active=!0,this.circles&&this.circles[n]&&(this.circles[n].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;2===this.circles.length&&this.addPoints();var e=this.getPosition();if(this.fill){var a=[];a.push([e.x0,e.y0]),a.push([e.x1,e.y1]),a.push([e.x2,e.y2]),a.push([e.x3,e.y3]),r.drawPolygon(null,t,a,this.fillColor,!1,!0,0,4,this.opacity)}return t.lineCap="round",f.prototype.draw.apply(this,[t,e.x0,e.x1,e.y0,e.y1]),f.prototype.draw.apply(this,[t,e.x1,e.x2,e.y1,e.y2]),f.prototype.draw.apply(this,[t,e.x2,e.x3,e.y2,e.y3]),f.prototype.draw.apply(this,[t,e.x3,e.x0,e.y3,e.y0]),t.lineCap="butt",!0},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=a.x,this.points[i].y=a.y,this.data[i].d=a.dateSeconds,this.data[i].v=a.value,this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]],0!==i&&2!==i||!this.points[2]?this.points[2]&&(this.recountPoint(2,3,1),this.recountPoint(0,1,3)):(this.recountPoint(1,0,2),this.recountPoint(3,2,0)))},this.recountPoint=function(t,e,a){this.points[t].x=this.points[e].x,this.points[t].y=this.points[a].y,this.data[t].d=this.data[e].d,this.data[t].v=this.data[a].v,this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]},this.updateLastPoint=function(){},this.addPoints=function(){var t,e,a,i,r,s;t=this.points[0],a=this.points[1],e={x:t.x,y:a.y},i={x:a.x,y:t.y},r={d:this.chartData.chart.toXValue(e.x),v:this.chartData.chart.toYValue(e.y)},s={d:this.chartData.chart.toXValue(i.x),v:this.chartData.chart.toYValue(i.y)},this.data[2]=this.data[1],this.points[2]=this.points[1],this.data[1]=r,this.points[1]=e,this.data.push(s),this.points.push(i),this.circles.push(new v(this.chartData,{data:[this.data[2]],points:[this.points[2]]})),this.circles.push(new v(this.chartData,{data:[this.data[3]],points:[this.points[3]]}))},this.getStyleRows=function(){var t=f.prototype.getStyleRows.apply(this,arguments),e=this,a=[e.getBackgroundRow()];return t.concat(a)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.trendLineUpdateCustomPropsByObj(t,e),t.fill=e.fill,t.fillColor=e.fillColor},this.getPosition=function(){return{x0:r.getPosition(this.points[0].x,this.width),x1:r.getPosition(this.points[1].x,this.width),x2:r.getPosition(this.points[2].x,this.width),x3:r.getPosition(this.points[3].x,this.width),y0:r.getPosition(this.points[0].y,this.width),y1:r.getPosition(this.points[1].y,this.width),y2:r.getPosition(this.points[2].y,this.width),y3:r.getPosition(this.points[3].y,this.width)}}}function k(){arguments&&arguments.length&&b.apply(this,arguments),this.drawingStage={current:0,max:1},this.color="#0000FF",this.width=1,this.state="edit",this.height=50,this.t=.5,this.lineType="normal",this.name="curve",this.classType="Curve",this.trendLineIsFocused=this.isFocused,this.isFocused=function(t,e){if(this.isChanged=!1,this.isFocusedOnCircles(t,e))return this.isChanged=!0,!0;if(this.drawingStage.current>0){var a=this.getPosition(),i={x:a.x0,y:a.y0},r={x:a.x2,y:a.y2},s={x:a.x1,y:a.y1},n=pt.getControlPoint(.5,i,r,s),o={x:[a.x0,n.x,a.x1],y:[a.y0,n.y,a.y1]};if(pt.isPointInPolygon(t,e,o)&&this.arePointsOnCurve(i,n,s,.1,t,e)){for(var h=0;h<this.points.length;h++)this.points[h].active=!0,this.circles&&this.circles[h]&&(this.circles[h].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1}},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e,a,i;a=r.getPosition(this.points[0].x,this.width),i=r.getPosition(this.points[1].x,this.width);var s={x:a,y:r.getPosition(this.points[0].y,this.width)},n={x:i,y:r.getPosition(this.points[1].y,this.width)};e=this.points.length<3?this.getPeekPoint():{x:this.points[2].x,y:this.points[2].y};var o=pt.getControlPoint(this.t,s,e,n);if(this.chartData.techChart.charts.length>1)for(var h=0;h<this.chartData.techChart.charts.length;h++)this.chartData.techChart.charts[h].canvasDrawingActive&&n.y>this.chartData.techChart.charts[h].canvasDrawingActive.clientHeight&&(n.y=0,r.drawQuadraticCurve(null,t,s,o,n,this.t,"transparent",this.color,this.width,1,this.getLineTypeArray(this.lineType,this.width)));if(r.drawQuadraticCurve(null,t,s,o,n,this.t,"transparent",this.color,this.width,1,this.getLineTypeArray(this.lineType,this.width)),"edit"===this.state||"active"===this.state){for(var c=0;c<this.circles.length;c++)this.circles[c].points[0].active||this.circles[c].drawWithShadow(t,"white",this.color,.1);for(c=0;c<this.circles.length;c++)this.circles[c].points[0].active&&this.circles[c].drawWithShadow(t,"red",this.color,.1)}},this.updateLastPoint=function(t,e){var a=this.data.length-1;this.data[a]=t,this.points[a]=e,this.circles[a].points[0]=this.points[a];var i=this.getPeekPoint();this.points[2]=i,this.data[2]={},this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles.push(new v(this.chartData,{data:[this.data[2]],points:[this.points[2]]}))},this.lineGetStyleRows=this.getStyleRows,this.getStyleRows=function(){var t=b.prototype.getStyleRows.apply(this,arguments),e=[];return t.concat(e)}}function N(){arguments&&arguments.length&&b.apply(this,arguments),this.color="#008000",this.drawingStage={current:0,max:2},this.heightData={v:0,y:0},this.fill=!0,this.fillColor="#0000ff",this.rightEnd=!1,this.leftEnd=!1,this.opacity=.1,this.trendLineIsFocused=this.isFocused,this.lineType="normal",this.classType="Triangle",this.isFocused=function(t,e){if(this.trendLineIsFocused(t,e))return!0;this.isChanged=!1;var a=this.getPosition(),i=pt.isPointOnLine({x1:a.x1,x2:a.x2,y1:a.y1,y2:a.y2},{x:t,y:e}),r=pt.isPointOnLine({x1:a.x0,x2:a.x2,y1:a.y0,y2:a.y2},{x:t,y:e});if(i||r){for(var s=0;s<this.points.length;s++)this.points[s].active=!0;return this.isObjectEdit=!0,this.isChanged=!0,!0}return!1},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e=this.getPosition();if(this.drawingStage.current>1){e=this.getPosition();var a=[];if(a.push([e.x0,e.y0]),a.push([e.x1,e.y1]),a.push([e.x2,e.y2]),this.fill?r.drawPolygon(null,t,a,this.fillColor,this.color,!0,this.width,3,this.opacity,this.getLineTypeArray(this.lineType,this.width)):r.drawPolygon(null,t,a,null,this.color,!0,this.width,3,this.opacity,this.getLineTypeArray(this.lineType,this.width)),"edit"===this.state||"active"===this.state)for(var i=0;i<this.circles.length;i++){var s=this.circles[i].points[0].active?"red":"white";this.circles[i].drawWithShadow(t,s,this.color,.1)}}else{if(this.chartData.techChart.charts.length>1)for(var n=0;n<this.chartData.techChart.charts.length;n++)this.chartData.techChart.charts[n].canvasDrawingActive&&e.y1>this.chartData.techChart.charts[n].canvasDrawingActive.clientHeight&&(e.y1=0);f.prototype.draw.apply(this,[t,e.x0,e.x1,e.y0,e.y1])}return!0},this.getStyleRows=function(){var t=f.prototype.getStyleRows.apply(this,arguments),e=this,a=[e.getBackgroundRow()];return t.concat(a)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.trendLineUpdateCustomPropsByObj(t,e),t.fill=e.fill,t.fillColor=e.fillColor},this.getPosition=function(){var t=r.getPosition(this.points[0].x,this.width),e=r.getPosition(this.points[1].x,this.width),a=r.getPosition(this.points[0].y,this.width),i=r.getPosition(this.points[1].y,this.width);if(this.points[2])var s=r.getPosition(this.points[2].x,this.width),n=r.getPosition(this.points[2].y,this.width);return{x0:t,x1:e,x2:s,y0:a,y1:i,y2:n}}}function I(){arguments&&arguments.length&&b.apply(this,arguments),this.drawingStage={current:0,max:2},this.color="#5c126d",this.fill=!0,this.fillColor="#c842f4",this.opacity=.3,this.height=0,this.lineType="normal",this.width=6,this.classType="RotatedRect",this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1,this.isChanged=!1;for(var a=!1,i=0,r=0;r<this.circles.length;r++){if(i++,pt.isPointOnCircle(this.circles[r],{x:t,y:e})){this.circles[r].points[0].active=!0,this.points[r].active=!0,a=!0,this.isChanged=!0;break}this.circles[r].points[0].active=!1,this.points[r].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(a)return!0;if(this.drawingStage.current>2){var s=this.getPositions(),n=pt.isPointOnLine({x1:s.x2,y1:s.y2,x2:s.x3,y2:s.y3},{x:t,y:e}),o=pt.isPointOnLine({x1:s.x3,y1:s.y3,x2:s.x5,y2:s.y5},{x:t,y:e}),h=pt.isPointOnLine({x1:s.x5,y1:s.y5,x2:s.x4,y2:s.y4},{x:t,y:e}),c=pt.isPointOnLine({x1:s.x4,y1:s.y4,x2:s.x2,y2:s.y2},{x:t,y:e});if(n||o||h||c){for(var l=0;l<this.points.length;l++)this.points[l].active=!0,this.circles&&this.circles[l]&&(this.circles[l].points[0].active=!0);return this.isObjectEdit=!0,!0}return!1}},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)if(this.points[i].active)if(this.points.length<3)this.points[i].x=a.x,this.points[i].y=a.y,this.data[i].d=a.dateSeconds,this.data[i].v=a.value,this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]];else if(2===i||3===i||4===i||5===i)this.movePoints(a);else{this.points[i].x=a.x,this.points[i].y=a.y,this.data[i].d=a.dateSeconds,this.data[i].v=a.value,this.circles[i].points=[this.points[i]],this.circles[i].data=[this.data[i]];var r={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},s=this.getTopLeftData(r,this.height,null,!0);this.points[2].x=s.x,this.points[2].y=s.y,this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]];var n=this.getTopRightData(r,this.height,null,!0);this.points[3].x=n.x,this.points[3].y=n.y,this.data[3].d=this.chartData.chart.toXValue(this.points[3].x),this.data[3].v=this.chartData.chart.toYValue(this.points[3].y),this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]];var o=this.getTopLeftData(r,this.height,null,!1);this.points[4].x=o.x,this.points[4].y=o.y,this.data[4].d=this.chartData.chart.toXValue(this.points[4].x),this.data[4].v=this.chartData.chart.toYValue(this.points[4].y),this.circles[4].points=[this.points[4]],this.circles[4].data=[this.data[4]];var h=this.getTopRightData(r,this.height,null,!1);this.points[5].x=h.x,this.points[5].y=h.y,this.data[5].d=this.chartData.chart.toXValue(this.points[5].x),this.data[5].v=this.chartData.chart.toYValue(this.points[5].y),this.circles[5].points=[this.points[5]],this.circles[5].data=[this.data[5]]}},this.updatePixels=function(){if(!this.isPressed)for(var t=0;t<this.points.length;t++)if(0===t||1===t)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]];else if(this.points.length>2){var e={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},a={};if(2===t){a.x=this.chartData.chart.toXPixels(this.data[t].d),a.y=this.chartData.chart.toYPixels(this.data[t].v);var i=this.getTopLeftData(e,this.height,!1,!0);this.points[t].x=i.x,this.points[t].y=i.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}else if(3===t){a.x=this.chartData.chart.toXPixels(this.data[t].d),a.y=this.chartData.chart.toYPixels(this.data[t].v);var r=this.getTopRightData(e,this.height,!1,!0);this.points[t].x=r.x,this.points[t].y=r.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}else if(4===t){a.x=this.chartData.chart.toXPixels(this.data[t].d),a.y=this.chartData.chart.toYPixels(this.data[t].v);var s=this.getTopLeftData(e,this.height,!1,!1);this.points[t].x=s.x,this.points[t].y=s.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}else if(5===t){a.x=this.chartData.chart.toXPixels(this.data[t].d),a.y=this.chartData.chart.toYPixels(this.data[t].v);var n=this.getTopRightData(e,this.height,!1,!1);this.points[t].x=n.x,this.points[t].y=n.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}}},this.appendPoint=function(){this.points.push({x:parseFloat(this.points[0].x),y:parseFloat(this.points[0].y),active:!0}),this.data.push({d:this.data[0].d,v:this.data[0].v}),this.circles.push(new v(this.chartData,{data:[this.data[2]],points:[this.points[2]]})),this.points.push({x:parseFloat(this.points[1].x),y:parseFloat(this.points[1].y),active:!0}),this.data.push({d:this.data[1].d,v:this.data[1].v}),this.circles.push(new v(this.chartData,{data:[this.data[3]],points:[this.points[3]]})),this.points.push({x:parseFloat(this.points[0].x),y:parseFloat(this.points[0].y),active:!0}),this.data.push({d:this.data[0].d,v:this.data[0].v}),this.circles.push(new v(this.chartData,{data:[this.data[4]],points:[this.points[4]]})),this.points.push({x:parseFloat(this.points[1].x),y:parseFloat(this.points[1].y),active:!0}),this.data.push({d:this.data[1].d,v:this.data[1].v}),this.circles.push(new v(this.chartData,{data:[this.data[5]],points:[this.points[5]]}))},this.updateLastPoint=function(t,e){var a=this.data.length-1;a<2&&(this.data[a]=t,this.points[a]=e,this.circles[a].points=[this.points[a]])},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e={};if(this.drawingStage.current<2){if(e=this.getPositions(),this.chartData.techChart.charts.length>1)for(var a=0;a<this.chartData.techChart.charts.length;a++)this.chartData.techChart.charts[a].canvasDrawingActive&&e.y1>this.chartData.techChart.charts[a].canvasDrawingActive.clientHeight&&(e.y1=0);r.drawLine(null,t,e.x0,e.y0,e.x1,e.y1,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity)}if(this.drawingStage.current>=2){if(e=this.getPositions(),this.fill){var i=[];i.push([e.x2,e.y2]),i.push([e.x3,e.y3]),i.push([e.x5,e.y5]),i.push([e.x4,e.y4]),r.drawPolygon(null,t,i,this.fillColor,!1,!0,0,4,this.opacity,null)}t.lineCap="round",r.drawLine(null,t,e.x4,e.y4,e.x2,e.y2,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity),r.drawLine(null,t,e.x2,e.y2,e.x3,e.y3,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity),r.drawLine(null,t,e.x3,e.y3,e.x5,e.y5,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity),r.drawLine(null,t,e.x5,e.y5,e.x4,e.y4,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity),t.lineCap="butt"}if("edit"===this.state||"active"===this.state){for(var s=0;s<this.circles.length;s++)this.circles[s].points[0].active||this.circles[s].drawWithShadow(t,"white",this.color,.1);for(var n=0;n<this.circles.length;n++)this.circles[n].points[0].active&&this.circles[n].drawWithShadow(t,"red",this.color,.1)}return!0},this.getStyleRows=function(){var t=f.prototype.getStyleRows.apply(this,arguments),e=this,a=[e.getBackgroundRow()];return t.concat(a)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.trendLineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.trendLineUpdateCustomPropsByObj(t,e),t.height=ut.cloneObject(e.height),t.fill=e.fill,t.fillColor=e.fillColor,t.opacity=e.opacity,t.lineType=e.lineType,t.width=e.width}}function M(){arguments&&arguments.length&&b.apply(this,arguments),this.drawingStage={current:0,max:2},this.color="#ef680e",this.fill=!0,this.fillColor="#e89a66",this.width=1,this.opacity=.3,this.height=0,this.lineType="normal",this.classType="Arc",this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1,this.isChanged=!1;for(var a=!1,i=0,r=0;r<this.circles.length;r++){if(i++,pt.isPointOnCircle(this.circles[r],{x:t,y:e})){this.circles[r].points[0].active=!0,this.points[r].active=!0,this.opacity=.6,a=!0,this.isChanged=!0;break}this.circles[r].points[0].active=!1,this.points[r].active=!1,this.opacity=.3}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(a)return!0;if(this.drawingStage.current>2){var s=this.getPositions(),n=this.getPoints(),o=pt.getControlPoint(.5,n.p0,n.middlePoint,n.p2),h={x:[s.x0,n.p4.x,n.p5.x,s.x1],y:[s.y0,n.p4.y,n.p5.y,s.y1]};if(pt.isPointInPolygon(t,e,h)&&pt.arePointsOnBezier(n.p0,o,n.p2,.1,t,e)){for(var c=0;c<this.points.length;c++)this.points[c].active=!0,this.circles&&this.circles[c]&&(this.circles[c].points[0].active=!0),this.opacity=.6;this.isObjectEdit=!0,a=!0}return a}},this.moveTo=function(t,e,a){for(var i,r,s,n=0;n<this.points.length;n++)this.points[n].active&&(this.points.length<3?(this.points[n].x=a.x,this.points[n].y=a.y,this.data[n].d=a.dateSeconds,this.data[n].v=a.value,this.circles[n].points=[this.points[n]],this.circles[n].data=[this.data[n]]):2===n?(i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},r={x:a.x,y:a.y},s=this.getTopData(i,!1,r),this.height=s.h,this.points[n].x=s.x,this.points[n].y=s.y,this.data[n].d=this.chartData.chart.toXValue(this.points[n].x),this.data[n].v=this.chartData.chart.toYValue(this.points[n].y),this.circles[n].points=[this.points[n]],this.circles[n].data=[this.data[n]]):(this.points[n].x=a.x,this.points[n].y=a.y,this.data[n].d=a.dateSeconds,this.data[n].v=a.value,this.circles[n].points=[this.points[n]],this.circles[n].data=[this.data[n]],i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},r={x:a.x,y:a.y},s=this.getTopData(i,this.height),this.points[2].x=s.x,this.points[2].y=s.y,this.circles[2].points=[this.points[2]],this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].data=[this.data[2]]))},this.updatePixels=function(){if(!this.isPressed)for(var t=0;t<this.points.length;t++)if(2!==t)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]];else if(this.points.length>2){var e={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},a={};a.x=this.chartData.chart.toXPixels(this.data[2].d),a.y=this.chartData.chart.toYPixels(this.data[2].v);var i=this.getTopData(e,!1,a);this.height=i.h,this.points[t].x=i.x,this.points[t].y=i.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}},this.appendPoint=function(t,e){var a={v:t.v-this.data[1].v,y:this.points[1].y-e.y},i=this.getMiddleData(this.data[0],this.data[1]),r=this.getMiddlePoint(this.points[0],this.points[1]),s=r.x,n=parseFloat(r.y)-parseFloat(a.y),o=i.d,h=parseFloat(i.v)+parseFloat(a.v);this.points.push({x:s,y:n,active:!0}),this.data.push({d:o,v:h}),this.circles.push(new v(this.chartData,{data:[this.data[2]],points:[this.points[2]]}))},this.updateLastPoint=function(t,e){var a=this.data.length-1;a<2&&(this.data[a]=t,this.points[a]=e,this.circles[a].points=[this.points[a]])},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;if(this.drawingStage.current<2){var e=this.getPositions();if(this.chartData.techChart.charts.length>1)for(var a=0;a<this.chartData.techChart.charts.length;a++)this.chartData.techChart.charts[a].canvasDrawingActive&&e.y1>this.chartData.techChart.charts[a].canvasDrawingActive.clientHeight&&(e.y1=0);r.drawLine(null,t,e.x0,e.y0,e.x1,e.y1,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity)}var i=this.getPoints(),s=pt.getControlPoint(.5,i.p0,i.middlePoint,i.p2);if(this.drawingStage.current>=2&&(this.fill?r.drawQuadraticCurve(null,t,i.p0,s,i.p2,.5,this.fillColor,this.color,this.width,this.opacity,this.getLineTypeArray(this.lineType,this.width)):r.drawQuadraticCurve(null,t,i.p0,s,i.p2,.5,"transparent",this.color,this.width,this.opacity,this.getLineTypeArray(this.lineType,this.width))),"edit"===this.state||"active"===this.state){for(var n=0;n<this.circles.length;n++)this.circles[n].points[0].active||this.circles[n].drawWithShadow(t,"white",this.color,.1);for(var o=0;o<this.circles.length;o++)this.circles[o].points[0].active&&this.circles[o].drawWithShadow(t,"red",this.color,.1)}return!0},this.getStyleRows=function(){var t=f.prototype.getStyleRows.apply(this,arguments),e=this,a=[e.getBackgroundRow()];return t.concat(a)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.trendLineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.trendLineUpdateCustomPropsByObj(t,e),t.color=e.color,t.fill=e.fill,t.fillColor=e.fillColor,t.width=e.width,t.opacity=e.opacity,t.height=ut.cloneObject(e.height),t.lineType=e.lineType}}function R(t,e,a,i,r,s,n,o,h,c,l){this.value=t,this.x1=e,this.y1=a,this.x2=i,this.y2=r,this.lineClass=s,this.textX=parseFloat(n).toFixed(1),this.textY=parseFloat(o).toFixed(1),this.textClass=h,this.date=c,this.Mmmdd=l}function K(t,e){arguments&&arguments.length&&f.apply(this,arguments),this.points=[e.points[0]],this.data=[e.data[0]],this.drawingStage={current:0,max:1},this.circles=[],this.color="#2c2d2d",this.tmpPoint=null,this.controlPoints=[],this.width=2,this.t=.5,this.radius=7,this.lineType="normal",this.extremePoints={},this.extremeData={},this.classType="Brush",this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var a=!1;if(this.isObjectEdit=!1,this.isChanged=!1,this.isFocusedOnCircles(t,e)&&(a=!0,this.isChanged=!0),a||this.isPointInsideExtremePoints(t,e)&&this.isPointOnBrush(t,e)){for(var i=0;i<this.points.length;i++)this.points[i].active=!0;return this.circles[0].points[0].active=!0,this.circles[1].points[0].active=!0,this.isObjectEdit=!0,!0}for(i=0;i<this.points.length;i++)this.points[i].active=!0;return this.circles[0].points[0].active=!1,this.circles[1].points[0].active=!1,this.isObjectEdit=!1,!1},this.twoPointsDistance=function(t,e){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},this.twoPointsVector=function(t,e){return[e.x-t.x,e.y-t.y]},this.calculateControlPoints=function(t,e,a){var i=this.twoPointsVector(t,a),r=this.twoPointsDistance(t,e),s=this.twoPointsDistance(e,a),n=r+s;return[{x:e.x-i[0]*this.t*r/n,y:e.y-i[1]*this.t*r/n},{x:e.x+i[0]*this.t*s/n,y:e.y+i[1]*this.t*s/n}]},this.updateControlPoints=function(){var t=this.points.slice();this.tmpPoint&&t.push(this.tmpPoint),this.controlPoints=[];for(var e=0;e<t.length-2;e+=1){var a=t[e]?t[e]:NaN,i=t[e+1]?t[e+1]:NaN,r=t[e+2]?t[e+2]:NaN;this.controlPoints=this.controlPoints.concat(this.calculateControlPoints(a,i,r))}},this.shiftTo=function(t,e,a,i,r){if(0!==e||0!==t){for(var s=0;s<this.points.length;s++)this.points[s].y-=e,this.points[s].x-=t,this.data[s].d-=i,this.data[s].v-=r;this.updateControlPoints(),this.circles[0].points[0]=this.points[0],this.circles[1].points[0]=this.points[this.points.length-1],this.extremePoints.bottom-=e,this.extremeData.bottom-=r,this.extremePoints.top-=e,this.extremeData.top-=r,this.extremePoints.left-=t,this.extremeData.left-=i,this.extremePoints.rigth-=t,this.extremeData.rigth-=i}},this.moveTo=function(t,e,a){if(!(this.drawingStage.current>1)){var i=this.points[this.points.length-1];Math.abs(i.x-t)>this.radius||Math.abs(i.y-a.y)>this.radius?(this.points.push({x:t,y:e}),this.data.push({d:a.dateSeconds,v:a.value}),this.tmpPoint=null):this.tmpPoint={x:t,y:e},this.updateControlPoints()}},this.updatePixels=function(){if(!this.isPressed){for(var t=0;t<this.points.length;t++)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v);this.circles.length&&(this.circles[0].points[0]=this.points[0],this.circles[1].points[0]=this.points[this.points.length-1],this.restoreExtremePoints()),this.updateControlPoints()}},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e=this.points.slice();if(this.tmpPoint&&e.push(this.tmpPoint),e.length<2)return!1;if(2===e.length)t.beginPath(),t.moveTo(e[0].x,e[0].y),t.lineTo(e[1].x,e[1].y),t.stroke();else{t.beginPath(),t.moveTo(e[0].x,e[0].y),t.quadraticCurveTo(this.controlPoints[0].x,this.controlPoints[0].y,e[1].x,e[1].y);for(var a=2;a<e.length-1;a+=1)t.bezierCurveTo(this.controlPoints[2*(a-1)-1].x,this.controlPoints[2*(a-1)-1].y,this.controlPoints[2*(a-1)].x,this.controlPoints[2*(a-1)].y,e[a].x,e[a].y);t.quadraticCurveTo(this.controlPoints[2*(a-1)-1].x,this.controlPoints[2*(a-1)-1].y,e[a].x,e[a].y),t.strokeStyle=this.color,t.lineWidth=this.width,t.setLineDash(this.getLineTypeArray(this.lineType,this.width)),t.stroke()}if("edit"===this.state||"active"===this.state)for(a=0;a<this.circles.length;a++)this.circles[a].points[0].active?this.circles[a].drawWithShadow(t,"red",this.color,.1):this.circles[a].drawWithShadow(t,"white",this.color,.1);return!0},this.findExtremePoints=function(){var t={x:parseInt(this.points[0].x,10),y:parseInt(this.points[0].y,10)},e=this.data[0];this.extremePoints={top:t.y,bottom:t.y,left:t.x,rigth:t.x},this.extremeData={top:e.v,bottom:e.v,left:e.d,rigth:e.d};for(var a=0;a<this.points.length;a++)this.extremePoints.bottom<this.points[a].y&&(this.extremePoints.bottom=this.points[a].y,this.extremeData.bottom=this.data[a].v),this.extremePoints.top>this.points[a].y&&(this.extremePoints.top=this.points[a].y,this.extremeData.top=this.data[a].v),this.extremePoints.left>this.points[a].x&&(this.extremePoints.left=this.points[a].x,this.extremeData.left=this.data[a].d),this.extremePoints.rigth<this.points[a].x&&(this.extremePoints.rigth=this.points[a].x,this.extremeData.rigth=this.data[a].d)},this.restoreExtremePoints=function(){this.extremePoints.bottom=this.chartData.chart.toYPixels(this.extremeData.bottom),this.extremePoints.top=this.chartData.chart.toYPixels(this.extremeData.top),this.extremePoints.left=this.chartData.chart.toXPixels(this.extremeData.left),this.extremePoints.rigth=this.chartData.chart.toXPixels(this.extremeData.rigth)},this.completeFigure=function(){if(!this.circles.length){if(this.drawingStage.current+=1,this.tmpPoint){this.points.push(this.tmpPoint);var t=this.chartData.chart.toXValue(this.tmpPoint.x),e=this.chartData.chart.toYValue(this.tmpPoint.y);this.data.push({d:t,v:e}),this.tmpPoint=null}if(1==this.points.length){var a={x:this.points[0].x,y:this.points[0].y},i={d:this.data[0].d,v:this.data[0].v};this.points.push(a),this.data.push(i)}this.findExtremePoints(),this.updateControlPoints(),this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.circles.push(new v(this.chartData,{data:[this.data[this.data.length-1]],points:[this.points[this.points.length-1]]}))}},this.getLineTypeArray=function(t,e){switch(t){case"normal":return[];case"dash":return[3*e,2*e];case"points":return[e,e];default:return[]}},this.isFocusedOnCircles=function(t,e){for(var a=0;a<this.circles.length;a++)if(pt.isPointOnCircle(this.circles[a],{x:t,y:e}))return!0;return!1},this.isPointInsideExtremePoints=function(t,e){var a=this.extremePoints,i={x:[a.left-4,a.left-4,a.rigth+4,a.rigth+4],y:[a.bottom+4,a.top-4,a.top-4,a.bottom+4]};return!!pt.isPointInPolygon(t,e,i)},this.isPointOnBrush=function(t,e){for(var a=this.points,i=1;i<this.points.length;i++)if(pt.isPointOnLine({x1:a[i-1].x,x2:a[i].x,y1:a[i-1].y,y2:a[i].y},{x:t,y:e}))return!0;return!1},this.updateCustomPropsByObj=function(t,e){f.prototype.updateCustomPropsByObj.apply(this,arguments),t.extremeData=ut.cloneObject(e.extremeData)},this.lineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.lineConvertToDTO();return this.updateCustomPropsByObj(t,this),t}}function j(t,e,a){this.id=t,this.iniStr='<div class="tch-oscillator-data-panel"></div><canvas class="tch-chart-data-normal"></canvas><canvas class="tch-chart-data-pixelated"></canvas><div class="tch-chart-oscillator-rate-text-container"></div>',this.marginTop=25,this.marginBottom=20,this.dataPanelContainer,this.canvasDataNormal,this.canvasDataNormalContext,this.canvasDataPixelated,this.canvasDataPixelatedContext,this.scaleParams,this.chartData=e,this.w=a.w,this.h=a.h,this.top=a.top,this.name=a.name}function V(){arguments&&arguments.length&&z.apply(this,arguments),this.text="E",this.type="EventsBubble",this.showBubble=this.show,this.show=function(t){this.showBubble(t),this.divBubble.classList.toggle("tch-events-bubbles",!0)},this.getPositionTop=function(){return parseFloat(this.point.y)-4.5*this.radius-this.cY},this.getMaxItemsDate=function(){return z.getDateEventsBubble(this.items[0])},this.getMinItemsDate=function(){return z.getDateEventsBubble(this.items[this.items.length-1])}}function _(){arguments&&arguments.length&&z.apply(this,arguments),this.text="N",this.type="NewsBubble",this.showBubble=this.show,this.show=function(t){this.showBubble(t),this.divBubble.classList.toggle("tch-news-bubbles",!0)},this.getMaxItemsDate=function(){return z.getDateNewsBubble(this.items[0])},this.getMinItemsDate=function(){return z.getDateNewsBubble(this.items[this.items.length-1])}}function z(t,e){this.chartData=t,this.items=e.items,this.id=e.id,this.parent=null,this.divBubble=null,this.date=e.date,this.value=e.value,this.point=e.point,this.cY=15,this.radius=8,this.fontSize=14,this.currentPageIndex=0,this.currentPage=1,this.candleWidth=this.chartData.candleWidth,this.tooltip=null}function X(t,e){this.chartData=t,this.bubble=e.bubble,this.bubble.tooltip=this}function W(){X.apply(this,arguments),this.getParentDiv=function(){return this.chartData.chart.parent.querySelector(".tch-events-tooltip-container")},this.reAppend=function(){this.parentDiv.appendChild(this.headerDiv),this.headerDiv.appendChild(this.dateDiv),1!==this.data.length&&(this.spansDiv||(this.createSpansDiv(),this.createSpans(),this.setSpansClasses()),this.headerDiv.appendChild(this.spansDiv),this.spansDiv.appendChild(this.leftArrowSpan),this.spansDiv.appendChild(this.pagesSpan),this.spansDiv.appendChild(this.rightArrowSpan)),this.parentDiv.appendChild(this.bodyDiv)},this.createBodyDiv=function(){this.bodyDiv=document.createElement("div"),this.parentDiv.appendChild(this.bodyDiv),this.bodyDiv.classList.toggle("tch-tooltip-body",!0),this.bodyDiv.appendChild(this.createTitle()),this.infoEventsDiv=this.createInfoEventsDiv(),this.bodyDiv.appendChild(this.infoEventsDiv)},this.createTitle=function(){return this.titleDiv=document.createElement("div"),this.titleDiv.classList.toggle("tch-events-tooltip-title",!0),this.titleDiv.innerHTML=this.getTitleText(this.data[this.bubble.currentPageIndex]),this.titleDiv},this.getTitleText=function(){var t=this.data[this.bubble.currentPageIndex],e=t.name;return t.link?"<a href='"+t.link+"' target='_blank'>"+e+"</a>":e},this.createInfoEventsDiv=function(){return this.infoEventDiv=document.createElement("div"),this.infoEventDiv.classList.toggle("tch-events-tooltip-infoEventDiv",!0),this.data[this.bubble.currentPageIndex].actual?this.infoEventDiv.classList.toggle("tch-hidden",!1):this.infoEventDiv.classList.toggle("tch-hidden",!0),this.infoEventDiv.appendChild(this.createNameEventDiv()),this.infoEventDiv.appendChild(this.createDataEventDiv()),this.imgEventParentDiv=document.createElement("div"),this.imgEventParentDiv.classList.toggle("tch-events-tooltip-imgEventParentDiv"),this.imgEventParentDiv.appendChild(this.createImgEventDiv()),this.infoEventDiv.appendChild(this.imgEventParentDiv),this.infoEventDiv},this.createNameEventDiv=function(){return this.nameEventDiv=document.createElement("div"),this.nameEventDiv.classList.toggle("tch-events-tooltip-nameEventDiv",!0),this.nameEventSpanActual=this.nameEventSpan("actual"),this.nameEventSpanPrevious=this.nameEventSpan("previous"),this.nameEventSpanConsensus=this.nameEventSpan("consensus"),this.nameEventDiv.appendChild(this.nameEventSpanActual),this.nameEventDiv.appendChild(this.nameEventSpanPrevious),this.nameEventDiv.appendChild(this.nameEventSpanConsensus),this.nameEventDiv},this.createImgEventDiv=function(){return this.imgEventDiv=document.createElement("div"),this.imgEventDiv.classList.toggle("tch-events-tooltip-imgEventDiv",!0),this.updateImgEventDiv(this.data[this.bubble.currentPageIndex]),this.imgEventDiv},this.createDataEventDiv=function(){return this.dataEventDiv=document.createElement("div"),this.dataEventDiv.classList.toggle("tch-events-tooltip-dataEventDiv",!0),this.dataEventSpanActual=this.dataEventSpan("actual"),this.dataEventSpanPrevious=this.dataEventSpan("previous"),this.dataEventSpanConsensus=this.dataEventSpan("consensus"),this.dataEventDiv.appendChild(this.dataEventSpanActual),this.dataEventDiv.appendChild(this.dataEventSpanPrevious),this.dataEventDiv.appendChild(this.dataEventSpanConsensus),this.dataEventDiv},this.dataEventSpan=function(t){return this.secondSpan=document.createElement("span"),this.secondSpan.innerHTML=this.data[this.bubble.currentPageIndex][t],this.secondSpan.classList.toggle("tch-events-tooltip-span-events",!0),this.secondSpan},this.nameEventSpan=function(t){return this.firstSpan=document.createElement("span"),this.firstSpan.innerHTML=t,this.firstSpan.classList.toggle("tch-events-tooltip-span-name",!0),this.firstSpan},this.updateImgEventDiv=function(){var t=this.data[this.bubble.currentPageIndex];this.imgEventDiv.classList.toggle("tch-events-tooltip-up-arrow",t.better),this.imgEventDiv.classList.toggle("tch-events-tooltip-down-arrow",t.worst)},this.updateInfo=function(){this.dataEventDiv.children[0].textContent=this.data[this.bubble.currentPageIndex].actual,this.dataEventDiv.children[1].textContent=this.data[this.bubble.currentPageIndex].previous,this.dataEventDiv.children[2].textContent=this.data[this.bubble.currentPageIndex].consensus,this.data[this.bubble.currentPageIndex].actual?this.infoEventDiv.classList.toggle("tch-hidden",!1):this.infoEventDiv.classList.toggle("tch-hidden",!0),this.titleDiv.innerHTML=this.getTitleText(),this.updateImgEventDiv()},this.processData=function(t){for(var e=[],a=0;a<t.length;a++){var i=this.getLinkHref(t[a]),r=W.processEventItem(t[a]);r.link=i,r.name=t[a].Name,r.date=new Date(t[a].DateTime.Date).toGMTString(),e.push(r)}return e}}function Y(){X.apply(this,arguments),this.getParentDiv=function(){return this.chartData.chart.parent.querySelector(".tch-news-tooltip-container")},this.reAppend=function(){this.parentDiv.appendChild(this.headerDiv),this.headerDiv.appendChild(this.dateDiv),1!==this.data.length&&(this.headerDiv.appendChild(this.spansDiv),this.spansDiv.appendChild(this.leftArrowSpan),this.spansDiv.appendChild(this.pagesSpan),this.spansDiv.appendChild(this.rightArrowSpan)),this.parentDiv.appendChild(this.bodyDiv),this.bodyDiv.appendChild(this.img),this.bodyDiv.appendChild(this.titleDiv),this.titleDiv.appendChild(this.link)},this.createBodyDiv=function(){this.bodyDiv=document.createElement("div"),this.parentDiv.appendChild(this.bodyDiv),this.bodyDiv.classList.toggle("tch-tooltip-body",!0),this.img=document.createElement("img"),this.bodyDiv.appendChild(this.img),this.img.classList.toggle("tch-news-tooltip-img",!0),this.img.src=this.data[this.bubble.currentPageIndex].img+"?size=tiny",this.img.align="left",this.titleDiv=document.createElement("div"),this.bodyDiv.appendChild(this.titleDiv),this.titleDiv.classList.toggle("tch-news-tooltip-title",!0),this.link=document.createElement("a"),this.titleDiv.appendChild(this.link),this.link.classList.toggle("tch-news-tooltip-link",!0),this.link.href=this.data[this.bubble.currentPageIndex].link,this.link.innerHTML=this.data[this.bubble.currentPageIndex].title,this.link.target="_blank"},this.updateInfo=function(){this.img.src=this.data[this.bubble.currentPageIndex].img+"?size=tiny",this.link.href=this.data[this.bubble.currentPageIndex].link,this.link.innerHTML=this.data[this.bubble.currentPageIndex].title},this.processData=function(t){for(var e=[],a=0;a<t.length;a++)e.push({id:t[a].ID,img:t[a].Image,link:t[a].Link,date:this.convertDateToGMT(t[a].PublishDate),title:t[a].Title});return e},this.convertDateToGMT=function(t){return new Date(1e3*t).toGMTString()}}function q(){}function G(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){J(t,e,a[e])}))}return t}function J(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Z(t,e){var a=(t.colors.Signals||{}).chartPattern,i=void 0===a?{}:a,r=(t.options.Signals||{}).chartPattern,s=void 0===r?{}:r;this.id=e.signal.id,this.chartData=t,this.data=e.signal,this.directionArrow=G({strokeColor:"#ffffff",supportColor:"#ff0000",strokeWidth:1,resistanceColor:"#63b089"},i.directionArrow,s.directionArrow),this.predictionLines=G({color:"#4672aa",strokeWidth:1},i.predictionLines,s.predictionLines),this.isInstanceWithOffset=e.isInstanceWithOffset,this.predictionArea=G({color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000",strokeWidth:1,isCreated:!1},i.predictionArea,s.predictionArea),this.supportLine=G({start:{},end:{},color:"#4672aa",strokeWidth:1},i.supportLine,s.supportLine),this.resistanceLine=G({start:{},end:{},color:"#63b089",strokeWidth:1},i.resistanceLine,s.resistanceLine),this.patternEndLine=G({x:null,color:"#ff0000",strokeWidth:2},i.patternEndLine,s.patternEndLine),this.isNeedArrows=!0,this.isInitialized=!1,this.moveX=function(t){this.predictionLines.start.x+=t,this.predictionLines.end.x+=t,this.supportLine.start.x+=t,this.supportLine.end.x+=t,this.directionArrow.start.x+=t,this.directionArrow.end.x+=t,this.predictionArea.isCreated?this.predictionArea.x+=t:(this.predictionLines.support.start.x+=t,this.predictionLines.support.end.x+=t,this.predictionLines.resistance.start.x+=t,this.predictionLines.resistance.end.x+=t),this.patternEndLine.x+=t},this.shiftTo=function(t,e){this.moveX(t),this.predictionLines.start.y+=t,this.predictionLines.end.y+=t,this.supportLine.start.y+=t,this.supportLine.end.y+=t,this.directionArrow.start.y+=t,this.directionArrow.end.y+=t,this.predictionArea.y?this.predictionArea.y+=t:(this.predictionLines.support.start.y+=e,this.predictionLines.support.end.y+=e,this.predictionLines.resistance.start.y+=e,this.predictionLines.resistance.end.y+=e)}}function $(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){tt(t,e,a[e])}))}return t}function tt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function et(t,e){var a=(t.colors.Signals||{}).fibonacciPattern,i=void 0===a?{}:a,r=(t.options.Signals||{}).fibonacciPattern,s=void 0===r?{}:r;this.id=e.signal.id,this.chartData=t,this.data=e.signal,this.predictionPoint=$({color:"#fb00fb",radius:3,lineWidth:2},i.predictionPoint,s.predictionPoint),this.directionArrow=$({end:{},start:{},color:"#787878",strokeWidth:1},i.directionArrow,s.directionArrow),this.predictionArrow=$({end:{},start:{},color:"#787878",strokeWidth:1},i.predictionArrow,s.predictionArrow),this.patternEndLine=$({x:null,color:"#ff0000",strokeWidth:2},i.patternEndLine,s.patternEndLine),this.patternLines=$({lines:{},color:"#1266AF",points:["X","A","B","C","D"],textFont:"16px sans-serif",textColor:"#ffffff",strokeWidth:1,textAlignment:"center",textVerticalOffset:8,downDirectionTextVerticalOffset:28},i.patternLines,s.patternLines),this.dashedPatternLines=$({lines:[],color:"#1266AF",strokeWidth:2},i.dashedPatternLines,s.dashedPatternLines),this.levelLines=$({lines:[],color:"#ffffff",width:60,values:["0.382","0.500","0.618","0.786","1.000","1.272","1.618"],lineOffsetX:15,lineOffsetY:0,textOffsetX:0,textOffsetY:0,textFont:"11px sans-serif",textColor:"#ffffff",strokeWidth:1,textAlignment:"center"},i.levelLines,s.levelLines),this.isInstanceWithOffset=e.isInstanceWithOffset,this.isInitialized=!1,this.isNeedArrows=!0,this.isXLineVisible=!0}function at(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){it(t,e,a[e])}))}return t}function it(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function rt(t,e){var a=(t.colors.Signals||{}).keyLevelsPattern,i=void 0===a?{}:a,r=(t.options.Signals||{}).keyLevelsPattern,s=void 0===r?{}:r;this.id=e.signal.id,this.chartData=t,this.data=e.signal,this.directionArrow=at({strokeWidth:1,strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"},i.directionArrow,s.directionArrow),this.predictionLine=at({start:{},end:{},color:"#f6d002",strokeWidth:1},i.predictionLine,s.predictionLine),this.patternEndLine=at({x:null,color:"#ff0000",strokeWidth:2},i.patternEndLine,s.patternEndLine),this.predictionArea=at({color:"rgba(50, 50, 50, 0.3)",strokeWidth:1,borderColor:"#ff0000",isCreated:!1},i.predictionArea,s.predictionArea),this.patternLine=at({start:{},end:{},strokeWidth:1,supportColor:"#4672aa",resistanceColor:"#63b089"},i.patternLine,s.patternLine),this.isInstanceWithOffset=e.isInstanceWithOffset,this.isInitialized=!1}function st(t){return function e(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function nt(t){return(nt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function ot(t,e){function a(t){var e="";if(t>=86e3){var a=t/86e3;t%=86e3,e+=a.toFixed(0)+s}if(t>=3600){var i=t/3600;t%=3600,e+=i.toFixed(0)+n}return t>60&&(e+=(t/60).toFixed(0)+o),e}H.apply(this,arguments),this.angleSpan=null,this.datadiv=null,this.datafordiv=null,this.drawingStage={current:0,max:2},this.classType="Roulete";var i=t.techChart.translation["bars-roulete"],s=t.techChart.translation["day-roulete"],n=t.techChart.translation["hour-roulete"],o=t.techChart.translation["minute-roulete"];this.draw=function(t){this.datadiv&&this.datadiv.remove();var e=this.getPosition();if(this.fill){var a=[];a.push([e.x0,e.y0]),a.push([e.x1,e.y1]),a.push([e.x2,e.y2]),a.push([e.x3,e.y3]),r.drawPolygon(null,t,a,this.fillColor,!1,!0,0,4,this.opacity)}var i,s,n=(this.points[1].x-this.points[0].x)/2+parseFloat(this.points[0].x),o=(this.points[1].y-this.points[0].y)/2+parseFloat(this.points[0].y),h=r.getPosition(n,this.width),c=r.getPosition(o,this.width),l=r.getPosition(e.x0,this.width),A=r.getPosition(e.x2,this.width),d=r.getPosition(e.y0,this.width),p=r.getPosition(e.y1,this.width);return r.drawLine(null,t,h,d,h,p,"#000000",[7,8],1,1),r.drawLine(null,t,l,c,A,c,"#000000",[7,8],1,1),i=parseFloat(this.points[1].x)<parseFloat(this.points[0].x)?"down":"up",parseFloat(this.points[1].y)<parseFloat(this.points[0].y)?(s="up",parseFloat(this.points[1].y-50)):(s="down",parseFloat(this.points[1].y)),this.drawArrow(t,{x:e.x2,y:o},0,7,30,i),this.drawArrow(t,{x:n,y:this.points[1].y},90,7,30,s),this.datafordiv=this.dataCalculate(),this.createDiv(),parseFloat(this.points[1].y)<parseFloat(this.points[0].y)?this.datadiv.style.top=this.points[1].y-50+"px":this.datadiv.style.top=this.points[1].y+"px",this.datadiv.style.left=n-this.datadiv.getBoundingClientRect().width/2+"px",!0},this.dataCalculate=function(){this.result=[];var t=this.chartData.chart.toYValue(this.points[0].y),i=this.chartData.chart.toYValue(this.points[1].y),r=this.chartData.chart.toXValue(this.points[1].x),s=ne.binaryIndexOfCandleByTime(e.data[0].d,this.chartData.data[this.chartData.typeData]),n=ne.binaryIndexOfCandleByTime(r,this.chartData.data[this.chartData.typeData]);"undefined"!==n&&null!==n||(n=0),"undefined"!==s&&null!==s||(s=this.chartData.data[this.chartData.typeData].length-1-n),this.result[0]=i-t;var o=this.CountOfFixed(this.result[0]);this.result[0]=this.result[0].toFixed(o);var h=this.chartData.data[this.chartData.typeData][n].date-this.chartData.data[this.chartData.typeData][s].date;this.result[3]=a(Math.abs(h)),h<0&&(this.result[3]="-"+this.result[3]);var c=this.result[0]/t*100;return o=this.CountOfFixed(c),this.result[1]="("+c.toFixed(o)+"%), ",this.result[2]=i-t,o=this.CountOfFixed(this.result[2]),this.result[2]=this.result[2].toFixed(o),this.result[4]=s-n,this.result},this.createDiv=function(){this.datadiv=document.createElement("div"),this.datadiv.classList.toggle("tch-roulete-data-container",!0),this.datadivFirstLine=document.createElement("div"),this.datadivFirstLine.classList.toggle("tch-roulete-inside-data-container",!0),this.datadivSecondLine=document.createElement("div"),this.datadivSecondLine.classList.toggle("tch-roulete-inside-data-container",!0),this.datadiv.appendChild(this.datadivFirstLine),this.datadiv.appendChild(this.datadivSecondLine),this.fromX0BartoX1Bar=document.createElement("span"),this.fromX0BartoX1Bar.classList.toggle("tch-chart-data-text",!0),this.fromX0BartoX1Bar.innerText=this.datafordiv[0].toString(),this.fromY0toY1change=document.createElement("span"),this.fromY0toY1change.classList.toggle("tch-chart-data-text",!0),this.fromY0toY1change.innerText=(this.datafordiv[2]*Math.pow(10,parseFloat(this.chartData.precission))).toFixed(0),this.percenChange=document.createElement("span"),this.percenChange.classList.toggle("tch-chart-data-text",!0),this.percenChange.innerText=this.datafordiv[1],this.timeChange=document.createElement("span"),this.timeChange.classList.toggle("tch-chart-data-text",!0),this.timeChange.innerText=this.datafordiv[3],this.barsCount=document.createElement("span"),this.barsCount.classList.toggle("tch-chart-data-text",!0),this.barsCount.innerText=this.datafordiv[4]+i,this.datadivFirstLine.appendChild(this.fromX0BartoX1Bar),this.datadivFirstLine.appendChild(this.percenChange),this.datadivFirstLine.appendChild(this.fromY0toY1change),this.datadivSecondLine.appendChild(this.barsCount),this.datadivSecondLine.appendChild(this.timeChange),this.chartData.chart.drawingText.appendChild(this.datadiv)},this.remove=function(){this.datadiv&&this.datadiv.remove(),ot.prototype.remove.apply(this,arguments)},this.CountOfFixed=function(t){for(var e=String(t).split(""),a=0;a<e.length;a++)if("."!==e[a]&&"0"!==e[a]&&"-"!==e[a])return a},this.appendPoint=function(t,e){this.data.push(t),this.points.push(e),this.circles.push(new v(this.chartData,{data:[this.data[this.data.length-1]],points:[this.points[this.points.length-1]]}))},this.updateLastPoint=function(t,e){2===this.drawingStage.current&&(this.remove(),this.chartData.techChart.setState("default"),this.chartData.techChart.setRouleteBtn("Off")),1===this.drawingStage.current&&this.chartData.techChart.setRouleteBtn("Off");var a=this.data.length-1;a<2&&(this.data[a]=t,this.points[a]=e)},this.moveTo=function(t,e,a){for(var i=0;i<this.points.length;i++)this.points[i].active&&(this.points[i].x=a.x,this.points[i].y=a.y,this.data[i].d=a.dateSeconds,this.data[i].v=a.value)},this.getStyleRows=function(){},this.isFocused=function(){},this.applyValue=function(t,e){this[e]=t,this.chartData.chart.redrawInfo(),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id)},this.getPosition=function(){return{x0:this.points[0].x,x1:this.points[0].x,x2:this.points[1].x,x3:this.points[1].x,y0:this.points[0].y,y1:this.points[1].y,y2:this.points[1].y,y3:this.points[0].y}}}function ht(){arguments&&arguments.length&&b.apply(this,arguments),this.drawingStage={current:0,max:2},this.color="#ef680e",this.fill=!0,this.fillColor="#e89a66",this.opacity=.3,this.height=0,this.lineType="normal",this.width=1,this.classType="Ellipse",this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1,this.isObjectEdit=!1;for(var a=!1,i=0,r=0;r<this.circles.length;r++){if(i++,pt.isPointOnCircle(this.circles[r],{x:t,y:e})){this.circles[r].points[0].active=!0,this.points[r].active=!0,a=!0,this.isChanged=!0;break}this.circles[r].points[0].active=!1,this.points[r].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;if(a)return!0;if(this.drawingStage.current>=2){var s=this.getPositions(),n={x1:s.x0,y1:s.y0,x2:s.x1,y2:s.y1},o=pt.findLineAngleDeg(n),h=-pt.degToRad(o),c={x:t,y:e},l={x:s.x0,y:s.y0},A={x:s.x1,y:s.y1},d=this.getMiddlePoint(l,A),p={h:d.x,k:d.y,rx:Math.sqrt((s.x1-s.x0)*(s.x1-s.x0)+(s.y1-s.y0)*(s.y1-s.y0))/2,ry:Math.sqrt((s.x3-s.x2)*(s.x3-s.x2)+(s.y3-s.y2)*(s.y3-s.y2))/2};if(pt.isPointOnEllipse(p,c,h,.1)){for(var u=0;u<this.points.length;u++)this.points[u].active=!0,this.circles&&this.circles[u]&&(this.circles[u].points[0].active=!0);this.isObjectEdit=!0,a=!0}return a}},this.moveTo=function(t,e,a){for(var i,r,s,n,o=0;o<this.points.length;o++)this.points[o].active&&(this.points.length<3?(this.points[o].x=a.x,this.points[o].y=a.y,this.data[o].d=a.dateSeconds,this.data[o].v=a.value,this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]]):2===o?(i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},r={x:a.x,y:a.y},s=this.getTopData(i,!1,r,!0),this.height=s.h,this.points[o].x=s.x,this.points[o].y=s.y,this.data[o].d=this.chartData.chart.toXValue(this.points[o].x),this.data[o].v=this.chartData.chart.toYValue(this.points[o].y),this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]],n=this.getTopData(i,!1,r,!1),this.height=n.h,this.points[3].x=n.x,this.points[3].y=n.y,this.data[3].d=this.chartData.chart.toXValue(this.points[3].x),this.data[3].v=this.chartData.chart.toYValue(this.points[3].y),this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]],this.circles[3].points[0].active=!0,this.points[3].active=!0):3===o?(i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},r={x:a.x,y:a.y},n=this.getTopData(i,!1,r,!1),this.height=n.h,this.points[o].x=n.x,this.points[o].y=n.y,this.data[o].d=this.chartData.chart.toXValue(this.points[o].x),this.data[o].v=this.chartData.chart.toYValue(this.points[o].y),this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]],s=this.getTopData(i,!1,r,!0),this.height=s.h,this.points[2].x=s.x,this.points[2].y=s.y,this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]],this.circles[2].points[0].active=!0,this.points[2].active=!0):(this.points[o].x=a.x,this.points[o].y=a.y,this.data[o].d=a.dateSeconds,this.data[o].v=a.value,this.circles[o].points=[this.points[o]],this.circles[o].data=[this.data[o]],i={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},r={x:a.x,y:a.y},s=this.getTopData(i,this.height,null,!0),this.points[2].x=s.x,this.points[2].y=s.y,this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]],n=this.getTopData(i,this.height,null,!1),this.points[3].x=n.x,this.points[3].y=n.y,this.data[3].d=this.chartData.chart.toXValue(this.points[3].x),this.data[3].v=this.chartData.chart.toYValue(this.points[3].y),this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]]))},this.updatePixels=function(){if(!this.isPressed)for(var t=0;t<this.points.length;t++)if(0===t||1===t)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]];else if(this.points.length>2){var e={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},a={};if(2===t){a.x=this.chartData.chart.toXPixels(this.data[2].d),a.y=this.chartData.chart.toYPixels(this.data[2].v);var i=this.getTopData(e,!1,a);this.height=i.h,this.points[t].x=i.x,this.points[t].y=i.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}else{a.x=this.chartData.chart.toXPixels(this.data[3].d),a.y=this.chartData.chart.toYPixels(this.data[3].v);var r=this.getTopData(e,!1,a);this.height=r.h,this.points[t].x=r.x,this.points[t].y=r.y,this.data[t].d=this.chartData.chart.toXValue(this.points[t].x),this.data[t].v=this.chartData.chart.toYValue(this.points[t].y),this.circles[t].points=[this.points[t]],this.circles[t].data=[this.data[t]]}}},this.appendPoint=function(t,e){var a={v:t.v-this.data[1].v,y:this.points[1].y-e.y},i=this.getMiddleData(this.data[0],this.data[1]),r=this.getMiddlePoint(this.points[0],this.points[1]),s=r.x,n=parseFloat(r.y)-parseFloat(a.y),o=i.d,h=parseFloat(i.v)+parseFloat(a.v);this.points.push({x:s,y:n,active:!0}),this.data.push({d:o,v:h}),this.circles.push(new v(this.chartData,{data:[this.data[2]],points:[this.points[2]]})),this.points.push({x:s,y:n,active:!0}),this.data.push({d:o,v:h}),this.circles.push(new v(this.chartData,{data:[this.data[3]],points:[this.points[3]]}))},this.updateLastPoint=function(t,e){var a=this.data.length-1;a<2&&(this.data[a]=t,this.points[a]=e,this.circles[a].points=[this.points[a]])},this.draw=function(t){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;var e=this.getPositions();if(this.drawingStage.current<2){if(this.chartData.techChart.charts.length>1)for(var a=0;a<this.chartData.techChart.charts.length;a++)this.chartData.techChart.charts[a].canvasDrawingActive&&e.y1>this.chartData.techChart.charts[a].canvasDrawingActive.clientHeight&&(e.y1=0);r.drawLine(null,t,e.x0,e.y0,e.x1,e.y1,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,this.opacity)}if(this.drawingStage.current>=2){var i={x1:e.x0,y1:e.y0,x2:e.x1,y2:e.y1},s=pt.findLineAngleDeg(i),n={x:e.x0,y:e.y0},o={x:e.x1,y:e.y1},h=this.getMiddlePoint(n,o),c=h.x,l=h.y,A=Math.sqrt((e.x1-e.x0)*(e.x1-e.x0)+(e.y1-e.y0)*(e.y1-e.y0))/2,d=Math.sqrt((e.x3-e.x2)*(e.x3-e.x2)+(e.y3-e.y2)*(e.y3-e.y2))/2,p=-pt.degToRad(s),u=2*Math.PI;this.fill?r.drawEllipse(null,t,c,l,A,d,p,0,u,!1,this.fillColor,this.width,this.color,this.opacity,this.getLineTypeArray(this.lineType,this.width)):r.drawEllipse(null,t,c,l,A,d,p,0,u,!1,"transparent",this.width,this.color,this.opacity,this.getLineTypeArray(this.lineType,this.width))}if("edit"===this.state||"active"===this.state){for(var g=0;g<this.circles.length;g++)this.circles[g].points[0].active||this.circles[g].drawWithShadow(t,"white",this.color,.1);for(var f=0;f<this.circles.length;f++)this.circles[f].points[0].active&&this.circles[f].drawWithShadow(t,"red",this.color,.1)}return!0},this.getStyleRows=function(){var t=f.prototype.getStyleRows.apply(this,arguments),e=this,a=[e.getBackgroundRow()];return t.concat(a)},this.trendLineConvertToDTO=this.convertToDTO,this.convertToDTO=function(){var t=this.trendLineConvertToDTO();return this.updateCustomPropsByObj(t,this),t},this.trendLineApplyRestoredParams=this.applyRestoredParams,this.applyRestoredParams=function(t){this.trendLineApplyRestoredParams(t),this.updateCustomPropsByObj(this,t)},this.trendLineUpdateCustomPropsByObj=this.updateCustomPropsByObj,this.updateCustomPropsByObj=function(t,e){this.trendLineUpdateCustomPropsByObj(t,e),t.height=ut.cloneObject(e.height),t.fill=e.fill,t.fillColor=e.fillColor,t.opacity=e.opacity,t.lineType=e.lineType,t.width=e.width}}function ct(t){arguments&&arguments.length&&w.apply(this,arguments),this.chartData=t,this.note=null,this.textSpanBackground=null,this.textSpanBackgroundHeight=20,this.textSpanBackgroundWidth=250,this.color="rgba(0,0,255,1)",this.fill=!0,this.fillColor="rgba(164,194,244,1)",this.label=!1,this.colorLabel="rgba(0,0,255,1)",this.size=30,this.fontSize=28,this.rect={},this.divText=null,this.pText=null,this.note=null,this.state="edit",this.classType="Note",this.draw=function(){if(this.chartData&&this.chartData.chart){if(this.divText=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id),this.divText||(this.divText=document.createElement("div"),this.divText.classList.toggle("tch-divText",!0),this.divText.setAttribute("id",this.id),this.divText.style.width=this.textSpanBackgroundWidth+"px",this.chartData.chart.drawingTextContainer.appendChild(this.divText)),this.pText=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id+"-note-text"),this.textSpanBackground=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id+"-note-out"),this.note=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id+"-note-simbol"),null===this.pText&&null===this.textSpanBackground&&null===this.note){this.pText=document.createElement("p"),this.pText.setAttribute("id",this.id+"-note-text"),this.pText.classList.toggle("tch-note-text",!0),this.divText.appendChild(this.pText),this.pText.style.borderColor=this.colorLabel,this.textSpanBackground=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.textSpanBackground.setAttribute("id",this.id+"-note-out"),this.textSpanBackground.classList.toggle("tch-note-out",!0);var t=document.createElementNS("http://www.w3.org/2000/svg","polyline");this.textSpanBackground.appendChild(t),this.textSpanBackground.setAttribute("viewBox","0 0 "+this.textSpanBackgroundWidth+" "+this.textSpanBackgroundHeight),this.textSpanBackground.setAttribute("heigth",this.textSpanBackgroundHeight+"px"),this.textSpanBackground.setAttribute("width",this.textSpanBackgroundWidth+"px"),this.textSpanBackground.style.display="block",this.divText.appendChild(this.textSpanBackground),this.note=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.note.setAttribute("id",this.id+"-note-simbol"),this.note.classList.toggle("tch-note-simbol",!0),this.note.setAttribute("viewBox","0 0 1024 1024"),this.note.setAttribute("heigth",this.size+"px"),this.note.setAttribute("width",this.size+"px"),this.note.style.display="block",this.divText.appendChild(this.note)}this.note.innerHTML=this.getPathString(this.colorLabel.replace(/ /g,"")),this.applyTextParams(),this.applyNoteParams(),"normal"!==this.state?(this.pText.classList.toggle("tch-hidden",!1),this.textSpanBackground.classList.toggle("tch-hidden",!1)):(this.pText.classList.toggle("tch-hidden",!0),this.textSpanBackground.classList.toggle("tch-hidden",!0)),this.applyPosition()}},this.isFocused=function(t,e){var a=parseFloat(this.points[0].x),i=parseFloat(this.points[0].y),r={x1:a-this.size/2,x2:a+this.size/2,y1:i,y2:i-this.size};return this.isObjectEdit=pt.isPointInRect(r,{x:t,y:e},5),this.isObjectEdit},this.removeDrawingObject=ut.prototype.remove,this.remove=function(){this.removeDrawingObject(),this.chartData.chart.drawingTextContainer.removeChild(this.divText)},this.getStyleRows=function(){return[this.getTextStyleRow(),this.getTextAreaRow(),this.getBackgroundRow(),this.getLabelRow()]},this.applyValue=function(t,e){this[e]=t,this.draw(),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id)},this.convertToDTO=function(){var t=ut.prototype.convertToDTO.apply(this,arguments);return this.updateCustomPropsByObj(t,this),t}}function lt(){arguments&&arguments.length&&ct.apply(this,arguments),this.classType="AnchoredNote",this.updatePixels=function(){},this.convertToDTO=function(){var t=ut.prototype.convertToDTO.apply(this,arguments);return this.updateCustomPropsByObj(t,this),t}}function At(){arguments&&arguments.length&&w.apply(this,arguments),this.classType="AnchoredText",this.updatePixels=function(){}}function dt(t){this.chartData=t,arguments&&arguments.length&&(f.apply(this,arguments),this.circles.push(new v(this.chartData,{data:[this.data[0]],points:[this.points[0]]})),this.circles[0].radius=4),this.divText=null,this.icon=null,this.size=30,this.flagColor="rgba(0, 255, 0, 1)",this.centring={x:1,y:0},this.price=this.data[0].v,this.barNumber=-1,this.classType="Flag",this.applyRestoredParams=function(t){ut.prototype.applyRestoredParams.apply(this,arguments),this.updateCustomPropsByObj(this,t)},this.draw=function(t){this.chartData&&this.chartData.chart&&(this.divText=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id),this.divText||(this.createDiv(),this.chartData.chart.drawingTextContainer.appendChild(this.divText)),this.icon=this.chartData.chart.drawingTextContainer.querySelector("#"+this.id+"-icon-simbol"),null===this.icon&&(this.createIcon(),this.divText.appendChild(this.icon)),this.applyIconParams(),this.applyFlagParams(),"edit"!==this.state&&"active"!==this.state||(this.circles[0].points[0].active?(this.circles[0].drawShadow(t,"white",this.flagColor,.1),this.circles[0].draw(t,"red","black")):(this.circles[0].drawShadow(t,"white",this.flagColor,.1),this.circles[0].draw(t,"white","black"))))},this.shiftTo=function(t,e,a,i,r){if(0!==e||0!==t){for(var s=0;s<this.points.length;s++)this.points[s].y-=e,this.points[s].x-=t,this.data[s].d-=i,this.data[s].v-=r;this.circles[0].points=[this.points[0]],this.circles[0].data=[this.data[0]]}},this.isFocused=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isChanged=!1,this.isObjectEdit=!1;var a=!1;return pt.isPointOnCircle(this.circles[0],{x:t,y:e})&&(this.isChanged=!0,a=!0),this.isPointOnFlag(t,e)&&(a=!0),a?(this.circles[0].points[0].active=!0,this.points[0].active=!0,this.isObjectEdit=!0):(this.circles[0].points[0].active=!1,this.points[0].active=!1),a},this.removeDrawingObject=this.remove,this.remove=function(){this.removeDrawingObject(),this.chartData.chart.drawingTextContainer.removeChild(this.divText)},this.getStyleRows=function(){return[[{className:"tch-ss-basic"},{text:this.chartData.techChart.translation.flagcolor,options:{line:this,id:"tch-settingsStyle-input-color",name:"flagColor",type:"colorpicker",value:this.color,onchange:this.changeValueInput}}]]},this.applyValueBase=this.applyValue,this.applyValue=function(t,e){if("flagColor"===e)for(var a=this.divText.querySelectorAll("rect"),i=0;i<a.length;i++)a[i].style.fill=t;if("barNumber"===e&&this.chartData.data[this.chartData.techChart.configuration.typeData][t]){var r=this.chartData.data[this.chartData.techChart.configuration.typeData][t].date;this.data[0].d=r,this.chartData.chart&&this.chartData.chart.canvasDrawingContext&&this.updatePixels()}if("price"===e){var s=t.replace(",",".");if(isNaN(s))return void(this.chartData.chart.parent.querySelector("#tch-settingsCoordinates-input-text").value=this.price);this.data[0].v=t,this.price=t,this.updatePixels()}this.applyValueBase(t,e)},this.updateCustomPropsByObj=function(t,e){t.flagColor=e.flagColor,t.periods=e.periods.slice(0),t.barNumber=e.barNumber,t.price=e.price;var a=this.data[0].v;this.price="string"===typeof a?a:a.toFixed(this.chartData.precission)},this.getCoordinatesRows=function(){return[[{className:"tch-ss-basic"},{text:this.chartData.techChart.translation.price,options:{line:this,className:"input-styled",id:"tch-settingsCoordinates-input-text",name:"price",type:"text",value:this.price,onchange:this.changeValueInput}},{text:this.chartData.techChart.translation.barNumber,options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-barNumber",name:"barNumber",type:"number",value:this.barNumber,oninput:this.changeValueInput}}]]},this.getStylePropsNames=function(){return["size","flagColor","price","barNumber"]},this.fillLineCoordinatesBase=this.fillLineCoordinates,this.fillLineCoordinates=function(t){this.barNumber=this.getBarNumber(),this.fillLineCoordinatesBase(t)}}function pt(){}function ut(t,e){this.id=this.getNextId(),this.chartData=t,this.data=ut.cloneObject(e.data),this.points=ut.cloneObject(e.points),this.isObjectEdit=!1,this.drawingStage={current:1,max:0},this.periods=[]}function gt(t){return function e(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function ft(t){return(ft="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function wt(t,e){for(var a=0;a<e.length;a++){var i=e[a];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function vt(){}function yt(t,e,a,i,r,s,n,o,h){this.low=t,this.high=e,this.open=a,this.close=i,this.date=r,this.x=s,this.y=n,this.scale=o,this.line,this.body,this.crossPosition={x:"0.0",y:"0.0"},this.isCurrentData,this.width,this.useCanvas=h}function mt(t){return(mt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Ct(t,e){return(Ct=Object.setPrototypeOf||function t(e,a){return e.__proto__=a,e})(t,e)}function Dt(t,e,a,i,r){this.value=t,this.date=e,this.x=a,this.y=i,r&&(this.low=r.low,this.high=r.high,this.open=r.open,this.close=r.close)}function bt(t){return(bt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function xt(t){return(xt=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Ft(t,e){return(Ft=Object.setPrototypeOf||function t(e,a){return e.__proto__=a,e})(t,e)}function St(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pt(t){return(Pt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Tt(t){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Et(t,e){return(Et=Object.setPrototypeOf||function t(e,a){return e.__proto__=a,e})(t,e)}function Lt(t,e,a,i,r,s,n,o,h){this.low=t,this.high=e,this.open=a,this.close=i,this.date=r,this.x=s,this.y=n,this.scale=o,this.line,this.body,this.crossPosition={x:"0.0",y:"0.0"},this.isCurrentData,this.lineWidth=2,this.useCanvas=h}function Qt(t){return(Qt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Ot(t){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Ut(t,e){return(Ut=Object.setPrototypeOf||function t(e,a){return e.__proto__=a,e})(t,e)}function Ht(t,e,a,i,r,s,n,o,h){this.low=t,this.high=e,this.open=a,this.close=i,this.date=r,this.x=s,this.y=n,this.scale=o,this.line,this.body,this.crossPosition={x:"0.0",y:"0.0"},this.isCurrentData,this.width,this.useCanvas=h,this.hollowCandlePriceLine}function kt(t){return(kt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function It(t,e){return(It=Object.setPrototypeOf||function t(e,a){return e.__proto__=a,e})(t,e)}function Mt(t){return(Mt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function t(e){return e.__proto__||Object.getPrototypeOf(e)})(t)}function Kt(t,e){return(Kt=Object.setPrototypeOf||function t(e,a){return e.__proto__=a,e})(t,e)}function jt(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}function Vt(t){return(Vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function t(e){return typeof e}:function t(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function _t(t){return t&&"object"===Vt(t)&&!Array.isArray(t)}function zt(t){for(var e=arguments.length,a=new Array(e>1?e-1:0),i=1;i<e;i++)a[i-1]=arguments[i];if(!a.length)return t;var r=a.shift();if(_t(t)&&_t(r))for(var s in r)_t(r[s])?(t[s]||Object.assign(t,jt({},s,{})),zt(t[s],r[s])):Object.assign(t,jt({},s,r[s]));return zt.apply(void 0,[t].concat(a))}function Xt(t){if(t&&"object"===Vt(t))return JSON.parse(JSON.stringify(t))}function Wt(){var t=Xt(arguments[0]);return zt(t,arguments[1])}function Yt(t){var e=!1;return Object.keys(t).forEach((function(a){t[a]&&(e=!0)})),e}function qt(t){return t.modules.isSideBarCreate&&(t.modules.isSideBarCreate=Yt(t.modules.sideBarButtons)),t.modules.isHeaderCreate&&(t.modules.isHeaderCreate=Yt(t.modules.headerButtons)),t}function Gt(t,e){return t.reduce((function(t,a){return function i(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){jt(t,e,a[e])}))}return t}({},t,jt({},a,e[a]))}),{})}function Jt(t,e){return function a(t){if(Array.isArray(t))return t}(t)||function i(t,e){var a=[],i=!0,r=!1,s=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(h){r=!0,s=h}finally{try{i||null==o.return||o.return()}finally{if(r)throw s}}return a}(t,e)||function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Zt(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter((function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable})))),i.forEach((function(e){$t(t,e,a[e])}))}return t}function $t(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}i.r(e);var te={version:"1.1",pair:{ID:23,Name:"EURUSD",FullName:"EUR/USD",Category:"Currency"},period:"1",timeMode:"local",chartType:"candle",state:"default",indicators:[],currentValue:{ask:"0.00000",bid:"0.00000",mid:"0.00000"},quotationCountries:!1,lang:"ru",defaultLang:"en",isHeaderHidden:!1,isSidebarHidden:!1,isFullScreen:!1,isDataPanel:!1,isAutoRestore:!0,isMagnetMode:!1,isStayDrawingMode:!1,isShowDrawingObjects:!0,isDataPanelBodyOpened:!1,isDrawingObjectsLocked:!1,isShowChartContextMenu:!0,isInstanceWithOffset:!1,isMinMaxPricesMarksEnabled:!1,isPipsShow:!1,rowsid:[],defaultId:23,typeThemes:"dark",listTemesDesign:["darkthema","whitethema"],isConfigpage:!1,typeData:"bid",signalTypesData:["mid"],tabsQuantity:5,timeframesForEvents:["minute","minute5","minute15","minute30","hour"],timeframesForNews:["minute","minute5","minute15","minute30","hour"],offsetChart:.5,defaultParams:{activeSpliter:0,activeChartIndex:0,cursorType:"arrow",setTimeoutforSave:750,paramsPanels:{isHeaderHidden:!1,isSidebarHidden:!0,isFullScreen:!0,isDataPanel:!0}},modules:{isSideBarCreate:!0,isHeaderCreate:!0,headerButtons:{searchQuotationButton:!0,createTabButton:!0,fullScreenButton:!0,chartTypeButton:!0,periodsButton:!0,indicatorButton:!0,splitterButton:!0,createTypeDataButton:!0,settingsButton:!0,createPipsButton:!1,screenshotButton:!0},sideBarButtons:{cursorTypeButton:!0,drawingObjectsButton:!0,brushTypeButton:!0,zoomButton:!0,lockButton:!0,basketButton:!0,saveRestoreButtons:!0,stayDrawingModeButton:!0,hideDrowingObjectButton:!0,magnetModeButton:!0,rouleteButton:!0,textTypeButton:!0},chartElements:{hiddenDataPanel:!0,isDataPanelCreate:!0,isShowPriceLineOfLastBar:!0},isShowNews:!1,isShowEvents:!1,signals:!1,isSignalAutoFit:!0,trading:!1},dropDown:{periods:["minute","minute5","minute15","minute30","hour","hour4","hour8","day","week","month"],chartTypes:["candle","area","line","bar","hollow","heikin"],typeDatas:["bid","ask","mid"],indicators:["Bears","Bulls","SO","ATR","RSI","WILLIAMSR","ADX","MACD","SMA","EMA","BB","Fractal","Ichimoku","Env","DEMA","Sar","STD","Keltner","Donchian","AO","AC","LRI","StochRsi"]},footer:{isFooterCreate:!0,periods:["minute","hour","day","week","month"]},quotationName:" ",images:{},rightPadding:8,candleWidth:6,dataOffset:0,precission:5,marginTop:50,marginBottom:20,scaleParams:{},numb:500,fallBack:500,zoomView:1,drawingObjects:[],startY:0,defaultTopPositionDataWindowOnChart:46},ee={colors:{Chart:{backgroundColor:"#ffffff",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",watermarkColor:"rgba(207,226,243,0.5)",pipsColor:"#080808",crossLineColor:"#005C86",crossLabelTextColor:"#FFFFFF",crossLabelBackgroundColor:"#014EC2",colorFirefly:"rgb(238,137,38)",colorFireflyInner:"#ffffff",colorMinMaxPricesText:"#000000",colorMinMaxPricesFillArrow:"#000000",colorMinMaxPricesStrokeArrow:"rgba(255, 255, 255, 0)"},Signals:{chartPattern:{supportLine:{color:"#4672aa"},resistanceLine:{color:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"},patternEndLine:{color:"#ff0000"},predictionLines:{color:"#4672aa"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"}},keyLevelsPattern:{predictionLine:{color:"#f6d002"},patternEndLine:{color:"#ff0000"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"},patternLine:{supportColor:"#4672aa",resistanceColor:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"}},fibonacciPattern:{levelLines:{color:"#ffffff",textColor:"#ffffff"},patternLines:{color:"#1266AF",textColor:"#ffffff"},directionArrow:{color:"#787878"},patternEndLine:{color:"#ff0000"},predictionArrow:{color:"#787878"},predictionPoint:{color:"#fb00fb"},dashedPatternLines:{color:"#1266AF"}}},CandleChart:{candleBear:"#CD2F47",candleBool:"#8CC63F",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{candleBear:"#CD2F47",candleBool:"#8CC63F",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{colorLine:"#005C86",priceLine:"#EE8926"},AreaChart:{colorLine:"#4BCEA9",colorStop:"#4BCEA9",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{candleBear:"#CD2F47",candleBool:"#8CC63F"},HeikinAshiChart:{candleBear:"#CD2F47",candleBool:"#8CC63F",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"}},options:{Chart:{autoScale:!0,scaleSeriesOnly:!0,needPriceLine:!0,widthPriceLine:1,typeTick:"Default",typeVertGridLines:"normal",typeHorzGridLines:"normal",typeCrossHair:"points",widthCrossHair:1,scalesFontSize:10,symbolDescription:!0,ohlcValues:!0,indicatorTitles:!0,indicatorArguments:!0,indicatorValues:!0,minMaxPricesMarks:{mode:"low_high",isShow:!1},typeThemes:"default",listThemes:["defaultthema","blackthema","bluethema","greythema","darkthema","whitethema"],listTemesDesign:["darkthema"],needPriceOscillators:!0,fireflyRadius:2.5,fireflyOuterRadius:20,fireflyOpacityDelta:.01,labelArrowWidth:6,labelPaddingTop:2,labelPaddingLeft:7,labelFont:"Roboto, sans-serif",priceLineOpacity:1,dateLabelArrowHeight:5,dateLabelPaddingTop:2,dateLabelTextInterval:3,dateLabelPaddingBottom:5,dateLabelPaddingLeftRight:3,candleTimer:!0,indicatorMaxParam:300},Signals:{chartPattern:{supportLine:{strokeWidth:1},resistanceLine:{strokeWidth:1},patternEndLine:{strokeWidth:2},directionArrow:{strokeWidth:1}},keyLevelsPattern:{patternLine:{strokeWidth:1},patternEndLine:{strokeWidth:2},directionArrow:{strokeWidth:1},predictionLine:{strokeWidth:1},predictionArea:{strokeWidth:1}},fibonacciPattern:{levelLines:{textFont:"11px sans-serif",strokeWidth:1,textAlignment:"center"},patternLines:{textFont:"16px sans-serif",strokeWidth:1,textAlignment:"center",textVerticalOffset:8},patternEndLine:{strokeWidth:2},directionArrow:{strokeWidth:1},predictionArrow:{strokeWidth:1},predictionPoint:{radius:3,lineWidth:2},dashedPatternLines:{strokeWidth:2}}},CandleChart:{needWick:!0,needBorder:!0,widthBorderLine:1,widthWickLine:1},HollowChart:{needWick:!0,needBorder:!0,widthBorderLine:1,widthWickLine:1},LineChart:{widthLine:1,priceSource:"Close",typeLine:"Simple"},AreaChart:{widthLine:1,priceSource:"Close"},BarChart:{needOpen:!1},HeikinAshiChart:{needWick:!0,needBorder:!0,widthBorderLine:1,widthWickLine:1}},themes:{blackthema:{Chart:{backgroundColor:"#080808",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",watermarkColor:"rgba(207,226,243,0.5)",pipsColor:"#FFFFFF",crossLineColor:"#005C86",crossLabelTextColor:"#FFFFFF",crossLabelBackgroundColor:"#014EC2",colorFirefly:"rgb(238,137,38)",colorFireflyInner:"#ffffff",colorMinMaxPricesText:"#8C8C8C",colorMinMaxPricesFillArrow:"#8C8C8C",colorMinMaxPricesStrokeArrow:"rgba(255, 255, 255, 0)"},Signals:{chartPattern:{supportLine:{color:"#4672aa"},resistanceLine:{color:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"},patternEndLine:{color:"#ff0000"},predictionLines:{color:"#4672aa"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"}},keyLevelsPattern:{predictionLine:{color:"#f6d002"},patternEndLine:{color:"#ff0000"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"},patternLine:{supportColor:"#4672aa",resistanceColor:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"}},fibonacciPattern:{levelLines:{color:"#ffffff",textColor:"#ffffff"},patternLines:{color:"#1266AF",textColor:"#ffffff"},directionArrow:{color:"#787878"},patternEndLine:{color:"#ff0000"},predictionArrow:{color:"#787878"},predictionPoint:{color:"#fb00fb"},dashedPatternLines:{color:"#1266AF"}}},CandleChart:{candleBear:"#F54337",candleBool:"#66CC69",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{candleBear:"#F54337",candleBool:"#008000",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{candleBear:"#F54337",candleBool:"#66CC69",colorLine:"#3395d7",priceLine:"#EE8926"},AreaChart:{candleBear:"#F54337",candleBool:"#66CC69",colorLine:"#3395d7",colorStop:"#7ab1e7",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{candleBear:"#F54337",candleBool:"#66CC69"},HeikinAshiChart:{candleBear:"#F54337",candleBool:"#66CC69",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"}},bluethema:{Chart:{backgroundColor:"#acf7f7",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",watermarkColor:"rgba(207,226,243,0.5)",pipsColor:"#080808",crossLineColor:"#005C86",crossLabelTextColor:"#FFFFFF",crossLabelBackgroundColor:"#014EC2",colorFirefly:"rgb(238,137,38)",colorFireflyInner:"#ffffff",colorMinMaxPricesText:"#8C8C8C",colorMinMaxPricesFillArrow:"#8C8C8C",colorMinMaxPricesStrokeArrow:"rgba(255, 255, 255, 0)"},Signals:{chartPattern:{supportLine:{color:"#4672aa"},resistanceLine:{color:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"},patternEndLine:{color:"#ff0000"},predictionLines:{color:"#4672aa"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"}},keyLevelsPattern:{predictionLine:{color:"#f6d002"},patternEndLine:{color:"#ff0000"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"},patternLine:{supportColor:"#4672aa",resistanceColor:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"}},fibonacciPattern:{levelLines:{color:"#ffffff",textColor:"#ffffff"},patternLines:{color:"#1266AF",textColor:"#ffffff"},directionArrow:{color:"#787878"},patternEndLine:{color:"#ff0000"},predictionArrow:{color:"#787878"},predictionPoint:{color:"#fb00fb"},dashedPatternLines:{color:"#1266AF"}}},CandleChart:{candleBear:"#F54337",candleBool:"#0909ff",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{candleBear:"#F54337",candleBool:"#008000",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{candleBear:"#F54337",candleBool:"#0909ff",colorLine:"#3395d7",priceLine:"#EE8926"},AreaChart:{candleBear:"#F54337",candleBool:"#0909ff",colorLine:"#3395d7",colorStop:"#7ab1e7",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{candleBear:"#F54337",candleBool:"#66CC69"},HeikinAshiChart:{candleBear:"#F54337",candleBool:"#0909ff",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"}},greythema:{Chart:{backgroundColor:"#d8d8d8",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",watermarkColor:"rgba(207,226,243,0.5)",pipsColor:"#080808",crossLineColor:"#005C86",crossLabelTextColor:"#FFFFFF",crossLabelBackgroundColor:"#014EC2",colorFirefly:"rgb(238,137,38)",colorFireflyInner:"#ffffff",colorMinMaxPricesText:"#8C8C8C",colorMinMaxPricesFillArrow:"#8C8C8C",colorMinMaxPricesStrokeArrow:"rgba(255, 255, 255, 0)"},Signals:{chartPattern:{supportLine:{color:"#4672aa"},resistanceLine:{color:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"},patternEndLine:{color:"#ff0000"},predictionLines:{color:"#4672aa"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"}},keyLevelsPattern:{predictionLine:{color:"#f6d002"},patternEndLine:{color:"#ff0000"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"},patternLine:{supportColor:"#4672aa",resistanceColor:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"}},fibonacciPattern:{levelLines:{color:"#ffffff",textColor:"#ffffff"},patternLines:{color:"#1266AF",textColor:"#ffffff"},directionArrow:{color:"#787878"},patternEndLine:{color:"#ff0000"},predictionArrow:{color:"#787878"},predictionPoint:{color:"#fb00fb"},dashedPatternLines:{color:"#1266AF"}}},CandleChart:{candleBear:"#F54337",candleBool:"#66CC69",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{candleBear:"#F54337",candleBool:"#008000",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{candleBear:"#F54337",candleBool:"#66CC69",colorLine:"#3395d7",priceLine:"#EE8926"},AreaChart:{candleBear:"#F54337",candleBool:"#66CC69",colorLine:"#3395d7",colorStop:"#7ab1e7",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{candleBear:"#F54337",candleBool:"#66CC69"},HeikinAshiChart:{candleBear:"#F54337",candleBool:"#66CC69",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"}},defaultthema:{Chart:{backgroundColor:"#ffffff",vertGridLines:"#CCCCCC",horzGridLines:"#CCCCCC",scalesText:"#8C8C8C",colorScalesLines:"#8C8C8C",watermarkColor:"rgba(207,226,243,0.5)",pipsColor:"#080808",crossLineColor:"#005C86",crossLabelTextColor:"#FFFFFF",crossLabelBackgroundColor:"#014EC2",colorFirefly:"rgb(238,137,38)",colorFireflyInner:"#ffffff",colorMinMaxPricesText:"#8C8C8C",colorMinMaxPricesFillArrow:"#8C8C8C",colorMinMaxPricesStrokeArrow:"rgba(255, 255, 255, 0)"},Signals:{chartPattern:{supportLine:{color:"#4672aa"},resistanceLine:{color:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"},patternEndLine:{color:"#ff0000"},predictionLines:{color:"#4672aa"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"}},keyLevelsPattern:{predictionLine:{color:"#f6d002"},patternEndLine:{color:"#ff0000"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"},patternLine:{supportColor:"#4672aa",resistanceColor:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"}},fibonacciPattern:{levelLines:{color:"#ffffff",textColor:"#ffffff"},patternLines:{color:"#1266AF",textColor:"#ffffff"},directionArrow:{color:"#787878"},patternEndLine:{color:"#ff0000"},predictionArrow:{color:"#787878"},predictionPoint:{color:"#fb00fb"},dashedPatternLines:{color:"#1266AF"}}},CandleChart:{candleBear:"#CD2F47",candleBool:"#8CC63F",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},HollowChart:{candleBear:"#CD2F47",candleBool:"#8CC63F",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"},LineChart:{candleBear:"#CD2F47",candleBool:"#8CC63F",colorLine:"#005C86",priceLine:"#EE8926"},AreaChart:{candleBear:"#CD2F47",candleBool:"#8CC63F",colorLine:"#4BCEA9",colorStop:"#4BCEA9",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{candleBear:"#CD2F47",candleBool:"#8CC63F"},HeikinAshiChart:{candleBear:"#CD2F47",candleBool:"#8CC63F",candleBearBorder:"#550000",candleBoolBorder:"#004600",candleLineBear:"#898989",candleLineBool:"#898989"}},whitethema:{Chart:{backgroundColor:"#FFFFFF",vertGridLines:"#D6DCDE",horzGridLines:"#D6DCDE",scalesText:"#1B282F",colorScalesLines:"#FFFFFF",watermarkColor:"rgba(214, 220, 222, 0.27)",pipsColor:"#FFFFFF",crossLineColor:"#C4C4C4",crossLabelTextColor:"#FFFFFF",crossLabelBackgroundColor:"#1B282F",colorFirefly:"rgb(238,137,38)",colorFireflyInner:"#ffffff",colorMinMaxPricesText:"#1B282F",colorMinMaxPricesFillArrow:"#1B282F",colorMinMaxPricesStrokeArrow:"rgba(255, 255, 255, 0)"},Signals:{chartPattern:{supportLine:{color:"#4672aa"},resistanceLine:{color:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"},patternEndLine:{color:"#ff0000"},predictionLines:{color:"#4672aa"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"}},keyLevelsPattern:{predictionLine:{color:"#f6d002"},patternEndLine:{color:"#ff0000"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"},patternLine:{supportColor:"#4672aa",resistanceColor:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"}},fibonacciPattern:{levelLines:{color:"#ffffff",textColor:"#ffffff"},patternLines:{color:"#1266AF",textColor:"#ffffff"},directionArrow:{color:"#787878"},patternEndLine:{color:"#ff0000"},predictionArrow:{color:"#787878"},predictionPoint:{color:"#fb00fb"},dashedPatternLines:{color:"#1266AF"}}},CandleChart:{candleBear:"#EA5B3B",candleBool:"#80D079",candleBearBorder:"#EA5B3B",candleBoolBorder:"#80D079",candleLineBear:"#565C60",candleLineBool:"#565C60"},HollowChart:{candleBear:"#EA5B3B",candleBool:"#80D079",candleBearBorder:"#EA5B3B",candleBoolBorder:"#80D079",candleLineBear:"#565C60",candleLineBool:"#565C60"},LineChart:{candleBear:"#F54337",candleBool:"#66CC69",colorLine:"#3395d7",priceLine:"#EE8926"},AreaChart:{candleBear:"#F54337",candleBool:"#66CC69",colorLine:"#3395d7",colorStop:"#7ab1e7",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{candleBear:"#EA5B3B",candleBool:"#80D079"},HeikinAshiChart:{candleBear:"#EA5B3B",candleBool:"#80D079",candleBearBorder:"#EA5B3B",candleBoolBorder:"#80D079",candleLineBear:"#565C60",candleLineBool:"#565C60"}},darkthema:{Chart:{backgroundColor:"#0D1A25",vertGridLines:"#2B3B48",horzGridLines:"#2B3B48",scalesText:"#EEF9FD",colorScalesLines:"#0D1A25",watermarkColor:"rgba(214, 220, 222, 0.07)",pipsColor:"#FFFFFF",crossLineColor:"#73B7BA",crossLabelTextColor:"#0D1A25",crossLabelBackgroundColor:"#73B7BA",colorFirefly:"rgb(238,137,38)",colorFireflyInner:"#ffffff",colorMinMaxPricesText:"#EEF9FD",colorMinMaxPricesFillArrow:"#EEF9FD",colorMinMaxPricesStrokeArrow:"rgba(255, 255, 255, 0)"},Signals:{chartPattern:{supportLine:{color:"#4672aa"},resistanceLine:{color:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"},patternEndLine:{color:"#ff0000"},predictionLines:{color:"#4672aa"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"}},keyLevelsPattern:{predictionLine:{color:"#f6d002"},patternEndLine:{color:"#ff0000"},predictionArea:{color:"rgba(50, 50, 50, 0.3)",borderColor:"#ff0000"},patternLine:{supportColor:"#4672aa",resistanceColor:"#63b089"},directionArrow:{strokeColor:"#ffffff",supportColor:"#ff0000",resistanceColor:"#63b089"}},fibonacciPattern:{levelLines:{color:"#ffffff",textColor:"#ffffff"},patternLines:{color:"#1266AF",textColor:"#ffffff"},directionArrow:{color:"#787878"},patternEndLine:{color:"#ff0000"},predictionArrow:{color:"#787878"},predictionPoint:{color:"#fb00fb"},dashedPatternLines:{color:"#1266AF"}}},CandleChart:{candleBear:"#C13143",candleBool:"#61BE6F",candleBearBorder:"#C13143",candleBoolBorder:"#61BE6F",candleLineBear:"#61BE6F",candleLineBool:"#61BE6F"},HollowChart:{candleBear:"#C13143",candleBool:"#61BE6F",candleBearBorder:"#C13143",candleBoolBorder:"#61BE6F",candleLineBear:"#61BE6F",candleLineBool:"#61BE6F"},LineChart:{candleBear:"#C13143",candleBool:"#61BE6F",colorLine:"#3395d7",priceLine:"#EE8926"},AreaChart:{candleBear:"#C13143",candleBool:"#61BE6F",colorLine:"#3395d7",colorStop:"#7ab1e7",colorStopEnd:"#ffffff",priceLine:"#EE8926"},BarChart:{candleBear:"#C13143",candleBool:"#61BE6F"},HeikinAshiChart:{candleBear:"#C13143",candleBool:"#61BE6F",candleBearBorder:"#C13143",candleBoolBorder:"#61BE6F",candleLineBear:"#61BE6F",candleLineBool:"#61BE6F"}}}},ae={ru:i("./src/scripts/Config/Languages/Locales/ru.json"),en:i("./src/scripts/Config/Languages/Locales/en.json"),es:i("./src/scripts/Config/Languages/Locales/es.json"),ar:i("./src/scripts/Config/Languages/Locales/ar.json"),de:i("./src/scripts/Config/Languages/Locales/de.json"),default:{}};r.measureText=function(t,e,a){var i=t.font;t.font=e;var r=t.measureText(a);return t.font=i,r},r.getPosition=function(t,e){var a=Math.round(2*t)/2,i=a%1;return(e%2===0&&.5===i||e%2!==0&&0===i)&&(a-=.5),a},r.clearRect=function(t,e,a,i,r,s){if(t||e){var n=e||t.getContext("2d");n&&n.clearRect(a,i,r,s)}},r.drawLine=function(t,e,a,i,r,s,n,o,h,c){if(t||e){var l,A=e||t.getContext("2d");A&&(o&&A.setLineDash&&A.setLineDash(o),h&&(l=A.lineWidth,A.lineWidth=h),c&&(A.globalAlpha=c),A.beginPath(),A.moveTo(a,i),A.lineTo(r,s),A.strokeStyle=n,A.stroke(),o&&A.setLineDash,h&&(A.lineWidth=l),c&&(A.globalAlpha=1))}},r.drawArc=function(t,e,a,i,r,s,n,o,h,c,l,A){if(t||e){var d=e||t.getContext("2d");d&&(h&&d.setLineDash&&d.setLineDash(h),r*=Math.PI/180,s=-s*(Math.PI/180),d.beginPath(),d.arc(a,i,n,r,s,A),d.lineWidth=c,d.stroke())}},r.drawEllipse=function(t,e,a,i,r,s,n,o,h,c,l,A,d,p,u){if(t||e){var g,f=e||t.getContext("2d");f&&(u&&f.setLineDash&&f.setLineDash(u),f.globalAlpha=p||1,l&&(f.fillStyle=l),d&&(f.strokeStyle=d),A&&(g=f.strokeWidth,f.lineWidth=A),f.beginPath(),f.ellipse(a,i,r,s,n,o,h,c),f.stroke(),f.fill(),A&&(f.lineWidth=g))}},r.drawRectangle=function(t,e,a,i,r,s,n,o,h){if(t||e){var c,l=e||t.getContext("2d");l&&(h&&(c=l.lineWidth,l.lineWidth=h),n&&(l.fillStyle=n,"transparent"==n?l.clearRect(a,i,r,s):l.fillRect(a,i,r,s)),o&&(l.strokeStyle=o,l.strokeRect(a,i,r,s)),h&&(l.lineWidth=c))}},r.drawRoundedRectangleWithBorderStyle=function(t,e,a,i,r,s,n,o,h,c){if(t||e){var l,A=e||t.getContext("2d");A&&c&&(l=A.lineWidth,A.lineWidth=c);var d=a+r,p=i+s;s<5&&(n=0),A.beginPath(),A.strokeStyle=h,A.lineWidth=c,A.moveTo(a+n,i),A.lineTo(d-n,i),A.quadraticCurveTo(d,i,d,i+n),A.lineTo(d,i+s-n),A.quadraticCurveTo(d,p,d-n,p),A.lineTo(a+n,p),A.quadraticCurveTo(a,p,a,p-n),A.lineTo(a,i+n),A.quadraticCurveTo(a,i,a+n,i),o&&(A.fillStyle=o,A.fill()),A.stroke(),c&&(A.lineWidth=l)}},r.drawGradient=function(t,e,a,i,r,s,n){if(t||e){var o=e||t.getContext("2d");if(o){var h=o.createLinearGradient(a,a,s,r);h.addColorStop(0,"rgba(0,0,0,0)"),h.addColorStop(1,n),o.fillStyle=h,o.fillRect(i,a,r,s)}}},r.drawRectangleRound=function(t,e,a,i,r,s,n,o,h){if(t||e){var c=e||t.getContext("2d");c&&(c.beginPath(),c.moveTo(a,i),c.lineTo(a+r,i),c.quadraticCurveTo(a+r+n,i,a+r+n,i+n),c.lineTo(a+r+n,i+n+s),c.quadraticCurveTo(a+r+n,i+2*n+s,a+r,i+2*n+s),c.lineTo(a,i+2*n+s),c.quadraticCurveTo(a-n,i+2*n+s,a-n,i+n+s),c.lineTo(a-n,i+n),c.quadraticCurveTo(a-n,i,a,i),c.strokeStyle=h,c.fillStyle=o,h&&(c.strokeStyle=h),c.stroke(),o&&(c.fillStyle=o,c.fill()))}},r.drawQuadraticCurve=function(t,e,a,i,r,s,n,o,h,c,l){if(t||e){var A,d=e||t.getContext("2d");d&&(d.globalAlpha=c||1,l&&d.setLineDash&&d.setLineDash(l),h&&(A=d.lineWidth,d.lineWidth=h),o&&(d.strokeStyle=o),n&&(d.fillStyle=n),d.beginPath(),d.moveTo(a.x,a.y),d.quadraticCurveTo(i.x,i.y,r.x,r.y),d.stroke(),d.fill(),h&&(d.lineWidth=A))}},r.drawText=function(t,e,a,i,s,n,o,h,c){if(t||e){var l=e||t.getContext("2d"),A=l.canvas.dir,d=null;h&&(l.canvas.dir=h),c&&(d=l.textAlign,l.textAlign=c);var p=a;"rtl"===l.canvas.dir&&(p+=r.measureText(l,n,s).width),l.font=n,l.fillStyle=o,l.fillText(s,p,i),l.canvas.dir=A,c&&(l.textAlign=d)}},r.drawPolygon=function(t,e,a,i,r,s,n,o,h,c){if(!(a.length<2||!i&&!r)&&(t||e)){var l=e||t.getContext("2d");if(l){var A;i&&(l.fillStyle=i),r&&(null!==n&&(A=l.lineWidth,l.lineWidth=n),l.strokeStyle=r),c&&l.setLineDash&&l.setLineDash(c),l.beginPath(),l.moveTo(a[0][0],a[0][1]),o=void 0==o?a.length:Math.min(a.length,o);for(var d=1;d<o;++d)l.lineTo(a[d][0],a[d][1]);void 0!=s&&!0!==s||l.closePath(),h&&(l.globalAlpha=h),i&&l.fill(),l.globalAlpha=1,r&&(l.stroke(),null!==n&&(l.lineWidth=A))}}},r.inCircle=function(t,e,a){return Math.hypot(a.x-t,a.y-e)<=a.radius},r.inRect=function(t,e,a,i,r,s){var n=Math.min(a,r),o=Math.max(a,r),h=Math.min(i,s),c=Math.max(i,s);return t>=n&&t<=o&&e>=h&&e<=c},r.inTriangle=function(t,e,a){function i(t,e,a){return(t[0]-a[0])*(e[1]-a[1])-(e[0]-a[0])*(t[1]-a[1])}var r=[t,e],s=i(r,a[0],a[1])<0,n=i(r,a[1],a[2])<0,o=i(r,a[2],a[0])<0;return s==n&&n==o},r.drawCircle=function(t,e,a,i,r,s,n,o,h){if(t||e){var c=e||t.getContext("2d");c&&((h||0===h)&&(c.globalAlpha=h),c.setLineDash([0,0]),c.beginPath(),c.arc(a,i,r,0,2*Math.PI,!1),c.fillStyle=n,c.fill(),s&&(c.lineWidth=s,c.strokeStyle=o||n,c.stroke()),(h||0===h)&&(c.globalAlpha=1))}},r.createImage=function(t){if(!t)return!1;var e=new Image;return e.src=t,e},r.drawImage=function(t,e,a,i,r,s,n,o){if(isNaN(a)||isNaN(i)||!r)return!1;if(t||e){var h=e||t.getContext("2d");if(h)if(s)void 0!=n&&void 0!=o?h.drawImage(s,a,i,n,o):h.drawImage(s,a,i);else{var c=new Image;c.onload=function(){void 0!=n&&void 0!=o?h.drawImage(c,a,i,n,o):h.drawImage(c,a,i)},c.src=r}}},r.setClip=function(t,e,a,i,r,s){if(t||e){var n,o=e||t.getContext("2d");o&&(n=o.lineWidth,o.lineWidth=0,o.rect(a,i,r,s),o.stroke(),o.clip(),o.lineWidth=n)}},r.drawLinearGradient=function(t,e,a,i,r,s,n,o,h,c,l,A){if(t||e){var d=e||t.getContext("2d"),p=d.createLinearGradient(a,i,r,s);p.addColorStop(0,l),p.addColorStop(1,A),d.fillStyle=p,d.fillRect(n,o,h,c)}},r.drawArrow=function(t,e,a,i,r,s,n,o,h,c,l,A){if(t||e){var d,p=e||t.getContext("2d");h&&p.setLineDash&&p.setLineDash(h),o&&(p.strokeStyle=o),n&&(p.fillStyle=n),c&&(p.lineWidth=c),l&&(p.globalAlpha=l),p.beginPath(),p.lineWidth=1,p.moveTo(a,i-1),p.lineTo(r,s-1),p.lineTo(r,s+1),p.lineTo(a,i+1),p.closePath(),p.stroke(),p.fill(),d=Math.atan((s-i)/(r-a)),d+=(r>a?90:-90)*Math.PI/180,function u(){p.save(),p.beginPath(),p.translate(r,s),p.rotate(d),p.moveTo(0,0),p.lineTo(6,15),A?(p.lineTo(-6,15),p.closePath(),p.fill(),p.strokeStyle=o,p.lineWidth=.5,p.stroke()):(p.moveTo(0,0),p.lineTo(-6,15),p.stroke()),p.restore()}()}},r.setShadow=function(t,e,a,i,r,s){if(t||e){var n=e||t.getContext("2d");n.shadowBlur=i||0,n.shadowColor=a||"#0000",n.shadowOffsetX=r||0,n.shadowOffsetY=s||0}},r.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},r.changeRgbaAlpha=function(t,e){if(!e&&0!==e)return t;if(t.includes("#")){var a=r.hexToRgb(t);return"rgba(".concat(a.r,", ").concat(a.g,", ").concat(a.b,", ").concat(e,")")}var i=t.replace(")","").replace("rgb(","").replace("rgba(","").split(",");return i[3]=" ".concat(e),"rgba(".concat(i.join(","),")")},l.toDataDictionary=function(t){for(var e={},a=0;a<t.length;a++)e[t[a].T]=t[a];return e},l.SMA_noRounding=function(t,e){if(null===t||t.length<e)return[];for(var a=[],i=t.sort(o),r=0,s=0,n=0,h=0,c=[],l=i.length-e,A=0;A<i.length;A++){var d=i[A];if(h<=l){if(c=i.slice(h,h+e),h++,c.forEach((function(t){s+=t.C})),r=s/e,n=d.T,s=0,isNaN(r)||isNaN(n))continue;a.push({T:n,P:r})}}return a},l.SMA=function(t,e){if(null===t||t.length<e)return{};var a=[];return l.SMA_noRounding(t,e).forEach((function(t){a.push({T:t.T,P:s(t.P)})})),l.toDataDictionary(a)},l.EMA_noRounding=function(t,e){if(null===t||t.length<e)return{};var a=(t=t.sort(n)).slice(0,e),i=l.SMA_noRounding(a,e),r=i[0].P;r=parseFloat(r);var o,h=i[0].T,c=[];o=2/(e+1),c.push({T:h,P:parseFloat(r)});for(var A=e;A<t.length;A++)h=t[A].T,r=s(r=(t[A].C-r)*o+r),isNaN(r)||isNaN(h)||c.push({T:h,P:r});return c},l.EMA=function(t,e){if(null===t||t.length<e)return{};var a=[];return l.EMA_noRounding(t,e).forEach((function(t){a.push({T:t.T,P:s(t.P)})})),l.toDataDictionary(a)},l.StandartDeviation=function(t,e){if(null===t||t.length<e)return{};for(var a=t.sort(n),i=0,r=[],s=[],o=[],h=0;h<=a.length-e;h++){for(var c=0,A=0;A<e;A++)c+=a[h+A].C,i=a[h+A].T;var d=c/e;r.push({T:i,C:d});for(var p=0,u=0;u<e;u++)p+=Math.pow(a[h+u].C-d,2)/e;s.push({T:i,C:p})}for(var g=0;g<s.length;g++){var f=Math.sqrt(s[g].C);o.push({T:s[g].T,P:f})}return l.toDataDictionary(o)},l.BollingerBands=function(t,e){if(null===t||t.length<e)return{};for(var a=t.sort(o),i=[],r=0,s=[],n=a.length-e,c=0,A=0,d=0,p=0,u=0,g=0;g<a.length;g++){var f=a[g];if(r<=n){if(s=a.slice(r,r+e),r++,A=l.SMA_noRounding(s,e),c=h(c=l.StandartDeviation(s,e)),p=(d=A[0].P)+2*c[0].P,p=Math.round(1e5*p)/1e5,u=d-2*c[0].P,u=Math.round(1e5*u)/1e5,isNaN(d)||isNaN(u)||isNaN(p)||isNaN(f.T))continue;i.push({T:f.T,M:d,U:p,L:u})}}return l.toDataDictionary(i)},l.Envelopes=function(t,e,a,i){if(null===t||t.length<e)return{};a?a/=1e4:a=.025;for(var r=t,s=[],n=0,o=0,h=0,c="EMA"===i.toUpperCase()?l.EMA_noRounding(r,e):l.SMA_noRounding(r,e),A=0;A<c.length;A++)o=(n=c[A].P)+n*a,o=Math.round(1e5*o)/1e5,h=n-n*a,h=Math.round(1e5*h)/1e5,isNaN(n)||isNaN(h)||isNaN(o)||isNaN(c[A].T)||s.push({T:c[A].T,M:n,U:o,L:h});return l.toDataDictionary(s)},l.So=function(t,e,a){if(null===t||t.length<e)return{};for(var i=[],r=t.sort(o),n=[],h=0,c=0,A=0,d=0,p=0,u=0,g=r.length-e,f=0;f<r.length;f++)u<=g?(n=r.slice(f,f+e),h=Math.max.apply(Math,n.map((function(t){return t.H}))),c=Math.min.apply(Math,n.map((function(t){return t.L}))),A=n[n.length-e].C,d=n[n.length-e].T,u++):(f===g&&f++,A=r[f].C,d=r[f].T),p=s(p=h-c===0?50:(A-c)/(h-c)*100),i.push({T:d,P:p});for(var w=0,v=0,y=[],m=0;m<=i.length-e;m++)(n=i.slice(m,m+a)).forEach((function(t){w+=parseFloat(t.P)})),v=s(v=w/a),isNaN(v)||isNaN(i[m].P)||isNaN(i[m].T)||(y.push({T:i[m].T,K:i[m].P,D:v}),w=0,v=0);return l.toDataDictionary(y)},l.SoForK=function(t,e){if(null===t||t.length<e)return{};for(var a=[],i=t.sort(o),r=[],s=0,n=0,h=0,c=0,l=0,A=0,d=i.length-e,p=0;p<i.length;p++)A<=d?(r=i.slice(p,p+e),s=Math.max.apply(Math,r.map((function(t){return t.H}))),n=Math.min.apply(Math,r.map((function(t){return t.L}))),h=r[r.length-e].C,c=r[r.length-e].T,A++):(p===d&&p++,h=i[p].C,c=i[p].T),l=s-n===0?50:(h-n)/(s-n)*100,a.push({T:c,P:l});return a},l.WilliamsR=function(t,e){if(null===t||t.length<e)return{};for(var a=[],i=t.sort(o),r=[],n=0,h=0,c=0,A=0,d=0,p=0,u=i.length-e,g=0;g<i.length;g++)p<=u?(r=i.slice(g,g+e),n=Math.max.apply(Math,r.map((function(t){return t.H}))),h=Math.min.apply(Math,r.map((function(t){return t.L}))),c=r[r.length-e].C,A=r[r.length-e].T,p++):(g===u&&g++,c=i[g].C,A=i[g].T),d=s(d=n-h===0?50:(n-c)/(n-h)*-100),isNaN(d)||isNaN(A)||a.push({T:A,P:d});return l.toDataDictionary(a)},l.RSI=function(t,e){if(null===t||t.length<e)return{};for(var a=t.sort(n),i=[],r=0,o=0,h=0,c=[],A=0,d=0,p=0,u=0,g=0,f=0,w=0,v=1;v<a.length;v++)if(o=a[v].C,h=a[v-1].C,r=a[v].T,c.push({T:r,C:o-h}),v>=e){if(d=0,p=0,v===e){if(c.forEach((function(t){A=t.C,r=t.T,A>0?u+=Math.abs(A):A<0&&(g+=Math.abs(A))})),u/=e,w=s(w=100-100/(1+(f=0===(g/=e)?0:u/g))),isNaN(w)||isNaN(r))continue;i.push(new Object({T:a[v].T,P:w}))}if(v>e){if(A=c[v-1].C,r=c[v-1].T,A>0?(d=(u*(e-1)+Math.abs(A))/e,p=(g*(e-1)+0)/e):0===A?(p=(g*(e-1)+0)/e,d=(u*(e-1)+0)/e):(d=(u*(e-1)+0)/e,p=(g*(e-1)+Math.abs(A))/e),f=Math.abs(p)<1e-5?0:d/p,w=s(w=Math.abs(p)<1e-5?100:100-100/(1+f)),u=d,g=p,isNaN(w)||isNaN(r))continue;i.push({T:r,P:w})}}return l.toDataDictionary(i)},l.BearsPower=function(t,e){if(t.length<e)return{};var a=c(t);a=a.sort(o);for(var i=l.EMA_noRounding(a,e),r=[],s=[],n=0;n<a.length;n++)a[n].T>=i[0].T&&s.push(a[n]);var h=l.toDataDictionary(i);for(n=0;n<s.length;n++){var A=s[n].T,d=s[n].L-h[A].P;isNaN(d)||isNaN(A)||r.push({T:A,P:d})}return l.toDataDictionary(r)},l.BullsPower=function(t,e){if(t.length<e)return{};var a=Object.assign(t);a=a.sort(o);for(var i=l.EMA_noRounding(a,e),r=[],s=[],n=0;n<a.length;n++)a[n].T>=i[0].T&&s.push(t[n]);for(var h=l.toDataDictionary(i),c=0;c<s.length;c++){var A=s[c].T,d=s[c].H-h[A].P;isNaN(d)||isNaN(A)||r.push({T:A,P:d})}return l.toDataDictionary(r)},l.BullsBearsPower=function(t,e){if(null===t||t.length<e)return[];var a=c(t);a=a.sort(o);var i=[],r=l.BearsPower(a,e),n=l.BullsPower(a,e),A=l.EMA_noRounding(a,e);r=h(r),n=h(n),A=h(A);for(var d=[],p=0;p<r.length;p++)d.push(r[p].T);if((d=d.sort((function(t,e){return t>e?-1:t<e?1:0}))).length<2)return null;var u=d[0],g=(d[1],s(r[0].P)),f=s(n[0].P),w=s(A[0].P),v=s(r[1].P),y=s(n[1].P),m=s(A[1].P);return f>0&&f<y&&w<m?i.push({T:u,P:-1}):g<0&&g>v&&w>m?i.push({T:u,P:1}):i.push({T:u,P:0}),l.toDataDictionary(i)},l.ATR=function(t,e){if(t.length<e)return{};var a=c(t);a=a.sort(n);for(var i=[],r=0;r<e;r++){var o=a[r].H,h=a[r].L,A={T:a[r].T};if(0===r)A.P=Math.abs(o-h),i.push(A);else{var d=a[r-1].C,p=Math.abs(o-h);p=Math.max(Math.abs(o-d),p),p=Math.max(Math.abs(h-d),p),A.P=p,i.push(A)}}var u=[],g=i.reduce((function(t,e){return t+e.P}),0)/i.length;for(g=Math.round(1e5*g)/1e5,u.push({T:a[e-1].T,P:g}),r=e;r<a.length;r++){var f=a[r].T;o=a[r].H,h=a[r].L,d=a[r-1].C,p=Math.abs(o-h),p=Math.max(Math.abs(o-d),p),p=Math.max(Math.abs(h-d),p);var w=(u.slice(-1)[0].P*(e-1)+p)/e;w=s(w),isNaN(w)||isNaN(f)||u.push({T:f,P:w})}return l.toDataDictionary(u.reverse())},l.ATR_Average=function(t,e,a){var i=[];if(null===t||t.length<e+a)return{};var r=c(t);r=r.sort(o);var s=l.ATR(r,e);s=h(s);for(var n=0;n<s.length-a;n++){var A=s.slice(n,n+a),d=0;A.forEach((function(t){d+=t.P}));var p=d/a,u=s[n];u.P/1.2>p?i.push({T:u.T,P:1}):1.2*u.P<p?i.push({T:u.T,P:-1}):i.push({T:u.T,P:0})}return i},l.Ichimoku=function(t,e,a,i,r){if(t.length<e)return{};var s,o,h,l,A,d,p,u,g,f,w=c(t),v={};r=(w=w.sort(n))[1]?Math.abs(w[0].T-w[1].T):0;for(var y=w.length,m=0;m<y;m++){if(g=-1/0,f=1/0,y-m>=e){for(var B=0;B<e;B++)g=Math.max(g,w[m+B].H),f=Math.min(f,w[m+B].L);s=(g+f)/2,u=w[e-1+m].T,s=Math.round(1e5*s)/1e5,v[u]?v[u].TenkanSen=s:v[u]={T:u,TenkanSen:s}}if(g=-1/0,f=1/0,y-m>=a){for(var C=0;C<a;C++)g=Math.max(g,w[m+C].H),f=Math.min(f,w[m+C].L);o=(g+f)/2,u=w[a-1+m].T,o=Math.round(1e5*o)/1e5,v[u]?v[u].KijunSen=o:v[u]={T:u,KijunSen:o}}if(u=m<a?w[m].T-r*a:w[m-a].T,h=w[m].C,h=Math.round(1e5*h)/1e5,void 0===v[u]?v[u]={T:u,ChinkouSpan:h}:v[u].ChinkouSpan=h,m>=a&&(l=(v[u=w[m].T].TenkanSen+v[u].KijunSen)/2,l=Math.round(1e5*l)/1e5,void 0===v[A=w[m+a]?w[m+a].T:u+r*a]?v[A]={T:A,SenkouSpanA:l}:v[A].SenkouSpanA=l),y-m>=i){u=w[m].T;for(var D=-1/0,b=1/0,x=0;x<i;x++)D=Math.max(D,w[m+x].H),b=Math.min(b,w[m+x].L);d=(D+b)/2,d=Math.round(1e5*d)/1e5,v[p=w[m+a+i-1]?w[m+a+i-1].T:w[y-1].T+r*(m+a+i-y)]?v[p].SenkouSpanB=d:v[p]={T:p,SenkouSpanB:d}}}return v},l.Fractal=function(t,e){if(e||(e=5),!t||t.length<e)return{};var a=c(t);a=a.sort(n);for(var i={},r=e%2===0?e/2-1:Math.floor(e/2),s=0;s<a.length-e+1;s++){var o=a.slice(s,e+s),h=o.reduce((function(t,e){return t.H>e.H?t:e})),l=o.reduce((function(t,e){return t.L<e.L?t:e}));o.indexOf(h)===r&&(i[h.T]={T:h.T,fractalHigh:h.H}),o.indexOf(l)===r&&(void 0===i[l.T]?i[l.T]={T:l.T,fractalLow:l.L}:i[l.T].fractalLow=l.L)}return i},l.ADX=function(t,e){if(null===t||t.length<e)return{};for(var a=t.sort(n),i=[],r=[],o=[],h=1;h<a.length;h++){var c=a[h].H,A=a[h].L,d=a[h-1].H,p=a[h-1].L,u=a[h-1].C,g=a[h].T,f=Math.max(c-A,Math.abs(c-u),Math.abs(A-u)),w=0,v=0;if(c>d?(w=c-d,w=Math.round(1e4*w)/1e4):w=0,A<p?(v=p-A,v=Math.round(1e4*v)/1e4):v=0,w>v?v=0:v>w?w=0:v===w&&(v=0,w=0),i.push({T:g,TR:f,DMP:w,DMM:v}),h>=e){var y,m,B,C=0,D=0,b=0,x=0,F=0,S=0,P=0,T=0;if(h===e){for(var E=i.slice(0,e),L=0;L<E.length;L++)C+=parseFloat(E[L].TR),b+=parseFloat(E[L].DMP),D+=parseFloat(E[L].DMM);y=C,m=b,B=D,S=(F=b/C*100)+(x=D/C*100),T=(P=Math.abs(F-x))/S*100,r.push({T:g,DIP:F,DIM:x,DISUM:S,DIDIF:P,DX:T})}else h>e&&(C=y-y/e+parseFloat(i[h-1].TR),D=B-B/e+parseFloat(i[h-1].DMM),S=(F=(b=m-m/e+parseFloat(i[h-1].DMP))/C*100)+(x=D/C*100),T=(P=Math.abs(F-x))/S*100,r.push({T:g,DIP:F,DIM:x,DISUM:S,DIDIF:P,DX:T}),y=C,m=b,B=D)}}var Q,O,U=0,H=r.slice(0,e);for(L=0;L<H.length;L++)U+=parseFloat(H[L].DX);var k=U/e;if(H.length>=e){k=s(k),Q=s(H[e-1].DIM),O=s(H[e-1].DIP),k=isNaN(k)?0:k,Q=isNaN(Q)?0:Q,O=isNaN(O)?0:O,o.push({T:H[e-1].T,DIP:O,DIM:Q,ADX:k}),U=k;for(var N=e;N<r.length;N++)k=s(k=(U*(e-1)+r[N].DX)/e),Q=s(r[N].DIM),O=s(r[N].DIP),k=isNaN(k)?0:k,Q=isNaN(Q)?0:Q,O=isNaN(O)?0:O,o.push({T:r[N].T,DIP:O,DIM:Q,ADX:k}),U=k}return l.toDataDictionary(o)},l.ADXdiff=function(t,e){if(null===t||t.length<e)return{};for(var a=t.sort(n),i=[],r=[],s=1;s<a.length;s++){var o=a[s].H,h=a[s].L,c=a[s-1].H,l=a[s-1].L,A=a[s-1].C,d=a[s].T,p=Math.max(o-h,Math.abs(o-A),Math.abs(h-A)),u=0,g=0;if((u=o>c?o-c:0)>(g=h<l?l-h:0)?g=0:g>u?u=0:g===u&&(g=0,u=0),i.push({T:d,TR:p,DMP:u,DMM:g}),s>=e){var f,w,v,y=0,m=0,B=0,C=0,D=0,b=0,x=0,F=0;if(s===e){for(var S=i.slice(0,e),P=0;P<S.length;P++)y+=parseFloat(S[P].TR),B+=parseFloat(S[P].DMP),m+=parseFloat(S[P].DMM);f=y,w=B,v=m,b=(D=B/y*100)+(C=m/y*100),F=(x=Math.abs(D-C))/b*100,r.push({T:d,DIP:D,DIM:C,DISUM:b,DIDIF:x,DX:F})}else s>e&&(y=f-f/e+parseFloat(i[s-1].TR),m=v-v/e+parseFloat(i[s-1].DMM),F=(x=(D=(B=w-w/e+parseFloat(i[s-1].DMP))/y*100)-(C=m/y*100))/(b=D+C)*100,r.push({T:d,DIP:D,DIM:C,DISUM:b,DIDIF:x,DX:F}),f=y,w=B,v=m)}}return r},l.MACD=function(t,e,a,i){if(!e||!a||!i||t.length<a)return{};var r=c(t);r=r.sort((function(t,e){return t.T-e.T}));var s={},n=l.EMA_noRounding(r,e),o=l.EMA_noRounding(r,a);for(var h in n=l.toDataDictionary(n),o=l.toDataDictionary(o),Object.keys(o).length>Object.keys(n).length?n:o){var A=o[h].T,d=n[A].P-o[h].P;s[A]={T:A,macdLine:d,signalLine:0,histogram:0}}var p=[];for(var u in s){var g=parseInt(u,10);p.push({T:g,O:0,H:0,L:0,C:s[u].macdLine})}var f=l.EMA_noRounding(p,i);for(var w in f=l.toDataDictionary(f)){var v=parseInt(w,10);s[v].signalLine=f[v].P,s[v].histogram=s[v].macdLine-f[v].P}return s},l.Dema=function(t,e){if(null===t||t.length<e)return{};t=t.sort(n);for(var a=l.EMA_noRounding(t,e),i=[],r=[],s=0;s<a.length;s++)i.push({T:a[s].T,O:0,H:0,L:0,C:a[s].P});var o=l.EMA_noRounding(i,e);for(s=0;s<o.length;s++){var h=2*a[s+e-1].P-o[s].P;r.push({T:o[s].T,P:h})}return l.toDataDictionary(r)},l.ParabolicSar=function(t,e,a,i){if(t.length<3)return{};e?e/=100:e=.02,a?a/=100:a=.02,i?i/=100:i=.2;var r=c(t).sort(n),s={},o={},h=!0,l=0;s[r[3].T]={T:r[3].T,P:0,EP:0,ST:0,D:!0},h=h?r[4].L>Math.min(r[4].L,r[3].L,r[2].L,r[1].L,r[0].L):r[4].H>=Math.min(r[4].L,r[3].L,r[2].L,r[1].L,r[0].L),s[r[4].T]={T:r[4].T,P:Math.min(r[4].L,r[3].L,r[2].L,r[1].L,r[0].L),EP:Math.max(r[4].H,r[3].H,r[2].H,r[1].H,r[0].H),ST:e,D:h},o[r[4].T]={T:r[4].T,P:s[r[4].T].P};for(var A=5;A<r.length-1;A++)s[r[A].T]={T:r[A].T,P:0,EP:0,ST:0,D:!0},s[r[A-1].T].D===s[r[A-2].T].D?s[r[A-1].T].D?(r[A].H>s[r[A-1].T].EP?s[r[A].T].EP=r[A].H:s[r[A].T].EP=s[r[A-1].T].EP,l=s[r[A-1].T].ST*(s[r[A-1].T].EP-s[r[A-1].T].P),s[r[A-1].T].P+l<Math.min(r[A-1].L,r[A-2].L)?s[r[A].T].P=s[r[A-1].T].P+l:s[r[A].T].P=Math.min(r[A-1].L,r[A-2].L),s[r[A].T].EP>s[r[A-1].T].EP?s[r[A-1].T].ST>=i?s[r[A].T].ST=i:s[r[A].T].ST=s[r[A-1].T].ST+a:s[r[A].T].ST=s[r[A-1].T].ST,s[r[A].T].D=r[A+1].L>s[r[A].T].P):(s[r[A].T].EP=Math.min(r[A].L,s[r[A-1].T].EP),l=s[r[A-1].T].ST*(s[r[A-1].T].EP-s[r[A-1].T].P),s[r[A-1].T].P+l>Math.max(r[A-1].H,r[A-2].H)?s[r[A].T].P=s[r[A-1].T].P+l:s[r[A].T].P=Math.max(r[A-1].H,r[A-2].H),s[r[A].T].EP<s[r[A-1].T].EP?s[r[A-1].T].ST>=i?s[r[A].T].ST=i:s[r[A].T].ST=s[r[A-1].T].ST+a:s[r[A].T].ST=s[r[A-1].T].ST,s[r[A].T].D=r[A+1].H>=s[r[A].T].P):(s[r[A].T].P=s[r[A-1].T].EP,s[r[A].T].ST=a,s[r[A-1].T].D?(r[A].H>s[r[A-1].T].EP?s[r[A].T].EP=r[A].H:s[r[A].T].EP=s[r[A-1].T].EP,s[r[A].T].D=r[A+1].L>s[r[A].T].P):(r[A].L<s[r[A-1].T].EP?s[r[A].T].EP=r[A].L:s[r[A].T].EP=s[r[A-1].T].EP,s[r[A].T].D=r[A+1].H>=s[r[A].T].P)),isNaN(s[r[A].T].P)||isNaN(r[A].T)||(o[r[A].T]={T:r[A].T,P:s[r[A].T].P});return o},l.Keltner=function(t,e,a,i){if(null===t||t.length<e)return{};a||(a=1),i||(i="EMA");var r=[],s=0,n=0,o=0,h=0,c=t;switch(i){case"SMA":s=l.SMA_noRounding(c,e);break;case"EMA":default:s=l.EMA_noRounding(c,e)}for(var A=l.ATR(c,e),d=0;d<s.length;d++)n=s[d].P,o=(n=Math.round(1e5*n)/1e5)+a*A[s[d].T].P,o=Math.round(1e5*o)/1e5,h=n-a*A[s[d].T].P,h=Math.round(1e5*h)/1e5,r.push({T:s[d].T,M:n,U:o,L:h});return l.toDataDictionary(r)},l.Donchian=function(t,e){if(null===t||t.length<e)return{};for(var a=t.sort(o),i=[],r=0;r<a.length-e;r++){for(var s=-1/0,n=1/0,h=0;h<e;h++)s=Math.max(s,a[r+h].H),n=Math.min(n,a[r+h].L);var c=(s+n)/2;i.push({T:a[r].T,M:c,U:s,L:n})}return l.toDataDictionary(i)},l.AO=function(t){if(null===t||t.length<5)return{};for(var e=t.sort(o),a=[],i=[],r=0;r<e.length;r++)i.push({T:e[r].T,O:0,H:0,L:0,C:(e[r].H+e[r].L)/2});var s=l.SMA_noRounding(i,5),n=l.SMA_noRounding(i,34);for(var h in s=l.toDataDictionary(s),n=l.toDataDictionary(n)){var c=n[h].T,A=n[h].P,d=s[h].P-A;a.push({T:c,P:d})}return l.toDataDictionary(a)},l.AC=function(t){if(null===t||t.length<5)return{};for(var e=t.sort(o),a=[],i=h(l.AO(e)),r=[],s=0;s<i.length;s++)r.push({T:i[s].T,O:0,H:0,L:0,C:i[s].P});var n=l.SMA_noRounding(r,5);for(var c in n){var A=n[c].T,d=n[c].P,p=i[c].P-d;a.push({T:A,P:p})}return l.toDataDictionary(a)},l.LRI=function(t,e){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(null===t||t.length<e)return{};for(var i=t.sort(n).slice(t.length-e,t.length),r=0,s=0,o=0,c=0,A=0;A<e;A++){var d=i[A].C;r+=A,s+=d,o+=A*A,c+=d*A}var p=r*r,u=o===p?0:(e*c-r*s)/(e*o-p)*-1,g=(s-u*r)/e,f=h(l.StandartDeviation(i,e))[0].P,w=f*a,v=g+u*(e-1);return[{TS:i[0].T,SPM:v,SPU:v+w,SPL:v-w,TE:i[e-1].T,EPM:g,EPU:g+w,EPL:g-w}]},l.LRIDeviation=function(t,e,a,i){for(var r=0,s=0,n=0;n<i;n++){var o=e+a*(i-n);t[n].H-o>s&&(s=t[n].H-o),o-t[n].L>r&&(r=o-t[n].L)}return s>r?s:r},l.OBV=function(t){if(!t||!t.length)return{};for(var e=t.sort(n),a=0,i={},r=1;r<e.length;r++)e[r].C>e[r-1].C?a+=e[r].V:e[r].C<e[r-1].C&&(a-=e[r].V),i[e[r].T]={T:e[r].T,P:a};return i},l.StochasticRSI=function(t,e,a,i){if(!t||!t.length)return{};var r=h(l.RSI(t,e)),s=[];for(var n in r){var o=parseInt(r[n].T,10);s.push({T:o,O:r[n].P,H:r[n].P,L:r[n].P,C:r[n].P})}return l.So(s,a,i)},A.prototype.createData=function(t){this.data=A.calculate(this,t),this.oscillatorPrecissionFlag&&this.getCurrentOscillatorPrecission()},A.prototype.createCurrentValue=function(t){var e=t[0].date,a=A.createDataforOnePointIndicator(this,t),i=A.calculate(this,a);this.isChanged=this.checkValueHasChanged(this.data[e],i[e]),i[e]&&(this.data[e]=i[e])},A.prototype.checkValueHasChanged=function(t,e){var a=!1;for(var i in t)t.hasOwnProperty(i)&&e&&t[i]!==e[i]&&"T"!==i&&(a=!0);return a},A.createDataforOnePointIndicator=function(t,e){var a=[],i=t.name.toLowerCase(),r=t.params;switch(i){case"sma":case"ema":case"bb":case"sar":case"williamsr":case"std":case"atr":case"bulls":case"bears":case"keltner":case"lri":a=e.slice(0,r.period);break;case"dema":case"fractal":case"adx":a=e.slice(0,2*r.period);break;case"donchian":case"rsi":a=e.slice(0,r.period+1);break;case"ichimoku":a=e.slice(0,r.largePeriod);break;case"env":a=e.slice(0,r.lenght);break;case"macd":a=e.slice(0,r.slowLength);break;case"so":a=e.slice(0,r.K);break;case"stochrsi":a=e.slice(0,r.D+1);break;case"ao":a=e.slice(0,34);break;case"ac":case"obv":a=e.slice(0,39);break;case"volume":a=e.slice(0,1);break;default:a=[]}return a},A.prototype.createShowData=function(){if(this.showData=[],this.chartData.chart&&this.chartData.chart.selectedData&&0!==this.chartData.chart.selectedData.length&&this.data&&0!==Object.keys(this.data).length){var t=this.getExtraIndicatorsDataNumb(),e=this.chartData.getCurrentTimeStep(),a=this.chartData.chart.selectedData[0].date;this.chartData.chart.selectedData[0].isCurrentData&&(a+=t*e);var i=this.chartData.chart.selectedData[this.chartData.chart.selectedData.length-1].date-e;this.chartData.chart.selectedData[this.chartData.chart.selectedData.length-1].date===this.chartData.data[this.chartData.typeData][this.chartData.data[this.chartData.typeData].length-1].date&&(i-=t*e);for(var r=this.data,s=Object.keys(r),n=s.length-1;n>=0;n--)parseInt(s[n],10)<=a&&parseInt(s[n],10)>=i&&this.showData.push(r[s[n]])}},A.prototype.getExtraIndicatorsDataNumb=function(){switch(this.name.toLowerCase()){case"ichimoku":return this.params.largePeriod+this.params.middlePeriod;default:return 0}},A.getValuesFromDictionary=function(t){return Object.values(t).sort((function(t,e){return t.T>e.T?-1:t.T<e.T?1:0}))},A.prototype.convertToDTO=function(){var t={};return t.name=this.name,t.fullName=this.fullName,t.params=Object.assign({},this.params),t.colors=Object.assign({},this.colors),t.opacity=Object.assign({},this.opacity),t.lineWidth=Object.assign({},this.lineWidth),t.type=this.type,t.hidden=this.hidden,t.h=this.h,t.top=this.top,t},A.convertFromDTO=function(t,e){return new A(t,e)},A.prototype.draw=function(){var t=this.chartData.chart;if(t&&t.selectedData&&t.selectedData.length){var e=A.getValuesFromDictionary(this.data);if(e&&e.length&&!this.hidden)if("oscillator"===this.type){var a=t.oscillatorCharts[this.id];a.clear();var i=parseInt(a.chartData.precission,10),r=t.showData[0].date,s=t.showData[t.showData.length-1].date,n=e.filter((function(t){return t.T<=r&&t.T>=s}));a.scaleParams=a.getScaleParams(n,i),a.draw(this,n,t),t.chartData.options.Chart.needPriceOscillators&&a.drawPriceLineCurrentOscillator(this,e,t)}else if("trend"===this.type)switch(this.name.toLowerCase()){case"sma":case"ema":case"dema":t.drawLinePT(this,e,t.canvasDataNormalContext);break;case"bb":case"env":case"keltner":case"donchian":t.drawBollingerBandsIndicator(this,e,t.canvasDataNormalContext);break;case"fractal":t.drawFractal(this,e,t.canvasDataNormalContext);break;case"ichimoku":t.drawIchimoku(this,e,t.canvasDataNormalContext);break;case"sar":t.drawSar(this,e,t.canvasDataNormalContext);break;case"lri":t.drawLRI(this,e,t.canvasDataNormalContext);break;default:return}}},A.prototype.applyIndicatorHeight=function(t,e){this.h=t.height,this.w=parseFloat(e.parent.style.width),this.top=t.top},A.calculateIndicatorResult=function(t,e,a){var i=A.convertDataToOCLHT(e);return l[t].apply(l,[i].concat(function r(t){return function e(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function a(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function i(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(a)))},A.libIndicatorsNames={ac:{funcName:"AC",params:[]},ao:{funcName:"AO",params:[]},obv:{funcName:"OBV",params:[]},so:{funcName:"So",params:["K","D"]},stochrsi:{funcName:"StochasticRSI",params:["RSIP","K","D"]},bb:{funcName:"BollingerBands",params:["period"]},adx:{funcName:"ADX",params:["period"]},ema:{funcName:"EMA",params:["period"]},atr:{funcName:"ATR",params:["period"]},env:{funcName:"Envelopes",params:["length","percent","average"]},sar:{funcName:"ParabolicSar",params:["startAf","stepAf","maxAf"]},sma:{funcName:"SMA",params:["period"]},std:{funcName:"StandartDeviation",params:["period"]},rsi:{funcName:"RSI",params:["period"]},lri:{funcName:"LRI",params:["period","deviation"]},dema:{funcName:"Dema",params:["period"]},macd:{funcName:"MACD",params:["fastLength","slowLength","signalLength"]},bears:{funcName:"BearsPower",params:["period"]},bulls:{funcName:"BullsPower",params:["period"]},fractal:{funcName:"Fractal",params:["period"]},keltner:{funcName:"Keltner",params:["period","multi"]},donchian:{funcName:"Donchian",params:["period"]},ichimoku:{funcName:"Ichimoku",params:["smallPeriod","middlePeriod","largePeriod","timePeriod"]},williamsr:{funcName:"WilliamsR",params:["period"]}},A.calculate=function(t,e){var a=t.name.toLowerCase(),i=t.params;if(Object.keys(A.libIndicatorsNames).includes(a)){var r=A.libIndicatorsNames[a].funcName,s=A.libIndicatorsNames[a].params.map((function(t){return i[t]}));return A.calculateIndicatorResult(r,e,s)}return"volume"===a?A.getVolumeIndicatorResult(e):[]},A.getVolumeIndicatorResult=function(t){return t.reduce((function(t,e){var a=parseFloat(e.open)>=parseFloat(e.close)?"down":"up";return t[e.date]={T:e.date,P:e.volume,direction:a},t}),{})},A.getNextId=function(){return A.id++},A.convertDataToOCLHT=function(t){return t.map((function(t){return{O:parseFloat(t.open),C:parseFloat(t.close),L:parseFloat(t.low),H:parseFloat(t.high),V:parseFloat(t.value),T:t.date}}))},A.prototype.getCurrentOscillatorPrecission=function(){var t;for(var e in this.data)if(this.data.hasOwnProperty(e)){t=this.data[e];break}var a=1;for(var i in t)t.hasOwnProperty(i)&&("T"===i||isNaN(t[i])||(a=a<=t[i].toFixed(0).length?t[i].toFixed(0).length:a));this.oscillatorPrecission=this.oscillatorPrecission-a<0?0:this.oscillatorPrecission-a,this.oscillatorPrecissionFlag=!1},A.prototype.getCurrentValues=function(){if(this.showData.length&&"oscillator"===this.type)switch(this.name.toLowerCase()){case"adx":return[parseFloat(this.showData[0].DIP).toFixed(this.oscillatorPrecission),parseFloat(this.showData[0].DIM).toFixed(this.oscillatorPrecission),parseFloat(this.showData[0].ADX).toFixed(this.oscillatorPrecission)];case"ao":case"ac":case"obv":case"atr":case"rsi":case"std":case"bears":case"bulls":case"volume":case"williamsr":return[parseFloat(this.showData[0].P).toFixed(this.oscillatorPrecission)];case"so":case"stochrsi":return[parseFloat(this.showData[0].K).toFixed(this.oscillatorPrecission),parseFloat(this.showData[0].D).toFixed(this.oscillatorPrecission)];case"macd":return[parseFloat(this.showData[0].signalLine).toFixed(this.oscillatorPrecission),parseFloat(this.showData[0].macdLine).toFixed(this.oscillatorPrecission)];default:return[]}return[]},A.id=0;var ie=function(){function t(t){return ie.pressed=!0,1!==(t=u(t)).which&&0!==t.which||(r={x:t.pageX,y:t.pageY,element:this},function i(){document.onmousemove=e,document.onmouseup=a,document.ondragstart=document.body.onselectstart=function(){return!1}}()),!1}function e(t){if(t=u(t),r){if(Math.abs(r.x-t.pageX)<5&&Math.abs(r.y-t.pageY)<5)return!1;var e=r.element;s=e,i=e.dragObject;var a=function o(t,e,a){var i=function r(t){return t.getBoundingClientRect?function e(t){var e=getComputedStyle(t),a=(t.getBoundingClientRect(),document.body),i=document.documentElement,r=window.pageYOffset||i.scrollTop||a.scrollTop,s=window.pageXOffset||i.scrollLeft||a.scrollLeft,n=i.clientTop||a.clientTop||0,o=i.clientLeft||a.clientLeft||0,h=parseFloat(e.top)+r-n,c=parseFloat(e.left)+s-o;return{top:Math.round(h),left:Math.round(c)}}(t):function a(t){for(var e=0,a=0;t;)e+=parseInt(t.offsetTop,10),a+=parseInt(t.offsetLeft,10),t=t.offsetParent;return{top:e,left:a}}(t)}(t);return{x:e-i.left,y:a-i.top}}(e,r.x,r.y,i.bodyTop);r=null,i.onDragStart(a)}if(i.onDragMove(t,t.pageX,t.pageY),i.forTrget)var h=function c(t){if(navigator.userAgent.match("MSIE")||navigator.userAgent.match("Gecko"))var e=t.clientX,a=t.clientY;else e=t.pageX,a=t.pageY;i.hide();var r=document.elementFromPoint(e,a);for(i.show();r;){if(r.dropTarget&&r.dropTarget.canAccept(i))return r.dropTarget;r=r.parentNode}return null}(t);return n!=h&&(n&&n.onLeave(s),h&&h.onEnter(s),n=h),!1}function a(){ie.pressed=!1,i?(n&&(n.accept(i,s),i.onDragSuccess(n,s)),i.downLip(),i.downStyle(),i=null):r=null,function t(){document.onmousemove=document.onmouseup=document.ondragstart=document.body.onselectstart=null}(),ie.pressed=!1}var i,r,s,n;return{makeDraggable:function e(a){a.onmousedown=t}}}(),re=function t(){var e=this;this.DragObjects=[],this.dropTargetContainer={},window.resize=null,window.resize=function(){e.moveResize()},this.addDragObject=function(t,e){this.DragObjects.push(new d(t,e))},this.setContainer=function(t){this.dropTargetContainer=t,this.setBords()},this.setBords=function(){this.DragObjects.forEach((function(t){t.setBord(e.dropTargetContainer)}))},this.addToolBarTop=function(t){new p(t,"tch-move-toolbarTop")},this.addToolBarLeft=function(){new p(toolbarLeft,"tch-move-toolbarLeft")},this.moveResize=function(t){this.DragObjects.forEach((function(e){e.moveForResize(t)}))},this.resizeDragObjects=function(){this.DragObjects.forEach((function(t){t.reCalculationSize()})),this.setBords(this.dropTargetContainer)}};d.prototype.deltaLip=15,p.prototype.classTargetOK="tch-uponMe",d.prototype.setBord=function(t){this.downLip(),this.bord.left=t.left,this.bord.top=t.top,this.bord.right=t.right-this.geom.width,this.bord.bottom=t.bottom-this.geom.height,this.moveForSetBord()},d.prototype.reCalculationSize=function(){this.geom.width=this.parent.getBoundingClientRect().width,this.geom.height=this.parent.getBoundingClientRect().height,this.geom.borderTopWidth=parseFloat(getComputedStyle(this.parent).borderTopWidth),this.geom.borderLeftWidth=parseFloat(getComputedStyle(this.parent).borderLeftWidth),this.geom.borderBottomWidth=parseFloat(getComputedStyle(this.parent).borderBottomWidth),this.geom.borderRightWidth=parseFloat(getComputedStyle(this.parent).borderRightWidth)},d.prototype.moveForSetBord=function(){this.fixPos.top&&(this.s.top=this.bord.top+"px"),this.fixPos.right&&(this.s.left=this.bord.right+"px"),this.fixPos.bottom&&(this.s.top=this.bord.bottom+"px"),this.fixPos.left&&(this.s.left=this.bord.left+"px")},d.prototype.moveForResize=function(t){var e=t?t.top:0,a=t?t.left:0;this.minLeft=parseFloat(getComputedStyle(this.parent).left)-this.parent.getBoundingClientRect().left,this.minTop=parseFloat(getComputedStyle(this.parent).top)-this.parent.getBoundingClientRect().top,this.maxLeft=document.documentElement.clientWidth-(this.geom.borderLeftWidth+this.geom.borderRightWidth)+this.minLeft-this.geom.width,this.maxTop=document.documentElement.clientHeight-(this.geom.borderTopWidth+this.geom.borderBottomWidth)+this.minTop-this.geom.height,this.fixMinMax.top&&(this.s.top=this.minTop+"px"),this.fixMinMax.right&&(this.s.left=this.maxLeft+"px"),this.fixMinMax.bottom&&(this.s.top=this.maxTop+"px"),this.fixMinMax.left&&(this.s.left=this.minLeft+"px"),!t||this.fixPos.top||this.fixPos.bottom||(this.s.top=parseFloat(this.s.top)-e+"px"),!t||this.fixPos.right||this.fixPos.left||(this.s.left=parseFloat(this.s.left)-a+"px")},re.prototype.FunctionOnBrouse={Opera:{},ie:{},edge:{},chrome:{},safari:{},firefox:{},unknown:{}},re.prototype.ForBrouse=re.prototype.FunctionOnBrouse[function se(){return-1!==navigator.userAgent.indexOf("Opera")||-1!==navigator.userAgent.indexOf("OPR")?"opera":-1!==navigator.userAgent.indexOf("MSIE")||document.documentMode?"ie":window.StyleMedia?"edge":-1!==navigator.userAgent.indexOf("Chrome")?"chrome":-1!==navigator.userAgent.indexOf("Safari")?"safari":-1!==navigator.userAgent.indexOf("Firefox")?"firefox":"unknown"}()],g.shownPickers=[],g.html="<div class='tch-color-picker-container'><div class='tch-color-picker'></div></div>",g.createSingle=function(t,e){return t.innerHTML=g.html,new g(t,e)},g.prototype.init=function(){for(var t=this.parent.querySelectorAll(".tch-color-picker"),e=0;e<t.length;e++)this.addPickerEvents(t[e])},g.prototype.addPickerEvents=function(t){var e=this;t.onclick=function(t){t.preventDefault(),e.createPallete(t.target)}},g.rgbaToArray=function(t){for(var e,a=[],i=t.replace("rgba(","").replace(")","").split(","),r=0;r<i.length;r++)e=parseFloat(i[r]),isNaN(e)||(a[r]=e);return a},g.prototype.createPallete=function(t){var e=t.style.backgroundColor;(e=g.getColor(e))&&(this.rgba=g.rgbaToArray(e)),g.shownPickers.push(this);var a=document.createElement("div");a.className="tch-color-picker-palette",a.addEventListener("mousedown",(function(t){t.stopPropagation()})),document.addEventListener("mousedown",g.pickerListener),t.parentNode.appendChild(a),this.paletteRect=a.getBoundingClientRect(),this.palette=a,this.picker=t;var i=document.createElement("div");a.appendChild(i),this.createTablePallete(a),this.createScroll(a),this.createChangeButton(a)},g.prototype.createScroll=function(t){var e=document.createElement("div");e.className="container-scroll";var a=document.createElement("input");a.setAttribute("type","range"),a.setAttribute("min","0"),a.setAttribute("max","1"),a.setAttribute("step","0.1"),a.setAttribute("value",this.rgba[3]),e.appendChild(a),t.appendChild(e),this.scroll=a;var i=this;a.oninput=function(t){i.rgba[3]=parseFloat(t.target.value),i.updateValue()},this.setScrollColor()},g.prototype.createChangeButton=function(t){var e=document.createElement("input");e.setAttribute("type","button"),e.className="btn-custom-color",e.setAttribute("value",this.techChart.translation["custom-color"]);var a=this;e.onclick=function(){"wrapper-table"===t.querySelector("div").className?a.createCanvasPallete(t):a.createTablePallete(t),a.pointerRect=a.pointer.getBoundingClientRect(),a.canvasRect=a.ctx.canvas.getBoundingClientRect()},t.appendChild(e)},g.prototype.createTablePallete=function(t){for(var e=this,a=document.createElement("table"),i=[],r=0;r<8;r++)i[r]=[];i[0][0]="rgba(0, 0, 0, 1)",i[0][1]="rgba(66, 66, 66, 1)",i[0][2]="rgba(101, 101, 101, 1)",i[0][3]="rgba(152, 152, 152, 1)",i[0][4]="rgba(182, 182, 182, 1)",i[0][5]="rgba(203, 203, 203, 1)",i[0][6]="rgba(216, 216, 216, 1)",i[0][7]="rgba(238, 238, 238, 1)",i[0][8]="rgba(242, 242, 242, 1)",i[0][9]="rgba(255, 255, 255, 1)",i[1][0]="rgba(151, 0, 0, 1)",i[1][1]="rgba(255, 0, 0, 1)",i[1][2]="rgba(255, 152, 0, 1)",i[1][3]="rgba(255, 255, 0, 1)",i[1][4]="rgba(0, 255, 0, 1)",i[1][5]="rgba(0, 255, 255, 1)",i[1][6]="rgba(73, 133, 231, 1)",i[1][7]="rgba(0, 0, 255, 1)",i[1][8]="rgba(152, 0, 255, 1)",i[1][9]="rgba(255, 0, 255, 1)",i[2][0]="rgba(230, 184, 175, 1)",i[2][1]="rgba(244, 204, 204, 1)",i[2][2]="rgba(252, 229, 205, 1)",i[2][3]="rgba(255, 242, 204, 1)",i[2][4]="rgba(217, 234, 211, 1)",i[2][5]="rgba(208, 224, 227, 1)",i[2][6]="rgba(201, 218, 248, 1)",i[2][7]="rgba(207, 226, 243, 1)",i[2][8]="rgba(217, 210, 233, 1)",i[2][9]="rgba(234, 209, 220, 1)",i[3][0]="rgba(221, 126, 107, 1)",i[3][1]="rgba(234, 153, 153, 1)",i[3][2]="rgba(249, 203, 156, 1)",i[3][3]="rgba(255, 229, 153, 1)",i[3][4]="rgba(182, 215, 168, 1)",i[3][5]="rgba(162, 196, 201, 1)",i[3][6]="rgba(164, 194, 244, 1)",i[3][7]="rgba(159, 197, 232, 1)",i[3][8]="rgba(180, 167, 214, 1)",i[3][9]="rgba(213, 166, 189, 1)",i[4][0]="rgba(204, 65, 37, 1)",i[4][1]="rgba(224, 102, 102, 1)",i[4][2]="rgba(246, 178, 107, 1)",i[4][3]="rgba(255, 217, 102, 1)",i[4][4]="rgba(147, 196, 125, 1)",i[4][5]="rgba(118, 165, 175, 1)",i[4][6]="rgba(109, 158, 235, 1)",i[4][7]="rgba(111, 168, 220, 1)",i[4][8]="rgba(142, 124, 195, 1)",i[4][9]="rgba(194, 123, 160, 1)",i[5][0]="rgba(166, 28, 0, 1)",i[5][1]="rgba(204, 0, 0, 1)",i[5][2]="rgba(230, 145, 56, 1)",i[5][3]="rgba(241, 194, 50, 1)",i[5][4]="rgba(106, 168, 79, 1)",i[5][5]="rgba(69, 129, 142, 1)",i[5][6]="rgba(60, 120, 216, 1)",i[5][7]="rgba(61, 133, 198, 1)",i[5][8]="rgba(103, 78, 167, 1)",i[5][9]="rgba(166, 77, 121, 1)",i[6][0]="rgba(133, 32, 12, 1)",i[6][1]="rgba(153, 0, 0, 1)",i[6][2]="rgba(180, 95, 6, 1)",i[6][3]="rgba(191, 144, 0, 1)",i[6][4]="rgba(56, 118, 29, 1)",i[6][5]="rgba(19, 79, 92, 1)",i[6][6]="rgba(17, 85, 204, 1)",i[6][7]="rgba(11, 83, 148, 1)",i[6][8]="rgba(53, 28, 117, 1)",i[6][9]="rgba(116, 27, 71, 1)",i[7][0]="rgba(91, 15, 0, 1)",i[7][1]="rgba(102, 0, 0, 1)",i[7][2]="rgba(120, 63, 4, 1)",i[7][3]="rgba(127, 96, 0, 1)",i[7][4]="rgba(39, 78, 19, 1)",i[7][5]="rgba(12, 52, 61, 1)",i[7][6]="rgba(28, 69, 135, 1)",i[7][7]="rgba(7, 55, 99, 1)",i[7][8]="rgba(32, 18, 77, 1)",i[7][9]="rgb(76, 17, 48)";for(var s=0;s<8;s++){for(var n=document.createElement("tr"),o=0;o<10;o++){var h=document.createElement("td"),c=document.createElement("div");c.style.background=i[s][o],c.className="wrapper-color",c.onclick=function(t){for(var a=t.target.style.background.split("(")[1].split(")")[0].split(","),i=0;i<3;i++)e.rgba[i]=a[i];e.updateValue()},h.appendChild(c),n.appendChild(h)}a.appendChild(n)}var l=t.querySelector("div");l.innerHTML="",l.className="wrapper-table",l.appendChild(a)},g.prototype.createCanvasPallete=function(t){var e=document.createElement("canvas"),a=document.createElement("div");a.className="tch-color-picker-pointer";var i=e.getContext("2d");this.pointer=a,this.ctx=i;var r=t.querySelector("div");r.innerHTML="",r.className="wrapper-canvas",r.appendChild(a),r.appendChild(e);var s=r.getElementsByTagName("canvas")[0];this.ctx.canvas.width=s.clientWidth,this.ctx.canvas.height=s.clientHeight;for(var n=e.width,o=e.height,h=0;h<n;h++){var c=this.getColorGradient(h,1,n,1);i.fillStyle="rgba("+c[0]+","+c[1]+","+c[2]+","+c[3]+")",i.fillRect(h,0,1,o)}var l=this;a.onmouseup=function(){l.pressed=!1},a.onmousedown=function(){l.pressed=!0},e.onmousedown=function(){l.pressed=!0},e.onmouseup=function(){l.pressed=!1},e.onclick=function(t){l.setPointerPosition(t)},e.onmousemove=function(t){l.pressed&&l.setPointerPosition(t)},a.onmousemove=function(t){l.pressed&&l.setPointerPosition(t)},this.pointerRect=a.getBoundingClientRect(),this.canvasRect=e.getBoundingClientRect()},g.prototype.getColorGradient=function(t,e,a){return[g.getR(t,a),g.getG(t,a),g.getB(t,a),255]},g.getR=function(t,e){var a=Math.floor(255*Math.cos(2*t*Math.PI/e));return a>0?a:0},g.getG=function(t,e){var a=Math.floor(255*Math.sin(2*t*Math.PI/e));return a>0?a:0},g.getB=function(t,e){var a=Math.floor(255*Math.sin(2*t*Math.PI/e+Math.PI));return a>0?a:0},g.prototype.setPointerPosition=function(t){var e=Math.floor(t.clientX-this.paletteRect.left),a=Math.floor(t.clientY-this.paletteRect.top);this.pointer.style.zIndex=2,this.pointer.style.top=a-this.pointerRect.height/2+"px",this.pointer.style.left=e-this.pointerRect.width/2+"px",this.pointerRect=this.pointer.getBoundingClientRect(),this.canvasRect=this.ctx.canvas.getBoundingClientRect();var i=this.canvasRect.left-this.paletteRect.left;this.canvasRect.right<=this.pointerRect.right&&(e=this.canvasRect.width+i-this.pointerRect.width/2-2),this.canvasRect.left>=this.pointerRect.left&&(e=i+this.pointerRect.width/2);var r=this.canvasRect.top-this.paletteRect.top;this.canvasRect.top>this.pointerRect.top&&(a=r+this.pointerRect.height/2),this.canvasRect.bottom<this.pointerRect.bottom&&(a=r-this.pointerRect.height/2+this.canvasRect.height-2),this.pointer.style.top=a-this.pointerRect.height/2+"px",this.pointer.style.left=e-this.pointerRect.width/2+"px",e=Math.floor(e-(this.canvasRect.left-this.paletteRect.left)),a=Math.floor(a-(this.canvasRect.top-this.paletteRect.top));var s=this.getColorGradient(e,a,this.canvasRect.width,this.canvasRect.height);this.rgba[0]=s[0],this.rgba[1]=s[1],this.rgba[2]=s[2],this.rgba[3]=s[3],this.updateValue()},g.prototype.updateValue=function(){var t=this.getColor();this.picker||(this.picker=this.parent.querySelector(".tch-color-picker")),this.picker.style.backgroundColor=t,this.pointer&&(this.pointer.style.backgroundColor=t),this.picker.onchange&&this.picker.onchange(t),this.onchange&&this.onchange(t),this.setScrollColor()},g.prototype.setScrollColor=function(){if(this.scroll){var t=this.getColor(),e=(t=t.replace("rgba(","").replace(")","")).split(", "),a="linear-gradient(to right,rgba("+e[0]+", "+e[1]+", "+e[2]+", 0)5%,rgba("+e[0]+", "+e[1]+", "+e[2]+", 1)95%)";this.scroll.style.background=a}},g.prototype.setColor=function(t){t=g.getColor(t),this.rgba=g.rgbaToArray(t),this.updateValue()},g.prototype.getColor=function(){return"rgba("+this.rgba[0]+", "+this.rgba[1]+", "+this.rgba[2]+", "+this.rgba[3]+")"},g.pickerListener=function(){for(var t=0;t<g.shownPickers.length;t++){if(g.shownPickers[t].palette){var e=g.shownPickers[t].palette;e.parentNode.removeChild(e)}g.shownPickers.splice(t,1)}document.removeEventListener("mousedown",g.pickerListener)},g.getColor=function(t){return 0!==t.indexOf("#")?0===t.indexOf("rgba")?t:0===t.indexOf("rgb")?t.replace(")",", 1)").replace("rgb","rgba"):t:/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3==(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),"rgba("+[(e="0x"+e.join(""))>>16&255,e>>8&255,255&e].join(",")+",1)"):void 0;var e},f.prototype=Object.create(ut.prototype),f.prototype.constructor=f,f.prototype.addSettingsLineEvent=function(t){var e=t.querySelector(".tch-line-settings-panel"),a=e.querySelector(".tch-line-delete"),i=e.querySelector(".tch-line-params"),r=this;a.onclick=function(t){t.stopPropagation(),t.preventDefault(),r.chartData.chart.removeDrawingObjectsOtherCharts(r.chartData.editDrawingObject),r.chartData.chart.redrawDrawingObjectsOtherCharts(),r.chartData.editDrawingObject.remove(),r.chartData.chart.redrawDrawingObjects(),r.chartData.chart.redrawInfo(),r.chartData.techChart.autoSaveParams(),e.classList.toggle("tch-hidden",!0)},i.onclick=function(e){e.stopPropagation(),e.preventDefault(),r.createLineSettingsPanel(t)}},f.prototype.addPanelLineSettingEvent=function(t){var e=t.querySelector(".tch-line-settings-panel-cancel"),a=t.querySelector(".tch-line-settings-panel-submit"),i=t.querySelector(".tch-line-settings-panel-default"),r=this;e.onclick=function(e){r.cancelPanelSettingLine(e,t),r.state="normal",r.chartData.techChart.autoSaveParams()},a.onclick=function(t){r.submitLineSettings(t),r.state="normal",r.chartData.techChart.autoSaveParams()},i.onclick=function(e){r.setDefaultLineSettings(e,t),e.preventDefault(),e.stopPropagation(),r.state="normal",r.chartData.techChart.autoSaveParams()},r=this,t.oncloseall=function(){r.isSettingsPanelOpen=!1}},f.prototype.setDefaultLineSettings=function(t){t.preventDefault(),t.stopPropagation()},f.prototype.submitLineSettings=function(t){t.currentTarget.offsetParent.classList.toggle("tch-hidden",!0),t.preventDefault(),t.stopPropagation()},f.prototype.cancelPanelSettingLine=function(t,e){if(this.chartData.editDrawingObject){var a=e.querySelector(".tch-line-settings-style"),i=e.querySelector(".tch-line-settings-coordinates"),r=e.querySelector(".tch-line-settings-visibility");a.classList.toggle("tch-hidden",!1),i.classList.toggle("tch-hidden",!0),r.classList.toggle("tch-hidden",!0),this.restoreOldSettingsLine(e.querySelector(".tch-line-settings-form")),this.updatePixels(),this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.chartData.chart.canvasDrawingContext),this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id),this.chartData.editDrawingObject=null,this.chartData.chart.redrawInfo()}e.classList.toggle("tch-hidden",!0),t.preventDefault(),t.stopPropagation()},f.prototype.restoreOldSettingsLine=function(t){for(var e,a=t.querySelectorAll("input"),i=0;i<a.length;i++)void 0!==a[i].oldValue&&(e=a[i].oldValue,this[a[i].name]=e,delete a[i].oldValue,this.applyValue(e,a[i].name));for(var r=t.querySelectorAll("select"),s=0;s<r.length;s++)void 0!==r[s].oldValue&&(e=r[s].oldValue,this[r[s].name]=e,delete r[s].oldValue);var n=t.querySelectorAll(".tch-color-picker");for(i=0;i<n.length;i++){var o=n[i].getAttribute("name");o&&(e=n[i].style.backgroundColor,n[i].oldValue!==e&&(n[i].style.backgroundColor=n[i].oldValue,this[o]=n[i].oldValue,this.applyValue(n[i].oldValue,o),delete n[i].oldValue))}},f.prototype.createLineSettingsPanel=function(t){this.createSettingsPanel(t),this.fillSettingsPanelFull(t);var e=t.querySelector(".tch-line-settings-style"),a=t.querySelector(".tch-line-settings-coordinates"),i=t.querySelector(".tch-line-settings-visibility"),r=t.querySelector(".tch-line-settings-panel-header li:first-child "),s=t.querySelector(".tch-line-settings-panel-header li:nth-child(2) "),n=t.querySelector(".tch-line-settings-panel-header li:last-child ");r.onclick=function(){e.classList.toggle("tch-hidden",!1),a.classList.toggle("tch-hidden",!0),i.classList.toggle("tch-hidden",!0),r.classList.toggle("tch-tab-selected",!0),s.classList.toggle("tch-tab-selected",!1),n.classList.toggle("tch-tab-selected",!1)},s.onclick=function(){e.classList.toggle("tch-hidden",!0),a.classList.toggle("tch-hidden",!1),i.classList.toggle("tch-hidden",!0),r.classList.toggle("tch-tab-selected",!1),s.classList.toggle("tch-tab-selected",!0),n.classList.toggle("tch-tab-selected",!1)},n.onclick=function(){e.classList.toggle("tch-hidden",!0),a.classList.toggle("tch-hidden",!0),i.classList.toggle("tch-hidden",!1),r.classList.toggle("tch-tab-selected",!1),s.classList.toggle("tch-tab-selected",!1),n.classList.toggle("tch-tab-selected",!0)},this.fillLineStyle(t),this.fillLineCoordinates(t),this.fillLineVisibility(t),this.addPanelLineSettingEvent(t)},f.prototype.fillLineCoordinates=function(t){var e=t.querySelector(".tch-line-settings-coordinates");e.innerHTML="";var a=this.getCoordinatesRows();this.fillDivWithRows(e,a)},f.prototype.fillLineVisibility=function(t){var e=t.querySelector(".tch-line-settings-visibility");e.innerHTML="";var a=this.getVisibilityRows();this.fillDivWithRows(e,a)},f.prototype.getCoordinatesRows=function(){return[]},f.prototype.getVisibilityRows=function(){for(var t=[{name:"1 Minute",value:"1"},{name:"5 Minutes",value:"5"},{name:"15 Minutes",value:"15"},{name:"30 Minutes",value:"30"},{name:"1 Hour",value:"60"},{name:"4 Hours",value:"hour4"},{name:"8 Hours",value:"hour8"},{name:"1 Day",value:"day"},{name:"1 Week",value:"week"},{name:"1 Month",value:"month"}],e=[],a=0;a<t.length;a++)e.push([{text:t[a].name,options:{line:this,id:"tch-settingsStyle-input-visibility-"+t[a].name,name:"visibility",type:"checkbox",checked:-1===this.periods.indexOf(t[a].value),onchange:this.changeCheckboxInput}}]);return e},f.prototype.getStyleRows=function(){return[[{className:"tch-ss-basic"},{text:this.chartData.techChart.translation.line,options:{line:this,id:"tch-settingsStyle-input-color",forId:"tch-settingsStyle-input-color",name:"color",type:"colorpicker",value:this.color,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-width",name:"width",type:"range",min:1,max:7,step:2,value:this.width,onchange:this.changeValueInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-lineType",name:"lineType",type:"select",value:this.lineType,options:[{value:"normal",text:this.chartData.techChart.translation.normal},{value:"dash",text:this.chartData.techChart.translation.dash},{value:"points",text:this.chartData.techChart.translation.point}],onchange:this.changeValueSelect}}]]},f.prototype.getTextStyleRow=function(){return[{className:"tch-ss-textStyleRow"},{text:this.chartData.techChart.translation["text-color"],options:{line:this,id:"tch-settingsStyle-input-textColor",name:"textColor",type:"colorpicker",value:this.textColor,onchange:this.changeValueInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textFamily",name:"textFamily",type:"select",value:this.textFamily,options:[{value:"veranda",text:"Veranda"},{value:"areal",text:"Areal"},{value:"timesNewRoman",text:"Times New Roman"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textSize",name:"textSize",type:"select",value:this.textSize,options:[{value:"10",text:"10"},{value:"12",text:"12"},{value:"14",text:"14"}],onchange:this.changeValueSelect}},{text:"Bold",options:{line:this,id:"tch-settingsStyle-input-textBold",name:"textBold",type:"checkbox",checked:this.textBold,onchange:this.changeCheckboxInput}},{text:"Italic",options:{line:this,id:"tch-settingsStyle-input-textItalic",name:"textItalic",type:"checkbox",checked:this.textItalic,onchange:this.changeCheckboxInput}}]},f.prototype.getTextAlignRow=function(){return[{className:"tch-ss-textAlignRow"},{text:this.chartData.techChart.translation["text-alignment"],options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-TextAlignHorizontal",name:"textAlignHorizontal",type:"select",value:this.textAlignHorizontal,options:[{value:"left",text:"Left"},{value:"center",text:"Center"},{value:"right",text:"Right"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textAlignVertical",name:"textAlignVertical",type:"select",value:this.textAlignVertical,options:[{value:"top",text:"Top"},{value:"middle",text:"Middle"},{value:"bottom",text:"Bottom"}],onchange:this.changeValueSelect}}]},f.prototype.getLeftEndRow=function(){return[{className:"tch-ss-leftEndRow"},{text:this.chartData.techChart.translation["left-end"],options:{line:this,id:"tch-settingsStyle-input-leftEnd",inputRowClassName:"tch-checkbox-input-row",labelRowClassName:"tch-checkbox-label-row",afterLabelRowClassName:"tch-checkbox-after-label-row",name:"leftEnd",type:"checkbox",checked:this.leftEnd,onchange:this.changeCheckboxInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-leftEndType",name:"leftEndType",type:"select",value:this.leftEndType,options:[{value:"normal",text:this.chartData.techChart.translation.normal},{value:"arrow",text:this.chartData.techChart.translation.arrow}],onchange:this.changeValueSelect}}]},f.prototype.getRightEndRow=function(){return[{className:"tch-ss-rightEndRow"},{text:this.chartData.techChart.translation["right-end"],options:{line:this,id:"tch-settingsStyle-input-rightEnd",inputRowClassName:"tch-checkbox-input-row",labelRowClassName:"tch-checkbox-label-row",afterLabelRowClassName:"tch-checkbox-after-label-row",name:"rightEnd",type:"checkbox",checked:this.rightEnd,onchange:this.changeCheckboxInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-rightEndType",name:"rightEndType",type:"select",value:this.rightEndType,options:[{value:"normal",text:this.chartData.techChart.translation.normal},{value:"arrow",text:this.chartData.techChart.translation.arrow}],onchange:this.changeValueSelect}}]},f.prototype.getBackgroundRow=function(){return[{className:"tch-ss-backgroundRow"},{text:this.chartData.techChart.translation.background,options:{line:this,id:"tch-settingsStyle-input-fillColor",forId:"tch-settingsStyle-input-fill",labelClassName:"label-fill",name:"fillColor",type:"colorpicker",value:this.fillColor,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-fill",afterLabelClassName:"after-label-fill",name:"fill",type:"checkbox",checked:this.fill,onchange:this.changeCheckboxInput}}]},f.prototype.getShowDateRow=function(){return[{className:"tch-ss-showDateRow"},{text:this.chartData.techChart.translation["show-time"],options:{line:this,id:"tch-settingsStyle-input-showTime",name:"showTime",type:"checkbox",checked:this.showTime,onchange:this.changeCheckboxInput}}]},f.prototype.getShowTextRow=function(){return[{className:"tch-ss-showTextRow"},{text:this.chartData.techChart.translation["show-text"],options:{line:this,id:"tch-settingsStyle-input-showText",name:"showText",type:"checkbox",checked:this.showText,onchange:this.changeCheckboxInput}}]},f.prototype.getMiddleSettingsRow=function(){return[{className:"tch-ss-middleSettingsRow"},{text:this.chartData.techChart.translation.middle,options:{line:this,id:"tch-settingsStyle-input-middleColor",forId:"tch-settingsStyle-input-drawMiddle",labelClassName:"label-draw-middle",name:"middleColor",type:"colorpicker",value:this.middleColor,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-drawMiddle",afterLabelClassName:"after-label-draw-middle",name:"drawMiddle",type:"checkbox",checked:this.drawMiddle,onchange:this.changeCheckboxInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-middleWidth",name:"middleWidth",type:"range",min:1,max:7,step:2,value:this.middleWidth,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-middleType",name:"middleType",className:"input-styled",type:"select",value:this.middleType,options:[{value:"normal",text:this.chartData.techChart.translation.normal},{value:"dash",text:this.chartData.techChart.translation.dash},{value:"points",text:this.chartData.techChart.translation.point}],onchange:this.changeValueSelect}}]},f.prototype.getTextAreaRow=function(){return[{className:"tch-ss-textAreaRow"},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textArea",name:"textArea",type:"textarea",value:this.textArea,onchange:this.changeValueInput}}]},f.prototype.getShowAngleRow=function(){return[{className:"tch-ss-showAngleRow"},{text:this.chartData.techChart.translation["show-angle"],options:{line:this,id:"tch-settingsStyle-input-showAngle",name:"showAngle",type:"checkbox",checked:this.showAngle,onchange:this.changeCheckboxInput}}]},f.prototype.getStatsTextColorRow=function(){return[{className:"tch-ss-statsTextColorRow"},{text:this.chartData.techChart.translation["text-color"],options:{line:this,id:"tch-settingsStyle-input-statsTextColor",name:"statsTextColor",type:"colorpicker",value:this.statsTextColor,onchange:this.changeValueInput}}]},f.prototype.getShowDateTimeRangeRow=function(){return[{className:"tch-ss-showDateTimeRang"},{text:this.chartData.techChart.translation["show-date-time-range"],options:{line:this,id:"tch-settingsStyle-input-showDateRange",name:"showDateRange",type:"checkbox",checked:this.showDateRange,onchange:this.changeCheckboxInput}}]},f.prototype.getShowBarsRangeRow=function(){return[{className:"tch-ss-showBarsRangeRow"},{text:this.chartData.techChart.translation["show-bars-range"],options:{line:this,id:"tch-settingsStyle-input-showBarsRange",name:"showBarsRange",type:"checkbox",checked:this.showBarsRange,onchange:this.changeCheckboxInput}}]},f.prototype.getShowPriceRangeRow=function(){return[{className:"tch-ss-showPriceRangeRow"},{text:this.chartData.techChart.translation["show-price-range"],options:{line:this,id:"tch-settingsStyle-input-showPriceRange",name:"showPriceRange",type:"checkbox",checked:this.showPriceRange,onchange:this.changeCheckboxInput}}]},f.prototype.getShowPriceRow=function(){return[{className:"tch-ss-showPriceRow"},{text:this.chartData.techChart.translation["show-price"],options:{line:this,id:"tch-settingsStyle-input-showPrice",name:"showPrice",type:"checkbox",checked:this.showPrice,onchange:this.changeCheckboxInput}}]},f.prototype.getShowDistance=function(){return[{className:"tch-ss-showDistance"},{text:this.chartData.techChart.translation["show-distance"],options:{line:this,id:"tch-settingsStyle-input-showDistance",name:"showDistance",type:"checkbox",checked:this.showDistance,onchange:this.changeCheckboxInput}}]},f.prototype.getAlwaysShowStatsRow=function(){return[{className:"tch-ss-alwaysShowStatsRow"},{text:this.chartData.techChart.translation["always-show-stats"],options:{line:this,id:"tch-settingsStyle-input-alwaysShowStats",name:"alwaysShowStats",type:"checkbox",checked:this.alwaysShowStats,onchange:this.changeCheckboxInput}}]},f.prototype.fillLineStyle=function(t){var e=t.querySelector(".tch-line-settings-style");e.innerHTML="";var a=this.getStyleRows();this.fillDivWithRows(e,a)},f.prototype.draw=function(t,e,a,i,s){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;if(r.drawLine(null,t,e,i,a,s,this.color,this.getLineTypeArray(this.lineType,this.width),this.width,1),"edit"===this.state||"active"===this.state){r.drawLine(null,t,e,i,a,s,this.color,[],parseFloat(this.width)+10,.1);for(var n=0;n<this.circles.length;n++){var o=this.circles[n].points[0].active?"red":"white";this.circles[n].drawWithShadow(t,o,this.color,.1)}}return!0},f.prototype.getLineTypeArray=function(t,e){switch(t){case"normal":return[];case"dash":return[3*e,2*e];case"points":return[e,e];default:return[]}},f.prototype.drawArrow=function(t,e,a,i,r,s){var n;"up"===s?(n=pt.degToRad(135-a-r),this.drawWing(t,e,n,i,i),n=pt.degToRad(225-a+r),this.drawWing(t,e,n,i,-i)):"down"===s&&(n=pt.degToRad(-45-a-r),this.drawWing(t,e,n,i,i),n=pt.degToRad(45-a+r),this.drawWing(t,e,n,i,-i))},f.prototype.drawWing=function(t,e,a,i,s){var n=parseFloat(e.x),o=parseFloat(e.y),h=-1*Math.sin(a)*s+Math.cos(a)*i+n,c=Math.cos(a)*s+Math.sin(a)*i+o;r.drawLine(null,t,n,o,h,c,this.color,[],this.width,1)},f.prototype.isFocused=function(t,e){return pt.isPointOnLine({x1:this.points[0].x,x2:this.points[1].x,y1:this.points[0].y,y2:this.points[1].y},{x:t,y:e})},f.prototype.fillSettingsPanelFull=function(t){t.innerHTML=this.htmlFullSettingsPanel(),t.setAttribute("tch-line-type",this.classType)},f.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);a.circles=a.restoreCircles(e);for(var i=0;i<a.circles.length;i++)a.circles[i].points[0]=a.points[i],a.circles[i].data[0]=a.data[i];return a.updateCustomPropsByObj(a,e),a},f.prototype.updateCustomPropsByObj=function(t,e){t.color=e.color,t.width=e.width,t.periods=e.periods.slice(0),t.lineType=e.lineType},f.prototype.cloneCircles=function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].convertToDTO());return e},f.prototype.restoreCircles=function(t){for(var e=[],a=0;a<t.circles.length;a++)e.push(pt.convertFromDTO(this.chartData,t.circles[a]));return e},f.prototype.htmlFullSettingsPanel=function(){return"<div class='tch-line-settings-form'><ul class='tch-line-settings-panel-header tch-dropdown-header'><li class='tch-tab-selected' tch-text='style'>"+this.chartData.techChart.translation.style+"</li><li tch-text='coordinates'>"+this.chartData.techChart.translation.coordinates+"</li><li tch-text='visibility'>"+this.chartData.techChart.translation.visibility+"</li></ul><div class='tch-line-settings-panel-main'><div class='tch-line-settings-style'></div><div class='tch-line-settings-coordinates tch-hidden'><table><tbody></tbody></table></div><div class='tch-line-settings-visibility tch-hidden'><span></span><table><tbody></tbody></table></div></div><ul class='tch-dropdown-footer tch-clearfix'><li><input class='tch-line-settings-panel-default tch-btn tch-btn-default' type='button' tch-text='default' value='"+this.chartData.techChart.translation.default+"'/></li><li><input class=' tch-line-settings-panel-submit tch-btn tch-btn-submit' type='submit' tch-text='ok' value='"+this.chartData.techChart.translation.ok+"'><input class='tch-line-settings-panel-cancel tch-btn tch-btn-cancel' type='button' tch-text='cancel' value='"+this.chartData.techChart.translation.cancel+"'/></li></ul></div>"},f.prototype.htmlSettingsPanel=function(){return"<div class='tch-line-settings-panel'><ul class='tch-line-panel-header'><li class='tch-line-delete' tch-text='delete'>"+this.chartData.techChart.translation.delete+"</li><li class='tch-line-params' tch-text='params'>"+this.chartData.techChart.translation.params+"</li></ul></div>"},f.prototype.createSettingsPanel=function(t){t.classList.toggle("tch-hidden",!1),this.chartData.techChart.moveElements.DragObjects.push(new d(t)),t.onclick=function(t){t.stopPropagation()}},f.prototype.fillDivWithRows=function(t,e){for(var a=0;a<e.length;a++)t.appendChild(this.createDivRow(e[a]))},f.prototype.createDivRow=function(t){for(var e=document.createElement("div"),a=0;a<t.length;a++)t[a].className?e.className=t[a].className:"select"===t[a].options.type?e.appendChild(this.createSelectWithLabel(t[a].text,t[a].options)):"textarea"===t[a].options.type?e.appendChild(this.createTextAreaWithLabel(t[a].text,t[a].options)):"colorpicker"===t[a].options.type?e.appendChild(this.createColorPickerWithLabel(t[a].text,t[a].options)):"button"===t[a].options.type?e.appendChild(this.createButtonWithLabel(t[a].text,t[a].options)):e.appendChild(this.createInputWithLabel(t[a].text,t[a].options));return e},f.prototype.changeValueInput=function(t,e){if(t.target.line){void 0===t.target.oldValue&&(t.target.oldValue=t.target.line[t.target.name]),e&&void 0===e.oldValue&&(e.oldValue=t.target.line[t.target.name]);var a=t.target.value;t.target.line.applyValue(a,t.target.name)}},f.prototype.clickButton=function(t){var e=t.target.getAttribute("buttonvalue");void 0===t.target.oldValue&&(t.target.oldValue=t.target.line[t.target.name]),"on"===e?(t.target.setAttribute("buttonvalue","off"),e="off"):(t.target.setAttribute("buttonvalue","on"),e="on"),t.target.line.applyValue(e,t.target.name,t)},f.prototype.applyValue=function(t,e){this[e]=t,this.isObjectEdit=!0,this.chartData.chart.redrawInfo(),this.isObjectEdit=!1,this.chartData.chart.updateDrawingObjectsOtherChart(this),this.chartData.chart.drawActiveDrawingObjectsOtherCharts(this.id)},f.prototype.changeCheckboxInput=function(t){void 0===t.target.oldValue&&(t.target.oldValue=t.target.line[t.target.name]);var e=t.target.checked;t.target.line.applyValue(e,t.target.name)},f.prototype.changeValueSelect=function(t){void 0===t.target.oldValue&&(t.target.oldValue=t.target.line[t.target.name]);var e=t.target.selectedOptions[0].value;t.target.line.applyValue(e,t.target.name)},f.prototype.createColorPickerWithLabel=function(t,e){var a=document.createElement("div");if(t){var i=document.createElement("label");i.textContent=t,i.htmlFor=e.id,a.appendChild(i),i.onmousedown=function(t){t.stopPropagation(),g.pickerListener()}}var r=document.createElement("div");for(var s in e)e.hasOwnProperty(s)&&(r[s]=e[s]);var n=g.createSingle(r,this.chartData.techChart),o=r.querySelector(".tch-color-picker");if(e.onchange){o.setAttribute("name",e.name),o.oldValue=this[e.name];var h={target:{name:e.name,line:this,oldValue:this[e.name]}};n.onchange=function(t){h.target.value=t,e.onchange(h,r)}}return n.setColor(this[e.name]),a.appendChild(r),a},f.prototype.createTextAreaWithLabel=function(t,e){var a=document.createElement("div");if(t){var i=document.createElement("label");i.textContent=t,i.htmlFor=e.id,a.appendChild(i),i.onmousedown=function(t){t.stopPropagation(),g.pickerListener()}}var r=document.createElement("textarea");for(var s in e)e.hasOwnProperty(s)&&"type"!==s&&(r[s]=e[s]);return r.onmousedown=function(t){t.stopPropagation(),g.pickerListener()},a.appendChild(r),a},f.prototype.createInputWithLabel=function(t,e){var a=document.createElement("div"),i=this.chartData.techChart.makeTchTextValue(t);if(t){var r=document.createElement("label");r.textContent=t,r.htmlFor=e.id,r.setAttribute("tch-text",i),a.appendChild(r),r.onmousedown=function(t){t.stopPropagation(),g.pickerListener()}}var s=document.createElement("input");for(var n in e)e.hasOwnProperty(n)&&(s[n]=e[n]);return s.onmousedown=function(t){t.stopPropagation(),g.pickerListener()},a.appendChild(s),a},f.prototype.createButtonWithLabel=function(t,e){var a=document.createElement("div"),i=this.chartData.techChart.makeTchTextValue(t);if(t){var r=document.createElement("label");r.textContent=t,r.htmlFor=e.id,r.setAttribute("tch-text",i),a.appendChild(r),r.onmousedown=function(t){t.stopPropagation()}}var s=document.createElement("input");for(var n in e)e.hasOwnProperty(n)&&(s[n]=e[n]);return s.setAttribute("buttonValue",e.buttonValue),s.onmousedown=function(t){t.stopPropagation(),g.pickerListener()},a.appendChild(s),a},f.prototype.createSelectWithLabel=function(t,e){var a=document.createElement("div"),i=this.chartData.techChart.makeTchTextValue(t);if(t){var r=document.createElement("label");r.textContent=t,r.htmlFor=e.id,r.setAttribute("tch-text",i),a.appendChild(r),r.onmousedown=function(t){t.stopPropagation(),g.pickerListener()}}for(var s=document.createElement("select"),n=0;n<e.options.length;n++){var o=document.createElement("option");i=this.chartData.techChart.makeTchTextValue(e.options[n].text),o.value=e.options[n].value,o.text=e.options[n].text,o.setAttribute("tch-text",i),o.value===e.value&&(o.selected=!0),s.appendChild(o)}for(var h in e)e.hasOwnProperty(h)&&"options"!==h&&"type"!==h&&(s[h]=e[h]);return s.onmousedown=function(t){t.stopPropagation(),g.pickerListener()},a.appendChild(s),a},f.prototype.addSettingsLineEvent=function(t){var e=t.querySelector(".tch-line-settings-panel"),a=e.querySelector(".tch-line-delete"),i=e.querySelector(".tch-line-params"),r=this;a.onclick=function(t){t.stopPropagation(),t.preventDefault(),r.chartData.chart.removeDrawingObjectsOtherCharts(r.chartData.editDrawingObject),r.chartData.chart.redrawDrawingObjectsOtherCharts(),r.chartData.editDrawingObject.remove(),r.chartData.chart.redrawDrawingObjects(),r.chartData.chart.redrawInfo(),r.chartData.techChart.autoSaveParams(),e.classList.toggle("tch-hidden",!0)},i.onclick=function(e){e.stopPropagation(),e.preventDefault(),r.createLineSettingsPanel(t)}},w.prototype=Object.create(f.prototype),w.prototype.constructor=w,w.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},w.prototype.getStylePropsNames=function(){return["color","fontFamily","fontSize","textArea","fill","fillColor","border","borderColor","bold","borderColor","italic"]},w.prototype.applyTextParams=function(){this.textSpan.textContent=this.textArea,this.textSpan.style.fontSize=this.fontSize+"px",this.textSpan.style.fontFamily=this.fontFamily,this.textSpan.style.color=this.color,this.textSpan.style.fontWeight="on"===this.bold?"bolder":"normal",this.textSpan.style.fontStyle="on"===this.italic?"italic":"normal",this.textSpan.style.background=this.fill?this.fillColor:"",this.textSpan.style.border=this.border?"2px solid "+this.borderColor:"none",this.textSpan.style.top=this.points[0].y+"px",this.textSpan.style.left=this.points[0].x+"px";var t=this.textSpan.getBoundingClientRect();this.rect.width=t.width,this.rect.height=t.height},w.prototype.getTextAreaRow=function(){return[{className:"tch-ss-textAreaRow"},{text:this.chartData.techChart.translation.text,options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-textArea",labelClassName:"label-text-area",name:"textArea",type:"textarea",value:this.textArea,oninput:this.changeValueInput}}]},w.prototype.getTextStyleRow=function(){return[{className:"tch-ss-basic"},{text:"",options:{line:this,id:"tch-settingsStyle-input-color",name:"color",type:"colorpicker",value:this.color,onchange:this.changeValueInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-fontFamily",name:"fontFamily",type:"select",value:this.fontFamily,options:[{value:"Verdana",text:"Verdana"},{value:"Courier New",text:"Courier New"},{value:"Times New Roman",text:"Times New Roman"},{value:"Arial",text:"Arial"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-fontSize",name:"fontSize",type:"select",value:this.fontSize,options:[{value:10,text:"10"},{value:11,text:"11"},{value:12,text:"12"},{value:14,text:"14"},{value:16,text:"16"},{value:20,text:"20"},{value:24,text:"24"},{value:28,text:"28"},{value:32,text:"32"},{value:40,text:"40"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,id:"tch-settingsStyle-input-bold",name:"bold",type:"button",value:"B",buttonValue:this.bold,onclick:this.clickButton}},{text:"",options:{line:this,id:"tch-settingsStyle-input-italic",name:"italic",type:"button",value:"I",buttonValue:this.italic,onclick:this.clickButton}}]},w.prototype.getBackgroundRow=function(){return[{className:"tch-ss-backgroundRow"},{text:this.chartData.techChart.translation.background,options:{line:this,id:"tch-settingsStyle-input-fillColor",forId:"tch-settingsStyle-input-fill",labelClassName:"label-fill",name:"fillColor",type:"colorpicker",value:this.fillColor,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-fill",afterLabelClassName:"after-label-fill",name:"fill",type:"checkbox",checked:this.fill,onchange:this.changeCheckboxInput}}]},w.prototype.getBorderRow=function(){return[{className:"tch-ss-backgroundRow"},{text:this.chartData.techChart.translation.border,options:{line:this,id:"tch-settingsStyle-input-borderColor",forId:"tch-settingsStyle-input-border",labelClassName:"label-border",name:"borderColor",type:"colorpicker",value:this.borderColor,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-border",afterLabelClassName:"after-label-border",name:"border",type:"checkbox",checked:this.border,onchange:this.changeCheckboxInput}}]},v.prototype=Object.create(ut.prototype),v.prototype.constructor=v,v.prototype.draw=function(t,e,a){r.drawCircle(null,t,this.points[0].x,this.points[0].y,this.radius,this.lineWidth,e,a)},v.prototype.drawShadow=function(t,e,a,i){r.drawCircle(null,t,this.points[0].x,this.points[0].y,this.radius+5,this.lineWidth,a,a,i)},v.prototype.drawWithShadow=function(t,e,a,i){this.drawShadow(t,e,a,i),this.draw(t,e,a)},v.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},v.prototype.updateCustomPropsByObj=function(t,e){t.radius=e.radius,t.lineWidth=e.lineWidth},y.prototype=Object.create(w.prototype),y.prototype.constructor=y,y.prototype.createArrowMarkIcon=function(){this.chartData&&this.chartData.chart&&(this.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.icon.setAttribute("id",this.id),this.icon.setAttribute("viewBox",this.viewbox.x+" "+this.viewbox.y+" "+this.viewbox.width+" "+this.viewbox.height),this.icon.setAttribute("heigth",this.size+"px"),this.icon.setAttribute("width",this.size+"px"),this.icon.style.display="block",this.icon.innerHTML=this.getArrowMarkIcon(this.classType))},y.prototype.createDiv=function(){this.divText=document.createElement("div"),this.divText.classList.toggle("tch-divText",!0),this.divText.setAttribute("id",this.id),this.divText.style.width=this.size+"px"},y.prototype.applyArrowMarkPosition=function(){var t=this.getPoint();this.divText.style.left=t.x+this.centeringSvg.x+"px",this.divText.style.top=t.y-this.size/2-this.centeringSvg.y+"px"},y.prototype.applyTextParams=function(){this.textSpan.textContent=this.textArea,this.textSpan.style.fontSize=this.fontSize+"px",this.textSpan.style.fontFamily=this.fontFamily,this.textSpan.style.color=this.color,this.textSpan.style.fontWeight="on"===this.bold?"bolder":"normal",this.textSpan.style.fontStyle="on"===this.italic?"italic":"normal";var t=this.textSpan.getBoundingClientRect();this.rect.width=t.width,this.rect.height=t.height,this.applyTextPosition()},y.prototype.applyTextPosition=function(){var t=this.getPoint();this.textSpan.style.left=t.x+this.size+"px",this.textSpan.style.top=t.y-this.size/2+"px"},y.prototype.drawCircle=function(t){if("edit"===this.state||"active"===this.state){for(var e=0;e<this.circles.length;e++)this.circles[e].points[0].active||this.circles[e].draw(t,"white",this.color);for(var a=0;a<this.circles.length;a++)this.circles[a].points[0].active&&this.circles[a].draw(t,"red",this.color)}},y.prototype.getRect=function(){var t=this.getPoint();return{x1:t.x,y1:t.y-this.size/2,x2:this.rect.width<=6?t.x+this.size:t.x+this.rect.width+this.size,y2:t.y+this.size/2}},y.prototype.getPoint=function(){return{x:parseFloat(this.points[0].x),y:parseFloat(this.points[0].y)}},y.prototype.getStylePropsNames=function(){return["color","fontFamily","textArea","bold","italic","colorMark"]},y.prototype.getArrowMarkRow=function(){return[{className:"tch-ss-arrowmarkRow"},{text:this.chartData.techChart.translation["arrow-mark"],options:{line:this,id:"tch-settingsStyle-input-colorMark",name:"colorMark",type:"colorpicker",value:this.colorLabel,onchange:this.changeValueInput}}]},y.prototype.getTextStyleRow=function(){return[{className:"tch-ss-basic"},{text:this.chartData.techChart.translation["text-font"],options:{line:this,id:"tch-settingsStyle-input-color",name:"color",type:"colorpicker",value:this.color,onchange:this.changeValueInput}},{text:"",options:{line:this,className:"input-styled",id:"tch-settingsStyle-input-fontFamily",name:"fontFamily",type:"select",value:this.fontFamily,options:[{value:"Verdana",text:"Verdana"},{value:"Courier New",text:"Courier New"},{value:"Times New Roman",text:"Times New Roman"},{value:"Arial",text:"Arial"}],onchange:this.changeValueSelect}},{text:"",options:{line:this,id:"tch-settingsStyle-input-bold",name:"bold",type:"button",value:"B",buttonValue:this.bold,onclick:this.clickButton}},{text:"",options:{line:this,id:"tch-settingsStyle-input-italic",name:"italic",type:"button",value:"I",buttonValue:this.italic,onclick:this.clickButton}}]},y.prototype.getArrowMarkIcon=function(t){var e=this.colorMark.replace(/ /g,"");switch(t){case"ArrowMarkLeft":return"<path d='M401.947,159.301c0-8.583-6.949-15.742-15.497-15.889l0,0H197.515c-7.021-1.589-12.309-7.886-12.309-15.369V78.976 c0-8.675-5.397-11.163-11.993-5.535L4.948,190.735c-6.598,5.634-6.598,14.847,0,20.479l168.262,117.29 c6.599,5.632,11.996,3.146,11.996-5.528v-49.067c0-8.673,7.097-15.771,15.771-15.771l185.201-0.276 c8.676-0.004,15.771-7.101,15.771-15.771L401.947,159.301z' fill="+e+"></path>";case"ArrowMarkRight":return"<path d='M397,190.734L228.738,73.444c-6.599-5.632-11.996-3.147-11.996,5.528v49.068c0,8.672-7.099,15.77-15.77,15.77 l-104.176,0.156H15.69v0.125C7.051,144.139,0.002,151.214,0,159.857l0.002,82.789c0,8.673,7.095,15.771,15.765,15.771 l183.426-0.275h1.834c8.647,0.028,15.717,7.107,15.717,15.765v49.067c0,8.675,5.397,11.163,11.993,5.535l168.265-117.294 C403.598,205.579,403.598,196.367,397,190.734z' fill="+e+"></path>";case"ArrowMarkUp":return"<path d='M298.055,147.199c0,2.787-1.267,9.271-13.036,9.271h-54.037v178.856c0.072,0.48,0.144,1.159,0.144,1.939 c0,3.177-1.207,6.106-3.416,8.269c-2.858,2.798-7.224,4.222-12.988,4.222h-83.056c-11.493,0-14.525-8.149-14.525-12.454V160.236 H67.606c-13.841,0-15.904-6.594-15.904-10.521c0-6.293,5.996-12.577,7.197-13.775c3.176-4.305,89.036-118.195,101.529-130.718 c4.558-4.534,9.131-5.339,12.163-5.209c7.293,0.3,12.268,5.915,12.808,6.56l104.838,126.674 C291.75,134.631,298.055,141.068,298.055,147.199z' fill="+e+"></path>";case"ArrowMarkDown":return"<path d='M157.355,309.63c-6.728,0-11.351-5.221-11.863-5.82L52.686,191.656 c-2.458-2.274-8.784-9.154-6.391-15.164c1.42-3.568,5.124-5.379,11.014-5.379h47.837V12.765 c-0.234-1.496-0.424-4.906,1.947-7.985C109.54,1.61,113.723,0,119.526,0h73.536c5.211,0,8.213,1.969,9.823,3.628 c3.008,3.1,3.057,6.853,3.04,7.577v156.58h43.85c2.703,0,10.943,0,13.467,6.103c2.622,6.369-3.742,13.391-5.76,15.387 c-2.812,3.818-78.823,104.648-89.886,115.722C163.768,308.814,159.917,309.63,157.355,309.63z' fill="+e+"></path>"}},m.prototype=Object.create(y.prototype),m.prototype.constructor=m,m.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);a.circles=a.restoreCircles(e);for(var i=0;i<a.circles.length;i++)a.circles[i].points[0]=a.points[i],a.circles[i].data[0]=a.data[i];return a.updateCustomPropsByObj(a,e),a},B.prototype=Object.create(y.prototype),B.prototype.constructor=B,B.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);a.circles=a.restoreCircles(e);for(var i=0;i<a.circles.length;i++)a.circles[i].points[0]=a.points[i],a.circles[i].data[0]=a.data[i];return a.updateCustomPropsByObj(a,e),a},C.prototype=Object.create(y.prototype),C.prototype.constructor=C,C.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);a.circles=a.restoreCircles(e);for(var i=0;i<a.circles.length;i++)a.circles[i].points[0]=a.points[i],a.circles[i].data[0]=a.data[i];return a.updateCustomPropsByObj(a,e),a},D.prototype=Object.create(y.prototype),D.prototype.constructor=D,D.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);a.circles=a.restoreCircles(e);for(var i=0;i<a.circles.length;i++)a.circles[i].points[0]=a.points[i],a.circles[i].data[0]=a.data[i];return a.updateCustomPropsByObj(a,e),a},b.prototype=Object.create(f.prototype),b.prototype.constructor=b,b.convertFromDTO=function(t,e){var a=f.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},b.prototype.getRightEndPoint=function(t,e,a,i){return(i=void 0===i?pt.findLineAngleDeg(t):i)>=-45&&i<45?pt.findPointOnLineByX(t,e):i>=45&&i<135?pt.findPointOnLineByY(t,0):i<-45&&i>=-135?pt.findPointOnLineByY(t,a):pt.findPointOnLineByX(t,0)},b.prototype.getLeftEndPoint=function(t,e,a,i){return(i=void 0===i?pt.findLineAngleDeg(t):i)>=-45&&i<45?pt.findPointOnLineByX(t,0):i>=45&&i<135?pt.findPointOnLineByY(t,a):i<-45&&i>=-135?pt.findPointOnLineByY(t,0):pt.findPointOnLineByX(t,e)},x.prototype=Object.create(f.prototype),x.prototype.constructor=x,x.convertFromDTO=function(t,e){var a=f.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},F.prototype=Object.create(f.prototype),F.prototype.constructor=F,F.convertFromDTO=function(t,e){var a=f.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},S.prototype=Object.create(b.prototype),S.prototype.constructor=S,S.convertFromDTO=function(t,e){var a=Line.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},P.prototype=Object.create(b.prototype),P.prototype.constructor=P,P.convertFromDTO=function(t,e){var a=f.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},T.prototype=Object.create(x.prototype),T.prototype.constructor=T,T.convertFromDTO=function(t,e){return x.convertFromDTO(t,e)},E.prototype=Object.create(P.prototype),E.prototype.constructor=E,E.prototype.removalLength=50,E.convertFromDTO=function(t,e){var a=b.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},L.prototype=Object.create(b.prototype),L.prototype.constructor=L,L.convertFromDTO=function(t,e){var a=b.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},L.prototype.completeFigure=function(t,e){if(!(this.points.length<3)){this.heightData={v:t.v-this.data[1].v,y:this.points[1].y-e.y};var a=this.getMiddleData(this.data[0],this.data[1]),i=this.getMiddlePoint(this.points[0],this.points[1]);this.points[2].x=i.x,this.points[2].y=parseFloat(i.y)-parseFloat(this.heightData.y),this.data[2].d=a.d,this.data[2].v=parseFloat(a.v)+parseFloat(this.heightData.v),this.circles[2]&&(this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]])}},L.prototype.getMiddleData=function(t,e){var a={};return a.v=(parseFloat(t.v)+parseFloat(e.v))/2,a.d=parseInt((t.d+e.d)/2,10),a},L.prototype.getMiddlePoint=function(t,e){var a={};return a.x=(parseFloat(t.x)+parseFloat(e.x))/2,a.y=(parseFloat(t.y)+parseFloat(e.y))/2,a},L.prototype.getEndPoints=function(t,e,a,i,r){var s;return s=this.leftEnd?this.getLeftEndPoint({x1:t,y1:e,x2:a,y2:i},this.chartData.chart.w,this.chartData.chart.h,r):{x:t,y:e},{rep:this.rightEnd?this.getRightEndPoint({x1:t,y1:e,x2:a,y2:i},this.chartData.chart.w,this.chartData.chart.h,r):{x:a,y:i},lep:s}},Q.prototype=Object.create(L.prototype),Q.prototype.constructor=Q,Q.prototype.fillFigure=function(t,e,a,i,s,n,o,h,c){var l,A,d,p,u={x1:e,y1:a,x2:i,y2:s},g={x1:n,y1:o,x2:h,y2:c};e<i?(this.leftEnd?(l=pt.findPointOnLineByX(u,0),p=pt.findPointOnLineByX(g,0)):(l={x:e,y:a},p={x:n,y:o}),this.rightEnd?(A=pt.findPointOnLineByX(u,this.chartData.chart.w),d=pt.findPointOnLineByX(g,this.chartData.chart.w)):(A={x:i,y:s},d={x:h,y:c})):(this.leftEnd?(l=pt.findPointOnLineByX(u,this.chartData.chart.w),p=pt.findPointOnLineByX(g,this.chartData.chart.w)):(l={x:e,y:a},p={x:n,y:o}),this.rightEnd?(A=pt.findPointOnLineByX(u,0),d=pt.findPointOnLineByX(g,0)):(A={x:i,y:s},d={x:h,y:c}));var f=[];f.push([l.x,l.y]),f.push([p.x,p.y]),f.push([d.x,d.y]),f.push([A.x,A.y]),r.drawPolygon(null,t,f,this.fillColor,!1,!1,0,4,this.opacity)},Q.convertFromDTO=function(t,e){var a=b.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},O.prototype=Object.create(Q.prototype),O.prototype.constructor=O,O.prototype.fixFlatLineEnds=function(t,e){return this.leftEnd&&(e=e<t?0:this.chartData.chart.w),this.rightEnd&&(t=e<t?this.chartData.chart.w:0),{x2:t,x3:e}},O.convertFromDTO=function(t,e){var a=b.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},U.prototype=Object.create(b.prototype),U.prototype.constructor=U,U.prototype.checkClosed=function(t,e){var a=!1;if(this.points.length>2){var i=Math.abs(this.points[0].x-e.x),r=Math.abs(this.points[0].y-e.y);a=i<20&&r<20}return a},H.prototype=Object.create(b.prototype),H.prototype.constructor=H,k.prototype=Object.create(b.prototype),k.prototype.constructor=k,k.prototype.getPeekPoint=function(){var t,e,a,i,s,n=((t=r.getPosition(this.points[0].x,this.width))+(e=r.getPosition(this.points[1].x,this.width)))/2,o=((a=r.getPosition(this.points[0].y,this.width))+(i=r.getPosition(this.points[1].y,this.width)))/2;s=pt.findLineAngleDeg({x1:t,y1:a,x2:e,y2:i});var h=pt.degToRad(s);return{x:n+Math.sin(h)*this.height,y:o+Math.cos(h)*this.height}},k.prototype.arePointsOnCurve=function(t,e,a,i,r,s){var n=!1,o=[],h=0;(i>=.9||i<=0)&&(i=.1);for(var c=0;c<1+i;c+=i)if(c>1&&(c=1),0===c?o.push(pt.getPeekOnCurve(c,t,e,a)):(h++,o.push(pt.getPeekOnCurve(c,t,e,a)),n=pt.isPointOnLine({x1:o[h-1].x,x2:o[h].x,y1:o[h-1].y,y2:o[h].y},{x:r,y:s})),n)return!0;return!1},k.prototype.getPosition=function(){var t=r.getPosition(this.points[0].x,this.width),e=r.getPosition(this.points[0].y,this.width),a=r.getPosition(this.points[1].x,this.width),i=r.getPosition(this.points[1].y,this.width);if(this.points[2])var s=r.getPosition(this.points[2].x,this.width),n=r.getPosition(this.points[2].y,this.width);return{x0:t,y0:e,x1:a,y1:i,x2:s,y2:n}},k.prototype.isFocusedOnCircles=function(t,e){if(this.periods.length&&-1!==this.periods.indexOf(this.chartData.period))return!1;this.isObjectEdit=!1;for(var a=!1,i=0,r=0;r<this.circles.length;r++){if(i++,pt.isPointOnCircle(this.circles[r],{x:t,y:e})){this.circles[r].points[0].active=!0,this.points[r].active=!0,a=!0;break}this.circles[r].points[0].active=!1,this.points[r].active=!1}for(;i<this.circles.length;)this.circles[i].points[0].active=!1,this.points[i].active=!1,i++;return!!a||a},N.prototype=Object.create(b.prototype),N.prototype.constructor=N,I.prototype=Object.create(b.prototype),I.prototype.constructor=I,I.convertFromDTO=function(t,e){var a=b.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},I.prototype.movePoints=function(t){var e={x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y},a={x:t.x,y:t.y},i=this.getTopLeftData(e,!1,a,!0);this.height=i.h,this.points[2].x=i.x,this.points[2].y=i.y,this.data[2].d=this.chartData.chart.toXValue(this.points[2].x),this.data[2].v=this.chartData.chart.toYValue(this.points[2].y),this.circles[2].points=[this.points[2]],this.circles[2].data=[this.data[2]];var r=this.getTopRightData(e,this.height,null,!0);this.points[3].x=r.x,this.points[3].y=r.y,this.data[3].d=this.chartData.chart.toXValue(this.points[3].x),this.data[3].v=this.chartData.chart.toYValue(this.points[3].y),this.circles[3].points=[this.points[3]],this.circles[3].data=[this.data[3]];var s=this.getTopLeftData(e,this.height,null,!1);this.points[4].x=s.x,this.points[4].y=s.y,this.data[4].d=this.chartData.chart.toXValue(this.points[4].x),this.data[4].v=this.chartData.chart.toYValue(this.points[4].y),this.circles[4].points=[this.points[4]],this.circles[4].data=[this.data[4]];var n=this.getTopRightData(e,this.height,null,!1);this.points[5].x=n.x,this.points[5].y=n.y,this.data[5].d=this.chartData.chart.toXValue(this.points[5].x),this.data[5].v=this.chartData.chart.toYValue(this.points[5].y),this.circles[5].points=[this.points[5]],this.circles[5].data=[this.data[5]],this.circles[2].points[0].active=!0,this.points[2].active=!0,this.circles[3].points[0].active=!0,this.points[3].active=!0,this.circles[4].points[0].active=!0,this.points[4].active=!0,this.circles[5].points[0].active=!0,this.points[5].active=!0},I.prototype.getTopLeftData=function(t,e,a,i){var r=e||0===e?e:pt.distanceToLine(t,a),s={};s.x=parseFloat(this.points[0].x),s.y=parseFloat(this.points[0].y);var n=pt.findLineAngleDeg({x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y}),o=r*Math.cos(pt.degToRad(90-n)),h=r*Math.sin(pt.degToRad(90-n)),c={};return i?(c.x=s.x+o,c.y=s.y+h,c.h=r):(c.x=s.x-o,c.y=s.y-h,c.h=r),c},I.prototype.getTopRightData=function(t,e,a,i){var r=e||0===e?e:pt.distanceToLine(t,a),s={};s.x=parseFloat(this.points[1].x),s.y=parseFloat(this.points[1].y);var n=pt.findLineAngleDeg({x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y}),o=r*Math.cos(pt.degToRad(90-n)),h=r*Math.sin(pt.degToRad(90-n)),c={};return i?(c.x=s.x+o,c.y=s.y+h,c.h=r):(c.x=s.x-o,c.y=s.y-h,c.h=r),c},I.prototype.getPositions=function(){var t=r.getPosition(this.points[0].x,this.width),e=r.getPosition(this.points[0].y,this.width),a=r.getPosition(this.points[1].x,this.width),i=r.getPosition(this.points[1].y,this.width);if(this.points[2]&&this.points[3]&&this.points[4]&&this.points[5])var s=r.getPosition(this.points[2].x,this.width),n=r.getPosition(this.points[2].y,this.width),o=r.getPosition(this.points[3].x,this.width),h=r.getPosition(this.points[3].y,this.width),c=r.getPosition(this.points[4].x,this.width),l=r.getPosition(this.points[4].y,this.width),A=r.getPosition(this.points[5].x,this.width),d=r.getPosition(this.points[5].y,this.width);return{x0:t,x1:a,x2:s,x3:o,x4:c,x5:A,y0:e,y1:i,y2:n,y3:h,y4:l,y5:d}},M.prototype=Object.create(b.prototype),M.prototype.constructor=M,M.convertFromDTO=function(t,e){var a=b.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},M.prototype.getTopData=function(t,e,a){var i=e||0===e?e:pt.distanceToLine(t,a),r={};r.x=(parseFloat(t.x1)+parseFloat(t.x2))/2,r.y=(parseFloat(t.y1)+parseFloat(t.y2))/2;var s=pt.findLineAngleDeg({x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y}),n=i*Math.cos(pt.degToRad(90-s)),o=i*Math.sin(pt.degToRad(90-s)),h={};return h.x=r.x+n,h.y=r.y+o,h.h=i,h},M.prototype.getMiddleData=function(t,e){var a={};return a.v=(parseFloat(t.v)+parseFloat(e.v))/2,a.d=parseInt((t.d+e.d)/2,10),a},M.prototype.getMiddlePoint=function(t,e){var a={};return a.x=(parseFloat(t.x)+parseFloat(e.x))/2,a.y=(parseFloat(t.y)+parseFloat(e.y))/2,a},M.prototype.getPositions=function(){var t=r.getPosition(this.points[0].x,this.width),e=r.getPosition(this.points[0].y,this.width),a=r.getPosition(this.points[1].x,this.width),i=r.getPosition(this.points[1].y,this.width);if(this.points[2])var s=r.getPosition(this.points[2].x,this.width),n=r.getPosition(this.points[2].y,this.width);return{x0:t,y0:e,x1:a,y1:i,x2:s,y2:n}},M.prototype.getPoints=function(){var t=this.getPositions();return{p0:{x:t.x0,y:t.y0},middlePoint:{x:t.x2,y:t.y2},p2:{x:t.x1,y:t.y1},p4:{x:t.x2-(t.x1-t.x0)/2,y:t.y2-(t.y1-t.y0)/2},p5:{x:t.x2+(t.x1-t.x0)/2,y:t.y2+(t.y1-t.y0)/2}}},R.prototype.moveX=function(t){var e=this.x1-t,a=parseFloat(this.textX)-t;this.x1=e,this.x2=e,this.textX=a.toFixed(1)},R.prototype.show=function(t,e,a,i,s,n,o,h,c){var l;if(e){this.x1===this.x2?(l=r.getPosition(this.x1,1),r.drawLine(null,e,l,Math.round(this.y1),l,Math.round(this.y2),s,this.getLineTypeArray(n,1),1)):(l=r.getPosition(this.y1,1),r.drawLine(null,e,Math.round(this.x1),l,Math.round(this.x2),l,s,this.getLineTypeArray(n,1),1));var A="valueLines"===this.lineClass?0:-4,d=document.createElement("span"),p="valueLines"===this.lineClass?this.value:this.value+"\n"+this.Mmmdd;"Default"!==c&&0===this.x1&&(p=this.getValueFromTickAxis(p,c)),d.innerText=p,d.style.left=(parseFloat(this.textX)+-2).toFixed(1)+"px",d.style.top=(parseFloat(this.textY)+A).toFixed(1)+"px",d.style.color=o,d.style.fontSize=h+"px",i.appendChild(d)}},R.prototype.getLineTypeArray=function(t,e){switch(t){case"normal":return[];case"dash":return[3*e,2*e];case"points":return[e,e];default:return[]}},R.prototype.getValueFromTickAxis=function(t,e){return"Default"===e?t:parseFloat(t).toFixed(e.length-1)},K.prototype=Object.create(f.prototype),K.prototype.constructor=K,K.convertFromDTO=function(t,e){var a=f.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},j.prototype.init=function(t){this.parent=t,this.parent.chart=this,this.parent.innerHTML=this.iniStr,this.dataPanelContainer=this.parent.querySelector(".tch-oscillator-data-panel"),this.createLabel()},j.prototype.createLabel=function(){var t=this.parent.querySelector(".tch-chart-oscillator-rate-text-container");switch(this.name.toLowerCase()){case"adx":t.appendChild(this.createLabelSpan("ADX")),t.appendChild(this.createLabelSpan("DIM")),t.appendChild(this.createLabelSpan("DIP"));break;case"macd":t.appendChild(this.createLabelSpan("histogram")),t.appendChild(this.createLabelSpan("macd")),t.appendChild(this.createLabelSpan("signal"));break;case"so":case"stochrsi":t.appendChild(this.createLabelSpan("Kline")),t.appendChild(this.createLabelSpan("Dline"));break;case"williamsr":case"rsi":case"atr":case"bulls":case"bears":case"ao":case"ac":case"std":case"volume":case"obv":t.appendChild(this.createLabelSpan())}},j.prototype.createLabelSpan=function(t){var e=document.createElement("div");e.classList.add("tch-chart-oscillator-rate-text");var a=document.createElement("div");e.appendChild(a);var i=document.createElement("span");return t?i.classList.add("tch-oscillator-rate-value"+t):i.classList.add("tch-oscillator-rate-value"),i.classList.add("tch-oscillator-price"),a.appendChild(i),e},j.prototype.getValue=function(t,e){return!(t<this.top||t>this.top+this.h||!this.scaleParams)&&this.toYValue(t,e)},j.prototype.setElementsPositionAndSize=function(t,e,a,i){this.w=t||this.w,this.h=e||this.h,this.top=i||this.top,this.clipPathOffset=a||this.clipPathOffset,this.parent.style.top=this.top+"px",this.parent.style.height=this.h+"px",this.canvasDataNormal=this.parent.querySelector(".tch-chart-data-normal"),this.canvasDataNormal.setAttribute("width",this.w+this.chartData.chart.offX+"px"),this.canvasDataNormal.setAttribute("height",this.h+"px"),this.canvasDataNormalContext=this.canvasDataNormal.getContext("2d"),this.canvasDataPixelated=this.parent.querySelector(".tch-chart-data-pixelated"),this.canvasDataPixelated.setAttribute("width",this.w+this.chartData.chart.offX+"px"),this.canvasDataPixelated.setAttribute("height",this.h+"px"),this.canvasDataPixelatedContext=this.canvasDataPixelated.getContext("2d")},j.prototype.clear=function(){r.clearRect(null,this.canvasDataNormalContext,0,0,this.canvasDataNormal.width,this.canvasDataNormal.height),r.clearRect(null,this.canvasDataPixelatedContext,0,0,this.canvasDataPixelated.width,this.canvasDataPixelated.height)},j.prototype.draw=function(t,e,a){if(!t.hidden)switch(t.name.toLowerCase()){case"adx":this.drawADX(t,e,a);break;case"macd":this.drawMACD(t,e,a);break;case"williamsr":this.drawLinePT(t,e,a);break;case"rsi":case"obv":case"atr":this.drawLinePT(t,e,a);break;case"so":case"stochrsi":this.drawSO(t,e,a);break;case"bulls":case"bears":this.drawHistogram(t,e,a,this.getColorLineHistogram);break;case"ao":case"ac":this.drawHistogram(t,e,a,this.getColorAoHistogram);break;case"std":this.drawLinePT(t,e,a);break;case"volume":this.drawVolumeHistogram(t,e,a)}},j.prototype.drawVolumeHistogram=function(t,e,a){if(e&&0!==e.length&&parent&&e[0]&&this.scaleParams){for(var i=a.chartData.candleWidth,s=t.colors.line,n=[],o=Math.round(this.toYPixels(0)),h=0;h<e.length;h++)if(e[h]){var c=r.getPosition(a.toXPixels(e[h].T),i);if(c>=0&&c<=a.w-a.chartData.rightPadding){var l=Math.round(this.toYPixels(e[h].P)),A=t.colors["".concat(e[h].direction,"-color")];n.push([[c,o],[c,l],e[h].P,A])}}for(var d=this.canvasDataPixelatedContext,p=0;p<n.length;p++)r.drawLine(null,d,n[p][0][0],n[p][0][1],n[p][1][0],n[p][1][1],n[p][3],[],i,1);var u=n[0],g=r.getPosition(u[0][1],1);r.drawLine(null,d,0,g,this.w,g,s,[1,1],1,null)}},j.prototype.drawPriceLineCurrentOscillator=function(t,e){if(!t.hidden&&e[0]&&this.scaleParams)switch(t.name.toLowerCase()){case"adx":this.drawPriceLineOscillator(e[0].ADX,1,t.colors.ADX),this.drawPriceLineOscillator(e[0].DIM,1,t.colors.DIM),this.drawPriceLineOscillator(e[0].DIP,1,t.colors.DIP),this.drawPriceValueOscillator(e[0].ADX,t.colors.ADX,"ADX",t.oscillatorPrecission),this.drawPriceValueOscillator(e[0].DIM,t.colors.DIM,"DIM",t.oscillatorPrecission),this.drawPriceValueOscillator(e[0].DIP,t.colors.DIP,"DIP",t.oscillatorPrecission);break;case"macd":this.drawPriceLineOscillator(e[0].histogram,1,t.colors.histogram),this.drawPriceLineOscillator(e[0].macdLine,1,t.colors.macd),this.drawPriceLineOscillator(e[0].signalLine,1,t.colors.signal),this.drawPriceValueOscillator(e[0].histogram,t.colors.histogram,"histogram",t.oscillatorPrecission),this.drawPriceValueOscillator(e[0].macdLine,t.colors.macd,"macd",t.oscillatorPrecission),this.drawPriceValueOscillator(e[0].signalLine,t.colors.signal,"signal",t.oscillatorPrecission);break;case"so":case"stochrsi":this.drawPriceLineOscillator(e[0].D,1,t.colors.DLine),this.drawPriceValueOscillator(e[0].D,t.colors.DLine,"Dline",t.oscillatorPrecission),this.drawPriceLineOscillator(e[0].K,1,t.colors.KLine),this.drawPriceValueOscillator(e[0].K,t.colors.KLine,"Kline",t.oscillatorPrecission);break;case"williamsr":case"rsi":case"atr":case"bulls":case"bears":case"std":case"obv":this.drawPriceLineOscillator(e[0].P,t.lineWidth.line,t.colors.line),this.drawPriceValueOscillator(e[0].P,t.colors.line,"",t.oscillatorPrecission);break;case"volume":var a=t.colors["".concat(e[0].direction,"-color")];this.drawPriceLineOscillator(e[0].P,1,a,!1);var i=r.changeRgbaAlpha(a,1);this.drawPriceValueOscillator(e[0].P,i,"",t.oscillatorPrecission);break;case"ao":case"ac":this.drawPriceLineOscillator(e[0].P,1,"#0000FF"),this.drawPriceValueOscillator(e[0].P,"#0000FF","",t.oscillatorPrecission)}},j.prototype.drawPriceLineOscillator=function(t,e,a){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=this;if(!this.chartData.data||0!==this.chartData.data.length){var n=s.toYPixels(t);if(!(n>this.h)){var o=this.canvasDataPixelatedContext,h=r.getPosition(n,e),c=r.changeRgbaAlpha(a,this.chartData.options.Chart.priceLineOpacity),l=i?[e,e]:[];r.drawLine(null,o,0,h,this.w,h,c,l,e,null)}}},j.prototype.drawPriceValueOscillator=function(t,e,a,i){var r,s=this.chartData.options.Chart.scalesFontSize,n=parseFloat((""+t).replace(",","."));n=n.toFixed(i),(r=a?this.parent.querySelector(".tch-oscillator-rate-value"+a):this.parent.querySelector(".tch-oscillator-rate-value")).style.fontSize=s+"px";var o=this.toYPixels(t);o>this.h||o<=0?r.parentNode.style.display="none":(r.parentNode.style.display="block",r.innerText=n,this.priceTextHeight||(this.priceTextHeight=r.parentNode.getBoundingClientRect().height),this.priceTextColor||(this.priceTextColor=this.chartData.chart.getPriceTextColor(e)),r.parentNode.style.left=this.w+4+"px",r.parentNode.style.top=o-this.priceTextHeight/2+"px",r.parentNode.style.backgroundColor=e,r.parentNode.style.color=this.priceTextColor)},j.prototype.drawLinePT=function(t,e,a){if(e[0]&&this.scaleParams){for(var i=this.canvasDataNormalContext,s=[],n=e.length-1;n>=0;n--){var o=a.toXPixels(e[n].T).toFixed(1);if(o>a.w-a.chartData.rightPadding)break;s.push([o,this.toYPixels(e[n].P).toFixed(1)])}r.drawPolygon(null,i,s,null,t.colors.line,!1,t.lineWidth.line,s.length)}},j.prototype.getColorLineHistogram=function(t){return t.colors.line},j.prototype.getColorAoHistogram=function(t,e,a){return a[e][2]>(a[e+1]?a[e+1][2]:a[e][2])?t.colors.lineUp:t.colors.lineDown},j.prototype.drawHistogram=function(t,e,a,i){if(e&&0!==e.length&&parent&&e[0]&&this.scaleParams){for(var s=[],n=Math.round(this.toYPixels(0)),o=0;o<e.length;o++)if(e[o]){var h=r.getPosition(a.toXPixels(e[o].T),t.lineWidth.line);if(h>=0&&h<=a.w-a.chartData.rightPadding){var c=Math.round(this.toYPixels(e[o].P));s.push([[h,n],[h,c],e[o].P])}}for(var l,A=this.canvasDataPixelatedContext,d=0;d<s.length;d++)l=i(t,d,s),r.drawLine(null,A,s[d][0][0],s[d][0][1],s[d][1][0],s[d][1][1],l,[],t.lineWidth.line,1);var p=s[0],u=r.getPosition(p[0][1],1);r.drawLine(null,A,0,u,this.w,u,t.colors.line,[1,1],1,null)}},j.prototype.drawSO=function(t,e,a){if(e&&0!==e.length&&e[0]&&this.scaleParams){for(var i=this.canvasDataNormalContext,s={D:[],K:[]},n=0;n<e.length;n++)if(e[0]){var o=a.toXPixels(e[n].T);o>=0&&o<=a.w-a.chartData.rightPadding&&(s.D.push([o.toFixed(1),this.toYPixels(e[n].D).toFixed(1)]),s.K.push([o.toFixed(1),this.toYPixels(e[n].K).toFixed(1)]))}r.drawPolygon(null,i,s.D,null,t.colors.DLine,!1,t.lineWidth.DLine,s.D.length),r.drawPolygon(null,i,s.K,null,t.colors.KLine,!1,t.lineWidth.KLine,s.K.length)}},j.prototype.drawADX=function(t,e,a){if(e&&0!==e.length&&e[0]&&this.scaleParams){for(var i={ADX:[],DIM:[],DIP:[]},s=0;s<e.length;s++)if(e[s]){var n=a.toXPixels(e[s].T);n>=0&&n<=a.w-a.chartData.rightPadding&&(i.ADX.push([n.toFixed(1),this.toYPixels(e[s].ADX).toFixed(1)]),i.DIM.push([n.toFixed(1),this.toYPixels(e[s].DIM).toFixed(1)]),i.DIP.push([n.toFixed(1),this.toYPixels(e[s].DIP).toFixed(1)]))}var o=this.canvasDataNormalContext;r.drawPolygon(null,o,i.ADX,null,t.colors.ADX,!1,t.lineWidth.ADX,i.ADX.length),r.drawPolygon(null,o,i.DIM,null,t.colors.DIM,!1,t.lineWidth.DIM,i.DIM.length),r.drawPolygon(null,o,i.DIP,null,t.colors.DIP,!1,t.lineWidth.DIP,i.DIP.length)}},j.prototype.drawMACD=function(t,e,a){if(e&&0!==e.length&&parent&&e[0]){for(var i={L:[],S:[]},s=[],n=Math.round(this.toYPixels(0)),o=0;o<e.length;o++)if(e[o]){var h=r.getPosition(a.toXPixels(e[o].T),t.lineWidth.histogram);if(h>=0&&h<=a.w-a.chartData.rightPadding){var c=Math.round(this.toYPixels(e[o].histogram));s.push([[h,n],[h,c]]),i.L.push([h.toFixed(1),this.toYPixels(e[o].macdLine).toFixed(1)]),i.S.push([h.toFixed(1),this.toYPixels(e[o].signalLine).toFixed(1)])}}var l=this.canvasDataNormalContext,A=this.canvasDataPixelatedContext;r.drawPolygon(null,l,i.L,null,t.colors.macd,!1,t.lineWidth.macd,i.L.length),r.drawPolygon(null,l,i.S,null,t.colors.signal,!1,t.lineWidth.signal,i.S.length);for(var d=0;d<s.length;d++)r.drawLine(null,A,s[d][0][0],s[d][0][1],s[d][1][0],s[d][1][1],t.colors.histogram,[],t.lineWidth.histogram,1);var p=s[0],u=r.getPosition(p[0][1],1);r.drawLine(null,A,0,u,this.w,u,t.colors.histogram,[1,1],1,null)}},j.prototype.toYValue=function(t,e){if(isNaN(t))return!1;t-=this.getOffsetY();var a=this.h;return(parseFloat(this.scaleParams.minB)+this.scaleParams.deltaY*(a-t)).toFixed(e)},j.prototype.toYPixels=function(t){return!isNaN(t)&&this.h-(t-this.scaleParams.minB)/this.scaleParams.deltaY},j.prototype.getValueAxis=function(t,e){this.scaleParams&&(e=this.getCurrPrecission(),this.valueAxis=ne.prototype.getValueAxis(this.scaleParams.minB,this.scaleParams.maxB,4,this.w,this.h,t,e,this.top),this.valueAxis.shift())},j.prototype.getOffsetY=function(){return this.top},j.prototype.getScaleParams=function(t,e){if(t&&0!==t.length){var a=this.getMaxValue(t,e),i=this.getMinValue(t,e),r=ne.prototype.getDeltaYforBoundsCalculation(i,a,this.h,this.marginTop,this.marginBottom),s=parseFloat(ne.prototype.getMaxB(r,a,this.marginTop,e)),n=parseFloat(ne.prototype.getMinB(r,i,this.marginBottom,e));return n===s&&(n-=1/Math.pow(10,e),s+=1/Math.pow(10,e)),{minB:n,maxB:s,deltaY:parseInt(Math.pow(10,12)*(s-n)/this.h,10)/Math.pow(10,12)}}},j.prototype.getMaxValue=function(t){if(t&&0!==t.length){for(var e=Number.MIN_VALUE,a=0;a<t.length;a++)for(var i in t[a])if(t[a].hasOwnProperty(i)&&"T"!==i&&!isNaN(t[a][i])){var r=t[a][i];e<r&&(e=r)}return e}},j.prototype.getMinValue=function(t){if(t&&0!==t.length){for(var e=Number.MAX_VALUE,a=0;a<t.length;a++)for(var i in t[a])if(t[a].hasOwnProperty(i)&&"T"!==i&&!isNaN(t[a][i])){var r=t[a][i];e>r&&(e=r)}return e}},j.prototype.redrawOnResize=function(){var t=this.chartData.getIndicatorIndex(this.chartData.indicators,this),e=this.chartData.indicators[t],a=A.getValuesFromDictionary(e.data);e.createShowData(),this.scaleParams=this.getScaleParams(e.showData,parseInt(this.chartData.precission,10)),this.setElementsPositionAndSize(this.w,this.h,this.clipPathOffset),this.clear(),this.draw(e,a,this.chartData.chart),this.chartData.chart.redrawGrid()},j.prototype.getCurrPrecission=function(){var t=this.chartData.indicators;for(var e in t)if(t.hasOwnProperty(e)&&t[e].id===this.id)return t[e].oscillatorPrecission},j.prototype.drawPriceValueOscillatorCanvas=function(t,e,a,i,s){var n=this.chartData.options.Chart.scalesFontSize,o=this.chartData.options.Chart.labelArrowWidth,h=+this.chartData.options.Chart.scalesFontSize+2*this.chartData.options.Chart.labelPaddingTop,c=this.chartData.options.Chart.labelPaddingLeft,l=r.getPosition(this.toYPixels(e),h),A="".concat(n,"px ").concat(this.chartData.options.Chart.labelFont),d=parseFloat((""+e).replace(",",".")).toFixed(s),p=t.canvas.width-this.w;if(!(l>this.h||l<=0)){this.priceTextColor||(this.priceTextColor=this.chartData.chart.getPriceTextColor(a));var u=ne.getLabelPoints(t.canvas.width,l,o,p,h);r.drawPolygon(null,t,u,a,null,!0);var g="ar"===this.chartData.chart.techChart.configuration.lang?"rtl":"ltr";r.drawText(null,t,this.w+c,l+n/3,d,A,this.priceTextColor,g)}},V.prototype=Object.create(z.prototype),V.prototype.constructor=V,_.prototype=Object.create(z.prototype),_.prototype.constructor=_,z.currentId=0,z.prototype.isFocused=function(t,e){var a=this.getPositionLeft(),i=this.getPositionTop(),r=2*this.radius,s={x1:a,x2:a+r,y1:i,y2:i+r};return pt.isPointInRect(s,{x:t,y:e},5)},z.prototype.moveBubbleX=function(t){this.point.x-=t,this.divBubble.style.left=this.getPositionLeft()+"px",this.chartData.options.Chart.autoScale&&(this.updatePixelsY(),this.divBubble.style.top=this.getPositionTop()+"px")},z.prototype.moveBubbleY=function(t){this.point.y-=t,this.divBubble.style.top=this.getPositionTop()+"px"},z.prototype.show=function(t){this.parent=t,this.divBubble=document.createElement("div"),this.divBubble.classList.toggle("tch-bubble-id-"+this.id,!0),this.divBubble.classList.toggle("tch-bubbles",!0);var e=document.createElement("span");e.textContent=this.text,this.setParams(),this.resize(this.candleWidth),this.divBubble.appendChild(e),this.parent.appendChild(this.divBubble)},z.prototype.remove=function(){return this.removeTooltip(),this.parent.removeChild(this.divBubble),this},z.prototype.updatePixels=function(){this.updatePixelsY(),this.updatePixelsX()},z.prototype.updatePixelsY=function(){this.point.y=this.chartData.chart.toYPixels(this.value)},z.prototype.updatePixelsX=function(){this.point.x=this.chartData.chart.toXPixels(this.date)},z.getBubbles=function(t,e,a,i,r){if(!t.chart||!t.chart.showData||0===t.chart.showData.length)return[];i=i||t.chart.showData[t.chart.showData.length-1].date,r=r||t.chart.showData[0].date;var s=z.selectItems(i,r,e,a),n=z.convertToBubbles(s,t,a);return this.combineBubbles(n)},z.prototype.fixPosition=function(){var t=this.chartData.chart,e=t.binarySearhElementWithField(t.showData,parseFloat(this.point.x),"x"),a=t.showData[e]?t.showData[e]:t.showData[0];this.point.x=a.x,this.point.y=t.toYPixels(a.high),this.value=a.high,this.date=a.date},z.selectItems=function(t,e,a,i){for(var r=[],s=0;s<a.length;s++){var n=z["getDate"+i](a[s]);if(n>t&&n<e)r.push(a[s]);else if(n<t)break}return r},z.getDateNewsBubble=function(t){return t.PublishDate},z.getDateEventsBubble=function(t){var e=t.DateTime.Year,a=t.DateTime.Month-1,i=t.DateTime.Day,r=t.DateTime.Hour,s=t.DateTime.Minute,n=t.DateTime.Second;return Date.UTC(e,a,i,r,s,n)/1e3},z.convertToBubbles=function(t,e,a){if(0===t.length)return[];for(var i=e.chart.showData,r=[],s=0,n="getDate"+a,o=0;o<i.length;o++){for(var h=[];t[s]&&z[n](t[s])>=i[o].date;)h.push(t[s++]);if(h.length){var c=z.createBubble(i[o],e,h,a);r.push(c)}}return r},z.createBubble=function(t,e,a,i){var r={date:t.date,value:t.high,items:a,point:{x:t.x,y:e.chart.toYPixels(t.high)},id:z.getId()};switch(i){case"NewsBubble":return new _(e,r);case"EventsBubble":return new V(e,r);default:return new z(e,r)}},z.combineBubbles=function(t){if(t&&0===t.length)return[];for(var e=[],a=0;a<t.length;a++)e[e.length-1]&&z.isTouch(e[e.length-1],t[a])?e[e.length-1].items=e[e.length-1].items.concat(t[a].items):e.push(t[a]);for(var i=0;i<e.length;i++)e[i].fixPosition();return e},z.sortItemsByDate=function(t){return t.sort((function(t,e){return e.date-t.date}))},z.isTouch=function(t,e){return Math.abs(parseFloat(t.point.x)-parseFloat(e.point.x))<=t.radius+e.radius},z.deleteRedundantBubblesLeftRight=function(t,e,a){z.deleteRedundantBubblesFromRight(t,a),z.deleteRedundantBubblesFromLeft(t,e)},z.deleteRedundantBubblesFromRight=function(t,e){for(;t.length&&parseInt(t[0].point.x,10)>e;)t[0].remove(),t.splice(0,1)},z.deleteRedundantBubblesFromLeft=function(t,e){for(;t.length&&parseInt(t[t.length-1].point.x,10)<e;)t[t.length-1].remove(),t.splice(t.length-1,1)},z.prototype.resize=function(t){this.cY=3*t,this.radius=this.getRadius(t),this.divBubble.style.left=this.getPositionLeft()+"px",this.divBubble.style.top=this.getPositionTop()+"px";var e=2*this.radius;this.divBubble.style.width=e+"px",this.divBubble.style.height=e+"px",this.divBubble.style.fontSize=1.8*this.radius+"px"},z.prototype.hideTooltip=function(){this.tooltip.mouseLeaveParentDiv()},z.prototype.removeTooltip=function(){this.tooltip&&this.tooltip.remove()},z.prototype.getPositionLeft=function(){return parseFloat(this.point.x)-this.radius},z.prototype.getPositionTop=function(){return parseFloat(this.point.y)-1.5*this.radius-this.cY},z.prototype.setParams=function(){this.divBubble.style.left=this.getPositionLeft()+"px",this.divBubble.style.top=this.getPositionTop()+"px";var t=2*this.radius;this.divBubble.style.width=t+"px",this.divBubble.style.height=t+"px",this.divBubble.style.fontSize=1.8*this.radius+"px"},z.prototype.getRadius=function(t){var e=.6*t;return e<9?9:e},z.getId=function(){return z.currentId++},X.prototype.init=function(){this.point=this.getPoint(),this.data=this.processData(this.bubble.items),this.isFocused=!0,this.isVisible=!1,this.parentDiv=this.getParentDiv(),this.parentDiv.innerHTML="",this.draw()},X.prototype.getParentDiv=function(){return null},X.prototype.draw=function(){this.createMarkup()},X.prototype.createMarkup=function(){this.createParentDiv(),this.createHeaderDiv(),this.createDateDiv(),1!==this.data.length&&(this.createSpansDiv(),this.createSpans(),this.setSpansClasses()),this.createBodyDiv(),this.parentDiv.classList.toggle("tch-hidden",!1),this.isVisible=!0,this.adjustParentDivPosition()},X.prototype.createParentDiv=function(){this.parentDiv.addEventListener("mouseenter",this.mouseEnterParentDiv.bind(this)),this.parentDiv.addEventListener("mouseleave",this.mouseLeaveParentDiv.bind(this)),this.parentDiv.onmousedown=function(t){t.preventDefault(),t.stopPropagation()},this.parentDiv.onmouseup=function(t){t.preventDefault(),t.stopPropagation()}},X.prototype.mouseEnterParentDiv=function(){this.isFocused=!0},X.prototype.updateInfo=function(){},X.prototype.mouseLeaveParentDiv=function(){this.isFocused=!1;var t=this;this.leaveTimeout=setTimeout((function(){t.leaveParentDiv()}),400)},X.prototype.leaveParentDiv=function(){!this.isFocused&&this.isVisible&&(this.parentDiv.classList.toggle("tch-hidden",!0),this.isVisible=!1,this.parentDiv.innerHTML="")},X.prototype.createHeaderDiv=function(){this.headerDiv=document.createElement("div"),this.parentDiv.appendChild(this.headerDiv),this.headerDiv.classList.toggle("tch-tooltip-header",!0)},X.prototype.createDateDiv=function(){this.dateDiv=document.createElement("div"),this.headerDiv.appendChild(this.dateDiv),this.dateDiv.classList.toggle("tch-tooltip-date",!0),this.dateDiv.innerHTML=this.data[this.bubble.currentPageIndex].date},X.prototype.createSpansDiv=function(){this.spansDiv=document.createElement("div"),this.headerDiv.appendChild(this.spansDiv),this.spansDiv.classList.toggle("tch-tooltip-spans",!0)},X.prototype.createSpans=function(){this.leftArrowSpan=document.createElement("span"),this.spansDiv.appendChild(this.leftArrowSpan),this.leftArrowSpan.addEventListener("mousedown",this.clickLeftArrow.bind(this)),this.leftArrowSpan.innerHTML=" ",this.pagesSpan=document.createElement("span"),this.spansDiv.appendChild(this.pagesSpan),this.pagesSpan.classList.toggle("tch-tooltip-pages",!0),this.pagesSpan.innerHTML=this.bubble.currentPage+"/"+this.data.length,this.rightArrowSpan=document.createElement("span"),this.spansDiv.appendChild(this.rightArrowSpan),this.rightArrowSpan.addEventListener("mousedown",this.clickRightArrow.bind(this)),this.rightArrowSpan.innerHTML=" "},X.prototype.setSpansClasses=function(){1===this.bubble.currentPage?(this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow",!0),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!0)):this.bubble.currentPage===this.data.length?(this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow",!0),this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!0)):(this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!0),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!0))},X.prototype.updateSpansClasses=function(){1===this.bubble.currentPage?(this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!1),this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow",!0),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!0)):this.bubble.currentPage===this.data.length?(this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!1),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow",!0),this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow",!1),this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!0)):(this.leftArrowSpan.classList.toggle("tch-tooltip-left-arrow-active",!0),this.rightArrowSpan.classList.toggle("tch-tooltip-right-arrow-active",!0))},X.prototype.clickLeftArrow=function(){this.leftArrowSpan.classList.contains("tch-tooltip-left-arrow-active")&&(--this.bubble.currentPage,--this.bubble.currentPageIndex,this.update())},X.prototype.clickRightArrow=function(){this.rightArrowSpan.classList.contains("tch-tooltip-right-arrow-active")&&(++this.bubble.currentPage,++this.bubble.currentPageIndex,this.updateSpansClasses(),this.update())},X.prototype.remove=function(){this.isFocused=!1,this.parentDiv.classList.toggle("tch-hidden",!0),this.isVisible=!1},X.prototype.update=function(){1!==this.data.length&&this.updateSpansClasses(),this.dateDiv.innerHTML=this.data[this.bubble.currentPageIndex].date,1!==this.data.length&&(this.pagesSpan.innerHTML=this.bubble.currentPage+"/"+this.data.length),this.updateInfo()},X.prototype.refresh=function(){this.isFocused=!0,this.parentDiv.classList.toggle("tch-hidden",!1),this.isVisible=!0,this.point=this.getPoint(),this.data=this.processData(this.bubble.items),this.reAppend(),this.update(),this.adjustParentDivPosition()},X.prototype.getPoint=function(){return{x:this.bubble.getPositionLeft(),y:this.bubble.getPositionTop()}},X.prototype.adjustParentDivPosition=function(){var t=this.parentDiv.getBoundingClientRect();this.isAdjustRight(t)?this.isAdjustLeft(t)?this.parentDiv.style.left=this.point.x- -1*(this.chartData.chart.w-this.point.x-t.width-2*this.bubble.radius)+"px":this.parentDiv.style.left=this.point.x-t.width+"px":this.parentDiv.style.left=this.point.x+2*this.bubble.radius+"px",this.isAdjustBottom(t)?(this.parentDiv.style.top=this.point.y-t.height+"px",this.isAdjustTop(t)&&(this.parentDiv.style.top="15px")):this.isAdjustTop(t)?(this.parentDiv.style.top="15px",this.isAdjustBottom(t)&&(this.parentDiv.style.top=this.point.y-t.height+"px")):this.parentDiv.style.top=this.point.y+this.bubble.radius/2+"px"},X.prototype.isAdjustRight=function(t){return this.point.x+t.width+2*this.bubble.radius>this.chartData.chart.w-this.chartData.rightPadding},X.prototype.isAdjustBottom=function(t){return this.point.y+t.height+this.bubble.radius/2>this.chartData.chart.h},X.prototype.isAdjustLeft=function(t){return this.point.x-t.width-2*this.bubble.radius<=0},X.prototype.isAdjustTop=function(t){return this.point.y-t.height-this.bubble.radius/2<=0},W.processEventItem=function(t){var e={previous:t.Revised||t.Previous,actual:t.Actual,consensus:t.Consensus,revised:t.Revised?t.Previous:"",better:t.Better,worst:t.Worst,volatility:t.Volatility,tentative:t.Tentative};return e.previous&&(e.previous=e.previous.toFixed(t.Precision).replace(".",","),e.previous=t.PotPrevious?t.Unit+e.previous+t.PotPrevious:e.previous+t.Unit),e.actual&&(e.actual=e.actual.toFixed(t.Precision).replace(".",","),e.actual=t.PotActual?t.Unit+e.actual+t.PotActual:e.actual+t.Unit),e.consensus&&(e.consensus=e.consensus.toFixed(t.Precision).replace(".",","),e.consensus=t.PotConsensus?t.Unit+e.consensus+t.PotConsensus:e.consensus+t.Unit),e.revised&&(e.revised=e.revised.toFixed(t.Precision).replace(".",","),e.revised=t.PotConsensus?t.Unit+e.revised+t.PotConsensus:e.revised+t.Unit),e},W.prototype=Object.create(X.prototype),W.prototype.constructor=W,W.prototype.getLinkHref=function(t){if(!t.HTMLDescription)return null;var e=t.HTMLDescription.match('href="(.*?)"');return e&&e[1]?e[1]:null},Y.prototype=Object.create(X.prototype),Y.prototype.constructor=Y,q.getReadableTime=function(t){if(!t&&0!==t||"number"!==typeof t||t<0)return"";var e=new Date(t),a=e.getUTCDate(),i=e.getUTCHours(),r=e.getMinutes(),s=e.getSeconds(),n=i<10?"0".concat(i):i,o=r<10?"0".concat(r):r,h=s<10?"0".concat(s):s;return a>1?"".concat(a,"d"," ").concat(n,"h"):i>0?"".concat(n,":").concat(o,":").concat(h):"".concat(o,":").concat(h)},Z.prototype.draw=function(t){t&&(this.drawSupportLine(t),this.drawResistanceLine(t),this.drawPatterEndLine(t),this.drawPrediction(t),this.drawArrow(t))},Z.prototype.drawSupportLine=function(t){if(t){var e=this.supportLine,a=e.start,i=e.end,s=e.color,n=e.strokeWidth,o=r.getPosition(a.x,n);r.drawLine(null,t,o,a.y,i.x,i.y,s,[],n)}},Z.prototype.drawResistanceLine=function(t){if(t){var e=this.resistanceLine,a=e.start,i=e.end,s=e.color,n=e.strokeWidth,o=r.getPosition(a.x,n);r.drawLine(null,t,o,a.y,i.x,i.y,s,[],n)}},Z.prototype.drawPatterEndLine=function(t){if(t){var e=this.patternEndLine,a=e.x,i=e.strokeWidth,s=e.color,n=r.getPosition(a,i);r.drawLine(null,t,n,0,n,t.canvas.clientHeight,s,[6,4],i,1)}},Z.prototype.drawPrediction=function(t){if(t)if(this.predictionArea.isCreated){var e=this.predictionArea,a=e.x,i=e.y,s=e.width,n=e.height,o=e.color,h=e.borderColor,c=e.strokeWidth;r.drawRectangle(null,t,a,i,s,n,o,h,c,[])}else{var l=this.supportLine.end,A=this.resistanceLine.end,d=this.predictionLines,p=d.color,u=d.strokeWidth,g=d.support,f=d.resistance;r.drawLine(null,t,l.x,l.y,g.end.x,g.end.y,p,[4,2],u),r.drawLine(null,t,A.x,A.y,f.end.x,f.end.y,p,[4,2],u)}},Z.prototype.drawArrow=function(t){if(t&&this.directionArrow.end){var e=this.data.direction,a=this.directionArrow,i=a.start,s=a.end,n=a.supportColor,o=a.resistanceColor,h=a.strokeColor,c=a.strokeWidth,l=1===e?o:n;r.drawArrow(null,t,i.x,i.y,s.x,s.y,l,h,[],c,1,!0)}},Z.prototype.calcPoints=function(){var t=this.convertData();this.isNeedArrows=t.isNeedArrows,this.patternEndLine.x=t.patternEndTime,this.supportLine.end=this.getMissingPoint(t.pointAx,t.pointAy,t.pointBx,t.pointBy,t.patternEndTime),t.pointAx>t.pointCx?this.supportLine.start=this.getMissingPoint(t.pointAx,t.pointAy,t.pointBx,t.pointBy,t.pointCx):(this.supportLine.start.x=t.pointAx,this.supportLine.start.y=t.pointAy),this.resistanceLine.end=this.getMissingPoint(t.pointCx,t.pointCy,t.pointDx,t.pointDy,t.patternEndTime),t.pointAx<t.pointCx?this.resistanceLine.start=this.getMissingPoint(t.pointCx,t.pointCy,t.pointDx,t.pointDy,t.pointAx):(this.resistanceLine.start.x=t.pointCx,this.resistanceLine.start.y=t.pointCy),this.calculatePredictions(t),this.calculateArrow(t),this.isInitialized=!0},Z.prototype.calculatePredictions=function(t){if(this.data.predictionPriceFrom)this.predictionArea.x=t.predictionTimeFrom+3,this.predictionArea.y=t.predictionPriceTo,this.predictionArea.width=t.predictionTimeTo-t.predictionTimeFrom,this.predictionArea.height=Math.abs(t.predictionPriceTo-t.predictionPriceFrom),this.predictionArea.isCreated=!0;else{var e=this.getIntersectionPoint(t.pointAx,t.pointAy,t.pointBx,t.pointBy,t.pointCx,t.pointCy,t.pointDx,t.pointDy);this.calculateResistancePredictions(t,e),this.calculateSupportPredictions(t,e)}},Z.prototype.getMissingPoint=function(t,e,a,i,r){if(isNaN(t)||isNaN(e)||isNaN(a)||isNaN(i)||isNaN(r))return!1;var s,n,o=Math.abs(t-a),h=Math.abs(e-i);return n=r>t?a>t?a:t:a>t?t:a,s=Math.abs(r-n)*h/o,{x:r,y:n===t?e>i?e+s:e-s:e>i?i-s:i+s}},Z.prototype.getIntersectionPoint=function(t,e,a,i,r,s,n,o){var h=Math.round(i-e),c=Math.round(t-a),l=Math.round(e*a-t*i),A=Math.round(o-s),d=Math.round(r-n),p=Math.round(s*n-r*o);if(h*d!==A*c)return{x:Math.round(-(l*d-p*c)/(h*d-A*c)),y:Math.round(-(h*p-A*l)/(h*d-A*c))}},Z.prototype.calculateResistancePredictions=function(t,e){var a=Math.round(this.resistanceLine.end.x+(this.resistanceLine.end.x-this.resistanceLine.start.x)/2),i=0;e&&a>=e.x&&e.x>t.patternEndTime?(a=Math.round(e.x-.2*(e.x-this.resistanceLine.end.x)),i=Math.round((a-this.resistanceLine.start.x)*(this.resistanceLine.end.y-this.resistanceLine.start.y)/(this.resistanceLine.end.x-this.resistanceLine.start.x)+this.resistanceLine.start.y)):i=Math.round((a-this.resistanceLine.start.x)*(this.resistanceLine.end.y-this.resistanceLine.start.y)/(this.resistanceLine.end.x-this.resistanceLine.start.x)+this.resistanceLine.start.y),this.predictionLines.resistance={end:{x:a,y:i}}},Z.prototype.calculateSupportPredictions=function(t,e){var a=Math.round(this.supportLine.end.x+(this.supportLine.end.x-this.supportLine.start.x)/2),i=0;e&&a>=e.x&&e.x>t.patternEndTime?(a=Math.round(e.x-.2*(e.x-this.supportLine.end.x)),i=Math.round((a-this.supportLine.start.x)*(this.supportLine.end.y-this.supportLine.start.y)/(this.supportLine.end.x-this.supportLine.start.x)+this.supportLine.start.y)):i=Math.round((a-this.supportLine.start.x)*(this.supportLine.end.y-this.supportLine.start.y)/(this.supportLine.end.x-this.supportLine.start.x)+this.supportLine.start.y),this.predictionLines.support={end:{x:a,y:i}}},Z.prototype.calculateArrow=function(t){this.directionArrow.end={x:t.currentTime+20},this.directionArrow.start={y:t.endCandleClosePrice},t.predictionTimeFrom&&t.currentTime+20>t.predictionTimeTo&&(this.directionArrow.end.x=t.predictionTimeTo-5),1===this.data.direction?this.data.predictionPriceFrom?(this.directionArrow.start.x=this.resistanceLine.end.x,this.directionArrow.end.y=t.predictionPriceFrom):(this.directionArrow.start.x=this.supportLine.end.x,this.directionArrow.end.y=Math.round((this.directionArrow.end.x-this.resistanceLine.start.x)*(this.resistanceLine.end.y-this.resistanceLine.start.y)/(this.resistanceLine.end.x-this.resistanceLine.start.x)+this.resistanceLine.start.y)):this.data.predictionPriceTo?(this.directionArrow.start.x=this.supportLine.end.x,this.directionArrow.end.y=t.predictionPriceTo):(this.directionArrow.start.x=this.resistanceLine.end.x,this.directionArrow.end.y=(this.directionArrow.end.x-this.supportLine.start.x)*(this.supportLine.end.y-this.supportLine.start.y)/(this.supportLine.end.x-this.supportLine.start.x)+this.supportLine.start.y)},Z.prototype.getExtremePoints=function(t,e){var a=[];if(e<this.data.resistancex0||e<this.data.supportx0)return!1;if(this.data.predictionPriceFrom){var i=.1*(this.data.predictionPriceTo-this.data.predictionPriceFrom);this.isPointInShowData(this.data.predictionTimeFrom,t,e)&&a.push(this.data.predictionPriceFrom-i),this.isPointInShowData(this.data.predictionTimeFrom,t,e)&&a.push(this.data.predictionPriceTo+i)}else{var r=this.getPointOnLine("endLine",this.data.resistancex0,this.data.resistancey0,this.data.resistancex1,this.data.resistancey1);a.push(r.y);var s=this.getPointOnLine("endLine",this.data.supportx0,this.data.supporty0,this.data.supportx1,this.data.supporty1);a.push(s.y)}var n=this.getPointOnLine("startLine",this.data.resistancex0,this.data.resistancey0,this.data.resistancex1,this.data.resistancey1);this.isPointInShowData(n.x,t,e)&&a.push(n.y);var o=this.getPointOnLine("startLine",this.data.supportx0,this.data.supporty0,this.data.supportx1,this.data.supporty1);this.isPointInShowData(o.x,t,e)&&a.push(o.y);var h=this.getPointOnLine("patternEndTime",this.data.resistancex0,this.data.resistancey0,this.data.resistancex1,this.data.resistancey1,this.data.patternEndTime);this.isPointInShowData(h.x,t,e)&&a.push(h.y);var c=this.getPointOnLine("patternEndTime",this.data.supportx0,this.data.supporty0,this.data.supportx1,this.data.supporty1,this.data.patternEndTime);return this.isPointInShowData(c.x,t,e)&&a.push(c.y),this.isPointInShowData(this.data.supportx0,t,e)&&a.push(this.data.supporty0),this.isPointInShowData(this.data.supportx1,t,e)&&a.push(this.data.supporty1),this.isPointInShowData(this.data.resistancex0,t,e)&&a.push(this.data.resistancey0),this.isPointInShowData(this.data.resistancex1,t,e)&&a.push(this.data.resistancey1),{max:Math.max.apply(Math,a),min:Math.min.apply(Math,a)}},Z.prototype.isPointInShowData=function(t,e,a){return!!t&&t>e&&t<a},Z.prototype.createValueMultiplier=function(t){var e=t?String(t).length-1:0,a=e<1?0:e;return Math.pow(10,a)},Z.prototype.getPointOnLine=function(t,e,a,i,r){if(isNaN(e)||isNaN(a)||isNaN(i)||isNaN(r))return!1;var s={x:null,y:null},n=this.createValueMultiplier(e),o=a*n,h=r*n;switch(t){case"endLine":s.x=this.data.patternEndTime+(this.data.patternEndTime-e);break;case"startLine":s.x=this.data.supportx0<this.data.resistancex0?this.data.supportx0:this.data.resistancex0;break;case"patternEndTime":s.x=this.data.patternEndTime}var c=(s.x-e)*(h-o)/(i-e)+o;return s.y=c/n,s},Z.prototype.convertData=function(){var t=Math.round((new Date).getTime()/1e3),e=this.chartData.data&&this.chartData.data.bid[0]?new Date(this.chartData.data.bid[0].date).getTime():t,a=this.chartData.chart.getNearestCandleIndex(this.data.patternEndTime),i=this.chartData.chart.showData[a];this.isInitialized&&this.isInstanceWithOffset&&0!==a&&(a-=1,i.date!==this.data.patternEndTime&&(a+=1),i=this.chartData.chart.showData[a]);var r=0,s=this.data,n=s.patternEndTime,o=s.predictionTimeTo,h=s.predictionTimeFrom;i&&(r=Math.round(this.toYPixels((parseFloat(i.close)+parseFloat(i.open))/2)),this.isInitialized||(n=i.date,this.data.patternEndTime=n,this.data.predictionTimeFrom&&(o=(h=n)+(this.data.predictionTimeTo-this.data.predictionTimeFrom),this.data.predictionTimeTo=o,this.data.predictionTimeFrom=h)));var c=this.chartData.getCurrentTimeStepByServerPeriod();return this.isInstanceWithOffset&&(this.chartData.data&&this.chartData.data.bid[0]&&n<this.chartData.data.bid[0].date&&(n+=c,o+=c,h+=c),e+=c),{pointAx:Math.round(this.toXPixels(this.data.supportx0+c)),pointAy:Math.round(this.toYPixels(this.data.supporty0)),pointBx:Math.round(this.toXPixels(this.data.supportx1+c)),pointBy:Math.round(this.toYPixels(this.data.supporty1)),pointCx:Math.round(this.toXPixels(this.data.resistancex0+c)),pointCy:Math.round(this.toYPixels(this.data.resistancey0)),pointDx:Math.round(this.toXPixels(this.data.resistancex1+c)),pointDy:Math.round(this.toYPixels(this.data.resistancey1)),patternEndTime:Math.round(this.toXPixels(n)),predictionTimeFrom:Math.round(this.toXPixels(h)),predictionTimeTo:Math.round(this.toXPixels(o)),predictionPriceFrom:Math.round(this.toYPixels(this.data.predictionPriceFrom)),predictionPriceTo:Math.round(this.toYPixels(this.data.predictionPriceTo)),currentTime:Math.round(this.toXPixels(e)),endCandleClosePrice:r,isNeedArrows:!0}},Z.prototype.toXPixels=function(t){return this.chartData.chart.toXPixels(t)},Z.prototype.toYPixels=function(t){return this.chartData.chart.toYPixels(t)},et.prototype.draw=function(t){t&&(this.isNeedArrows&&(this.drawPredictionPoint(t),this.drawDirectionArrow(t),this.drawPredictionArrow(t),this.drawDashedPatternLines(t)),this.drawLines(t),this.drawPatternEndLine(t),this.drawFibonacciLevels(t))},et.prototype.drawPatternEndLine=function(t){if(t){var e=this.patternEndLine,a=e.x,i=e.color,s=e.strokeWidth,n=r.getPosition(a,s);r.drawLine(null,t,n,0,n,t.canvas.clientHeight,i,[6,4],s,1)}},et.prototype.calcPoints=function(){var t=this.convertData();this.isNeedArrows=t.isNeedArrows,this.isXLineVisible=t.isXLineVisible,this.patternEndLine.x=t.patternEndTime,t.isNeedArrows&&(this.calculatePredictionPoint(t),this.calculateDirectionArrow(t),this.calculatePredictionArrow(t),this.calculateDashedPatternLines(t)),this.calculateLines(t),this.calculateFibonacciLevels(t),this.isInitialized=!0},et.prototype.calculatePredictionPoint=function(t){this.predictionPoint.x=t.pointCx+(t.pointBx-t.pointAx),this.predictionPoint.y=t.pointDy},et.prototype.drawPredictionPoint=function(t){if(t){var e=this.predictionPoint,a=e.x,i=e.y,s=e.radius,n=e.color,o=e.lineWidth;r.drawCircle(null,t,a,i,s,o,n,n)}},et.prototype.calculateDirectionArrow=function(t){this.directionArrow.start={x:t.pointCx,y:t.pointCy},this.directionArrow.end={x:this.predictionPoint.x,y:this.predictionPoint.y}},et.prototype.drawDirectionArrow=function(t){if(t){var e=this.directionArrow,a=e.start,i=e.end,s=e.color,n=e.strokeWidth;r.drawArrow(null,t,a.x,a.y,i.x,i.y,s,s,[],n,null,!0)}},et.prototype.calculatePredictionArrow=function(t){this.predictionArrow.start={x:t.pointCx+(t.pointBx-t.pointAx),y:t.pointDy},this.predictionArrow.end={x:t.pointCx+(t.pointBx-t.pointAx)+(t.pointCx-t.pointBx),y:t.target3y}},et.prototype.drawPredictionArrow=function(t){if(t){var e=this.predictionArrow,a=e.start,i=e.end,s=e.color,n=e.strokeWidth;r.drawArrow(null,t,a.x,a.y,i.x,i.y,s,s,[],n,null,!0)}},et.prototype.calculateDashedPatternLines=function(t){switch(this.dashedPatternLines.lines=[],this.data.pattern){case"Butterfly":this.dashedPatternLines.lines.push({start:{x:t.pointXx,y:t.pointXy},end:{x:t.pointBx,y:t.pointBy}}),this.dashedPatternLines.lines.push({start:{x:t.pointBx,y:t.pointBy},end:{x:this.directionArrow.end.x,y:this.directionArrow.end.y}});break;case"3 Drive":this.dashedPatternLines.lines.push({start:{x:t.pointXx,y:t.pointXy},end:{x:this.directionArrow.end.x,y:this.directionArrow.end.y}});break;case"Gartley":this.dashedPatternLines.lines.push({start:{x:t.pointAx,y:t.pointAy},end:{x:t.pointCx,y:t.pointCy}}),this.dashedPatternLines.lines.push({start:{x:t.pointBx,y:t.pointBy},end:{x:this.directionArrow.end.x,y:this.directionArrow.end.y}}),this.dashedPatternLines.lines.push({start:{x:t.pointXx,y:t.pointXy},end:{x:this.directionArrow.end.x,y:this.directionArrow.end.y}})}},et.prototype.drawDashedPatternLines=function(t){if(t){var e=this.dashedPatternLines,a=e.lines,i=e.color,s=e.strokeWidth,n=!0,o=!1,h=void 0;try{for(var c,l=a[Symbol.iterator]();!(n=(c=l.next()).done);n=!0){var A=c.value,d=A.start,p=A.end,u=r.getPosition(d.x,s),g=r.getPosition(p.x,s);r.drawLine(null,t,u,d.y,g,p.y,i,[4,2],s)}}catch(f){o=!0,h=f}finally{try{n||null==l.return||l.return()}finally{if(o)throw h}}}},et.prototype.calculateLines=function(t){var e=this.patternLines.points;this.patternLines.lines={X:{x:this.data.timeX&&-1!==this.data.timeX&&this.isXLineVisible?t.pointXx:null,y:this.data.priceX&&-1!==this.data.priceX&&this.isXLineVisible?t.pointXy:null,text:this.getLineText(e,this.data.pattern,e[0]),direction:this.data.directionX,textOffset:0},A:{x:this.data.timeA&&-1!==this.data.timeA?t.pointAx:null,y:this.data.priceA&&-1!==this.data.priceA?t.pointAy:null,text:this.getLineText(e,this.data.pattern,e[1]),direction:this.data.directionA,textOffset:0},B:{x:this.data.timeB&&-1!==this.data.timeB?t.pointBx:null,y:this.data.priceB&&-1!==this.data.priceB?t.pointBy:null,text:this.getLineText(e,this.data.pattern,e[2]),direction:this.data.directionB,textOffset:0},C:{x:this.data.timeC&&-1!==this.data.timeC?t.pointCx:null,y:this.data.priceC&&-1!==this.data.priceC?t.pointCy:null,text:this.getLineText(e,this.data.pattern,e[3]),direction:this.data.directionC,textOffset:0},D:{x:this.data.timeD&&-1!==this.data.timeD?t.pointDx:null,y:this.data.priceD&&-1!==this.data.priceD?t.pointDy:null,text:this.getLineText(e,this.data.pattern,e[4]),direction:this.data.directionD,textOffset:0}}},et.prototype.drawLines=function(t){if(t){var e=this.patternLines,a=e.lines,i=e.color,s=e.textFont,n=e.textColor,o=e.strokeWidth,h=e.textAlignment,c=e.textVerticalOffset,l=e.downDirectionTextVerticalOffset,A=Object.keys(a);for(var d in A){var p=Number(d),u=a[A[p]],g=a[A[p+1]];if(u&&(u.x||0===u.x)&&(u.y||0===u.y)&&g&&(g.x||0===g.x)&&(g.y||0===g.y)){r.drawLine(null,t,u.x,u.y,g.x,g.y,i,[],o);var f="up"===u.direction?c:c-l;u.textOffset=f,r.drawText(null,t,u.x,u.y-f,u.text,s,n,null,h);var w="up"===g.direction?c:c-l;g.textOffset=w,r.drawText(null,t,g.x,g.y-w,g.text,s,n,null,h)}}}},et.prototype.calculateFibonacciLevels=function(t){if(this.chartData.chart&&this.chartData.chart.canvasSignals){this.levelLines.lines=[];var e=this.levelLines,a=e.width,i=e.lineOffsetX,r=e.lineOffsetY,s=e.textOffsetX,n=e.textOffsetY,o=e.values,h=this.chartData.chart.canvasSignals.width,c=[t.target3y,t.target5y,t.target6y,t.target7y,t.target10y,t.target12y,t.target16y],l=h-a-i,A=h-i,d=h-a/2-i-s;for(var p in c){var u=o[p],g=c[p],f=g-r,w=g-n;this.levelLines.lines.push({line:{y:f,endX:A,startX:l},text:{y:w,x:d,value:u}})}}},et.prototype.drawFibonacciLevels=function(t){if(t){var e=this.levelLines,a=e.lines,i=e.color,s=e.textFont,n=e.textColor,o=e.strokeWidth,h=e.textAlignment,c=!0,l=!1,A=void 0;try{for(var d,p=a[Symbol.iterator]();!(c=(d=p.next()).done);c=!0){var u=d.value,g=u.line,f=u.text,w=r.getPosition(g.startX,o),v=r.getPosition(g.endX,o);r.drawLine(null,t,w,g.y,v,g.y,i,[],o),r.drawText(null,t,f.x,f.y,f.value,s,n,null,h)}}catch(y){l=!0,A=y}finally{try{c||null==p.return||p.return()}finally{if(l)throw A}}}},et.prototype.getLineText=function(t,e,a){if(t&&("3 Point Extension"===e||"3 Point Retracement"===e)){var i=t.indexOf(a)-1;return i>=0?t[i]:a}return a},et.prototype.getExtremePoints=function(t,e){if(isNaN(t)||isNaN(e))return{max:null,min:null};var a=[],i=this.patternLines.lines;return this.isPointInShowData(this.data.timeX,t,e)&&(a.push(this.data.priceX),a.push(this.toYValue(i.X.y-i.X.textOffset))),this.isPointInShowData(this.data.timeA,t,e)&&(a.push(this.data.priceA),a.push(this.toYValue(i.A.y-i.A.textOffset))),this.isPointInShowData(this.data.timeB,t,e)&&(a.push(this.data.priceB),a.push(this.toYValue(i.B.y-i.B.textOffset))),this.isPointInShowData(this.data.timeC,t,e)&&(a.push(this.data.priceC),a.push(this.toYValue(i.C.y-i.C.textOffset))),this.isPointInShowData(this.data.timeD,t,e)?(a.push(this.data.priceD),a.push(this.toYValue(i.D.y-i.D.textOffset))):(this.predictionPoint.y||0===this.predictionPoint.y)&&(a.push(this.data.priceD),a.push(this.toYValue(this.predictionPoint.y+2*this.predictionPoint.radius)),a.push(this.toYValue(this.predictionPoint.y-2*this.predictionPoint.radius))),{max:Math.max.apply(Math,a),min:Math.min.apply(Math,a)}},et.prototype.isPointInShowData=function(t,e,a){return!!t&&t>e&&t<a},et.prototype.convertData=function(){var t=this.chartData.chart.getNearestCandleIndex(this.data.patternEndTime),e=this.chartData.chart.showData[t];this.isInitialized&&this.isInstanceWithOffset&&0!==t&&(t-=1,e.date!==this.data.patternEndTime&&(t+=1),e=this.chartData.chart.showData[t]);var a=this.data.patternEndTime;e&&!this.isInitialized&&(a=e.date,this.data.patternEndTime=a);var i=this.chartData.getCurrentTimeStepByServerPeriod();this.isInstanceWithOffset&&this.chartData.data&&this.chartData.data.bid[0]&&a<this.chartData.data.bid[0].date&&(a+=i);var r=-1===this.data.timeD,s=-1===this.data.timeD?this.data.patternEndTime:this.data.timeD,n=!0;if(this.chartData.data&&this.chartData.data.bid&&this.chartData.data.bid.length){var o=this.chartData.data.bid.length,h=this.chartData.data.bid[o-1].date;n=this.data.timeX>=h}return{pointAx:Math.round(this.toXPixels(this.data.timeA+i)),pointAy:Math.round(this.toYPixels(this.data.priceA)),pointBx:Math.round(this.toXPixels(this.data.timeB+i)),pointBy:Math.round(this.toYPixels(this.data.priceB)),pointCx:Math.round(this.toXPixels(this.data.timeC+i)),pointCy:Math.round(this.toYPixels(this.data.priceC)),pointDx:Math.round(this.toXPixels(s+i)),pointDy:Math.round(this.toYPixels(this.data.priceD)),pointXx:Math.round(this.toXPixels(this.data.timeX+i)),pointXy:Math.round(this.toYPixels(this.data.priceX)),target0y:Math.round(this.toYPixels(this.data.target0)),target3y:Math.round(this.toYPixels(this.data.target3)),target5y:Math.round(this.toYPixels(this.data.target5)),target6y:Math.round(this.toYPixels(this.data.target6)),target7y:Math.round(this.toYPixels(this.data.target7)),target10y:Math.round(this.toYPixels(this.data.target10)),target12y:Math.round(this.toYPixels(this.data.target12)),target16y:Math.round(this.toYPixels(this.data.target16)),isNeedArrows:r,patternEndTime:Math.round(this.toXPixels(a)),isXLineVisible:n}},et.prototype.toXPixels=function(t){return this.chartData.chart.toXPixels(t)},et.prototype.toYPixels=function(t){return this.chartData.chart.toYPixels(t)},et.prototype.toYValue=function(t){return this.chartData.chart.toYValue(t)},rt.prototype.draw=function(t){t&&(this.drawPatternLine(t),this.drawPatterEndLine(t),this.drawPrediction(t),this.drawArrow(t))},rt.prototype.drawPatternLine=function(t){if(t){var e=this.data.pattern,a=this.patternLine,i=a.start,s=a.end,n=a.supportColor,o=a.resistanceColor,h=a.strokeWidth,c=e&&"support"===e.toLowerCase()?n:o,l=r.getPosition(i.x,h);r.drawLine(null,t,l,i.y,s.x,s.y,c,[],h)}},rt.prototype.drawPatterEndLine=function(t){if(t){var e=this.patternEndLine,a=e.x,i=e.strokeWidth,s=e.color,n=r.getPosition(a,i);r.drawLine(null,t,n,0,n,t.canvas.clientHeight,s,[6,4],i,1)}},rt.prototype.drawPrediction=function(t){if(t)if(this.predictionArea.isCreated){var e=this.predictionArea,a=e.x,i=e.y,s=e.width,n=e.height,o=e.color,h=e.borderColor,c=e.strokeWidth;r.drawRectangle(null,t,a,i,s,n,o,h,c,[])}else{var l=this.predictionLine,A=l.start,d=l.end,p=l.color,u=l.strokeWidth;r.drawLine(null,t,A.x,A.y,d.x,d.y,p,[4,2],u)}},rt.prototype.drawArrow=function(t){if(t&&this.directionArrow.end.x>this.patternEndLine.x){var e=this.data.pattern,a=this.directionArrow,i=a.start,s=a.end,n=a.strokeWidth,o=a.strokeColor,h=a.supportColor,c=a.resistanceColor,l=e&&"support"===e.toLowerCase()?h:c;r.drawArrow(null,t,i.x,i.y,s.x,s.y,l,o,[],n,1,!0)}},rt.prototype.calcPoints=function(){var t=this.convertData();this.patternEndLine.x=t.patternEndTime,this.patternLine.end=this.getMissingPoint(t.pointAx,t.pointAy,t.pointBx,t.pointBy,t.patternEndTime),this.patternLine.start.x=t.pointAx,this.patternLine.start.y=t.pointAy,this.calculatePredictions(t),this.calculateArrow(t),this.isInitialized=!0},rt.prototype.calculatePredictions=function(t){this.data.predictionPriceFrom?(this.predictionArea.x=t.predictionTimeFrom+3,this.predictionArea.y=t.predictionPriceTo,this.predictionArea.width=t.predictionTimeTo-t.predictionTimeFrom,this.predictionArea.height=Math.abs(t.predictionPriceTo-t.predictionPriceFrom),this.predictionArea.isCreated=!0):this.calculatePointPrediction(t)},rt.prototype.getMissingPoint=function(t,e,a,i,r){if(isNaN(t)||isNaN(e)||isNaN(a)||isNaN(i)||isNaN(r))return!1;var s,n=Math.abs(t-a),o=Math.abs(e-i);s=r>t?a>t?a:t:a>t?t:a;var h=Math.abs(r-s)*o/n;return{x:r,y:s===t?e>i?e+h:e-h:e>i?i-h:i+h}},rt.prototype.calculatePointPrediction=function(t){this.predictionLine.start={x:t.pointBx,y:t.pointBy},this.predictionLine.end={x:this.chartData.chart.canvasSignals.clientWidth,y:t.pointBy}},rt.prototype.calculateArrow=function(t){this.directionArrow.end={x:t.currentTime+20},this.directionArrow.start={y:t.endCandleClosePrice},t.predictionTimeFrom&&t.currentTime+20>t.predictionTimeTo&&(this.directionArrow.end.x=t.predictionTimeTo-5),this.directionArrow.start.x=this.patternLine.end.x,this.directionArrow.end.y=(this.directionArrow.end.x-this.patternLine.start.x)*(this.patternLine.end.y-this.patternLine.start.y)/(this.patternLine.end.x-this.patternLine.start.x)+this.patternLine.start.y,1===this.data.direction&&this.data.predictionPriceFrom&&(this.directionArrow.end.y=t.predictionPriceFrom),1!==this.data.direction&&this.data.predictionPriceTo&&(this.directionArrow.end.y=t.predictionPriceTo)},rt.prototype.getExtremePoints=function(t,e){var a=[],i=this.chartData.getCurrentTimeStepByServerPeriod(),r=this.data.point+i,s=this.data,n=s.price,o=s.patternEndTime,h=s.price;if(e<r)return!1;if(this.data.predictionPriceFrom){var c=.1*(this.data.predictionPriceTo-this.data.predictionPriceFrom);this.isPointInShowData(this.data.predictionTimeFrom,t,e)&&a.push(this.data.predictionPriceFrom-c),this.isPointInShowData(this.data.predictionTimeFrom,t,e)&&a.push(this.data.predictionPriceTo+c)}else{var l=this.getPointOnLine("endLine",r,n,o,h);this.isPointInShowData(l.y,t,e)&&a.push(l.y)}var A=this.getPointOnLine("startLine",r,n,o,h);this.isPointInShowData(A.x,t,e)&&a.push(A.y);var d=this.getPointOnLine("patternEndTime",r,n,o,h,this.data.patternEndTime);return this.isPointInShowData(d.x,t,e)&&a.push(d.y),this.isPointInShowData(r,t,e)&&a.push(n),this.isPointInShowData(o,t,e)&&a.push(h),{max:Math.max.apply(Math,a),min:Math.min.apply(Math,a)}},rt.prototype.isPointInShowData=function(t,e,a){return!!(t&&e&&a)&&t>e&&t<a},rt.prototype.createValueMultiplier=function(t){var e=t?String(t).length-1:0,a=e<1?0:e;return Math.pow(10,a)},rt.prototype.getPointOnLine=function(t,e,a,i,r){if(isNaN(e)||isNaN(a)||isNaN(i)||isNaN(r))return!1;var s={x:null,y:null},n=this.createValueMultiplier(e),o=a*n,h=r*n;switch(t){case"endLine":s.x=this.data.patternEndTime+(this.data.patternEndTime-e);break;case"startLine":s.x=e;break;case"patternEndTime":s.x=this.data.patternEndTime}var c=(s.x-e)*(h-o)/(i-e)+o;return s.y=c/n,s},rt.prototype.convertData=function(){var t=Math.round((new Date).getTime()/1e3),e=this.chartData.data&&this.chartData.data.bid[0]?new Date(this.chartData.data.bid[0].date).getTime():t,a=this.chartData.chart.getNearestCandleIndex(this.data.patternEndTime),i=this.chartData.chart.showData[a];this.isInitialized&&this.isInstanceWithOffset&&0!==a&&(a-=1,i.date!==this.data.patternEndTime&&(a+=1),i=this.chartData.chart.showData[a]);var r=0,s=this.data,n=s.patternEndTime,o=s.predictionTimeTo,h=s.predictionTimeFrom;i&&(r=Math.round(this.toYPixels((parseFloat(i.close)+parseFloat(i.open))/2)),this.isInitialized||(n=i.date,this.data.patternEndTime=n,this.data.predictionTimeFrom&&(o=(h=n)+(this.data.predictionTimeTo-this.data.predictionTimeFrom),this.data.predictionTimeTo=o,this.data.predictionTimeFrom=h)));var c=this.chartData.getCurrentTimeStepByServerPeriod();return this.isInstanceWithOffset&&(this.chartData.data&&this.chartData.data.bid[0]&&n<this.chartData.data.bid[0].date&&(n+=c,o+=c,h+=c),e+=c),{pointAx:Math.round(this.toXPixels(this.data.point+c)),pointAy:Math.round(this.toYPixels(this.data.price)),pointBx:Math.round(this.toXPixels(n)),pointBy:Math.round(this.toYPixels(this.data.price)),patternEndTime:Math.round(this.toXPixels(n)),predictionTimeFrom:Math.round(this.toXPixels(h)),predictionTimeTo:Math.round(this.toXPixels(o)),predictionPriceFrom:Math.round(this.toYPixels(this.data.predictionPriceFrom)),predictionPriceTo:Math.round(this.toYPixels(this.data.predictionPriceTo)),currentTime:Math.round(this.toXPixels(e)),endCandleClosePrice:r,isNeedArrows:!0}},rt.prototype.toXPixels=function(t){return this.chartData.chart.toXPixels(t)},rt.prototype.toYPixels=function(t){return this.chartData.chart.toYPixels(t)};var ne=function t(e,a,i){!function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function s(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a}(this,"cloneObject",(function(t){if(t&&"object"===nt(t))return JSON.parse(JSON.stringify(t))})),this.techChart=i,this.parent=e,this.chartData=a,this.chartData.chart=this,this.resizeTimer,this.showData=[],this.selectedData=[],this.timeAxis=[],this.w,this.h,this.top,this.curX,this.curY,this.crosshair={params:{x:0,y:0}},this.isShowCrosshair=!1,this.valueAxis=[],this.timeAxisStep,this.valueAxisCount=5,this.valueTextHeigh=11,this.useCanvas=!0,this.canvasGrid,this.canvasGridContext,this.canvasDrawing,this.canvasDrawingContext,this.canvasDataNormal,this.canvasDataNormalContext,this.canvasDataPixelated,this.canvasDataPixelatedContext,this.canvasRateNormal,this.canvasRateNormalContext,this.canvasRatePixelated,this.canvasRatePixelatedContext,this.canvasMinMaxPrices,this.canvasMinMaxPricesContext,this.canvasInfo,this.canvasInfoContext,this.divEventListener,this.drawingTextContainer,this.waterMarkContainer,this.navigationButtonsContainer,this.bubblesContainer,this.isPressed=!1,this.isSetScaleY=!1,this.dataPanel,this.isBusy=!1,this.chartOscillatorContainer,this.oscillatorCharts={},this.zoomSelector,this.axisTextContainer,this.optionsTextContainer,this.offX=50,this.offY=18,this.priceTextWidth=!1,this.crosshairTextHeight=!1,this.crosshairTextWidth=!1,this.parentRect,this.priceTextColor,this.redrawOnMoveTimeout=null,this.moving={totalX:0,totalY:0},this.tappedClickTimer=null,this.index=0,this.magnetDistance=30,this.clipPathOffset=8,this.resizeEdgeHeight=5,this.getNewsTimeout=null,this.getEventsTimeout=null,this.signalsDataPanel=null,this.signals=[],this.newsBubbles=[],this.recreateNewsBubblesTimeout=null,this.eventsBubbles=[],this.recreateEventsBubblesTimeout=null,this.isOptionActive=!1,this.isPipsShow=!1,this.fireflyOpacity=0,this.fireflyOpacityDelta=a.options.Chart.fireflyOpacityDelta,this.fireflyAnimationFrameId=null,this.canvasFirefly=null,this.canvasFireflyContext=null};ne.prototype.html=function(){return"<div class='tch-chart-background'>\n            <div class='tch-spinner-container'></div>\n        </div>\n        <div class='tch-chart-container'>\n            <canvas class='tch-chart-grid'></canvas>\n            <div class='tch-chart-watermark-container'>\n                <div>\n                  <span class='tch-chart-watermark'>WaterMark</span>\n                </div>\n            </div>\n            <canvas class='tch-chart-drawing'></canvas>\n            <canvas class='tch-chart-data-normal'></canvas>\n            <canvas class='tch-chart-data-pixelated'></canvas>\n            <div class='tch-axis-text'></div>\n            <div class='tch-drawing-text'></div>\n            <canvas class='tch-chart-signals'></canvas>\n            ".concat(this.createMinMaxPricesCanvas(),"\n            <div class='tch-news-bubbles-container'></div>\n            <div class='tch-events-bubbles-container'></div>\n            <div class='tch-chart-oscillators-container'></div>\n            <canvas class='tch-chart-drawing-active'></canvas>\n            <canvas class='tch-chart-rate-normal'></canvas>\n            <canvas class='tch-chart-rate-pixelated'></canvas>\n            <canvas class='tch-chart-info tch-move-container'></canvas>\n            \n            <canvas class='tch-chart-firefly'></canvas>\n\n            <div class='tch-chart-rate-text-container'>\n            <div class='tch-chart-rate-text'>\n            <div style='display: none;'>\n                <span class='tch-options-label-triangle tch-options-triangle tch-rate-triangle'></span>\n                <span class='tch-last-bar-value tch-price'></span>\n            </div>\n            </div>\n                <div class='tch-chart-rate-text'>\n                    <div style='display: none;'><span class='tch-rate-value tch-price'></span></div>\n                    <div style='display: none;'><span class='tch-timer-value tch-price'></span></div>\n                    <div style='display: none;'><span class='tch-heikin-value tch-price'></span></div>\n                </div>\n            </div>\n            <div class='tch-chart-info-text-container'>\n                <div class='tch-chart-info-text'>\n                    <div style='display: none;'>\n                        <span class='tch-info-value tch-price'></span>\n                    </div>\n                    <div style='display: none;'>\n                        <span class='tch-info-date'></span>\n                    </div>\n                </div>\n            </div>\n            <div class='tch-zoom-selector'></div>\n            <div class='tch-line-settings-container tch-hidden tch-move'></div>\n            <ul class='tch-nav-buttons  tch-nav-many'>\n                <li class='tch-nav-left'></li>\n                <li class='tch-nav-out'></li>\n                <li class='tch-nav-ref'></li>\n                <li class='tch-nav-in'></li>\n                <li class='tch-nav-right'></li>\n            </ul>\n            <ul class='tch-nav-buttons  tch-nav-one'>\n                <li class = 'tch-nav-start'></li>\n            </ul>\n            <div class='tch-chart-event-listener'></div>\n            <div class='tch-tooltip-container tch-news-tooltip-container tch-hidden'></div>\n            <div class='tch-tooltip-container tch-events-tooltip-container tch-hidden'></div>\n        <div>")},ne.prototype.createMinMaxPricesCanvas=function(){return this.chartData.isMinMaxPricesMarksEnabled?"<canvas class='tch-chart-min-max-prices'></canvas>":""},ne.prototype.createOscillatorCharts=function(){this.resizeOscillatorHeights(),this.chartOscillatorContainer=this.parent.querySelector(".tch-chart-oscillators-container");for(var t=0;t<this.chartData.indicators.length;t++)if("oscillator"===this.chartData.indicators[t].type){var e=document.createElement("div");e.classList.add("tch-oscillator-"+this.chartData.indicators[t].id),this.chartOscillatorContainer.appendChild(e);var a={w:this.chartData.indicators[t].w,h:this.chartData.indicators[t].h,top:this.chartData.indicators[t].top,name:this.chartData.indicators[t].name};this.oscillatorCharts[this.chartData.indicators[t].id]=this.createOscillatorChart(this.chartData.indicators[t].id,a),this.oscillatorCharts[this.chartData.indicators[t].id].init(e)}},ne.prototype.createOscillatorChart=function(t,e){return new j(t,this.chartData,e)},ne.prototype.resizeOscillatorHeights=function(){var t;!this.parentRect&&this.chartData.parentRect&&(this.parentRect=this.chartData.parentRect),this.parentRect?(t=this.parentRect.height,this.parentRect=this.parent.getBoundingClientRect(),this.chartData.parentRect=this.parentRect):(this.parentRect=this.parent.getBoundingClientRect(),this.chartData.parentRect=this.parentRect,t=this.parentRect.height);for(var e=2*this.chartData.options.Chart.scalesFontSize+10,a=this.chartData.options.Chart.oldScalesFontSize?2*this.chartData.options.Chart.oldScalesFontSize+10:e,i=(this.parentRect.height-e)/(t-a),r=0;r<this.chartData.indicators.length;r++)if("oscillator"===this.chartData.indicators[r].type){var s=this.chartData.indicators[r];s.h=s.h*i,s.top=s.top*i}!this.h&&this.chartData.h&&(this.h=this.chartData.h),!this.top&&this.chartData.top&&(this.top=this.chartData.top),this.h*=i,this.top*=i,this.chartData.h=this.h,this.chartData.top=this.top},ne.prototype.init=function(t,e){if(this.parent&&this.chartData.isChartInitEnabled){this.setChartElementsSize(this.chartData),this.parent.innerHTML=this.html();var a=this.parent.querySelector(".tch-chart-container");if(t||(a.style.opacity=0,a.style.visibility="hidden"),this.createOscillatorCharts(),this.setElementsPositionAndSize(),this.checkHasEnoughData(this.chartData,this.w)||!this.chartData.hasPrevData){if(this.chartData.data&&this.chartData.data[this.chartData.typeData]&&0!==this.chartData.data[this.chartData.typeData].length){var i=this.techChart.configuration.offsetChart?this.w*this.techChart.configuration.offsetChart:0;(this.chartData.startX>i||e||!this.chartData.techChart.initializationDone)&&(this.chartData.startX=i),this.selectedData=this.selectDataToShow(this.chartData.data[this.chartData.typeData],this.chartData.startDateSeconds,this.chartData.spacing,this.w-this.chartData.startX),this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding,this.chartData.spacing,this.w,this.h,this.chartData.precission,this.chartData.startX,null),this.crosshair.showData=[],this.newsBubbles=[],this.setGetNewsTimeout(),this.eventsBubbles=[],this.setGetEventsTimeout(),this.deleteRedundantElements(this.showData,0,this.w,this.chartData.rightPadding,this.chartData.spacing),this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.timeAxis=this.getTimeAxis(this.showData,this.w,this.parentRect.height-this.offY,this.chartData.period,this.chartData.timeMode,this.chartData.localization),this.getOscillatorChartsAxis(),this.updateDrawingObjectsPixels(),this.drawDataPanel(this.showData[0]),this.draw(this.showData,this.h),this.drawActiveDrawingObjects(),this.clearGrid(),this.drawTimeAxis(this.timeAxis),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.showData[0]&&this.updateIndicatorsDataPanel(this.showData[0].date),this.drawCurrent(this.chartData.currentValue),this.startCandleTimer(!0),this.addEvents(),this.updateSignals(),this.chartData.isShowAllSignals&&this.drawActiveSignal(),this.drawMinMaxPrices(),this.chartData.techChart.initializationDone=!0,this.initialized=!0,this.chartData.techChart.setCanAddTab(),t||(a.style.visibility="initial",!a.style.transition&&(a.style.transition="opacity 1s ease"),a.style.opacity=1),this.updatePositionsAndRedraw()}}else{var r=this.getLastDate(this.chartData.data[this.chartData.typeData]);if(r){var s=this.getExtraDataNumb(this.chartData,this.w);this.chartData.getExtraData(this.chartData,r,s,this.chartData.getExtraDataOnInitComplete)}else this.chartData.getFirstData()}}},ne.prototype.resizeChartHeight=function(){this.setChartSizes(),this.setWatermarkSize(),this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding,this.chartData.spacing,this.w,this.h,this.chartData.precission,this.chartData.startX,null),this.crosshair.showData=this.showData,this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.updateDrawingObjectsPixels(),this.getOscillatorChartsAxis(),this.draw(this.showData,this.h),this.drawActiveDrawingObjects(),this.redrawActiveSignal(),this.clearGrid(),this.drawTimeAxis(this.timeAxis),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrent(this.chartData.currentValue),this.activeSignal&&this.redrawActiveSignal(),this.drawMinMaxPrices()},ne.prototype.getValueAxisTexts=function(){return this.chartData.chart.valueAxis.length?this.chartData.chart.valueAxis.map((function(t){return t.value})):[]},ne.prototype.getOscillatorsTexts=function(){var t=Object.values(this.oscillatorCharts);if(!t.length)return[];var e=this.chartData.getOscillatorsCurrentValues();return t.reduce((function(t,e){return e.valueAxis&&e.valueAxis.length?[].concat(st(t),st(e.valueAxis.map((function(t){return t.value})))):t}),e)},ne.prototype.getLongestStringValue=function(t){if(!t.length)return"";var e=Math.max.apply(Math,st(t.map((function(t){return t.length}))));return t.find((function(t){return t.length===e}))},ne.prototype.getScalesOffsetData=function(){this.chartData.currentValue[this.chartData.typeData]=this.getCurrentValue(),this.chartData.precission=this.chartData.precission?this.chartData.precission:5;var t=[parseFloat(this.chartData.currentValue[this.chartData.typeData]).toFixed(this.chartData.precission)].concat(st(this.getValueAxisTexts()),st(this.getOscillatorsTexts())),e=this.getLongestStringValue(t),a=r.measureText(this.canvasGridContext,this.chartData.options.Chart.scalesFontSize+"px Arial",e);this.offX=parseInt(a.width,10)+10,this.offY=parseInt(2*this.chartData.options.Chart.scalesFontSize,10)+10},ne.prototype.updatePositionsAndRedraw=function(){var t=this.offX,e=this.offY;this.getScalesOffsetData(),t===this.offX&&e===this.offY||(this.setElementsPositionAndSize(),this.resizeChartHeight())},ne.prototype.getCurrentValue=function(){var t="0.00000";return this.chartData.data[this.chartData.typeData][0]?t=this.chartData.data[this.chartData.typeData][0].close:this.chartData.currentValue[this.chartData.typeData]&&(t=this.chartData.currentValue[this.chartData.typeData]),t},ne.prototype.setChartSizes=function(){var t=this.offX,e=(this.offY,this.clipPathOffset);this.canvasGrid.style.backgroundColor=this.chartData.colors.Chart.backgroundColor,this.canvasSignals.setAttribute("width",this.w-e+"px"),this.canvasSignals.setAttribute("height",this.h+"px"),this.canvasSignalsContext=this.canvasSignals.getContext("2d"),this.chartData.isMinMaxPricesMarksEnabled&&(this.canvasMinMaxPrices.setAttribute("width",this.w-e+"px"),this.canvasMinMaxPrices.setAttribute("height",this.h+"px"),this.canvasMinMaxPricesContext=this.canvasMinMaxPrices.getContext("2d")),this.canvasDrawingActive.setAttribute("width",this.w-e+"px"),this.canvasDrawingActive.setAttribute("height",this.h+"px"),this.canvasDrawingActiveContext=this.canvasDrawingActive.getContext("2d"),this.canvasDrawing.setAttribute("width",this.w-e+"px"),this.canvasDrawing.setAttribute("height",this.h+"px"),this.canvasDrawingContext=this.canvasDrawing.getContext("2d"),this.drawingText.style.width=this.w-e+"px",this.drawingText.style.height=this.h+"px",this.newsBubblesContainer.style.width=this.w-e+"px",this.newsBubblesContainer.style.height=this.h+"px",this.eventsBubblesContainer.style.width=this.w-e+"px",this.eventsBubblesContainer.style.height=this.h+"px",this.canvasDataNormal.setAttribute("width",this.w-e+"px"),this.canvasDataNormal.setAttribute("height",this.h+"px"),this.canvasDataNormalContext=this.canvasDataNormal.getContext("2d"),this.canvasDataPixelated.setAttribute("width",this.w-e+"px"),this.canvasDataPixelated.setAttribute("height",this.h+"px"),this.canvasDataPixelatedContext=this.canvasDataPixelated.getContext("2d"),this.waterMarkContainer.style.width=this.w-e+"px",this.waterMarkContainer.style.height=this.h+"px",this.waterMarkContainer.style.color=this.chartData.colors.Chart.watermarkColor,this.waterMarkContainer.style.fontSize=parseInt(this.h/4,10)+"px",this.canvasRateNormal.setAttribute("width",this.w+t+"px"),this.canvasRateNormal.setAttribute("height",this.h+"px"),this.canvasRateNormalContext=this.canvasRateNormal.getContext("2d"),this.canvasRatePixelated.setAttribute("width",this.w+t+"px"),this.canvasRatePixelated.setAttribute("height",this.h+"px"),this.canvasRatePixelatedContext=this.canvasRatePixelated.getContext("2d"),this.canvasFirefly.setAttribute("width",this.w-e+"px"),this.canvasFirefly.setAttribute("height",this.h+"px"),this.canvasFireflyContext=this.canvasFirefly.getContext("2d"),this.divEventListener=this.parent.querySelector(".tch-chart-event-listener"),this.divEventListener.classList.toggle("tch-cursor-"+this.chartData.cursorType),this.drawingTextContainer=this.parent.querySelector(".tch-drawing-text"),this.drawingTextContainer.style.top="0px"},ne.prototype.setElementsPositionAndSize=function(){var t;this.parentRect?(t=this.parentRect.height,this.parentRect=this.parent.getBoundingClientRect(),this.chartData.parentRect=this.parentRect):(this.parentRect=this.parent.getBoundingClientRect(),this.chartData.parentRect=this.parentRect,t=this.parentRect.height),this.canvasGrid=this.parent.querySelector(".tch-chart-grid"),this.canvasGrid.setAttribute("height",parseFloat(this.parentRect.height)+"px"),this.canvasGridContext=this.canvasGrid.getContext("2d"),this.getScalesOffsetData();var e=this.offX,a=this.offY,i=this.clipPathOffset;this.w=parseFloat(this.parentRect.width)-e,this.h&&Object.keys(this.oscillatorCharts).length?this.h=(this.h+a)*parseFloat(this.parentRect.height)/t-a:this.h=parseFloat(this.parentRect.height)-a,this.top=0,this.chartData.h=this.h,this.chartData.top=this.top;var r=Object.keys(this.oscillatorCharts);if(r.length)for(var s,n,o=this.parentRect.height/t,h=0;h<r.length;h++){var c=this.oscillatorCharts[r[h]];s=c.h*o,n=c.top*o,c.parent.classList.toggle("tch-oscillator",!0),c.parent.style.height=s+"px",c.parent.style.top=n+"px",c.setElementsPositionAndSize(this.w,s,i)}this.canvasSignals=this.parent.querySelector(".tch-chart-signals"),this.chartData.isMinMaxPricesMarksEnabled?this.canvasMinMaxPrices=this.parent.querySelector(".tch-chart-min-max-prices"):this.canvasMinMaxPrices=null,this.canvasDrawingActive=this.parent.querySelector(".tch-chart-drawing-active"),this.canvasDrawing=this.parent.querySelector(".tch-chart-drawing"),this.drawingText=this.parent.querySelector(".tch-drawing-text"),this.newsBubblesContainer=this.parent.querySelector(".tch-news-bubbles-container"),this.eventsBubblesContainer=this.parent.querySelector(".tch-events-bubbles-container"),this.newsTooltipContainer=this.parent.querySelector(".tch-news-tooltip-container"),this.eventsTooltipContainer=this.parent.querySelector(".tch-events-tooltip-container"),this.canvasDataNormal=this.parent.querySelector(".tch-chart-data-normal"),this.canvasDataPixelated=this.parent.querySelector(".tch-chart-data-pixelated"),this.waterMarkContainer=this.parent.querySelector(".tch-chart-watermark-container"),this.canvasRateNormal=this.parent.querySelector(".tch-chart-rate-normal"),this.canvasRatePixelated=this.parent.querySelector(".tch-chart-rate-pixelated"),this.canvasInfo=this.parent.querySelector(".tch-chart-info"),this.canvasInfo.setAttribute("height",parseFloat(this.parentRect.height)+"px"),this.canvasInfo.setAttribute("width",this.w+e+"px"),this.canvasInfoContext=this.canvasInfo.getContext("2d"),this.canvasGrid.setAttribute("width",this.w+e+"px"),this.canvasFirefly=this.parent.querySelector(".tch-chart-firefly"),this.setChartSizes();var l=this.waterMarkContainer.querySelector("span"),A=this.techChart.translation[this.techChart.getPeriods()[this.chartData.period].key];l.textContent=this.chartData.pair.FullName+", "+A,this.setWatermarkSize(),this.navButtons=this.parent.querySelector(".tch-nav-buttons.tch-nav-many");var d=(this.w-this.navButtons.offsetWidth)/2;this.navButtons.style.left=d+"px",this.navButtons.style.bottom=a+"px",this.navButtonStartContainer=this.parent.querySelector(".tch-nav-buttons.tch-nav-one"),this.navButtonStartContainer.style.left=this.w-e+"px",this.navButtonStartContainer.style.bottom=a+"px",this.chartOscillatorContainer=this.parent.querySelector(".tch-chart-oscillators-container"),this.axisTextContainer=this.parent.querySelector(".tch-axis-text"),this.zoomSelector=this.parent.querySelector(".tch-zoom-selector"),this.zoomInBtn=this.parent.querySelector(".tch-zoomin-btn"),this.parent.parentNode&&this.parent.parentNode.parentNode&&this.parent.parentNode.parentNode&&this.parent.parentNode.parentNode.parentNode&&(this.dataPanel=this.parent.parentNode.parentNode.parentNode.querySelector(".tch-data-panel")),this.crosshair.text={spanValue:this.parent.querySelector(".tch-info-value"),spanDate:this.parent.querySelector(".tch-info-date")},this.crosshair.text.spanValue.style.color=this.chartData.colors.Chart.crossLabelTextColor,this.crosshair.text.spanValue.style.background=this.chartData.colors.Chart.crossLabelBackgroundColor,this.crosshair.text.spanValue.parentNode.style.backgroundColor=this.chartData.colors.Chart.crossLabelBackgroundColor,this.crosshair.text.spanDate.style.color=this.chartData.colors.Chart.crossLabelTextColor,this.crosshair.text.spanDate.style.background=this.chartData.colors.Chart.crossLabelBackgroundColor,this.crosshair.text.spanDate.parentNode.style.backgroundColor=this.chartData.colors.Chart.crossLabelBackgroundColor,this.browser=this.detectBrowser(window,document)},ne.prototype.setWatermarkSize=function(){var t=this.waterMarkContainer.querySelector("span");if(this.w>0)for(;t.getBoundingClientRect().width>this.w-10;){var e=parseInt(this.waterMarkContainer.style.fontSize,10);e-=1,this.waterMarkContainer.style.fontSize=e+"px"}},ne.prototype.getChartElementsSize=function(){return{candleWidth:this.chartData.candleWidth,lineSpacing:1.5*this.chartData.candleWidth}},ne.prototype.addEvents=function(){var t=this;window.onscroll=function(){t.parentRect=t.parent.getBoundingClientRect()};var e=t.divEventListener;e.onmouseover=function(e){t.rectChart_mouseOver(e,t)},e.onmouseout=function(e){t.rectChart_mouseOut(e,t)},e.onmousemove=function(e){t.rectChart_mouseMove(e,t)},e.onmousedown=function(e){t.rectChart_mouseDown(e,t)},e.onmouseup=function(e){t.rectChart_mouseUp(e,t)},e.addEventListener("touchstart",(function(e){t.rectChart_touchStart(e,t,null)})),e.addEventListener("touchmove",(function(e){t.rectChart_touchMove(e,t)})),e.addEventListener("touchend",(function(e){t.rectChart_touchEnd(e,t)})),e.ondblclick=function(e){t.rectChart_dblclick(e,t)},e.oncontextmenu=function(e){t.rectChart_contextMenu(e,t)},"firefox"==this.detectBrowser(window,document)?e.addEventListener("MozMousePixelScroll",(function(e){t.rectChart_mouseWheel(e,t)})):"ie"==this.detectBrowser(window,document)?e.addEventListener("wheel",(function(e){t.rectChart_mouseWheel(e,t)})):e.addEventListener("mousewheel",(function(e){t.rectChart_mouseWheel(e,t)})),this.addNavBtnsEvents(t)},ne.prototype.rectChart_dblclick=function(t,e){var a=Math.floor(t.clientX-e.parentRect.left),i=Math.floor(t.clientY-e.parentRect.top);(a>e.w&&i<e.h||"click"===t.type)&&(e.chartData.options.Chart.autoScale||(e.chartData.options.Chart.autoScale=!0,this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),e.chartData.indicators&&e.chartData.indicators.length&&e.createIndicatorsShowData(),e.updateDrawingObjectsPixels(),e.resizeNewsBubbles(),e.resizeEventsBubbles(),e.draw(e.showData,e.h),e.valueAxis=e.getValueAxis(e.chartData.scaleParams.minB,e.chartData.scaleParams.maxB,e.valueAxisCount,e.w,e.h,e.chartData.options.Chart.scalesFontSize,e.chartData.precission),e.getOscillatorChartsAxis(),e.clearGrid(),e.drawValueAxis(e.valueAxis),e.drawTimeAxis(e.timeAxis),e.drawOscillatorChartsAxis(),e.drawChartBorder(),e.drawCurrentValue(),this.activeSignal&&this.redrawActiveSignal(),this.drawMinMaxPrices())),e=null},ne.prototype.rectChart_mouseWheel=function(t,e){if(t&&t.preventDefault&&t.preventDefault(),e.showData&&!(e.showData.length<1)&&!(Math.abs(t.deltaX)>Math.abs(t.deltaY))){var a=Math.floor(t.clientX-e.parentRect.left),i=t.deltaY?t.deltaY:t.detail;if(a<e.w)e.zoomX(i,1.2);else{e.chartData.options.Chart.autoScale=!1;var r=i>0?-15:15,s=parseFloat(e.chartData.scaleParams.minB),n=parseFloat(e.chartData.scaleParams.maxB),o=r*e.chartData.scaleParams.deltaY;e.chartData.scaleParams.minB=s+o,e.chartData.scaleParams.maxB=n-o,e.chartData.scaleParams.deltaY=(e.chartData.scaleParams.maxB-e.chartData.scaleParams.minB)/e.h,e.resizeShowDataValuesY(e.showData,e.h,e.chartData.scaleParams),e.updateDrawingObjectsPixels(),e.removeNewsTooltip(),e.removeEventsTooltip(),e.resizeNewsBubbles(),e.resizeEventsBubbles(),e.draw(e.showData,e.h),e.valueAxis=e.getValueAxis(e.chartData.scaleParams.minB,e.chartData.scaleParams.maxB,e.valueAxisCount,e.w,e.h,e.chartData.options.Chart.scalesFontSize,e.chartData.precission),e.getOscillatorChartsAxis(),e.clearGrid(),e.drawValueAxis(e.valueAxis),e.drawTimeAxis(e.timeAxis),e.drawOscillatorChartsAxis(),e.drawChartBorder(),e.drawCurrentValue()}e.moveCrosshairXY(e.showData,e.curX,e.curY,e.w,e.h),e.chartData.editDrawingObject&&"drawingTrend"===e.chartData.state&&(e.chartData.editDrawingObject.moveTo(e.crosshair.params.x,e.crosshair.params.y,e.crosshair.params),e.chartData.editDrawingObject.updateValues()),e.redrawInfo(),this.activeSignal&&this.redrawActiveSignal(),this.drawMinMaxPrices(),e.drawActiveDrawingObjects(!0),e.updatePositionsAndRedraw(),e.chartData.techChart.autoSaveParams(),e=null}},ne.prototype.rectChart_mouseOver=function(t,e){ie&&ie.pressed||e.techChart.configuration.isHideCrossHair||(e.isShowCrosshair=!0)},ne.prototype.rectChart_mouseOut=function(t,e){if(!ie||!ie.pressed){switch(t.preventDefault(),e.isShowCrosshair=!1,e.chartData.state){case"zoomIn":e.rectChart_mouseOut_zoomIn(t);break;case"drawingBrush":e.rectChart_mouseOut_Brush(t);break;default:e.rectChart_mouseOut_default(t,e)}e=null}},ne.prototype.rectChart_mouseOut_zoomIn=function(t){t.preventDefault()},ne.prototype.rectChart_mouseOut_Brush=function(){if(this.rectChart_mouseUp_drawingBrush(),this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn(),this.chartData.editDrawingObject){if(0===this.chartData.editDrawingObject.circles.length)return;this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null}},ne.prototype.rectChart_mouseOut_default=function(t,e){t.preventDefault(),t.target.classList.remove("moveX"),t.target.classList.remove("moveY"),e.isPressed=!1,e.clearInfo(),e.drawActiveDrawingObjects(),e.setResizeOscillatorOff(),e.crosshair.text&&(e.crosshair.text.spanDate.parentNode.style.display="none",e.crosshair.text.spanValue.parentNode.style.display="none"),this.navButtons.classList.toggle("tch-active",!1),e=null},ne.prototype.rectChart_contextMenu=function(t,e){t.preventDefault();var a=!1;if(e.chartData.editDrawingObject&&("drawingBrush"===e.chartData.state?(e.rectChart_mouseUp_drawingBrush(),a=!0):e.chartData.editDrawingObject.drawingStage.current<=e.chartData.editDrawingObject.drawingStage.max&&(e.removeDrawingObjectsOtherCharts(e.chartData.editDrawingObject),e.redrawAllDrawingObjectsOtherCharts(),e.chartData.editDrawingObject.remove(),a=!0),a))return e.chartData.state="default",e.chartData.techChart.deactivateMenuTypeAll(),e.redrawDrawingObjects(),void e.redrawActiveDrawingObjects();var i=Math.floor(t.clientX-e.parentRect.left),r=Math.floor(t.clientY-e.parentRect.top);e.curX=i,e.curY=r,this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),e.chartData.editDrawingObject=null),this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject.draw(this.canvasDrawingContext),e.chartData.activeDrawingObject=null);for(var s=e.getSettingsPanelContainer(),n=!e.chartData.drawingObjects.length,o=0;o<e.chartData.drawingObjects.length;o++){if(e.chartData.drawingObjects[o].isFocused(e.curX,e.curY)){e.chartData.drawingObjects[o].state="edit",e.chartData.editDrawingObject=e.chartData.drawingObjects[o],e.redrawDrawingObjects(),e.drawActiveDrawingObjects(!0),e.chartData.editDrawingObject.fillSettingsPanel(s),s.classList.toggle("tch-hidden",!1),s.offsetWidth+i>e.parentRect.width&&(s.style.left=e.parentRect.width-s.offsetWidth+"px"),s.offsetHeight+r>e.parentRect.height&&(s.style.top=parseInt(s.style.top,10)-s.offsetHeight+"px"),n=!1;break}e.chartData.drawingObjects[o]instanceof ot?(e.chartData.drawingObjects[o].remove(),!1===this.chartData.isStayDrawingMode&&(this.chartData.techChart.setState("default"),this.chartData.techChart.setRouleteBtn("Off")),this.redrawDrawingObjects(),this.redrawInfo()):(e.chartData.drawingObjects[o].state="normal",n=!0)}n&&this.techChart.configuration.isShowChartContextMenu&&this.drawChartContextMenu(s),e=null},ne.prototype.rectChart_mouseDown=function(t,e){var a=Math.floor(t.clientX-e.parentRect.left),i=Math.floor(t.clientY-e.parentRect.top);e.setActiveChart(),t.preventDefault(),e.curX=a,e.curY=i,1===t.which||0===t.which?("default"!==e.chartData.state&&!1===e.chartData.techChart.charts[0].chartData.isShowDrawingObjects&&e.chartData.techChart.hiddeAllDrawing(),e["rectChart_mouseDown_"+(e.chartData.state?e.chartData.state:"default")](t)):3===t.which&&t.preventDefault(),e=null},ne.prototype.rectChart_touchStart=function(t,e){if(t.changedTouches.length>1)return!1;t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY,t.radiusX=t.changedTouches[0].radiusX,t.radiusY=t.changedTouches[0].radiusY;var a=Math.floor(t.clientX-e.parentRect.left),i=Math.floor(t.clientY-e.parentRect.top);e.curX=a,e.curY=i,null===e.tappedClickTimer?e.tappedClickTimer=setTimeout((function(){e.tappedClickTimer=null,e.rectChart_mouseMove(t,e),e.rectChart_mouseDown(t,e),e.redrawInfo()}),200):(clearTimeout(e.tappedClickTimer),e.tappedClickTimer=null,e.rectChart_dblclick(t,e)),t.preventDefault()},ne.prototype.rectChart_touchMove=function(t,e){t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY,t.isNoLimitedMove=!0,e.rectChart_mouseMove(t,e)},ne.prototype.rectChart_touchEnd=function(t,e){e.rectChart_mouseUp(t,e)},ne.prototype.rectChart_mouseDown_drawingAnchoredText=function(t){this.rectChart_mouseDown_drawingTextObject(t,"AnchoredText")},ne.prototype.rectChart_mouseUp_drawingAnchoredText=function(t){this.rectChart_mouseUp_drawingText(t)},ne.prototype.rectChart_mouseDown_drawingText=function(t){this.rectChart_mouseDown_drawingTextObject(t,"Text")},ne.prototype.rectChart_mouseDown_drawingFlag=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"Flag"),this.draw()},ne.prototype.rectChart_mouseUp_drawingFlag=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingText=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingTextObject=function(t,e){this.rectChart_mouseDown_drawingOnePointObject(t,e),this.draw();var a=this.getSettingsPanelContainer();a.closeCounter=1,this.chartData.editDrawingObject.createLineSettingsPanel(a)},ne.prototype.rectChart_mouseDown_drawingArrowMarkLeft=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"ArrowMarkLeft")},ne.prototype.rectChart_mouseDown_drawingArrowMarkRight=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"ArrowMarkRight")},ne.prototype.rectChart_mouseDown_drawingArrowMarkUp=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"ArrowMarkUp")},ne.prototype.rectChart_mouseDown_drawingArrowMarkDown=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"ArrowMarkDown")},ne.prototype.rectChart_mouseUp_drawingArrowMarkLeft=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingArrowMarkRight=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingArrowMarkUp=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingArrowMarkDown=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingBrush=function(){this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.completeFigure(),this.completeFigureOtherCharts(this.chartData.editDrawingObject.id),this.redrawInfo(),this.drawActiveDrawingObjects(!0),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id))},ne.prototype.rectChart_mouseDown_drawingNote=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"Note");var e=this.getSettingsPanelContainer();e.closeCounter=1,this.chartData.editDrawingObject.createLineSettingsPanel(e)},ne.prototype.rectChart_mouseUp_drawingNote=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingAnchoredNote=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"AnchoredNote");var e=this.getSettingsPanelContainer();e.closeCounter=1,this.chartData.editDrawingObject.createLineSettingsPanel(e)},ne.prototype.rectChart_mouseUp_drawingAnchoredNote=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingRectangle=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Rectangle")},ne.prototype.rectChart_mouseUp_drawingRectangle=function(){},ne.prototype.rectChart_mouseDown_drawingPolyline=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Polyline")},ne.prototype.rectChart_mouseUp_drawingPolyline=function(){},ne.prototype.rectChart_mouseDown_drawingRotatedRect=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"RotatedRect")},ne.prototype.rectChart_mouseDown_drawingFlatTopBottom=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"FlatTopBottom"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingParallelChannel=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"ParallelChannel"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingDisjointAngle=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"DisjointAngle"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingTrendAngle=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"TrendAngle"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingRay=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Ray"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingTrendLine=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"TrendLine"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingArrow=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Arrow"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingArc=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Arc"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingEllipse=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Ellipse"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingTriangle=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Triangle")},ne.prototype.rectChart_mouseDown_drawingRoulete=function(t){var e=this.getDrawingObjectIndexByType("Roulete");e>-1&&this.chartData.drawingObjects[e].drawingStage.current>=this.chartData.drawingObjects[e].drawingStage.max?(this.chartData.state="default",this.chartData.drawingObjects[e].remove(),this.redrawInfo(),this.rectChart_mouseDown_default(t)):this.rectChart_mouseDown_drawingPointsObject(t,"Roulete")},ne.prototype.rectChart_mouseUp_drawingRoulete=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingTriangle=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingRectangle=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseDown_drawingCurve=function(t){this.rectChart_mouseDown_drawingPointsObject(t,"Curve"),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingCurve=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingArrow=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingArc=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingEllipse=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingRotatedRect=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingRay=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingHorizontalRay=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingHorizontalLine=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingVerticalLine=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingTrendLine=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingTrendAngle=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingFlatTopBottom=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingDisjointAngle=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.rectChart_mouseUp_drawingParallelChannel=function(){this.redrawInfo(),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)},ne.prototype.toggleDisabledClasses=function(t){var e=[".tch-zoomin-btn",".tch-zoomout-btn",".tch-zoomzero-btn",".tch-show-hide-drawing-btn",".tch-roulete-drawing-btn",".tch-dropdown-container-periods",".tch-chart-type-container",".tch-indicator-container",".tch-settings-button",".tch-tab-btn"];this.techChart.configuration.modules.headerButtons.searchQuotationButton&&e.push(".tch-search");for(var a=0;a<e.length;a++){var i=this.chartData.techChart.parent.querySelector(e[a]);if(".tch-search"===e[a])i.disabled=t,i.classList.toggle("tch-disabled",t),i.parentElement.classList.toggle("tch-disabled",t);else if(".tch-dropdown-container-periods"===e[a]||".tch-chart-type-container"===e[a]||".tch-indicator-container"===e[a])i.classList.toggle("tch-disabled",t),i.childNodes[0].classList.toggle("tch-disabled",t),i.childNodes[1].classList.toggle("tch-disabled",t);else if(".tch-tab-btn"===e[a]&&Object.keys(this.chartData.techChart.groupCharts).length!==this.chartData.techChart.maxTabsQuantity)i.classList.toggle("tch-tab-btn-disable",t),i.parentElement.classList.toggle("tch-tab-btn-disable",t);else{if(i.classList.contains("tch-roulete-drawing-btn")&&i.classList.contains("tch-active"))continue;i.classList.toggle("tch-disabled",t),i.parentElement.classList.toggle("tch-disabled",t)}}for(var r=this.chartData.techChart.parent.querySelectorAll(".tch-chart-tab"),s=0;s<r.length;s++)r[s].classList.toggle("tch-disabled",t)},ne.prototype.checkDisabledStates=function(t,e){var a=this.chartData.editDrawingObject;"drawingRoulete"===t&&a.drawingStage.max==e-1?this.toggleDisabledClasses(!1):"edit"===t&&1==e?this.toggleDisabledClasses(!0):("drawing"!==t.substring(0,7)||a.drawingStage.max!=e-1||this.chartData.isStayDrawingMode)&&(a.drawingStage.max!=e-1||this.chartData.isStayDrawingMode)||this.toggleDisabledClasses(!1)},ne.prototype.rectChart_mouseDown_drawingPointsObject=function(t,e){if(this.chartData.editDrawingObject)this.chartData.editDrawingObject.drawingStage.current<=this.chartData.editDrawingObject.drawingStage.max?(this.chartData.editDrawingObject.updateLastPoint({d:this.crosshair.params.dateSeconds,v:this.crosshair.params.value},{x:this.crosshair.params.x,y:this.crosshair.params.y}),this.chartData.editDrawingObject.drawingStage.current++,this.chartData.editDrawingObject.drawingStage.current<=this.chartData.editDrawingObject.drawingStage.max?this.chartData.editDrawingObject.appendPoint({d:this.crosshair.params.dateSeconds,v:this.crosshair.params.value},{x:this.crosshair.params.x,y:this.crosshair.params.y,active:!0}):(this.chartData.state=this.chartData.isStayDrawingMode?this.chartData.state:"default",this.chartData.editDrawingObject.points[this.chartData.editDrawingObject.points.length-1].active=!1,this.redrawInfo()),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)):(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id),this.chartData.editDrawingObject=null,this.redrawInfo(),this.rectChart_mouseDown_drawingPointsObject(t,e));else{this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn();var a={};a.points=[{x:this.crosshair.params.x,y:this.crosshair.params.y},{x:this.crosshair.params.x,y:this.crosshair.params.y,active:!0}];var i=this.crosshair.params.dateSeconds,r=this.crosshair.params.value;a.data=[{d:i,v:r},{d:i,v:r}];var s=pt.createDrawingObjectByType(e,[this.chartData,a]);s.state="edit",this.chartData.editDrawingObject=s,this.chartData.drawingObjects.push(s),this.chartData.editDrawingObject.drawingStage.current++,this.createDrawingObjectOtherCharts(e,s.id,a),this.drawActiveDrawingObjectsOtherCharts(s.id)}"default"===this.chartData.state&&this.chartData.techChart.deactivateMenuTypeAll()},ne.prototype.rectChart_mouseDown_drawingBrush=function(){if(this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn(),this.chartData.editDrawingObject){if(0==this.chartData.editDrawingObject.circles.length)return;this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null}var t={};t.points=[{x:this.crosshair.params.x,y:this.crosshair.params.y},{x:this.crosshair.params.x,y:this.crosshair.params.y,active:!0}];var e=this.crosshair.params.dateSeconds,a=this.crosshair.params.value;t.data=[{d:e,v:a},{d:e,v:a}];var i=new K(this.chartData,t);i.state="edit",this.chartData.editDrawingObject=i,this.chartData.drawingObjects.push(i),this.chartData.editDrawingObject.drawingStage.current++,this.createDrawingObjectOtherCharts("Brush",i.id,t),this.drawActiveDrawingObjectsOtherCharts(i.id)},ne.prototype.rectChart_mouseDown_drawingHorizontalLine=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"HorizontalLine")},ne.prototype.rectChart_mouseDown_drawingHorizontalRay=function(t){this.rectChart_mouseDown_drawingOnePointObject(t,"HorizontalRay")},ne.prototype.rectChart_mouseDown_drawingOnePointObject=function(t,e){this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn(),this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null);var a={};a.points=[{x:this.crosshair.params.x,y:this.crosshair.params.y},{x:this.crosshair.params.x,y:this.crosshair.params.y,active:!0}];var i=this.crosshair.params.dateSeconds,r=this.crosshair.params.value;a.data=[{d:i,v:r},{d:i,v:r}];var s=pt.createDrawingObjectByType(e,[this.chartData,a]);s.state="edit",this.chartData.editDrawingObject=s,this.chartData.drawingObjects.push(s),this.createDrawingObjectOtherCharts(e,s.id,a),this.redrawActiveDrawingObjects(!0),this.drawActiveDrawingObjectsOtherCharts(s.id),this.chartData.state=this.chartData.isStayDrawingMode?this.chartData.state:"default","default"===this.chartData.state&&this.chartData.techChart.deactivateMenuTypeAll()},ne.prototype.rectChart_mouseDown_drawingVerticalLine=function(){this.chartData.isDrawingObjectsLocked&&this.chartData.techChart.switchLockBtn(),this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null);var t={};t.points=[{x:this.crosshair.params.x,y:0},{x:this.crosshair.params.x,y:this.h}];var e=this.crosshair.params.dateSeconds;t.data=[{d:e}];var a=new F(this.chartData,t);a.state="edit",this.chartData.editDrawingObject=a,this.chartData.drawingObjects.push(a),this.createDrawingObjectOtherCharts("VerticalLine",a.id,t),this.redrawActiveDrawingObjects(!0),this.drawActiveDrawingObjectsOtherCharts(a.id),this.chartData.state=this.chartData.isStayDrawingMode?this.chartData.state:"default","default"===this.chartData.state&&this.chartData.techChart.deactivateMenuTypeAll()},ne.prototype.createDrawingObjectOtherCharts=function(t,e,a){for(var i=this.chartData.techChart.charts,r=0;r<i.length;r++)if(r!==this.chartData.techChart.activeChartIndex&&i[r].chartData.pair.ID===this.chartData.pair.ID){var s=pt.createDrawingObjectByType(t,[i[r].chartData,a]);i[r].chartData.drawingObjects.push(s),s.id=e}},ne.prototype.rectChart_mouseDown_zoomIn=function(){this.curY>this.h||this.curX>this.w||(this.chartData.zoomData.startX=this.curX,this.chartData.zoomData.startY=this.curY,this.isPressed=!0)},ne.prototype.rectChart_mouseDown_default=function(t){if(this.curX<this.w&&this.curY<this.parentRect.height-this.offY){if(!this.chartData.isDrawingObjectsLocked){var e=!1;if(this.chartData.editDrawingObject){if(this.chartData.editDrawingObject.isFocused(this.curX,this.curY))return this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject.isPressed=!1,this.chartData.activeDrawingObject=null),this.chartData.editDrawingObject.isPressed=!0,this.chartData.editDrawingObject.state="edit",void this.redrawDrawingObjects();this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject=null,e=!0}if(this.chartData.activeDrawingObject){if(this.chartData.activeDrawingObject.isFocused(this.curX,this.curY))return this.chartData.activeDrawingObject.state="edit",this.chartData.editDrawingObject=this.chartData.activeDrawingObject,this.chartData.editDrawingObject.isPressed=!0,this.chartData.activeDrawingObject=null,this.redrawDrawingObjects(),void this.drawActiveDrawingObjects(!0);this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject=null,e=!0}for(var a=0;a<this.chartData.drawingObjects.length;a++)if(this.chartData.drawingObjects[a].isFocused(this.curX,this.curY))return this.chartData.drawingObjects[a].state="edit",this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal"),this.chartData.editDrawingObject=this.chartData.drawingObjects[a],this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject=null),e=!0,void this.redrawDrawingObjects();e&&(this.redrawInfo(),this.redrawDrawingObjects())}if(this.isPressed=!0,this.chartData.indicators.length){var i;for(a=0;a<this.chartData.indicators.length;a++)if("oscillator"===this.chartData.indicators[a].type){i=this.oscillatorCharts[this.chartData.indicators[a].id].top,Math.abs(this.curY-i)<this.resizeEdgeHeight&&(this.isResizeOscillator=!0,this.oscillatorCharts[this.chartData.indicators[a].id].parent.classList.toggle("tch-chart-resized-top",!0),a>0&&"oscillator"===this.chartData.indicators[a-1].type&&this.oscillatorCharts[this.chartData.indicators[a-1].id].parent.classList.toggle("tch-chart-resized-bottom",!0));var r=this.oscillatorCharts[this.chartData.indicators[a].id].h;Math.abs(this.curY-(i+r))<this.resizeEdgeHeight&&(this.isResizeOscillator=!0,this.oscillatorCharts[this.chartData.indicators[a].id].parent.classList.toggle("tch-chart-resized-bottom",!0))}if(this.isResizeOscillator)return void(Math.abs(this.curY-this.h)&&this.parent.classList.toggle("tch-chart-resized-bottom",!0))}this.chartData.options.Chart.autoScale?t.target.classList.add("moveX"):(t.target.classList.add("moveX"),t.target.classList.add("moveY"))}else!this.techChart.configuration.isForceAutoScale&&this.curX>this.w&&this.curY<this.parentRect.height-this.offY&&(this.chartData.options.Chart.autoScale=!1,this.isSetScaleY=!0,this.isPressed=!0,t.target.classList.add("moveY"));this.chartData.techChart.closePanelSettingIndicator(t)},ne.prototype.rectChart_mouseUp=function(t,e){t.preventDefault(),1!==t.which&&0!==t.which||(e["rectChart_mouseUp_"+(e.chartData.state?e.chartData.state:"default")](t),e.mouseUpOtherCharts(e)),e.chartData.techChart.autoSaveParams(),e=null},ne.prototype.mouseUpOtherCharts=function(t){for(var e=t.chartData.techChart.charts,a=0;a<e.length;a++)a===t.chartData.techChart.activeChartIndex&&"zoomIn"==e[a].chartData.state&&e[a].rectChart_mouseUp_zoomIn()},ne.prototype.setResizeOscillatorOff=function(){if(this.isResizeOscillator){var t=this.parent.querySelectorAll(".tch-chart-resized-top");t&&t.length&&ne.removeClass(t,"tch-chart-resized-top");var e=this.parent.querySelectorAll(".tch-chart-resized-bottom");e&&e.length&&ne.removeClass(e,"tch-chart-resized-bottom"),this.parent.classList.toggle("tch-chart-resized-top",!1),this.parent.classList.toggle("tch-chart-resized-bottom",!1),this.isResizeOscillator=!1}},ne.prototype.rectChart_mouseUp_default=function(t){t.target.classList.remove("moveX"),t.target.classList.remove("moveY"),this.isPressed=!1,this.isSetScaleY=!1,this.setResizeOscillatorOff(),this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.isPressed?(this.chartData.editDrawingObject.isPressed=!1,this.chartData.editDrawingObject.updateValues()):(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject.draw(this.canvasDrawingContext),this.chartData.editDrawingObject=null),this.redrawInfo()),this.navButtonStartContainer.onmouseup(t)},ne.prototype.rectChart_mouseUp_zoomIn=function(){if(this.isPressed){this.chartData.techChart.parent.querySelector(".tch-zoomin-btn").classList.toggle("tch-active"),this.chartData.zoomData.endX=this.curX,this.chartData.zoomData.endY=this.curY;var t,e=!1;this.scaleZoomDataQuantCandles(this.chartData.zoomData,5),this.chartData.zoomData.startY!==this.chartData.zoomData.endY&&this.showData.length<=10&&(e=!0),e||(t={maxValue:this.chartData.scaleParams.maxB,minValue:this.chartData.scaleParams.minB,startDate:this.chartData.startDateSeconds,candleWidth:this.chartData.candleWidth,startX:this.w-parseFloat(this.showData[0].x)},this.chartData.zoomSteps.push(t),this.chartData.zoomData.click?this.zoomX(-100,2):this.zoomArea(this.chartData.zoomData)),this.chartData.techChart.parent.querySelector(".tch-zoomout-btn").disabled=!1,this.chartData.techChart.parent.querySelector(".tch-zoomzero-btn").disabled=!1,this.isPressed=!1,this.zoomSelector.style.display="none",this.chartData.state="default",this.chartData.techChart.autoSaveParams()}},ne.prototype.rectChart_mouseMove_drawingPointsObject=function(){if(this.chartData.editDrawingObject&&this.chartData.editDrawingObject.drawingStage.current<=this.chartData.editDrawingObject.drawingStage.max){var t=this.clearInfo();this.drawCrosshair(t,t.canvas.height,this.techChart.configuration.modules.headerButtons.createPipsButton),this.chartData.editDrawingObject.moveTo(this.curX,this.curY,this.crosshair.params),this.drawActiveDrawingObjects(!0),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)}},ne.prototype.rectChart_mouseMove_drawingBrushObject=function(){if(this.chartData.editDrawingObject&&1==this.chartData.editDrawingObject.drawingStage.current){var t=this.clearInfo();this.drawCrosshair(t,t.canvas.height,this.techChart.configuration.modules.headerButtons.createPipsButton),this.chartData.editDrawingObject.moveTo(this.curX,this.curY,this.crosshair.params),this.drawActiveDrawingObjects(!0),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id)}},ne.prototype.rectChart_mouseMove_zoomIn=function(){if(this.isPressed){var t=this.chartData.zoomData.startX,e=this.chartData.zoomData.startY,a=this.curX,i=this.curY;t>this.w-8&&(t=this.w-8),e>this.h&&(e=this.h),a>this.w-8&&(a=this.w-8),i>this.h&&(i=this.h);var r=Math.abs(a-t),s=Math.abs(i-e);this.zoomSelector.style.left=a-t<0?a+"px":t+"px",this.zoomSelector.style.top=i-e<0?i+"px":e+"px",this.zoomSelector.style.width=r+"px",this.zoomSelector.style.height=s+"px",this.zoomSelector.style.display="block"}},ne.prototype.processMoving=function(t,e){if(this.isSetScaleY){if(Math.abs(e)<1)return;var a=e>0?-15:15;this.chartData.options.Chart.autoScale=!1;var i=parseFloat(this.chartData.scaleParams.minB),r=parseFloat(this.chartData.scaleParams.maxB),s=a*this.chartData.scaleParams.deltaY;this.chartData.scaleParams.minB=i-s,this.chartData.scaleParams.maxB=r+s,this.chartData.scaleParams.deltaY=(this.chartData.scaleParams.maxB-this.chartData.scaleParams.minB)/this.h,this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),this.updateDrawingObjectsPixels(),this.resizeNewsBubbles(),this.resizeEventsBubbles(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.clearInfo(),this.drawActiveDrawingObjects()}else{if(this.chartData.options.Chart.autoScale){if(!this.moveChartX(this,t))return}else if(!this.moveChartY(this,e)&!this.moveChartX(this,t))return;this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.updateDrawingObjectsPixels(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue()}this.activeSignal&&this.redrawActiveSignal(),this.drawMinMaxPrices()},ne.prototype.rectChart_mouseMove_default=function(t,e,a,i,r){if(t.preventDefault(),t.stopPropagation(),this.isPressed){this.moving.totalX+=e,this.moving.totalY+=a;var s=this;this.movingTimeout||(e=this.moving.totalX,a=this.moving.totalY,s.moving.totalX=0,s.moving.totalY=0,this.movingTimeout=setTimeout((function(){s.processMoving(e,a),s.movingTimeout=null,s=null}),5))}else if(this.chartData.isDrawingObjectsLocked)this.focusNewsBubbles(i,r),this.focusEventsBubbles(i,r),this.navButtons.onmousemove();else if(this.chartData.editDrawingObject&&this.chartData.editDrawingObject.isPressed){var n=this.crosshair.params.x,o=this.crosshair.params.y,h=this.crosshair.params.dateSeconds,c=this.crosshair.params.value;this.curX=i,this.curY=r;var l=this.clearInfo();this.drawCrosshair(l,l.canvas.height,this.techChart.configuration.modules.headerButtons.createPipsButton),e=n-this.crosshair.params.x,a=o-this.crosshair.params.y;var A=h-this.crosshair.params.dateSeconds,d=c-this.crosshair.params.value;if(Math.abs(e)<1&&Math.abs(a)<1)return;this.chartData.editDrawingObject.isObjectEdit?this.chartData.editDrawingObject.shiftTo(e,a,this.crosshair.params,A,d):(this.chartData.editDrawingObject.moveTo(this.curX,this.curY,this.crosshair.params),this.drawActiveDrawingObjects(!0)),this.updateDrawingObjectsOtherChart(this.chartData.editDrawingObject),this.drawActiveDrawingObjectsOtherCharts(this.chartData.editDrawingObject.id),this.drawActiveDrawingObjects()}else{var p=!1,u=null,g=null,f=!1;this.chartData.editDrawingObject&&(u=this.chartData.editDrawingObject.isObjectEdit,g=this.chartData.editDrawingObject.isChanged);for(var w=0;w<this.chartData.drawingObjects.length;w++){if(this.chartData.drawingObjects[w].isFocused(this.curX,this.curY)){"edit"===this.chartData.drawingObjects[w].state||"active"===this.chartData.drawingObjects[w].state||(this.chartData.drawingObjects[w].state="active",this.chartData.activeDrawingObject=this.chartData.drawingObjects[w]),p=!0,this.chartData.editDrawingObject&&this.chartData.editDrawingObject.isChanged!==g&&(f=!0);break}"active"===this.chartData.drawingObjects[w].state?(this.chartData.drawingObjects[w].state="normal",this.chartData.activeDrawingObject=null,this.chartData.drawingObjects[w].draw(this.canvasDrawingContext),p=!0):"edit"===this.chartData.drawingObjects[w].state&&(p=!0),!this.chartData.editDrawingObject||this.chartData.editDrawingObject.isChanged===g&&u===this.chartData.editDrawingObject.isObjectEdit||(f=!0)}f&&this.drawActiveDrawingObjects(!0),this.focusNewsBubbles(i,r),this.focusEventsBubbles(i,r),p?(this.redrawInfo(),this.redrawDrawingObjects()):this.navButtons.onmousemove()}var v;if(this.chartData.indicators.length)for(w=0;w<this.chartData.indicators.length;w++)if("oscillator"===this.chartData.indicators[w].type){if(v=this.oscillatorCharts[this.chartData.indicators[w].id].top,Math.abs(this.curY-v)<this.resizeEdgeHeight){t.target.classList.toggle("tch-cursor-arrow",!1),t.target.classList.toggle("moveY",!0);break}t.target.classList.toggle("moveY",!1),t.target.classList.toggle("tch-cursor-arrow",!0)}},ne.prototype.rectChart_mouseMove=function(t,e){if(!ie||!ie.pressed){t.preventDefault();var a=t.offsetX,i=t.offsetY,r=e.curX-a,s=e.curY-i;if(e.isResizeOscillator)e.resizeOscillatorOnMouseMove(e.curY,s);else switch(e.chartData.state){case"default":e.rectChart_mouseMove_default(t,r,s,a,i);break;case"drawingBrush":e.rectChart_mouseMove_drawingBrushObject(t,r,s,a,i);break;case"zoomIn":e.rectChart_mouseMove_zoomIn(t,e);break;default:e.rectChart_mouseMove_drawingPointsObject(t,r,s,a,i)}e.curX=a,e.curY=i,e.moveCrosshairXY(e.showData,e.curX,i,e.w,e.h),e.redrawInfo(),e=null}},ne.prototype.resize=function(){var t=(parseInt(this.parentRect.width,10)-this.offX)/2;this.showData&&this.showData.length&&this.showData[0].x<t&&(this.chartData.startX=0),this.init()},ne.prototype.horizontalArrowEvent=function(t){this.moveChartX(this,t)&&(this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.updateDrawingObjectsPixels(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.redrawInfo())},ne.prototype.verticalArrowEvent=function(t){this.chartData.options.Chart.autoScale=!1,this.moveChartY(this,t,!0),this.draw(this.showData,this.h),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawChartBorder(),this.drawCurrentValue(),this.redrawInfo()},ne.prototype.addSettingsChartEvent=function(t){var e=this;t&&(t.querySelector(".tch-line-settings-panel").querySelector(".tch-settings-chart-button").onclick=function(t){t.stopPropagation(),t.preventDefault();var a=e.parent.parentNode.parentElement.querySelector(".tch-settings-button");e.chartData.techChart.dropDownClick(a,void 0,t),e.chartData.techChart.fillChartSettingsPanel()})},ne.prototype.redraw=function(){this.selectedData=this.selectDataToShow(this.chartData.data[this.chartData.typeData],this.chartData.startDateSeconds,this.chartData.spacing,this.w),this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding,this.chartData.spacing,this.w,this.h,this.chartData.precission,this.chartData.startX,null),this.crosshair.showData=this.showData,this.showData.length&&(this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission,this.offY),this.timeAxis=this.getTimeAxis(this.showData,this.w,this.parentRect.height-this.offY,this.chartData.period,this.chartData.timeMode,this.chartData.localization),this.getOscillatorChartsAxis(),this.updateDrawingObjectsPixels(),this.drawDataPanel(this.showData[0]),this.updateIndicatorsDataPanel(this.showData[0]&&this.showData[0].date),this.draw(this.showData,this.h),this.drawActiveDrawingObjects(),this.activeSignal&&this.redrawActiveSignal(),this.clearGrid(),this.drawMinMaxPrices(),this.drawTimeAxis(this.timeAxis),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrent(this.chartData.currentValue))},ne.prototype.redrawActiveDrawingObjects=function(t){this.clearCanvas(this.canvasDrawingActive),this.drawActiveDrawingObjects(t)},ne.prototype.drawChart=function(t,e){if(!t||0===t.length||isNaN(e))return!1;var a=this.canvasDataNormalContext,i=this.canvasDataPixelatedContext;if(!a||!i)return!1;var s=this.canvasDataNormalContext.canvas,n=this.canvasDataPixelatedContext.canvas;return r.clearRect(s,null,0,0,s.width,s.height),r.clearRect(n,null,0,0,n.width,n.height),this.chartData.indicators&&this.chartData.indicators.length&&this.drawIndicators(),this.redrawDrawingObjects(),!0},ne.prototype.setBackgroundColor=function(t){this.chartData.colors.Chart.backgroundColor=t,this.canvasGrid.style.backgroundColor=this.chartData.colors.Chart.backgroundColor},ne.prototype.setChartThemes=function(t){var e=this,a=this.chartData.themes&&this.chartData.themes[t.toLowerCase()];a&&(this.chartData.colors=this.cloneObject(a),this.chartData.options.Chart.listThemes.forEach((function(t){return e.chartData.techChart.parent.classList.toggle(t,!1)})),this.chartData.techChart.parent.classList.add(t),this.chartData.chart.init(!0))},ne.prototype.createShowData=function(){this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding,this.chartData.spacing,this.w,this.h,this.chartData.precission,this.chartData.startX,null)},ne.prototype.isPositionValid=function(){return parseFloat(this.showData[0].x)<this.w-this.chartData.rightPadding+this.chartData.spacing},ne.prototype.getElementsByXRange=function(t,e,a){if(!t||0===t.length||isNaN(e)||isNaN(a))return[];var i=this.binarySearhElementWithField(t,e,"x"),r=this.binarySearhElementWithField(t,a,"x");return t.slice(r,i+1)},ne.prototype.binarySearhElementWithField=function(t,e,a){for(var i,r,s=t.length-1,n=0;s>n;)if((r=t[i=(s+n)/2|0])[a]>e)n=i+1;else{if(!(r[a]<e))return i;s=i-1}return t[s]&&t[s][a]>e&&s!==t.length-1&&(s+=1),s},ne.prototype.detectBrowser=function(t,e){return-1!==t.navigator.userAgent.indexOf("Opera")||-1!==t.navigator.userAgent.indexOf("OPR")?"opera":-1!==t.navigator.userAgent.indexOf("MSIE")||e.documentMode?"ie":t.StyleMedia?"edge":-1!==t.navigator.userAgent.indexOf("Chrome")?"chrome":-1!==t.navigator.userAgent.indexOf("Safari")?"safari":-1!==t.navigator.userAgent.indexOf("Firefox")?"firefox":"unknown"},ne.countDigits=function(t){var e=(""+t).replace(",",".").split(".");return e.length>1?e[1].length:0},ne.prototype.checkHasEnoughData=function(t,e){return this.getExtraDataNumb(t,e)<=0},ne.prototype.getExtraDataNumb=function(t,e){var a=this.selectDataToShow(t.data[t.typeData],t.startDateSeconds,t.spacing,e);return this.pxToDataNumb(Math.ceil((e-t.rightPadding)/t.spacing))-a.length},ne.prototype.pxToDataNumb=function(t){return!t||isNaN(t)?0:t},ne.prototype.selectDataToShow=function(t,e,a,i){if(!t||0===t.length||isNaN(e)||isNaN(a)||isNaN(i))return[];for(var r=[],s=Math.ceil(i/a),n=0;n<t.length&&r.length<=s;n++)if(t[n]){if(t[n].date>e)continue;r.push(t[n])}return r},ne.prototype.getCoordinateY=function(t,e,a,i){if(t=parseFloat(t),e=parseFloat(e),a=parseFloat(a),i=parseFloat(i),!(isNaN(t)||isNaN(e)||isNaN(a)||isNaN(i)||0===i))return parseFloat(e-(t-a)/i).toFixed(1)},ne.prototype.drawChartBorder=function(){var t=r.getPosition(this.parentRect.height-this.offY,2);r.drawLine(null,this.canvasGridContext,0,t,Math.round(this.w-7),t,this.chartData.colors.Chart.colorScalesLines,[],2),t=r.getPosition(this.w-7,2),r.drawLine(null,this.canvasGridContext,t,-7,t,Math.round(this.parentRect.height-this.offY),this.chartData.colors.Chart.colorScalesLines,[],2),this.drawChartOscillatorsBorder(2)},ne.prototype.clearMinMaxPrices=function(){var t=this.canvasMinMaxPricesContext;this.clearCanvas(t.canvas,t)},ne.prototype.drawMinMaxPrices=function(){if(this.chartData.isMinMaxPricesMarksEnabled&&this.chartData.options.Chart.minMaxPricesMarks&&this.chartData.options.Chart.minMaxPricesMarks.isShow){this.clearMinMaxPrices();var t=this.canvasMinMaxPricesContext,e=this.chartData.options.Chart.minMaxPricesMarks.mode,a=this.getMinMaxPricesPosition({showData:this.showData,mode:e}),i=a.max,s=a.min;if(!i.value||!s.value)return;var n=i.x,o=i.y,h=i.value.toFixed(this.chartData.precission),c=s.x,l=s.y,A=s.value.toFixed(this.chartData.precission);if(!n&&0!==n||!o&&0!==o||!c&&0!==c||!l&&0!==l)return;var d=r.measureText(t,"".concat(this.chartData.options.Chart.scalesFontSize,"px ").concat(this.chartData.options.Chart.labelFont),h),p=r.measureText(t,"".concat(this.chartData.options.Chart.scalesFontSize,"px ").concat(this.chartData.options.Chart.labelFont),A),u=o,g=l,f=n-d.width-35>0?n-d.width-35:n+35,w=c-p.width-35>0?c-p.width-35:c+35,v=n-d.width-35>0?n-32:n+32,y=c-p.width-35>0?c-32:c+32,m=n-d.width-35>0?n-2:n+2,B=c-p.width-35>0?c-2:c+2;r.drawText(null,t,f,u+4,h,"".concat(this.chartData.options.Chart.scalesFontSize,"px ").concat(this.chartData.options.Chart.labelFont),this.chartData.colors.Chart.colorMinMaxPricesText),r.drawArrow(null,t,v,o,m,o,this.chartData.colors.Chart.colorMinMaxPricesFillArrow,this.chartData.colors.Chart.colorMinMaxPricesStrokeArrow,[],1,1,!0),r.drawText(null,t,w,g+4,A,"".concat(this.chartData.options.Chart.scalesFontSize,"px ").concat(this.chartData.options.Chart.labelFont),this.chartData.colors.Chart.colorMinMaxPricesText),r.drawArrow(null,t,y,l,B,l,this.chartData.colors.Chart.colorMinMaxPricesFillArrow,this.chartData.colors.Chart.colorMinMaxPricesStrokeArrow,[],1,1,!0)}},ne.prototype.drawChartOscillatorsBorder=function(t){var e,a;for(var i in this.oscillatorCharts)this.oscillatorCharts.hasOwnProperty(i)&&(a=this.oscillatorCharts[i].top,e=r.getPosition(a,t),r.drawLine(null,this.canvasGridContext,0,e,Math.round(this.w-7),e,this.chartData.colors.Chart.colorScalesLines,[],t))},ne.prototype.clearGrid=function(){this.axisTextContainer.innerHTML="";var t=this.canvasGridContext,e=t.canvas;r.clearRect(null,t,0,0,e.width,e.height)},ne.prototype.clearCanvas=function(t,e){r.clearRect(null,e,0,0,t.width,t.height)},ne.prototype.clearSignals=function(){var t=this.canvasSignalsContext,e=t.canvas;this.clearCanvas(e,t)},ne.prototype.getNearestCandleIndex=function(t){if(!this.showData||0===this.showData.length)return!1;if(this.showData[0].date<=t)return 0;var e=this.binarySearhElementWithField(this.showData,t,"date");return this.showData[e].date<t&&(e-=1),e},ne.prototype.setChartZoomedSize=function(t,e,a){var i=t>0?this.chartData.candleWidth/t:this.chartData.candleWidth*t;if(a<0)this.chartData.zoomView=this.chartData.zoomView/e;else{if(!(a>0))return;this.chartData.zoomView=this.chartData.zoomView*e}this.chartData.candleWidth=i*this.chartData.zoomView,this.chartData.candleWidth<1?this.chartData.candleWidth=1:this.chartData.candleWidth>100&&(this.chartData.candleWidth=100),this.chartData.spacing=1.5*this.chartData.candleWidth},ne.prototype.getElementIndexByPositionX=function(t,e){if(e>t[0].x)return-1;for(var a=t.length-1,i=0;i<t.length;i++)if(parseFloat(t[i].x)<=e){a=i;break}return a},ne.prototype.redrawInfo=function(){var t=this.clearInfo();this.drawCrosshair(t,t.canvas.height,this.techChart.configuration.modules.headerButtons.createPipsButton),this.drawActiveDrawingObjects()},ne.prototype.clearInfo=function(){var t=this.canvasInfoContext,e=t.canvas;return this.clearCanvas(e,t),t},ne.prototype.getIndexByDate=function(t,e){var a=-1,i=ne.binaryIndexByDate(t,e);return null!==i&&(a=i),a},ne.binaryIndexByDate=function(t,e){for(var a,i,r=0,s=t.length-1;r<=s;)if((i=t[a=(r+s)/2|0]).date>e)r=a+1;else{if(!(i.date<e))return a;s=a-1}return null},ne.prototype.createShowDataToAdd=function(t){for(var e=[],a=0;a<t.length;a++){var i=this.createShowDataItem(t[a],this.chartData.precission);t[a].isCurrent&&(i.isCurrent=!0),e.push(i)}return e},ne.prototype.getSelectedDataByShowData=function(t){return ne.getSelectedDataByShowDataBinary(t,this.chartData.data[this.chartData.typeData])},ne.getSelectedDataByShowDataBinary=function(t,e){if(!t||0===t.length)return[];var a=t[0].date,i=ne.binaryIndexByDate(e,a),r=t[t.length-1].date,s=ne.binaryIndexByDate(e,r);return e.slice(i,s+1)},ne.prototype.getValueFromTick=function(t,e){var a=e&&"Default"!==e?e.length-1:this.chartData.precission;return parseFloat(t).toFixed(a)},ne.binaryIndexOfCandleByTime=function(t,e){for(var a,i,r=0,s=e.length-1;r<=s;)if((i=e[a=(r+s)/2|0]).date>t)r=a+1;else{if(!(i.date<t))return a;s=a-1}return null},ne.removeClass=function(t,e){for(var a=0;a<t.length;a++)t[a].classList.toggle(e,!1)},ne.prototype.drawPriceCanvas=function(t,e,a,i,r,s){this.drawLabelCanvas(t,e,a,i,r,s),this.drawPriceTextCanvas(t,e,a,i,r,s)},ne.prototype.drawLabelCanvas=function(t,e,a,i,s,n){var o=this.chartData.options.Chart.labelArrowWidth,h=+this.chartData.options.Chart.scalesFontSize+2*this.chartData.options.Chart.labelPaddingTop,c=r.getPosition(a,h),l=t.canvas.width-this.w,A=r.changeRgbaAlpha(n,1),d=ne.getLabelPoints(t.canvas.width,c,o,l,h);r.drawPolygon(null,t,d,A,null,!0)},ne.prototype.drawPriceTextCanvas=function(t,e,a,i,r,s){this.priceTextColor||(this.priceTextColor=this.getPriceTextColor(s)),this.drawLabelTextCanvas(t,e,a,this.priceTextColor)},ne.prototype.drawLabelTextCanvas=function(t,e,a,i){var s=this.chartData.options.Chart.scalesFontSize,n=this.chartData.options.Chart.labelPaddingLeft,o="".concat(s,"px ").concat(this.chartData.options.Chart.labelFont),h="ar"===this.techChart.configuration.lang?"rtl":"ltr";r.drawText(null,t,this.w+n,a+s/3,e,o,i,h)},ne.getLabelPoints=function(t,e,a,i,r){var s=e+r/2,n=s-r,o=t-i;return[[t,s],[t,n],[o,n],[o-a,e],[o,s]]},ne.getDateLabelPoints=function(t,e,a,i,r,s){var n=a+r/2>t?t:a-r/2<0?r:a+r/2,o=e-s,h=n-r;return[[a,e-s-i],[n,o],[n,e],[h,e],[h,o]]},ne.prototype.drawChartContextMenu=function(t){t&&(t.innerHTML=this.htmlSettingsPanel(),this.addSettingsChartEvent(t),t.classList.toggle("tch-hidden",!1))},ne.prototype.drawDataPanel=function(t){if(t&&this.dataPanel){var e=new Date(1e3*t.date),a=this.dataPanel.querySelector('.tch-data-panel-header span[id="name"]');a&&(a.innerText=this.chartData.pair.FullName);var i=this.dataPanel.querySelector('.tch-data-panel-header span[id="period"]');i&&(i.innerText=this.techChart.translation[this.techChart.getPeriods()[this.chartData.period].key]);var r=this.dataPanel.querySelector('.tch-data-panel-header span[id="date"]');r&&(r.innerText=this.getLocalizedTimeText(e,this.chartData.localization,5,this.chartData.timeMode));var s=this.dataPanel.querySelector(".tch-data-candle");s.innerHTML="";var n,o,h,c,l,A=["open","high","low","close"];if(t.open)o=t.open,h=t.high,c=t.low,l=t.close;else if(t.date>=this.chartData.data[this.chartData.typeData][0].date)o=this.chartData.data[this.chartData.typeData][0].open,h=this.chartData.data[this.chartData.typeData][0].high,c=this.chartData.data[this.chartData.typeData][0].low,l=this.chartData.data[this.chartData.typeData][0].close;else{var d=this.chartData.data[this.chartData.typeData].length-1;o=this.chartData.data[this.chartData.typeData][d].open,h=this.chartData.data[this.chartData.typeData][d].high,c=this.chartData.data[this.chartData.typeData][d].low,l=this.chartData.data[this.chartData.typeData][d].close}var p=this.chartData.options.Chart.typeTick;"Default"!==this.chartData.options.Chart.typeTick&&(o=this.getValueFromTick(o,p),h=this.getValueFromTick(h,p),c=this.getValueFromTick(c,p),l=this.getValueFromTick(l,p)),n=[o,h,c,l];for(var u=0;u<4;u++){var g=document.createElement("li");g.innerHTML="<span tch-text='"+A[u]+"'>"+this.techChart.translation[A[u]]+"</span>";var f=document.createElement("span");f.innerText=n[u],s[A[u]]=f,g.appendChild(f),s.appendChild(g)}this.updateIndicatorsDataPanel(t.date)}},ne.prototype.updateDataPanel=function(t){var e=this.techChart.configuration.modules.chartElements.isDataPanelCreate;if(t&&e){var a=new Date(1e3*t.date),i=this.dataPanel.querySelector('.tch-data-panel-header  span[id="name"]');i&&(i.innerText=this.chartData.pair.FullName);var r=this.dataPanel.querySelector('.tch-data-panel-header span[id="period"]');r&&(r.innerText=this.techChart.translation[this.techChart.getPeriods()[this.chartData.period].key]);var s=this.dataPanel.querySelector('.tch-data-panel-header span[id="date"]');s&&(s.innerText=this.getLocalizedTimeText(a,this.chartData.localization,5,this.chartData.timeMode));var n,o,h,c,l,A=this.dataPanel.querySelector(".tch-data-candle"),d=["open","high","low","close"];if(t.open)o=t.open,h=t.high,c=t.low,l=t.close;else if(t.date>=this.chartData.data[this.chartData.typeData].date)o=this.chartData.data[this.chartData.typeData].open,h=this.chartData.data[this.chartData.typeData].high,c=this.chartData.data[this.chartData.typeData].low,l=this.chartData.data[this.chartData.typeData].close;else{var p=this.chartData.data[this.chartData.typeData].length-1;o=this.chartData.data[this.chartData.typeData][p].open,h=this.chartData.data[this.chartData.typeData][p].high,c=this.chartData.data[this.chartData.typeData][p].low,l=this.chartData.data[this.chartData.typeData][p].close}var u=this.chartData.options.Chart.typeTick;"Default"!==this.chartData.options.Chart.typeTick&&(o=this.getValueFromTick(o,u),h=this.getValueFromTick(h,u),c=this.getValueFromTick(c,u),l=this.getValueFromTick(l,u)),n=[o,h,c,l];for(var g=0;g<4;g++)A[d[g]].innerText=n[g];this.chartData.index===this.chartData.techChart.activeChartIndex&&this.chartData.indicators&&this.chartData.indicators.length&&this.updateIndicatorsDataPanel(t.date)}},ne.prototype.addTimeAxisForPrediction=function(t,e){if(!e||!this.timeAxis)return t;var a;if(!t||t.length<=0?(t=[],a=this.timeAxis[0]):a=t[0],!a)return t;for(var i=(e=parseFloat(e))*this.chartData.spacing,r={x:a.x1,x1:a.x1,date:a.date};parseFloat(r.x1)+i<this.w;){r.date=r.date+this.chartData.getCurrentTimeStep()*e,r.x1=r.x=parseFloat(r.x1)+i;var s=this.createHourTimeAxis(r,this.w,this.parentRect.height-this.offY,this.chartData.timeMode,this.chartData.localization);if(!s)break;s.isPrediction=!0,t.unshift(s)}return t},ne.prototype.addTimeAxisForPast=function(t,e){if(!e||!this.timeAxis)return t;var a;if(!t||t.length<=0?(t=[],a=this.timeAxis[this.timeAxis.length-1]):a=t[t.length-1],!a)return t;for(var i=(e=parseFloat(e))*this.chartData.spacing,r={x:a.x1,x1:a.x1,date:a.date};parseFloat(r.x1)-i>0;){r.date=r.date-this.chartData.getCurrentTimeStep()*e,r.x1=r.x=parseFloat(r.x1)-i;var s=this.createHourTimeAxis(r,this.w,this.parentRect.height-this.offY);if(!s)break;s.isPast=!0,t.push(s)}return t},ne.prototype.createTimeAxis=function(t,e,a,i){var s,n=this.techChart.configuration.lang,o=this.getLocalizedTimeText(new Date(1e3*e.date),n,9,this.chartData.timeMode);if(this.canvasGridContext){var h=r.measureText(this.canvasGridContext,this.chartData.options.Chart.scalesFontSize+"px Arial",o),c=r.measureText(this.canvasGridContext,this.chartData.options.Chart.scalesFontSize+"px Arial",t);s=h.width>c.width?h.width:c.width}return new R(t,parseFloat(e.x),0,parseFloat(e.x),i,"timeLines",parseFloat(e.x)-s/2,i+parseFloat(this.valueTextHeigh)/3,"timeText",e.date,o,this.canvasGridContext)},ne.prototype.createHourTimeAxis=function(t,e,a,i){var r=this.techChart.configuration.lang,s=new Date(1e3*t.date),n=this.getLocalizedTimeText(s,r,3,i);return this.createTimeAxis(n,t,e,a)},ne.prototype.getHourTimeAxisFromItems=function(t,e,a,i,r,s){for(var n=null;!n&&(n=this.getHourTimeAxisByPeriod(t,e,a,i,r,s),!((i/=2)<=30));)i<=150&&i>30?i=60:i<=300&&i>150?i=300:i<=450&&i>300?i=600:i<=900&&i>450&&(i=900);return n},ne.prototype.getHourTimeAxisByPeriod=function(t,e,a,i,r,s){for(var n=null,o=null,h=0;h<t.length;h++)if(t[h].date%i===0&&(o=new Date(1e3*t[h].date)),o){(n=this.createHourTimeAxis(t[h],e,a,r,s)).showDataItem=t[h];break}return n},ne.prototype.getTimeAxis=function(t,e,a,i,r,s){this.timeAxisStep=this.getTimeAxisStep();var n=[],o=this.getFirstAxis(t,e,a,i,r,s);if(o){n.push(o);for(var h=!1,c=0;c<t.length;null)if(t[c].date!==n[0].date)if(h){if(t[c].x>0){var l=this.createHourTimeAxis(t[c],e,a,r,s);l&&n.push(l)}c+=this.timeAxisStep}else c++;else h=!0,c+=this.timeAxisStep}return n=this.addTimeAxisForPast(n,this.timeAxisStep),n=this.addTimeAxisForPrediction(n,this.timeAxisStep),this.fixFirstTimeAxis(n)},ne.prototype.fixFirstTimeAxis=function(t){return t.length&&parseFloat(t[0].x1)>this.w-7&&t.shift(),t},ne.prototype.drawTimeAxis=function(t){t&&t.length&&this.showTimeAxis(t,this.axisTextContainer)},ne.prototype.showTimeAxis=function(t,e,a){var i;a=a||this.chartData.options.Chart.typeTick,i=this.chartData.colors.Chart.vertGridLines;for(var r=0;r<t.length;r++)t[r].show(null,this.canvasGridContext,null,e,i,this.chartData.options.Chart.typeVertGridLines,this.chartData.colors.Chart.scalesText,this.chartData.options.Chart.scalesFontSize,a)},ne.prototype.getNextTimeAxisToLeft=function(t,e,a,i,r,s,n){if(t&&e&&a&&i&&r&&void 0!==s&&n){this.removeTimeAxisForPast(e);var o=[];a=parseFloat(a);var h=!1,c=0;for(e[0].date<=t[0].date&&(c=(c=e.length*a-a)<0?0:c);c<t.length;)if(t[c].date!==e[e.length-1].date)if(h){if(t[c].x>0){var l=this.createHourTimeAxis(t[c],i,r,s,n);l&&o.push(l)}c+=a}else c++;else c+=a,h=!0;return this.addTimeAxisForPast(o,a)}},ne.prototype.getNextTimeAxisToRight=function(t,e,a,i,r,s,n){if(t&&e&&a&&i&&r&&void 0!==s&&n){this.removeTimeAxisForPrediction(e);var o=[];a=parseFloat(a);var h=!1,c=t.length-1;for(c=c<0?0:c;c<t.length&&c>=0;)if(t[c].date!=e[0].date)if(h){if(parseFloat(t[c].x)<i){var l=this.createHourTimeAxis(t[c],i,r,s,n);l&&o.unshift(l)}c-=a}else c--;else c-=a,h=!0;return this.addTimeAxisForPrediction(o,a)}},ne.prototype.removeTimeAxisForPrediction=function(t){if(t&&0!==t.length)for(;t.length>1&&t[0].isPrediction;)t.splice(0,1)},ne.prototype.removeTimeAxisForPast=function(t){if(t&&0!==t.length)for(;t.length>1&&t[0].isPast;)t.splice(0,1)},ne.prototype.needsTimeAxisToRight=function(){var t=this.timeAxisStep*this.chartData.spacing,e=0;return this.chartData.candleWidth&&(e=this.chartData.candleWidth/2),!(!this.timeAxis||!this.timeAxis.length)&&parseFloat(this.timeAxis[0].x1)+t<=this.w-e},ne.prototype.needsTimeAxisToLeft=function(){var t=this.timeAxisStep*this.chartData.spacing;return!(!this.timeAxis||!this.timeAxis.length)&&parseFloat(this.timeAxis[this.timeAxis.length-1].x1)-t>0},ne.prototype.getFirstAxis=function(t,e,a,i,r,s){if(t&&0!==t.length){if(1===this.timeAxisStep)return this.createHourTimeAxis(t[0],e,a,r,s);var n=parseFloat(t[0].x)-this.timeAxisStep*this.chartData.spacing,o=parseFloat(t[0].x),h=this.getElementsByXRange(t,n,o),c=null;return c||(c=this.getHourTimeAxisFromItems(h,e,a,3600,r,s)),c||(c=this.createHourTimeAxis(t[0],e,a,r,s)),c}},ne.prototype.getTimeAxisStep=function(){if(this.chartData.spacing){var t=parseInt(250/this.chartData.spacing,10);return t<5&&t>2?t=5:t>5?(t=parseInt(t/5,10),t*=5):t<=0&&(t=2),parseInt(t,10)}},ne.prototype.moveAxisX=function(t,e,a,i){if(t&&0!==t.length){for(var r=t.length-1;r>=0;r--)t[r].moveX(e,a,i),this.isRedundantAxis(t[r],a,i)&&t.length>1&&t.splice(r,1);this.addExtraTimeAxisOnMove(e,t,a,i,this.chartData.period,this.w-this.chartData.rightPadding,this.parentRect.height-this.offY,this.chartData.timeMode,this.chartData.localization),this.fixFirstTimeAxis(this.timeAxis)}},ne.prototype.addExtraTimeAxisOnMove=function(t,e,a,i,r,s,n,o,h){var c;this.needsTimeAxisToLeft()&&(c=this.getNextTimeAxisToLeft(this.showData,this.timeAxis,this.timeAxisStep,s,n,o,h),this.timeAxis=this.timeAxis.concat(c)),this.needsTimeAxisToRight()&&(c=this.getNextTimeAxisToRight(this.showData,this.timeAxis,this.timeAxisStep,s,n,o,h),this.timeAxis=c.concat(this.timeAxis))},ne.prototype.isRedundantAxis=function(t,e,a){var i=!1,r=parseFloat(t.x1);return(r<=e||r>=a)&&(i=!0),i},ne.prototype.getReadableTimeSafari=function(t){if(!t&&0!==t||"number"!==typeof t||t<0)return"";var e=new Date(t),a=e.getUTCDate(),i=e.getUTCHours(),r=e.getMinutes(),s=e.getSeconds(),n=i<10?"0".concat(i):i,o=r<10?"0".concat(r):r,h=s<10?"0".concat(s):s;return a>1?"".concat(a,"d"," ").concat(n,"h"):i>0?"".concat(n,":").concat(o,":").concat(h):"".concat(o,":").concat(h)},ne.prototype.getLocalizedTimeText=function(t,e,a,i){var r="",s={};if(this.techChart.configuration.isInstanceWithOffset){var n="number"===typeof t?t:t.getTime();String(n).length!==String((new Date).getTime()).length&&(n*=1e3);var o=1e3*this.chartData.getCurrentTimeStepByServerPeriod();t=new Date(n-o)}if("default"===e&&(e="ru"),"safari"===this.browser)"local"!==i&&(t=new Date(t.getTime()+60*t.getTimezoneOffset()*1e3)),1===a?r=(r=t.toLocaleDateString("short")).slice(0,r.length-3):3===a?r=(r=t.toLocaleTimeString("short")).slice(0,r.length-3):5===a?r=(r=t.toLocaleString("short","short")).slice(0,r.length-3):10===a&&(r=this.getReadableTimeSafari(t.getTime()));else{switch("local"!==i&&(s.timeZone="utc"),a){case 1:s.month="2-digit",s.day="2-digit";break;case 3:s.hour="2-digit",s.minute="2-digit";break;case 5:s.month="2-digit",s.day="2-digit",s.year="2-digit",s.hour="2-digit",s.minute="2-digit";break;case 10:return q.getReadableTime(t.getTime());default:s.hour="2-digit",s.minute="2-digit"}9!==a&&(r=t.toLocaleTimeString(e,s))}return 9===a&&((s={}).month="ar"!==e?"short":"2-digit",s.day="2-digit",(r=(r=t.toLocaleDateString("ar"!==e?e:"en",s)).replace(" ","/")).length>6&&"edge"!==this.browser&&"vi"!==e&&"pt"!==e&&(r=r.substring(0,6))),r},ne.prototype.getValueAxis=function(t,e,a,i,r,s,n,o){o=o||0;for(var h=[],c=(e-t)/a,l=(e-t)/r,A=e-c/2,d=0;d<a;d++){var p=r-((A=0===d?A:A-c)-t)/l,u=i+7,g=p-s/2-2;g>r-s/2&&(g=r-s/2),p+=o,g+=o;var f=new R(A.toFixed(n),0,p,i,p,"valueLines",u,g,"valueText");h.push(f)}return h},ne.prototype.drawValueAxis=function(t,e,a){void 0!==e&&null!==e||(e=this.h);var i,r=parseInt(e/parseFloat(this.chartData.options.Chart.scalesFontSize),10),s=t.length,n=r<s,o=s%2===0?s/2:s-1-parseInt(s/2,10);i=this.chartData.colors.Chart.horzGridLines;for(var h=0;h<s;h++)(0===r||1===r&&(a?h>0:h!==o)||2===r&&0!==h&&h!==s-1||r>2&&n&&h%2!==0)&&(t[h].value=""),t[h].show(parent,this.canvasGridContext,null,this.axisTextContainer,i,this.chartData.options.Chart.typeHorzGridLines,this.chartData.colors.Chart.scalesText,this.chartData.options.Chart.scalesFontSize,this.chartData.options.Chart.typeTick)},ne.prototype.drawOscillatorChartsAxis=function(){var t=this.oscillatorCharts;for(var e in t)t.hasOwnProperty(e)&&t[e].valueAxis&&t[e].valueAxis.length&&this.drawValueAxis(t[e].valueAxis,t[e].h,!0)},ne.prototype.getOscillatorChartsAxis=function(){var t=this.oscillatorCharts;for(var e in t)t.hasOwnProperty(e)&&t[e].getValueAxis(this.chartData.options.Chart.scalesFontSize,parseInt(this.chartData.precission,10))},ne.prototype.moveChartX=function(t,e,a,i){return 0!==(e=this.deltaCorrectionForMoveChartX(e))&&(this.moveGraphicX(e,this.w,this.chartData.rightPadding,this.chartData.spacing,i),this.moveAxisX(this.timeAxis,e,0,this.w-this.chartData.rightPadding),this.setGetNewsTimeout(),this.setGetEventsTimeout(),!0)},ne.prototype.deltaCorrectionForMoveChartX=function(t,e){if(!t)return 0;e||(e=this);var a=e.chartData.data[e.chartData.typeData],i=e.w-e.chartData.rightPadding,r=e.showData,s=e.chartData.spacing,n=e.chartData.hasPrevData,o=e.techChart.configuration.offsetChart?i-i*e.techChart.configuration.offsetChart:i;return t<0?e.leftDeltaCorrection(t,a,r,s,i,n):e.rightDeltaCorrection(t,a,r,s,o)},ne.prototype.leftDeltaCorrection=function(t,e,a,i,r,s){var n=a[a.length-1],o=parseFloat(n.x);if(e[e.length-1].date===n.date)if(e.length===a.length){var h=parseFloat(a[0].x);r-h+o>=2*i?h>r-i?t=0:h+Math.abs(t)>r-i&&(t=-(r-h-i)):o>=i||o>r-h?t=0:o+Math.abs(t)>i&&(t=-(i-o))}else!s&&o>=i?t=0:o+Math.abs(t)>i&&(t=-(i-o));else{var c=this.binarySearhElementWithField(e,n.date,"date"),l=(e.length-c)*i;Math.abs(t)>l&&(t=-(l-o))}return t.toFixed(0)},ne.prototype.rightDeltaCorrection=function(t,e,a,i,r){var s,n=a[0],o=parseFloat(n.x);return e[0].date===n.date?o<=r?t=0:t>(s=o-r)&&(t=s):t>(s=this.binarySearhElementWithField(e,n.date,"date")*i+r)&&(t=s),t.toFixed(0)},ne.prototype.moveChartY=function(t,e){if(0===e)return!1;t.moveElementsY(t.showData,e),t.moveNewsBubblesY(e),t.moveEventsBubblesY(e);var a=parseFloat(e)*t.chartData.scaleParams.deltaY;return t.chartData.scaleParams.maxB=parseFloat(t.chartData.scaleParams.maxB)-a,t.chartData.scaleParams.minB=parseFloat(t.chartData.scaleParams.minB)-a,!0},ne.prototype.moveGraphicX=function(t,e,a,i){if(0!==t){if(this.moveElementsX(this.showData,t,e,a),this.deleteRedundantElements(this.showData,t,e,a,i),this.moveNewsBubblesX(t),this.moveEventsBubblesX(t),this.needsElementToLeft(this.showData,i)){var r=this.getDataToLeft(this.chartData.data[this.chartData.typeData],this.showData,i);this.addElementsToLeft(this.showData,r,i)}if(this.needsElementToRight(this.showData,e,a,i)){var s=this.getDataToRight(this.chartData.data[this.chartData.typeData],this.showData,e,a,i);this.addElementsToRight(this.showData,s,i,e,a)}this.deleteRedundantElements(this.showData,t,e,a,i),this.chartData.startDateSeconds=this.showData[0].date;var n=this.showData&&this.showData.length?this.showData[0].x:0;this.chartData.startX=e-a-parseFloat(n)}},ne.prototype.updateChart=function(t,e){!e||e.session&&"close"===e.session.toLowerCase()||(!e.isWaitForData&&!e.hasNextData&&e.data&&e.data[e.typeData]&&e.data[e.typeData].length&&e.data[e.typeData][0].isCurrentData?e.chart.getDataOnUpdateComplete(e.chart,t):e.hasNextData=!0)},ne.prototype.getDataOnUpdateComplete=function(t,e){if(t.chartData.data.bid[0]||t.chartData.data.bid[0].isCurrentData){if(e){t.chartData.data.ask[0]=e.ask,t.chartData.data.bid[0]=e.bid,t.chartData.data.mid[0]=e.mid,t.chartData.data.ask[0].isCurrentData=!1,t.chartData.data.bid[0].isCurrentData=!1,t.chartData.data.mid[0].isCurrentData=!1;var a={};a.bid=t.createCurrentDataItem(t.chartData.data.bid[0],t.chartData.currentValue.bid),a.ask=t.createCurrentDataItem(t.chartData.data.ask[0],t.chartData.currentValue.ask),a.mid=t.createCurrentDataItem(t.chartData.data.mid[0],t.chartData.currentValue.mid),a.ask.isCurrentData=!0,a.bid.isCurrentData=!0,a.mid.isCurrentData=!0,t.chartData.data.bid.unshift(a.bid),t.chartData.data.ask.unshift(a.ask),t.chartData.data.mid.unshift(a.mid)}if(t.selectedData[0].isCurrentData){if(t.selectedData[0]=t.chartData.data[this.chartData.typeData][1],t.selectedData.unshift(t.chartData.data[this.chartData.typeData][0]),!t.showData[0].x)return!1;var i=parseFloat(t.showData[0].x);t.showData=t.processDataToShow(t.selectedData,t.chartData.rightPadding,t.chartData.spacing,t.w,t.h,t.chartData.precission),t.crosshair.showData=t.showData;var r=parseFloat(t.showData[0].x)-i;t.moveChartX(t,r),t.deleteRedundantElements(t.showData,0,t.w,t.chartData.rightPadding,t.chartData.spacing),t.chartData.indicators&&t.chartData.indicators.length&&(t.createIndicatorsShowData(),t.drawIndicators()),t.valueAxis=t.getValueAxis(t.chartData.scaleParams.minB,t.chartData.scaleParams.maxB,t.valueAxisCount,t.w,t.h,t.chartData.options.Chart.scalesFontSize,t.chartData.precission),t.getOscillatorChartsAxis(),t.timeAxis=t.getTimeAxis(t.showData,t.w,t.parentRect.height-t.offY,t.chartData.period,t.chartData.timeMode,t.chartData.localization),t.updateDrawingObjectsPixels(),t.chartData.updateIndicatorsData(),t.draw(t.showData,t.h),t.clearGrid(),t.drawTimeAxis(t.timeAxis),t.drawValueAxis(t.valueAxis),t.drawOscillatorChartsAxis(),t.drawChartBorder(),t.drawCurrent(t.chartData.currentValue),t.moveCrosshairXY(t.showData,t.curX,t.curY,t.w,t.h),t.redrawInfo(),t.updateDrawingObjectsPixels(),t.redrawDrawingObjects()}}},ne.prototype.drawCurrentValue=function(){this.isDrawCurrentShowData(this.chartData,this.showData)?this.drawCurrent(this.chartData.currentValue):this.redrawCurrentPriceLine(this.chartData.currentValue)},ne.prototype.isDrawCurrentShowData=function(t,e){if(!t||!t.data||!e||0===e.length||!t.data[t.typeData]||0===t.data[t.typeData].length)return!1;if(e[0].isCurrentData)return!0;var a=t.data[t.typeData][0].date===e[0].date&&!t.hasNextData,i=this.isPositionValid();return a&&i},ne.prototype.drawCurrent=function(t,e){if(!t||0===parseFloat(t[this.chartData.typeData])||!this.chartData.scaleParams)if(e)t.ask=e.ask.close,t.bid=e.bid.close,t.mid=e.mid.close,t.volume=e.mid.volume;else{if(!this.chartData.data[this.chartData.typeData][0]||!this.chartData.data[this.chartData.typeData][0].isCurrentData)return;t.ask=this.chartData.data.ask[0].close,t.bid=this.chartData.data.bid[0].close,t.mid=this.chartData.data.mid[0].close,t.volume=this.chartData.data.mid[0].volume}if(this.chartData.data[this.chartData.typeData].length){var a=this.classType;t.ask="".concat(t.ask).replace(",","."),t.bid="".concat(t.bid).replace(",","."),t.mid="".concat(t.mid).replace(",",".");var i,s=t,n=s.ask,o=s.bid,h=s.mid,c=s.volume;switch(this.chartData.data.ask[0].close=n,this.chartData.data.bid[0].close=o,this.chartData.data.mid[0].close=h,this.chartData.data.ask[0].volume=c,this.chartData.data.bid[0].volume=c,this.chartData.data.mid[0].volume=c,"HeikinAshiChart"===a&&(t=this.updateCurval(t,this.chartData.precission)),this.chartData.currentValue.ask=t.ask,this.chartData.currentValue.bid=t.bid,this.chartData.currentValue.mid=t.mid,this.chartData.currentValue.volume=t.volume,a){case"BarChart":case"HollowChart":case"CandleChart":case"HeikinAshiChart":i=this.chartData.colors[a].candleBear;break;case"LineChart":case"AreaChart":i=this.chartData.colors[a].priceLine}if(this.isDrawCurrentShowData(this.chartData,this.showData)){if(this.updateCurrentData(t),this.chartData.options.Chart.autoScale&&(parseFloat(t[this.chartData.typeData])>this.chartData.scaleParams.maxV||parseFloat(t[this.chartData.typeData])<this.chartData.scaleParams.minV)){var l=this.getScaleParams(this.selectedData,this.h,this.chartData.precission);if(isNaN(parseFloat(l.minB))&&isNaN(parseFloat(l.maxB))&&isNaN(parseFloat(l.deltaY)))return;this.chartData.options.Chart.scaleSeriesOnly||this.resizeShowDataByTrendIndicators(),(l.minB<this.chartData.scaleParams.minB||l.maxB>this.chartData.scaleParams.maxB)&&(this.chartData.scaleParams=l,this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission,this.offY),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawTimeAxis(this.timeAxis),this.drawChartBorder())}var A=this.canvasRateNormalContext,d=this.canvasRatePixelatedContext;r.clearRect(null,A,0,0,A.canvas.width,A.canvas.height),r.clearRect(null,d,0,0,d.canvas.width,d.canvas.height),this.drawCurrentShowData(t,e),this.chartData.updateCurrentIndicatorsData(),this.redrawOscillators(),this.updatePositionsAndRedraw()}else this.redrawCurrentPriceLine(this.chartData.currentValue);this.drawCurrentLabel(t,i,!0,!1,this.chartData.colors[a]),this.drawMinMaxPrices()}},ne.prototype.redrawCurrentPriceLine=function(t){var e=this.canvasRateNormalContext,a=this.canvasRatePixelatedContext;r.clearRect(null,e,0,0,e.canvas.width,e.canvas.height),r.clearRect(null,a,0,0,a.canvas.width,a.canvas.height),this.drawCurrentPriceLine(t),this.drawLastBarPrice(this.showData[0])},ne.prototype.drawCurrentPriceLine=function(t){if(!this.chartData.data[this.chartData.typeData]||0!==this.chartData.data[this.chartData.typeData].length){var e=this.toYPixels(t[this.chartData.typeData]),a=this.parent.querySelector(".tch-rate-value");if(e>this.h||e<0)a.parentNode.style.display="none";else{var i,s,n,o=this.chartData.chart.classType;switch(o){case"HollowChart":case"BarChart":case"CandleChart":case"LineChart":case"AreaChart":i=this.chartData.colors[o].candleBear,s=this.chartData.colors[o].candleBool,n=parseFloat(this.chartData.data[this.chartData.typeData][0].close)>parseFloat(this.chartData.data[this.chartData.typeData][0].open)?s:i;break;case"HeikinAshiChart":var h=this.createShowDataItem(this.chartData.data[this.chartData.typeData][0],this.chartData.precission),c=h.close,l=h.open,A=this.chartData.colors[o],d=A.candleBool,p=A.candleBear;n=parseFloat(c)>parseFloat(l)?d:p}"LineChart"!==o&&"AreaChart"!==o||(n=this.chartData.colors[o].priceLine);var u=this.chartData.options.Chart.widthPriceLine;e=r.getPosition(e,u),this.chartData.options.Chart.needPriceLine&&this.showData.length>0&&(this.showData[0].date!==this.chartData.data[this.chartData.typeData][0].date||this.chartData.isExpired||this.drawCurrentShowData(t,void 0),r.drawLine(null,this.canvasRatePixelatedContext,0,e,this.w+this.offX,e,r.changeRgbaAlpha(n,this.chartData.options.Chart.priceLineOpacity),[u,u],u));var g=n===i,f=parseFloat(t[this.chartData.typeData]),w=this.getValueFromTick(f,this.chartData.options.Chart.typeTick);this.drawPrice(w,e,a,g,n)}}},ne.prototype.drawLastBarPrice=function(t){if(t){var e,a,i=this.chartData.chart.classType,s=this.parent.querySelector(".tch-rate-value"),n=this.parent.querySelector(".tch-timer-value");switch("LineChart"!==i&&"AreaChart"!==i||(e=this.chartData.colors[i].priceLine,a=this.chartData.colors[i].priceLine),i){case"BarChart":case"HollowChart":case"CandleChart":case"LineChart":case"AreaChart":case"HeikinAshiChart":e=this.chartData.colors[i].candleBear,a=this.chartData.colors[i].candleBool}var o=parseFloat(t.close)>=parseFloat(t.open)?a:e,h=this.toYPixels(t.close),c=o===e;if(h>0&&h<this.h){var l=this.getValueFromTick(parseFloat(t.close),this.chartData.options.Chart.typeTick);this.drawPrice(l,h,s,c,o,!0),this.chartData.options.Chart.candleTimer&&this.drawPrice(null,h+this.priceTextHeight,n,c,o),this.chartData.isShowPriceLineOfLastBar&&r.drawLine(null,this.canvasRatePixelatedContext,0,h,this.w,h,r.changeRgbaAlpha(o,this.chartData.options.Chart.priceLineOpacity),[],this.chartData.options.Chart.widthPriceLine)}else s.parentNode.style.display="none",n.parentNode.style.display="none"}},ne.prototype.drawCurrentLabel=function(t,e,a,i,s){if(this.parent){var n,o=t[this.chartData.typeData],h=this.chartData.chart.classType;n=this.isOptionActive?13:this.chartData.options.Chart.scalesFontSize;var c=this.canvasRatePixelatedContext.canvas;if(c&&this.canvasRatePixelatedContext&&o){i&&r.clearRect(null,this.canvasRatePixelatedContext,0,0,c.width,c.height),o=parseFloat("".concat(o).replace(",","."));var l=this.parent.querySelector(".tch-rate-value");l.style.fontSize="".concat(n,"px");var A=this.parent.querySelector(".tch-timer-value");A.style.fontSize="".concat(n,"px");var d=this.toYPixels(o);if(this.selectedData&&this.selectedData.length&&this.selectedData[0].isCurrentData){if(s.candleBool,parseFloat(this.selectedData[0].close)>parseFloat(this.selectedData[0].open)&&(e="LineChart"===h||"AreaChart"===h?this.chartData.colors[h].colorLine:s.candleBool),"HeikinAshiChart"===h){var p=this.createShowDataItem(this.chartData.data[this.chartData.typeData][0],this.chartData.precission),u=p.close,g=p.open,f=this.chartData.colors[h],w=f.candleBool,v=f.candleBear;e=parseFloat(u)>parseFloat(g)?w:v}"HollowChart"===h&&(e=this.chartData.chart.showData[0].hollowCandlePriceLine);var y=this.chartData.options.Chart.widthPriceLine;d=r.getPosition(d,y),this.chartData.options.Chart.needPriceLine&&("LineChart"!==h&&"AreaChart"!==h||(e=this.chartData.colors[h].priceLine),r.drawLine(null,this.canvasRatePixelatedContext,0,d,this.w+this.offX,d,r.changeRgbaAlpha(e,this.chartData.options.Chart.priceLineOpacity),[],y));var m=e!==("LineChart"===h||"AreaChart"===h?this.chartData.colors[h].colorLine:s.candleBool);if(d>0&&d<this.h){var B=this.getValueFromTick(o,this.chartData.options.Chart.typeTick);this.drawPrice(B,d,l,m,e),this.chartData.options.Chart.candleTimer&&this.drawPrice(null,d+this.priceTextHeight,A,m,e)}else l.parentNode.style.display="none",A.parentNode.style.display="none"}}}},ne.prototype.updateCurrentData=function(t){var e=parseFloat(t[this.chartData.typeData]);this.chartData.data&&this.chartData.data[this.chartData.typeData].length&&this.chartData.data[this.chartData.typeData][0].isCurrentData&&(e>parseFloat(this.chartData.data[this.chartData.typeData][0].high)?this.chartData.data[this.chartData.typeData][0].high=t[this.chartData.typeData]:e<parseFloat(this.chartData.data[this.chartData.typeData][0].low)&&(this.chartData.data[this.chartData.typeData][0].low=t[this.chartData.typeData]),this.chartData.data[this.chartData.typeData][0].close=t[this.chartData.typeData],this.chartData.data.ask[0].volume=t.volume,this.chartData.data.mid[0].volume=t.volume,this.chartData.data.mid[0].volume=t.volume),this.selectedData&&this.selectedData[0]&&this.selectedData[0].isCurrentData&&(e>parseFloat(this.selectedData[0].high)?this.selectedData[0].high=t[this.chartData.typeData]:e<parseFloat(this.selectedData[0].low)&&(this.selectedData[0].low=t[this.chartData.typeData]),this.selectedData[0].close=t[this.chartData.typeData])},ne.prototype.getCurrentDataComplete=function(t,e){t.isDrawCurrentShowData(t.chartData,t.showData)&&(t.chartData.data.bid[0].isCurrentData&&(t.chartData.data.bid[0].low=e[0].bid.low,t.chartData.data.bid[0].high=e[0].bid.high,t.chartData.data.bid[0].close=e[0].bid.close,t.chartData.data.bid[0].volume=e[0].bid.volume,t.chartData.data.ask[0].low=e[0].ask.low,t.chartData.data.ask[0].high=e[0].ask.high,t.chartData.data.ask[0].close=e[0].ask.close,t.chartData.data.ask[0].volume=e[0].ask.volume,t.chartData.data.mid[0].low=e[0].mid.low,t.chartData.data.mid[0].high=e[0].mid.high,t.chartData.data.mid[0].close=e[0].mid.close,t.chartData.data.mid[0].volume=e[0].mid.volume),t.selectedData[0].isCurrentData&&(t.selectedData[0].low=e[0][this.chartData.typeData].low,t.selectedData[0].high=e[0][this.chartData.typeData].high,t.selectedData[0].close=e[0][this.chartData.typeData].close,t.selectedData[0].volume=e[0][this.chartData.typeData].volume),t.chartData.currentValue.ask=e[0].ask.close,t.chartData.currentValue.bid=e[0].bid.close,t.chartData.currentValue.mid=e[0].mid.close,t.chartData.currentValue.volume=e[0].mid.volume,t.drawCurrent(t.chartData.currentValue,!!t.selectedData[0].isCurrentData&&e[0]))},ne.prototype.drawPrice=function(t,e,a,i,r){a.parentNode.style.display="block",a.innerText=t||a.innerText,this.priceTextHeight||(this.priceTextHeight=a.parentNode.getBoundingClientRect().height),this.priceTextColor||(this.priceTextColor=this.getPriceTextColor(r)),this.priceTextColor&&this.isOptionActive&&(this.priceTextColor="#FFFFFF"),a.parentNode.style.left=this.w+"px",a.parentNode.style.top=e-this.priceTextHeight/2+"px",a.parentNode.style.backgroundColor=r,a.parentNode.style.color=this.priceTextColor},ne.prototype.getPriceTextColor=function(t){var e;if(t.indexOf("#")>-1)e=this.hexToRgb(t);else{var a=t.split(")")[0];a=(a=a.split("(")[1]).split(", "),e={r:parseInt(a[0],10),g:parseInt(a[1],10),b:parseInt(a[2],10)}}return(e.r+e.g+e.b)/3<=127?"#FFFFFF":"#000000"},ne.prototype.hexToRgb=function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null},ne.prototype.createCurrentDataItem=function(t,e){var a=parseFloat(t.close),i=parseFloat(e),r=a<i?t.close:e,s=a>i?t.close:e;return{open:t.close,close:e,low:r,high:s,volume:0,date:t.date+this.chartData.getCurrentTimeStep(),isCurrentData:!0}},ne.prototype.startCandleTimer=function(t){var e=this;if(this.chartData.options.Chart.candleTimer){var a=this.techChart.configuration.lang,i=this.chartData.timeMode,r=this.parent.querySelector(".tch-timer-value"),s=0,n=0;this.chartData.data[this.chartData.typeData].length>1&&(s=1e3*this.chartData.data[this.chartData.typeData][0].date,n=1e3*this.chartData.data[this.chartData.typeData][1].date),t&&(n=Date.now());var o=new Date(s-n);r.innerText=this.getLocalizedTimeText(o,a,10,i),this.candleTimerInterval&&clearInterval(this.candleTimerInterval),this.candleTimerInterval=setInterval((function(){if(n+=1e3,o=new Date(s-n),!e.chartData.options.Chart.candleTimer||o<0)return clearInterval(e.candleTimerInterval),void(r.parentNode.style.display="none");r.innerText=e.getLocalizedTimeText(o,a,10,i)}),1e3)}},ne.prototype.drawCrosshairChart=function(t){if(this.isPressed||!this.isShowCrosshair||!this.useCanvas||!t)return this.crosshair.text.spanValue.parentNode.style.display="none",this.crosshair.text.spanDate.parentNode.style.display="none",!1;var e=this.crosshair.showData,a=this.curX,i=this.curY;if(!e||0===e.length)return!1;var r=this.getElementIndexByPositionX(e,a);if(r<0)if(a>parseFloat(e[0].x))r=0;else{if(!(a<parseFloat(e[e.length-1].x)))return!1;r=e.length-1}var s=e[r];return!!s&&(this.getStepedCursorParams(a,i,e[0],e[e.length-1],s),this.isShowCrosshair?this.showCrosshair(t):this.crosshair.text.spanValue.parentNode.style.display="none",this.crosshair.isUpdatedTime&&this.updateDataPanel(s),s)},ne.prototype.showCrosshair=function(t){this.drawCrosshairDate(t),this.drawCrosshairValue(t)},ne.prototype.drawCrosshairValue=function(t){var e=r.getPosition(this.crosshair.params.y,2),a=this.getCrosshairValueText();this.drawCrosshairValueLine(t,e,a),this.drawCrosshairValueText(t,e,a)},ne.prototype.drawCrosshairValueLine=function(t,e,a){if(a){var i=this.crosshair.width,s=this.chartData.colors.Chart.crossLineColor,n=parseInt(this.chartData.options.Chart.widthCrossHair,10),o=this.getLineTypeArray(this.chartData.options.Chart.typeCrossHair,n);r.drawLine(null,t,Math.round(i)+this.offX,e,0,e,s,o,2*n)}},ne.prototype.drawCrosshairValueText=function(t,e,a){if(a){var i=this.crosshair.width,r=this.chartData.options.Chart.scalesFontSize;this.crosshair.text.spanValue.parentNode.style.display="block",this.crosshair.text.spanValue.innerText=a,this.crosshair.text.spanValue.style.fontSize=r+"px",this.crosshairTextHeight||(this.crosshairTextHeight=this.crosshair.text.spanValue.parentNode.getBoundingClientRect().height),this.crosshair.text.spanValue.parentNode.style.right="0",this.crosshair.text.spanValue.parentNode.style.left=i-this.priceOffset+"px",this.crosshair.text.spanValue.parentNode.style.top=e-this.crosshairTextHeight/2+"px"}else this.crosshair.text.spanValue.parentNode.style.display="none"},ne.prototype.getCrosshairValueText=function(){var t=this.curY,e=this.crosshair.params.value;if(t>=this.parentRect.height-this.offY)return"";if(t>this.h){e="";for(var a=Object.keys(this.oscillatorCharts),i=0;i<a.length;i++){var r=this.oscillatorCharts[a[i]].getCurrPrecission();if(e=this.oscillatorCharts[a[i]].getValue(t,r))break}}else e=this.getValueFromTick(e,this.chartData.options.Chart.typeTick);return e},ne.prototype.drawCrosshairDate=function(t){var e=this.getCrosshairDateText(),a=r.getPosition(this.crosshair.params.x,2);this.drawCrosshairDateLine(t,a,e),this.drawCrosshairDateText(t,a,e)},ne.prototype.drawCrosshairDateLine=function(t,e,a){if(!(e>=this.w-8||e<=0)&&a){var i=Math.round(this.parentRect.height-this.offY),s=this.chartData.colors.Chart.crossLineColor,n=parseInt(this.chartData.options.Chart.widthCrossHair,10),o=this.getLineTypeArray(this.chartData.options.Chart.typeCrossHair,n);r.drawLine(null,t,e,i,e,0,s,o,2*n)}},ne.prototype.drawCrosshairDateText=function(t,e,a){if(a){var i=Math.round(this.parentRect.height-this.offY);this.crosshair.text.spanDate.innerText=a,this.crosshair.text.spanDate.style.textAlign="center",this.crosshair.text.spanDate.parentNode.style.display="block",this.crosshairTextWidth||(this.crosshairTextWidth=this.crosshair.text.spanDate.parentNode.getBoundingClientRect().width);var r=e-this.crosshairTextWidth/2-7;e+this.crosshairTextWidth/2-7>this.w&&(r=this.w-this.crosshairTextWidth-7),e-this.crosshairTextWidth/2<0&&(r=0),this.crosshair.text.spanDate.parentNode.style.left=r.toFixed(1)+"px",this.crosshair.text.spanDate.parentNode.style.top=i.toFixed(1)+"px"}else this.crosshair.text.spanDate.parentNode.style.display="none"},ne.prototype.getCrosshairDateText=function(){return this.crosshair.params.x>=this.w-8||this.crosshair.params.x<=0?"":this.crosshair.params.time},ne.prototype.moveCrosshairXY=function(t,e,a,i,r){this.crosshair.showData=t,this.crosshair.width=i,this.crosshair.height=r},ne.prototype.getCrosshairParamsTime=function(t){var e=new Date(1e3*t),a=this.techChart.configuration.lang,i=this.getLocalizedTimeText(e,a,9,this.chartData.timeMode),r=this.getLocalizedTimeText(e,a,3,this.chartData.timeMode);return"".concat(i,", ").concat(r)},ne.prototype.getStepedCursorParams=function(t,e,a,i,r){var s=this.crosshair.params.value,n=this.crosshair.params.time,o=this.getStepedCursorParamsX(t,a,i,r),h=o.dateSeconds;t=o.x,this.crosshair.params.dateSeconds!==h&&(this.crosshair.params.dateSeconds=h,this.crosshair.params.time=this.getCrosshairParamsTime(h)),this.crosshair.params.x=t;var c=this.getStepedCursorParamsY(e,r);e=c.y;var l=c.value;this.crosshair.params.y=e,this.crosshair.params.value=l,this.crosshair.isUpdatedTime=n!==this.crosshair.params.time,this.crosshair.isUpdatedValue=s!==this.crosshair.params.value},ne.prototype.getStepedCursorParamsY=function(t,e){var a=t;if(this.isMagnetModeOn()&&Number(this.crosshair.params.x)===Number(e.x)){var i=this.magnetDistance,r=this.toYPixels(e.open);Math.abs(r-t)<i&&(a=r,i=Math.abs(r-t));var s=this.toYPixels(e.low);Math.abs(s-t)<i&&(a=s,i=Math.abs(s-t));var n=this.toYPixels(e.high);Math.abs(n-t)<i&&(a=n,i=Math.abs(n-t));var o=this.toYPixels(e.close);Math.abs(o-t)<i&&(a=o)}return{y:a,value:this.toYValue(a,this.chartData.options.Chart.typeTick)}},ne.prototype.isMagnetModeOn=function(){var t=this.chartData.editDrawingObject&&this.chartData.editDrawingObject.isPressed&&!this.chartData.editDrawingObject.isObjectEdit,e=this.chartData.state.indexOf("drawing")>-1;return this.chartData.isMagnetMode&&(e||t)},ne.prototype.getStepedCursorParamsX=function(t,e,a,i){var r,s=this.crosshair.params.dateSeconds;return t>e.x?(t=(r=Math.floor((this.curX-e.x)/this.chartData.spacing))*this.chartData.spacing+parseFloat(e.x))!==this.crosshair.params.x&&(s=e.date+r*this.chartData.getCurrentTimeStep()):t<a.x?(r=Math.floor((a.x-t)/this.chartData.spacing),(t=parseFloat(a.x)-r*this.chartData.spacing)!==this.crosshair.params.x&&(s=a.date-r*this.chartData.getCurrentTimeStep(),this.crosshair.params.x=t)):(t=parseFloat(i.x))!==this.crosshair.params.x&&(s=i.date,this.crosshair.params.x=t),{x:t,dateSeconds:s}},ne.prototype.setCursorType=function(t){this.chartData.cursorType=t;for(var e=this.divEventListener.classList;e.length>1;)e.remove(e.item(1));e.add("tch-cursor-"+t)},ne.prototype.getLineTypeArray=function(t,e){switch(t){case"normal":return[2*e,0];case"dash":return[5*e,2*e];case"points":return[2*e,2*e];default:return[]}},ne.prototype.drawCrosshairValueTextCanvas=function(t,e,a){if(a){var i=this.chartData.colors.Chart.crossLabelBackgroundColor,r=this.chartData.colors.Chart.crossLabelTextColor;this.drawLabelCanvas(t,a,e,null,null,i);var s="ar"===this.techChart.configuration.lang?"rtl":"ltr";this.drawLabelTextCanvas(t,a,e,r,s)}},ne.prototype.drawCrosshairDateTextCanvas=function(t,e,a){if(a){var i=this.chartData.colors.Chart.crossLabelTextColor,s=this.chartData.options.Chart.dateLabelArrowHeight,n=this.chartData.options.Chart.dateLabelPaddingTop,o=this.chartData.options.Chart.dateLabelTextInterval,h=this.chartData.options.Chart.dateLabelPaddingBottom,c=this.chartData.options.Chart.dateLabelPaddingLeftRight,l=a.split(", "),A=this.chartData.options.Chart.scalesFontSize,d="".concat(A,"px ").concat(this.chartData.options.Chart.labelFont),p=r.measureText(t,d,l[1]).width,u=r.measureText(t,d,l[0]).width,g=Math.max(p,u),f=this.w,w=t.canvas.height,v=e,y=g+2*c,m=n+o+h+2*A,B=this.chartData.colors.Chart.crossLabelBackgroundColor,C=ne.getDateLabelPoints(f,w,v,s,y,m),D=C[3][0],b=C[3][1],x=D+y/2-p/2,F=b-h-A-o,S=C[4][0]+y/2-u/2,P=b-h;r.drawPolygon(null,t,C,B,null,!0);var T="ar"===this.techChart.configuration.lang?"rtl":"ltr";r.drawText(null,t,x,F,l[1],d,i,T),r.drawText(null,t,S,P,l[0],d,i,T)}},ne.prototype.drawPips=function(t){var e,a,i=this.chartData.scaleParams,s=this.chartData.chart.curY,n=this.chartData.chart.curX,o=this.h,h=this.chartData.currentValue[this.chartData.typeData],c=this.chartData.colors.Chart.pipsColor;if(!(s>o)){var l=this.calculationsForDrawPips(i,s,n,o,h);r.drawLine(null,t,l.left,l.downY,l.left,l.upY,c,[],2),this.drawPipsValue(t,l.left,l.upY,s,i,o,h),e=this.createArrArrowDown(l.left,l.downY),r.drawPolygon(null,t,e,null,c,!1,2,e.length),a=this.createArrArrowUp(l.left,l.upY),r.drawPolygon(null,t,a,null,c,!1,2,a.length)}},ne.prototype.calculationsForDrawPips=function(t,e,a,i,r){var s=i-(r/t.deltaY-t.minB/t.deltaY);return{downY:Math.max(e,s)-1,upY:Math.min(e,s)+1,left:a>150?a-80:a+80}},ne.prototype.createArrArrowUp=function(t,e){if(isNaN(parseFloat(t))||!isFinite(t)||isNaN(parseFloat(e))||!isFinite(e))return[];var a=[];return t=+t,e=+e,a.push([t-5,e+5]),a.push([t,e]),a.push([t+5,e+5]),a},ne.prototype.createArrArrowDown=function(t,e){if(isNaN(parseFloat(t))||!isFinite(t)||isNaN(parseFloat(e))||!isFinite(e))return[];var a=[];return t=+t,e=+e,a.push([t-5,e-5]),a.push([t,e]),a.push([t+5,e-5]),a},ne.prototype.drawPipsValue=function(t,e,a,i,s,n,o){t.font="13px Arial";var h=this.chartData.colors.Chart.pipsColor,c=this.calculationsForDrawPipsValue(s,i,a,o,n);e-=t.measureText(c.pips).width+7,r.drawText(null,t,e,c.textY,c.pips,"12px Segoe UI",h)},ne.prototype.calculationsForDrawPipsValue=function(t,e,a,i,r){var s=+t.minB+t.deltaY*(r-e),n=i.split(".");return{pips:Math.abs(s-parseFloat(i)).toFixed(n[n.length-1].length),textY:Math.max(65,a-14)}},ne.prototype.deactivateChart=function(){if(this.parent){this.parent.classList.remove("tch-active"),this.parent.querySelector(".tch-line-settings-container").classList.toggle("tch-hidden",!0);var t=!1;this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.state="normal",this.chartData.activeDrawingObject=null,t=!0),this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.state="normal",this.chartData.editDrawingObject=null,t=!0),t&&(this.redrawInfo(),this.redrawDrawingObjects())}},ne.prototype.setActiveChart=function(t){if(t||this.chartData.index!==this.chartData.techChart.activeChartIndex){var e=this.chartData.techChart.getActiveChartData().state;this.chartData.state=e,this.chartData.techChart.setActiveChartProps(this.chartData);for(var a=this.chartData.techChart.charts,i=0;i<a.length;i++)i!==this.chartData.techChart.activeChartIndex&&a[i].deactivateChart();if(a.length>1&&a[this.chartData.techChart.activeChartIndex].parent.classList.add("tch-active"),!1===this.chartData.isStayDrawingMode&&"drawingRoulete"===this.chartData.state&&(this.chartData.state="default",this.chartData.techChart.setRouleteBtn("Off")),this.chartData.techChart.setActiveChartParams(),this.chartData.drawingObjects.length)for(var r=0;r<this.chartData.drawingObjects.length;r++)(this.chartData.drawingObjects[r].drawingStage.current===this.chartData.drawingObjects[r].drawingStage.max&&"curve"===this.chartData.drawingObjects[r].name||this.chartData.drawingObjects[r].drawingStage.current<this.chartData.drawingObjects[r].drawingStage.max)&&(this.removeDrawingObjectsOtherCharts(this.chartData.drawingObjects[r]),this.chartData.drawingObjects[r].remove(),this.redrawDrawingObjects(),this.redrawDrawingObjectsOtherCharts())}},ne.prototype.getMaxB=function(t,e,a,i){var r=e/2;return t>1/Math.pow(10,i+2)&&(r=a*t),(parseFloat(parseFloat(e).toFixed(i))+Math.ceil(Math.pow(10,i)*r)/Math.pow(10,i)).toFixed(i)},ne.prototype.getMinB=function(t,e,a,i){var r=e/2;return t>1/Math.pow(10,i+2)&&(r=a*t),(parseFloat(parseFloat(e).toFixed(i))-Math.ceil(Math.pow(10,i)*r)/Math.pow(10,i)).toFixed(i)},ne.prototype.getDeltaYforBoundsCalculation=function(t,e,a,i,r){return parseInt(Math.pow(10,12)*(parseFloat(e)-parseFloat(t))/(a-(i+r)),10)/Math.pow(10,12)},ne.prototype.getScaleParams=function(t,e,a){if(!t||0===t.length||!this.chartData.options.Chart.autoScale)return this.chartData.scaleParams;var i=this.getMaxValue(t,a),r=this.getMinValue(t,a),s=this.getDeltaYforBoundsCalculation(r,i,e,this.chartData.marginTop,this.chartData.marginBottom),n=this.getMaxB(s,i,this.chartData.marginTop,a),o=this.getMinB(s,r,this.chartData.marginBottom,a);if(this.techChart.configuration.modules.signals&&this.techChart.configuration.modules.isSignalAutoFit&&this.chartData.isShowAllSignals&&this.activeSignal&&this.techChart.configuration.signalTypesData.includes(this.chartData.typeData)&&t.length>1&&t[t.length-1]){var h=2*Math.abs(t[1].date-t[0].date),c=this.activeSignal.getExtremePoints(t[t.length-1].date-h,t[0].date+h);c&&c.max&&c.min&&(n=Math.max(n,c.max),o=Math.min(o,c.min))}return{minB:o,maxB:n,deltaY:parseInt(1e11*(n-o)/e,10)/1e11,minV:r,maxV:i}},ne.prototype.getOscillatorsScaleParams=function(){for(var t=0;t<this.chartData.indicators.length;t++){var e=this.chartData.indicators[t];if("oscillator"===e.type){var a=this.oscillatorCharts[e.id];e.createData(this.chartData.data[this.chartData.typeData]),e.createShowData(),a.scaleParams=a.getScaleParams(e.showData,parseInt(this.chartData.precission,10))}}},ne.prototype.getScaleParamsByExtremum=function(t,e,a,i,r,s){var n=this.getDeltaYforBoundsCalculation(t,e,r,a,i),o=this.getMaxB(n,e,a,s),h=this.getMinB(n,t,i,s);return{minB:h,maxB:o,deltaY:parseInt(Math.pow(10,12)*(o-h)/r,10)/Math.pow(10,12),minV:t,maxV:e}},ne.prototype.checkExtremum=function(t,e){return e<t.min&&(t.min=e),e>t.max&&(t.max=e),t},ne.prototype.getLastDate=function(t){var e=null;return t&&t.length&&(e=t[t.length-1].date),e},ne.prototype.getDataToRight=function(t,e,a,i,r){var s=e[0],n=parseFloat(s.x),o=s.date,h=this.getNumberOfDataToRight(n,a,i,r),c=this.getIndexByDate(t,o),l=[];return c>-1&&c>0&&c-h>0?(l=t.slice(c-h,c),this.chartData.hasNextData&&!this.chartData.isWaitFallBackData&&c<this.chartData.fallBack/2&&(this.chartData.isWaitFallBackData=!0,this.getDataOnMove(this,-this.chartData.fallBack/2,this.chartData.data[this.chartData.typeData][0].date,!0))):this.chartData.hasNextData?(l=[],this.getDataOnMove(this,-h,o)):c>-1&&c-h<=0&&(l=t.slice(0,c)),l},ne.prototype.getDataToLeft=function(t,e,a){var i=e[e.length-1],r=parseFloat(i.x),s=i.date,n=Math.ceil(r/a),o=this.getIndexByDate(t,s),h=[];if(o>-1&&o<t.length-1){h=t.slice(o+1,o+n+1);var c=e.length>this.chartData.fallBack?e.length:this.chartData.fallBack;this.chartData.hasPrevData&&!this.chartData.isWaitFallBackData&&o>this.chartData.data[this.chartData.typeData].length-c&&(this.chartData.isWaitFallBackData=!0,this.getDataOnMove(this,this.chartData.fallBack/2,this.chartData.data[this.chartData.typeData][this.chartData.data[this.chartData.typeData].length-1].date,!0))}else this.chartData.hasPrevData&&(h=[],this.getDataOnMove(this,n,s));return h},ne.prototype.getDataOnMove=function(t,e,a,i){this.waitForData||(e<0?i?this.chartData.getExtraData(this.chartData,a,e,this.chartData.getFallBackDataOnMoveToLeftComplete):this.chartData.getExtraData(this.chartData,a,e,this.chartData.getExtraDataOnMoveToLeftComplete):i?this.chartData.getExtraData(this.chartData,a,e,this.chartData.getFallBackDataOnMoveToRightComplete):this.chartData.getExtraData(this.chartData,a,e,this.chartData.getExtraDataOnMoveToRightComplete))},ne.prototype.getFallBackDataOnMoveToLeftComplete=function(t){t.chartData.isWaitFallBackData=!1},ne.prototype.getFallBackDataOnMoveToRightComplete=function(t){t.chartData.isWaitFallBackData=!1},ne.prototype.getDataOnMoveToRightComplete=function(t,e){t.addElementsToLeft(t.showData,e,t.chartData.spacing,t.w,t.chartData.rightPadding)},ne.prototype.getDataOnMoveToLeftComplete=function(t,e){t.addElementsToRight(t.showData,e,t.chartData.spacing,t.w,t.chartData.rightPadding)},ne.prototype.addElementsToRight=function(t,e,a,i,r){for(var s=this.createShowDataToAdd(e),n=s.length-1;n>=0&&(e[n].isCurrentData&&(s[n].isCurrentData=!0),this.addElementToRight(t,s[n],a,i,r),!(parseFloat(t[0].x)>=i-r));n--);},ne.prototype.addElementToRight=function(t,e,a,i,r){var s=parseFloat(t[0].x),n=t[0].date;if(e.date>n){var o=s+a;o>i-r&&(o=i-r),e.x=o.toFixed(1),this.resizeShowItemValuesY(e,this.h,this.chartData.scaleParams),t.unshift(e)}},ne.prototype.addElementsToLeft=function(t,e,a){for(var i=this.createShowDataToAdd(e),r=0;r<i.length&&(this.addElementToLeft(t,i[r],a),!(parseFloat(t[t.length-1].x)<=0));r++);},ne.prototype.addElementToLeft=function(t,e,a){var i=parseFloat(t[t.length-1].x);if(e.date<t[t.length-1].date){var r=i-a;r<0&&(r=0),e.x=r.toFixed(1),this.resizeShowItemValuesY(e,this.h,this.chartData.scaleParams),t[t.length]=e}},ne.prototype.drawIndicators=function(){for(var t=0;t<this.chartData.indicators.length;t++)this.chartData.indicators[t].data&&("oscillator"===this.chartData.indicators[t].type&&this.oscillatorCharts[this.chartData.indicators[t].id].clear(),this.chartData.indicators[t].draw())},ne.prototype.drawIchimoku=function(t,e,a){for(var i,s,n,o={TenkanSen:[],KijunSen:[],ChinkouSpan:[],SenkouSpanA:[],SenkouSpanB:[]},h=0;h<e.length;h++)if(void 0!==e[h]){var c=this.toXPixels(e[h].T);c=c.toFixed(1);var l=void 0;e[h].TenkanSen&&(l=this.toYPixels(e[h].TenkanSen),o.TenkanSen.push([c,l])),e[h].KijunSen&&(l=this.toYPixels(e[h].KijunSen),o.KijunSen.push([c,l])),e[h].ChinkouSpan&&(l=this.toYPixels(e[h].ChinkouSpan),o.ChinkouSpan.push([c,l])),e[h].SenkouSpanA&&(l=this.toYPixels(e[h].SenkouSpanA),o.SenkouSpanA.push([c,l])),e[h].SenkouSpanB&&(l=this.toYPixels(e[h].SenkouSpanB),o.SenkouSpanB.push([c,l]))}for(var A in o)o.hasOwnProperty(A)&&r.drawPolygon(null,a,o[A],null,t.colors[A],!1,t.lineWidth[A],o[A].length);for(var d=[],p=[],u="init",g=0;g<o.SenkouSpanB.length&&o.SenkouSpanA[g];g++)parseFloat(o.SenkouSpanA[g][1])<parseFloat(o.SenkouSpanB[g][1])?"A"===u?(p.push(o.SenkouSpanA[g]),p.unshift(o.SenkouSpanB[g])):("init"!==u&&(i={P1:o.SenkouSpanA[g-1],P2:o.SenkouSpanA[g]},s={P1:o.SenkouSpanB[g-1],P2:o.SenkouSpanB[g]},n=this.getCrossPoint(i,s),p.push(n),d.push({cloud:p,mark:"B"}),(p=[]).push(n)),p.push(o.SenkouSpanA[g]),p.unshift(o.SenkouSpanB[g]),u="A"):parseFloat(o.SenkouSpanA[g][1])>parseFloat(o.SenkouSpanB[g][1])?"B"===u?(p.unshift(o.SenkouSpanB[g]),p.push(o.SenkouSpanA[g])):("init"!==u&&(i={P1:o.SenkouSpanA[g-1],P2:o.SenkouSpanA[g]},s={P1:o.SenkouSpanB[g-1],P2:o.SenkouSpanB[g]},n=this.getCrossPoint(i,s),p.push(n),d.push({cloud:p,mark:"A"}),(p=[]).push(n)),p.push(o.SenkouSpanA[g]),p.unshift(o.SenkouSpanB[g]),u="B"):parseFloat(o.SenkouSpanA[g][1])===parseFloat(o.SenkouSpanB[g][1])&&(p.push(o.SenkouSpanA[g]),p.unshift(o.SenkouSpanB[g]));p.length&&d.push({cloud:p,mark:u});for(var f=0;f<d.length;f++)d[f].cloud&&d[f].cloud.length&&r.drawPolygon(null,a,d[f].cloud,this.hexToRgbA(t.colors[d[f].mark],t.opacity[d[f].mark]),null)},ne.prototype.getCrossPoint=function(t,e){var a=parseFloat(t.P1[0]),i=parseFloat(t.P2[0]),r=parseFloat(e.P1[0]),s=parseFloat(e.P2[0]),n=parseFloat(t.P1[1]),o=parseFloat(t.P2[1]),h=parseFloat(e.P1[1]),c=parseFloat(e.P2[1]),l=((s-r)*(n-h)-(c-h)*(a-r))/((c-h)*(i-a)-(s-r)*(o-n));return[a+l*(i-a),n+l*(o-n)]},ne.prototype.hexToRgbA=function(t,e){if(t||e){if(t.indexOf("rgba")>-1)return t;if(t.indexOf("rgb")>-1)return t.replace(")",","+e+" )").replace("rgb","rgba");var a;if(/^#([A-Fa-f0-9]{3}){1,2}$/.test(t))return 3===(a=t.substring(1).split("")).length&&(a=[a[0],a[0],a[1],a[1],a[2],a[2]]),"rgba("+[(a="0x"+a.join(""))>>16&255,a>>8&255,255&a].join(",")+","+e+")";throw new Error("Bad Hex")}},ne.prototype.drawFractal=function(t,e,a){for(var i,s,n,o,h,c,l,A,d=this.chartData.candleWidth,p=0;p<e.length;p++)void 0!==e[p]&&(i=!1,e[p].fractalHigh&&(i=this.toXPixels(e[p].T),o=(s=this.getFractalItemY(e[p],"high")-d/2)-d,c=s,A=s,n=i,h=i-d/2,l=i+d/2,r.drawPolygon(null,a,[[n,o],[h,c],[l,A]],t.colors.line,null)),e[p].fractalLow&&(i||(i=this.toXPixels(e[p].T)),o=(s=this.getFractalItemY(e[p],"low")+d/2)+d,c=s,A=s,n=i,h=i-d/2,l=i+d/2,r.drawPolygon(null,a,[[n,o],[h,c],[l,A]],t.colors.line,null)))},ne.prototype.drawSar=function(t,e,a){for(var i,s,n,o,h,c,l,A,d,p,u=this.chartData.candleWidth,g=0;g<e.length;g++)void 0!==e[g]&&(i=this.toXPixels(e[g].T),c=s=this.toYPixels(e[g].P).toFixed(1),A=s,p=(o=s-u)+2*u,n=i,h=i-u/2,l=i+u/2,d=i,r.drawPolygon(null,a,[[n,o],[h,c],[d,p],[l,A]],t.colors.line,null))},ne.prototype.drawLRI=function(t,e,a){var i=this.toXPixels(e[0].TS),s=this.toXPixels(e[0].TE),n=this.toYPixels(e[0].SPL).toFixed(1),o=this.toYPixels(e[0].SPM).toFixed(1),h=this.toYPixels(e[0].SPU).toFixed(1),c=this.toYPixels(e[0].EPL).toFixed(1),l=this.toYPixels(e[0].EPM).toFixed(1),A=this.toYPixels(e[0].EPU).toFixed(1);r.drawPolygon(null,a,[[i,n],[i,o],[s,l],[s,c]],this.hexToRgbA(t.colors.cloudL,t.opacity.cloud),null),r.drawPolygon(null,a,[[i,o],[i,h],[s,A],[s,l]],this.hexToRgbA(t.colors.cloudU,t.opacity.cloud),null),r.drawPolygon(null,a,[[i,n],[s,c]],null,t.colors.L,!1,t.lineWidth.L),r.drawPolygon(null,a,[[i,o],[s,l]],null,t.colors.M,!1,t.lineWidth.M),r.drawPolygon(null,a,[[i,h],[s,A]],null,t.colors.U,!1,t.lineWidth.U)},ne.prototype.drawBollingerBandsIndicator=function(t,e,a){if(e&&0!==e.length&&parent){for(var i={L:[],M:[],U:[]},s=0;s<e.length;s++)if(void 0!==e[s]){var n=this.toXPixels(e[s].T);n>=0&&n<=this.w-this.chartData.rightPadding&&(i.L.push([n.toFixed(1),this.toYPixels(e[s].L).toFixed(1)]),i.M.push([n.toFixed(1),this.toYPixels(e[s].M).toFixed(1)]),i.U.push([n.toFixed(1),this.toYPixels(e[s].U).toFixed(1)]))}var o=i.L.concat(i.U.reverse());r.drawPolygon(null,a,o,this.hexToRgbA(t.colors.cloud,t.opacity.cloud),null),r.drawPolygon(null,a,i.L,null,t.colors.L,!1,t.lineWidth.L,i.L.length),r.drawPolygon(null,a,i.M,null,t.colors.M,!1,t.lineWidth.M,i.L.length),r.drawPolygon(null,a,i.U,null,t.colors.U,!1,t.lineWidth.U,i.L.length)}},ne.prototype.drawLinePT=function(t,e,a){var i=this;if(e[0]){var s=e.map((function(t){return[i.toXPixels(t.T).toFixed(1),i.toYPixels(t.P).toFixed(1)]}));r.drawPolygon(null,a,s,null,t.colors.line,!1,t.lineWidth.line,s.length)}},ne.prototype.updateIndicatorsDataPanel=function(t){this.chartData.techChart.updateIndicatorsDataPanel(t)},ne.prototype.createIndicatorsShowData=function(){for(var t=0;t<this.chartData.indicators.length;t++)this.chartData.indicators[t].createData(this.chartData.data[this.chartData.typeData]),this.chartData.indicators[t].createShowData();this.resizeShowDataByTrendIndicators(),this.getOscillatorsScaleParams()},ne.prototype.resizeShowDataByTrendIndicators=function(){var t=!1;if(this.chartData.options.Chart.autoScale&&!this.chartData.options.Chart.scaleSeriesOnly){var e=this.indicatorsGetExtremum(),a=this.chartData.scaleParams.minB,i=this.chartData.scaleParams.maxB;e.min<a&&(a=e.min),e.max>i&&(i=e.max),(i>this.chartData.scaleParams.maxB||a<this.chartData.scaleParams.minB)&&(this.chartData.scaleParams=this.getScaleParamsByExtremum(a,i,this.chartData.marginTop,this.chartData.marginBottom,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),t=!0)}return t},ne.prototype.applyChartHight=function(t){this.h=t.chart.height,this.top=t.chart.top,this.chartData.h=this.h,this.chartData.top=this.top},ne.prototype.applyIndicatorsHeights=function(t){for(var e=0;e<this.chartData.indicators.length;e++){var a=this.chartData.indicators[e].id;t.oscCharts[a]&&this.chartData.indicators[e].applyIndicatorHeight(t.oscCharts[a],this)}},ne.prototype.calculateHeightOnCreate=function(t,e,a){a-=this.offY;var i=t?Object.keys(t).length:0,r=a/(i+3),s=a-r,n={},o=r;if(i>0){var h,c,l=r/a;for(var A in t)t.hasOwnProperty(A)&&(n[(h=t[A]).id]={},n[h.id].height=h.h-h.h*l,c=n[h.id].height/h.h,n[h.id].top=h.top*c,o+=n[h.id].height);e=a-o}else e=a-r;return{newElement:{height:parseInt(r,10),top:parseInt(s,10)},chart:{height:parseInt(e,10),top:0},oscCharts:n}},ne.prototype.calculateHeightOnDelete=function(t,e,a){a-=this.offY;var i=t?Object.keys(t).length:0,r=this.h,s=this.top,n={},o=a/(a-e.h);if(i>1){var h;for(var c in t)t.hasOwnProperty(c)&&(n[(h=t[c]).id]={},n[h.id].top=h.top>e.top?h.top-e.h:h.top,n[h.id].top=parseInt(o*n[h.id].top,10),n[h.id].height=parseInt(h.h*o,10));s>e.top&&(s-=e.h),s*=o,r=this.h*o}else r=a;return{chart:{height:parseInt(r,10),top:parseInt(s,10)},oscCharts:n}},ne.prototype.removeIndicator=function(t){var e=this.chartData.getIndicatorIndex(this.chartData.indicators,t);if("trend"===t.type)this.chartData.indicators.splice(e,1),this.draw(this.showData,this.h);else if("oscillator"===t.type){var a=parseInt(this.parent.style.height,10),i=this.calculateHeightOnDelete(this.oscillatorCharts,this.chartData.indicators[e],a);this.chartData.indicators.splice(e,1),delete this.oscillatorCharts[t.id],this.applyChartHight(i),this.applyIndicatorsHeights(i),this.init()}},ne.prototype.redrawOscillators=function(){for(var t=0;t<this.chartData.indicators.length;t++)if("oscillator"===this.chartData.indicators[t].type){var e=this.chartData.indicators[t];this.chartData.indicators[t].isChanged&&(this.oscillatorCharts[e.id].clear(),e.draw())}},ne.prototype.indicatorsGetExtremum=function(){for(var t=this.chartData.indicators,e=Number.MAX_VALUE,a=Number.MIN_VALUE,i=0;i<t.length;i++)if("trend"===t[i].type&&!t[i].hidden&&t[i].showData&&t[i].showData.length){var r=this.indicatorGetExtremum(t[i]);r.min<e&&(e=r.min),r.max>a&&(a=r.max)}return{min:e,max:a}},ne.prototype.indicatorGetExtremum=function(t){var e={};switch(t.name.toLowerCase()){case"sma":case"ema":e=this.getExtremumPT(t.showData);break;case"bb":e=this.getExtremumBollingerBands(t.showData);break;case"fractal":e=this.getExtremumFractal(t.showData);break;case"ichimoku":e=this.getExtremumIchimoku(t.showData);break;case"macd":e=this.getExtremumMACD(t.showData);break;case"env":case"keltner":case"donchian":e=this.getExtremumBollingerBands(t.showData);break;case"dema":e=this.getExtremumPT(t.showData)}return e},ne.prototype.getExtremumMACD=function(t){for(var e={min:Number.MAX_VALUE,max:Number.MIN_VALUE},a=0;a<t.length;a++){var i=t[a].macdHistogram;i&&this.checkExtremum(e,i),(i=t[a].macdLine)&&this.checkExtremum(e,i),(i=t[a].signalLine)&&this.checkExtremum(e,i)}return e},ne.prototype.getExtremumPT=function(t){for(var e={min:Number.MAX_VALUE,max:Number.MIN_VALUE},a=0;a<t.length;a++)this.checkExtremum(e,t[a].P);return e},ne.prototype.getExtremumBollingerBands=function(t){for(var e={min:Number.MAX_VALUE,max:Number.MIN_VALUE},a=0;a<t.length;a++)this.checkExtremum(e,t[a].L),this.checkExtremum(e,t[a].U);return e},ne.prototype.getExtremumFractal=function(t){for(var e={min:Number.MAX_VALUE,max:Number.MIN_VALUE},a=0;a<t.length;a++)t[a].fractalHigh&&this.checkExtremum(e,t[a].fractalHigh),t[a].fractalLow&&this.checkExtremum(e,t[a].fractalLow);return e},ne.prototype.getExtremumIchimoku=function(t){for(var e={min:Number.MAX_VALUE,max:Number.MIN_VALUE},a=0;a<t.length;a++){var i=t[a].TenkanSen;i&&this.checkExtremum(e,i),(i=t[a].KijunSen)&&this.checkExtremum(e,i),(i=t[a].ChinkouSpan)&&this.checkExtremum(e,i),(i=t[a].SenkouSpanA)&&this.checkExtremum(e,i),i=t[a].SenkouSpanB,t[a].SenkouSpanB&&this.checkExtremum(e,i)}return e},ne.prototype.toXPixels=function(t){if(isNaN(t)||!this.showData||this.showData.length<=0)return!1;var e=this.getNearestCandleIndex(t),a=this.showData[e].date,i=a-t,r=this.chartData.getCurrentTimeStep();if(i>r&&this.showData[e+1])return parseFloat(this.showData[e+1].x);0===e&&this.showData[e+1]?(e++,i=(a=this.showData[e].date)-t):e===this.showData.length-1&&this.showData[e-1]&&(e--,i=(a=this.showData[e].date)-t);var s=this.chartData.spacing,n=Math.abs(r/s);return parseFloat(this.showData[e].x)-i/n},ne.prototype.toXValue=function(t){if(isNaN(t)||!this.showData||0===this.showData.length)return!1;var e=this.showData,a=this.getElementIndexByPositionX(e,t);-1===a&&(a=0);var i=e[a].x,r=this.chartData.spacing,s=this.chartData.getCurrentTimeStep(),n=Math.abs(s/r),o=i-t;return e[a].date-o*n},ne.prototype.toYValue=function(t){if(isNaN(t))return!1;var e=this.h;return parseFloat(this.chartData.scaleParams.minB)+this.chartData.scaleParams.deltaY*(e-t)},ne.prototype.toYPixels=function(t){return!isNaN(t)&&this.h-(t-this.chartData.scaleParams.minB)/this.chartData.scaleParams.deltaY},ne.prototype.getDrawingObjectIndexByType=function(t){for(var e=0;e<this.chartData.drawingObjects.length;e++)if(this.chartData.drawingObjects[e].classType===t)return e;return-1},ne.prototype.clearDrawingCanvas=function(){var t=this.canvasDrawingContext,e=t.canvas;r.clearRect(null,t,0,0,e.width,e.height)},ne.prototype.redrawDrawingObjects=function(){if(this.clearDrawingCanvas(),this.chartData.isShowDrawingObjects){this.drawingTextContainer.classList.toggle("tch-hidden",!1);for(var t=0;t<this.chartData.drawingObjects.length;t++)if("normal"===this.chartData.drawingObjects[t].state||"active"===this.chartData.drawingObjects[t].state){if(this.chartData.drawingObjects[t].periods.length&&!this.chartData.drawingObjects[t].periods.indexOf(this.chartData.period))continue;this.chartData.drawingObjects[t].draw(this.canvasDrawingContext)}}else this.drawingTextContainer.classList.toggle("tch-hidden",!0)},ne.prototype.removeAllDrawingObjectsOtherCharts=function(){for(var t=this.chartData.techChart.charts,e=0;e<t.length;e++)e!==this.chartData.techChart.activeChartIndex&&t[e].chartData.pair.ID===this.chartData.pair.ID&&t[e].removeAllDrawingObjects()},ne.prototype.redrawAllDrawingObjectsOtherCharts=function(){for(var t=this.chartData.techChart.charts,e=0;e<t.length;e++)e!==this.chartData.techChart.activeChartIndex&&t[e].chartData.pair.ID===this.chartData.pair.ID&&t[e].redrawDrawingObjects()},ne.prototype.removeEditDrawingObject=function(){var t=this.chartData.editDrawingObject;this.parent.querySelector(".tch-line-settings-container").classList.contains("tch-hidden")&&t&&(this.removeDrawingObjectsOtherCharts(t),this.chartData.editDrawingObject.remove(),this.redrawInfo(),this.redrawAllDrawingObjectsOtherCharts(),this.chartData.techChart.autoSaveParams())},ne.prototype.drawActiveDrawingObjects=function(t){(t||this.chartData.editDrawingObject&&this.chartData.editDrawingObject.isObjectEdit)&&(this.chartData.editDrawingObject||this.chartData.activeDrawingObject)&&this.chartData.isShowDrawingObjects&&(r.clearRect(null,this.canvasDrawingActiveContext,0,0,this.canvasDrawingActive.width,this.canvasDrawingActive.height),this.chartData.editDrawingObject&&this.chartData.editDrawingObject.draw(this.canvasDrawingActiveContext),this.chartData.activeDrawingObject&&this.chartData.activeDrawingObject.draw(this.canvasDrawingActiveContext)),this.chartData.activeDrawingObject||this.chartData.editDrawingObject||r.clearRect(null,this.canvasDrawingActiveContext,0,0,this.canvasDrawingActive.width,this.canvasDrawingActive.height)},ne.prototype.redrawDrawingObjectsOtherCharts=function(){for(var t=this.chartData.techChart.charts,e=0;e<t.length;e++)e!==this.chartData.techChart.activeChartIndex&&t[e].chartData.pair.ID===this.chartData.pair.ID&&(t[e].redrawDrawingObjects(),t[e].drawActiveDrawingObjects())},ne.prototype.drawActiveDrawingObjectsOtherCharts=function(t){for(var e=this.chartData.techChart.charts,a=0;a<e.length;a++)if(a!==this.chartData.techChart.activeChartIndex&&e[a].chartData.pair.ID===this.chartData.pair.ID)for(var i=e[a].chartData.drawingObjects,r=0;r<i.length;r++)if(i[r].id===t){if("normal"===i[r].state)e[a].redrawDrawingObjects();else{var s=e[a].clearInfo();e[a].drawCrosshair(s,s.canvas.height,!1),e[a].drawActiveDrawingObjects()}break}},ne.prototype.completeFigureOtherCharts=function(t){for(var e=this.chartData.techChart.charts,a=0;a<e.length;a++)if(a!==this.chartData.techChart.activeChartIndex&&e[a].chartData.pair.ID===this.chartData.pair.ID)for(var i=e[a].chartData.drawingObjects,r=0;r<i.length;r++)i[r].id===t&&i[r].completeFigure()},ne.prototype.removeDrawingObjectsOtherCharts=function(t){for(var e=this.chartData.techChart.charts,a=0;a<e.length;a++)if(a!==this.chartData.techChart.activeChartIndex&&e[a].chartData.pair.ID===this.chartData.pair.ID)for(var i=e[a].chartData.drawingObjects,r=0;r<i.length;r++)if(i[r].id===t.id){i[r].remove();break}},ne.prototype.createDrawingObjectOtherCharts=function(t,e,a){for(var i=this.chartData.techChart.charts,r=0;r<i.length;r++)if(r!==this.chartData.techChart.activeChartIndex&&i[r].chartData.pair.ID===this.chartData.pair.ID){var s=pt.createDrawingObjectByType(t,[i[r].chartData,a]);if(s instanceof ot)continue;i[r].chartData.drawingObjects.push(s),s.id=e,s.state="normal"}},ne.prototype.updateDrawingObjectsOtherChart=function(t){for(var e=this.chartData.techChart.charts,a=0;a<e.length;a++)if(a!==this.chartData.techChart.activeChartIndex&&e[a].chartData.pair.ID===this.chartData.pair.ID)for(var i=e[a].chartData.drawingObjects,r=0;r<i.length;r++)if(i[r].id===t.id){i[r].updateByObject(t);break}},ne.prototype.updateDrawingObjectsPixels=function(){this.chartData.activeDrawingObject&&this.chartData.activeDrawingObject.updatePixels(),this.chartData.editDrawingObject&&this.chartData.editDrawingObject.updatePixels();for(var t=0;t<this.chartData.drawingObjects.length;t++)this.chartData.drawingObjects[t].updatePixels()},ne.prototype.removeAllDrawingObjects=function(){for(this.chartData.editDrawingObject&&(this.chartData.editDrawingObject.remove(),this.chartData.editDrawingObject=null),this.chartData.activeDrawingObject&&(this.chartData.activeDrawingObject.remove(),this.chartData.activeDrawingObject=null);this.chartData.drawingObjects.length;)this.chartData.drawingObjects[0].remove();this.chartData.drawingObjects=[],this.redrawDrawingObjects(),this.redrawInfo()},ne.prototype.redrawOnResize=function(){this.resizeChartHeight()},ne.prototype.redrawGrid=function(){this.chartData.chart.getOscillatorChartsAxis(),this.clearGrid(),this.drawTimeAxis(this.timeAxis),this.drawValueAxis(this.valueAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder()},ne.prototype.resizeOscillatorOnMouseMove=function(){var t={};t.topParams=this.getTopResizedObjectsParams(),t.bottomParams=this.getBottomResizedObjectsParams(),this.isValidResizeObjectParmas(t)&&this.applyResizedObjectsParams(t)},ne.prototype.applyResizedObjectsParams=function(t){if("oscillatorChart"===t.topParams.type){t.topParams.chart.h=t.topParams.newHeight,t.topParams.chart.top=t.topParams.newTop;var e=this.chartData.getIndicatorIndex(this.chartData.indicators,t.topParams.chart);this.chartData.indicators[e].h=t.topParams.chart.h,this.chartData.indicators[e].top=t.topParams.chart.top,t.topParams.chart.redrawOnResize()}else"chart"===t.topParams.type&&(this.h=t.topParams.chart.h,this.top=t.topParams.chart.top,this.chartData.h=t.topParams.chart.h,this.chartData.top=t.topParams.chart.top,this.redrawOnResize());if("oscillatorChart"===t.bottomParams.type){t.bottomParams.chart.h=t.bottomParams.newHeight;var a=this.chartData.getIndicatorIndex(this.chartData.indicators,t.bottomParams.chart);this.chartData.indicators[a].h=t.bottomParams.chart.h,t.bottomParams.chart.redrawOnResize()}else"chart"===t.bottomParams.type&&(this.h=t.bottomParams.newHeight,this.chartData.h=t.bottomParams.newHeight,this.redrawOnResize())},ne.prototype.getTopResizedObjectsParams=function(){var t,e={},a=this.parent.querySelector(".tch-chart-resized-top");return a?(e.type="oscillatorChart",e.chart=a.chart,e.oldTop=parseFloat(a.style.top),e.newTop=this.curY+0,t=e.oldTop-e.newTop,e.oldHeight=a.chart.h,e.newHeight=e.oldHeight+t):this.parent.classList.contains("tch-chart-resized-top")&&(e.type="chart",e.chart=this,e.oldTop=this.top,e.newTop=this.curY,t=e.oldTop-e.newTop,e.oldHeight=this.h,e.newHeight=e.oldHeight+t),e},ne.prototype.getBottomResizedObjectsParams=function(){var t,e={},a=this.parent.querySelector(".tch-chart-resized-bottom");return a?(e.type="oscillatorChart",e.chart=a.chart,e.oldBottom=a.chart.top+a.chart.h,e.newBottom=this.curY,t=e.oldBottom-e.newBottom,e.oldHeight=a.chart.h,e.newHeight=e.oldHeight-t):this.parent.classList.contains("tch-chart-resized-bottom")&&(e.type="chart",e.chart=this,e.oldBottom=this.top+this.h,e.newBottom=this.curY,t=e.oldBottom-e.newBottom,e.oldHeight=this.h,e.newHeight=e.oldHeight-t),e},ne.prototype.isValidResizeObjectParmas=function(t){return!(!t.topParams.chart||!t.bottomParams.chart)&&!(t.topParams.newHeight<2*this.resizeEdgeHeight||t.bottomParams.newHeight<2*this.resizeEdgeHeight)},ne.prototype.getSettingsPanelContainer=function(){var t=this.parent.querySelector(".tch-line-settings-container");return t.style.left=this.curX+"px",t.style.top=this.curY+"px",t},ne.prototype.htmlSettingsPanel=function(){return"<div class='tch-line-settings-panel'>\n        <ul class='tch-line-panel-header'>\n            <li class='tch-settings-chart-button' tch-text='params'>".concat(this.chartData.techChart.translation.params,"</li>\n        </ul>\n    </div>")},ne.prototype.zoomArea=function(t){parseFloat(t.minValue)!==parseFloat(t.maxValue)&&(this.chartData.options.Chart.autoScale=!1,this.chartData.scaleParams.maxB=t.maxValue,this.chartData.scaleParams.minB=t.minValue,this.chartData.scaleParams.deltaY=(this.chartData.scaleParams.maxB-this.chartData.scaleParams.minB)/this.h,this.chartData.startDateSeconds=t.startDate,this.chartData.candleWidth=t.candleWidth,this.chartData.spacing=1.5*this.chartData.candleWidth,this.selectedData=this.selectDataToShow(this.chartData.data[this.chartData.typeData],this.chartData.startDateSeconds,this.chartData.spacing,this.w),this.showData=this.processDataToShow(this.selectedData,this.chartData.rightPadding+t.startX,this.chartData.spacing,this.w,this.h,this.chartData.precission),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.timeAxis=this.getTimeAxis(this.showData,this.w,this.parentRect.height-this.offY,this.chartData.period,this.chartData.timeMode,this.chartData.localization),this.updateDrawingObjectsPixels(),this.redrawActiveSignal(),this.drawMinMaxPrices(),this.resizeNewsBubbles(),this.resizeEventsBubbles(),this.draw(this.showData,this.h),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.getOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.moveCrosshairXY(this.showData,this.curX,this.curY,this.w,this.h),this.redrawInfo())},ne.prototype.zoomOut=function(){if(this.chartData.zoomSteps&&this.chartData.zoomSteps.length){var t=this.chartData.zoomSteps.pop();this.chartData.zoomData=t,this.zoomArea(this.chartData.zoomData),this.chartData.zoomSteps.length||(this.chartData.options.Chart.autoScale=!0,this.chartData.techChart.parent.querySelector(".tch-zoomout-btn").disabled=!0)}},ne.prototype.zoomOutZero=function(){if(this.chartData.zoomSteps&&this.chartData.zoomSteps.length){var t=this.chartData.zoomSteps[0];this.chartData.zoomData=t,this.zoomArea(this.chartData.zoomData),this.chartData.zoomSteps.length||(this.chartData.options.Chart.autoScale=!0,this.chartData.techChart.parent.querySelector(".tch-zoomzero-btn").disabled=!0),this.dropZoomSteps()}},ne.prototype.dropZoomSteps=function(){this.techChart.configuration.modules.sideBarButtons.zoomButton&&(this.chartData.zoomSteps=[],this.chartData.techChart.parent.querySelector(".tch-zoomout-btn").disabled=!0)},ne.prototype.zoomX=function(t,e,a){this.setChartZoomedSize(this.chartData.zoomView,e,-1*t),a=(a=isNaN(a)?this.getElementIndexByPositionX(this.showData,this.curX):a)>=0?a:0;var i=this.showData[a],r=st(this.showData);if(this.showData=[],this.showData.push(i),this.selectedData=this.getSelectedDataByShowData(this.showData),this.needsElementToLeft(this.showData,this.chartData.spacing)){var s=this.getDataToLeft(this.chartData.data[this.chartData.typeData],this.showData,this.chartData.spacing);this.addElementsToLeft(this.showData,s,this.chartData.spacing)}if(this.needsElementToRight(this.showData,this.w,this.chartData.rightPadding,this.chartData.spacing)){var n=this.getDataToRight(this.chartData.data[this.chartData.typeData],this.showData,this.w,this.chartData.rightPadding,this.chartData.spacing);this.addElementsToRight(this.showData,n,this.chartData.spacing,this.w,this.chartData.rightPadding)}var o=this.techChart.configuration.offsetChart?this.w*this.techChart.configuration.offsetChart:0;if(0!==a&&this.showData[0].isCurrentData&&this.showData[0].x<this.w-this.chartData.rightPadding-o)return this.showData=r,void this.zoomX(t,e,0);if(this.deleteRedundantElements(this.showData,0,this.w,this.chartData.rightPadding,this.chartData.spacing),this.chartData.startDateSeconds=this.showData[0].date,this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams),!this.chartData.data[this.chartData.typeData][0].isCurrentData&&!this.chartData.isExpired){var h=this.createCurrentDataItem(this.chartData.data[this.chartData.typeData][0],this.chartData.currentValue[this.chartData.typeData]);this.chartData.data[this.chartData.typeData].unshift(h),this.chartData.startDateSeconds=this.chartData.data[this.chartData.typeData][0].date}this.chartData.indicators&&this.chartData.indicators.length&&this.createIndicatorsShowData(),this.updateDrawingObjectsPixels(),this.removeNewsTooltip(),this.removeEventsTooltip(),this.resizeNewsBubbles(),this.resizeEventsBubbles(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.timeAxis=this.getTimeAxis(this.showData,this.w,this.parentRect.height-this.offY,this.chartData.period,this.chartData.timeMode,this.chartData.localization),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.moveCrosshairXY(this.showData,this.curX,this.curY,this.w,this.h),this.redrawInfo(),this.chartData.startX=0,this.redrawActiveSignal(),this.drawMinMaxPrices(),this.showData[0].isCurrentData&&(this.chartData.startX=this.w-this.chartData.rightPadding-parseFloat(this.showData[0].x))},ne.prototype.correctionZoomX=function(t,e,a,i){if(t&&void 0!==e&&null!==e&&void 0!==a&&null!==a){i||(i=this);var r=i.chartData.data[i.chartData.typeData],s=i.chartData.spacing,n=i.w-i.chartData.rightPadding;return r.length===i.showData.length?function o(){if(a<0){var r=parseFloat(t.x),o=r-(i.showData.length-e)*s<=s,h=r+s*e>=n-s;o&&!h?(t=i.showData[i.showData.length-1]).x=""+s:h&&!o&&((t=i.showData[0]).x=""+(n-s))}}():function h(){if(a>0)if(parseFloat(i.showData[0].x)-s<n/2)(t=i.showData[0]).x=""+n/2;else if(!i.chartData.hasPrevData){var o=i.showData[i.showData.length-1],h=parseFloat(o.x);if(r[r.length-1].date==o.date&&h+s>s)parseInt(n/s,10)<=r.length?(t=i.showData[i.showData.length-1]).x=""+s:t=i.showData[i.showData.length-1];else{var c=i.binarySearhElementWithField(r,t.date,"date"),l=r.length;if(parseInt(parseFloat(t.x)/s,10)>l-c){t=i.showData[i.showData.length-1];var A=(l-c-(i.showData.length-e))*s+s;t.x=""+A.toFixed(1)}}}}(),t}},ne.prototype.scaleZoomDataQuantCandles=function(t,e){var a=Math.abs(t.startX-t.endX),i=1.5*this.chartData.candleWidth*(this.w/a);if((this.w-this.chartData.rightPadding)/i<e&&i!==1/0){var r=(this.w-this.chartData.rightPadding)/e/i;t.startX<t.endX?(t.startX=t.startX*r,t.endX=t.endX/r>this.w?this.w:t.endX/r):(t.startX=t.endX/r>this.w?this.w:t.endX/r,t.endX=t.endX*r),a=Math.abs(t.startX-t.endX)}var s=Math.abs(t.startY-t.endY),n=Math.min(t.startY,t.endY),o=Math.min(t.startX,t.endX)+a,h=n+s,c=n;t.maxValue=this.toYValue(c),t.minValue=this.toYValue(h),t.startDate=this.toXValue(o),t.candleWidth=this.chartData.candleWidth*(this.w/a),t.startX=this.w-parseFloat(this.showData[0].x),t.click=a<40},ne.prototype.addNavBtnsEvents=function(){var t=this.parent.querySelector(".tch-nav-buttons.tch-nav-many"),e=this.parent.querySelector(".tch-nav-buttons.tch-nav-one"),a=t.querySelector(".tch-nav-left"),i=t.querySelector(".tch-nav-out"),r=t.querySelector(".tch-nav-ref"),s=t.querySelector(".tch-nav-in"),n=t.querySelector(".tch-nav-right"),o=this,h=.8*parseInt(t.style.left.replace(/px/,""),10),c=1.2*t.getBoundingClientRect().width+h/.8,l=.85*t.offsetTop;t.onmousemove=function(){var a=parseInt(o.crosshair.params.x,10);o.crosshair.params.y>=l&&a>=h&&a<=c?t.classList.toggle("tch-active",!0):t.classList.toggle("tch-active",!1),o.chartData.data.bid&&o.chartData.data.bid[0]&&o.showData&&o.showData[0]&&o.chartData.data.bid[0].date!==o.showData[0].date?e.classList.toggle("tch-active",!0):e.classList.toggle("tch-active",!1)},t.onmousedown=function(){o.setActiveChart()},e.onmousedown=function(){for(var t=o.toXPixels(o.chartData.data.bid[0].date),a=parseFloat(o.showData[0].x),i=t-a,r=100,s=i/(600/r);s>100&&r>=10;)s=i/(600/(r-=5));e.intervalId||(e.intervalId=setInterval((function(){o.moveRightChart(o,s),o.chartData.data.bid[0].date===o.showData[0].date&&(t=o.toXPixels(o.chartData.data.bid[0].date),i=t-o.w+o.w/20,o.moveRightChart(o,i),clearInterval(e.intervalId),e.intervalId=null)}),r),o.setActiveChart())},this.navButtonStartContainer.onmouseup=function(){o.chartData.data.bid[0].date!==o.showData[0].date?e.classList.toggle("tch-active",!0):e.classList.toggle("tch-active",!1)},a.addEventListener("mousedown",(function(){o.moveLeftChart(o,10),a.interval=setInterval((function(){o.moveLeftChart(o,10)}),100)})),a.addEventListener("mouseleave",(function(){clearInterval(a.interval)})),a.addEventListener("mouseup",(function(){clearInterval(a.interval)})),i.addEventListener("click",(function(){o.zoomX(100,1.2,0)})),r.addEventListener("click",(function(){var t=!1;for(o.chartData.candleWidth=6,o.chartData.spacing=1.5*o.chartData.candleWidth;!o.showData[0].isCurrentData;)o.moveRightChart(o,10*o.showData.length),t=!0;(t||o.techChart.configuration.isMoveChartOnResetAnyway)&&o.moveRightChart(o,o.w*o.techChart.configuration.offsetChart),o.zoomX(0,1,0)})),s.addEventListener("click",(function(){o.zoomX(-100,1.2,0)})),n.addEventListener("mousedown",(function(){o.moveRightChart(o,10),n.interval=setInterval((function(){o.moveRightChart(o,10)}),100)})),n.addEventListener("mouseleave",(function(){clearInterval(n.interval)})),n.addEventListener("mouseup",(function(){clearInterval(n.interval)}))},ne.prototype.moveLeftChart=function(t,e){this.moveChartX(this,-e)&&(this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),t.chartData.indicators&&t.chartData.indicators.length&&t.createIndicatorsShowData(),this.updateNavPanelAction())},ne.prototype.moveRightChart=function(t,e){this.moveChartX(this,e)&&(this.showData[0].date===this.selectedData[0].date&&this.showData[this.showData.length-1].date===this.selectedData[this.selectedData.length-1].date||(this.selectedData=this.getSelectedDataByShowData(this.showData),this.chartData.scaleParams=this.getScaleParams(this.selectedData,this.h,this.chartData.precission),this.resizeShowDataValuesY(this.showData,this.h,this.chartData.scaleParams)),t.chartData.indicators&&t.chartData.indicators.length&&t.createIndicatorsShowData(),this.updateNavPanelAction())},ne.prototype.updateNavPanelAction=function(){this.updateDrawingObjectsPixels(),this.draw(this.showData,this.h),this.valueAxis=this.getValueAxis(this.chartData.scaleParams.minB,this.chartData.scaleParams.maxB,this.valueAxisCount,this.w,this.h,this.chartData.options.Chart.scalesFontSize,this.chartData.precission),this.getOscillatorChartsAxis(),this.clearGrid(),this.drawValueAxis(this.valueAxis),this.drawTimeAxis(this.timeAxis),this.drawOscillatorChartsAxis(),this.drawChartBorder(),this.drawCurrentValue(),this.redrawInfo()},ne.prototype.convertToDTO=function(){var t={};return t.chartDataDTO=this.chartData.convertToDTO(),t.w=this.w,t.h=this.h,t.offX=this.offX,t.offY=this.offY,t},ne.convertFromDTO=function(t,e){t&&e&&(this.chartData.convertFromDTO(e.chartDataDTO),t.w=e.w,t.h=e.h,t.offX=e.offX,t.offY=e.offY)},ne.prototype.setGetNewsTimeout=function(){var t=this,e=setTimeout((function(){t.processGetNews(t,e)}),500);this.getNewsTimeout=e},ne.prototype.processGetNews=function(t,e){t.getNewsTimeout===e&&(t.getNews(t.showData)||t.updateNewsBubbles(),t.getNewsTimeout=null,t=null)},ne.prototype.getNews=function(t){if(!t||0===t.length)return!1;var e=t[t.length-1].date,a=t[0].date;return this.chartData.getNews(e,a)},ne.prototype.setGetEventsTimeout=function(){var t=this,e=setTimeout((function(){t.processGetEvents(t,e)}),500);this.getEventsTimeout=e},ne.prototype.processGetEvents=function(t,e){t.getEventsTimeout===e&&(t.getEvents(t.showData)||t.updateEventsBubbles(),t.getEventsTimeout=null,t=null)},ne.prototype.getEvents=function(t){if(!t||0===t.length)return!1;var e=t[t.length-1].date,a=t[0].date;return this.chartData.getEvents(e,a)},ne.prototype.moveNewsBubblesY=function(t){this.moveBubblesY(t,this.newsBubbles)},ne.prototype.moveNewsBubblesX=function(t){this.moveBubblesX(t,this.newsBubbles)},ne.prototype.showNewsBubbles=function(){this.showBubbles(this.newsBubbles,this.newsBubblesContainer)},ne.prototype.resizeNewsBubbles=function(){this.resizeBubbles(this.newsBubbles,this.chartData.candleWidth),this.setRecreateNewsBubblesTimeout()},ne.prototype.removeNewsTooltip=function(){this.removeBubblesTooltip(this.newsBubbles)},ne.prototype.focusNewsBubbles=function(t,e){for(var a=0;a<this.newsBubbles.length;a++){if(this.newsBubbles[a].isFocused(t,e)){setTimeout(this.processNewsBubbleFocus.bind(this,this.newsBubbles[a]),400),this.newsBubbles[a].isBubbleFocused=!0;break}if(this.newsBubbles[a].isBubbleFocused){this.newsBubbles[a].isBubbleFocused=!1;break}this.newsBubbles[a].newsTooltip&&(this.newsBubbles[a].isBubbleFocused=!1,this.newsBubbles[a].hideTooltip("newsTooltip"))}},ne.prototype.processNewsBubbleFocus=function(t){if(this.eventsTooltipContainer.classList.contains("tch-hidden")&&t.isBubbleFocused)if(t.newsTooltip)""===t.newsTooltip.parentDiv.innerHTML?t.newsTooltip.refresh():t.newsTooltip&&t.newsTooltip.leaveTimeout&&(clearTimeout(t.newsTooltip.leaveTimeout),t.newsTooltip.leaveTimeout=null);else{var e={bubble:t};t.newsTooltip=new Y(this.chartData,e),t.newsTooltip.init()}},ne.prototype.updateNewsBubbles=function(){var t=this.chartData.convertValueToServerPeriod(this.chartData.period.toString());this.techChart.configuration.timeframesForNews.indexOf(t)>=0&&this.updateBubbles(this.newsBubbles,0,this.w-this.clipPathOffset,this.chartData.newsData.news,this.newsBubblesContainer,"NewsBubble")},ne.prototype.removeAllNewsBubbles=function(){for(var t=0;t<this.newsBubbles.length;t++)this.newsBubbles[t].remove();this.newsBubbles=[]},ne.prototype.createNewsBubbles=function(t){this.newsBubbles=z.getBubbles(this.chartData,t,"NewsBubble")},ne.prototype.setRecreateNewsBubblesTimeout=function(){var t=this,e=setTimeout((function(){t.processRecreateNewsBubbles(t,e)}),250);this.recreateNewsBubblesTimeout=e},ne.prototype.processRecreateNewsBubbles=function(t,e){t.recreateNewsBubblesTimeout===e&&(t.removeAllNewsBubbles(),t.setGetNewsTimeout(),t.updateNewsBubbles(),t.resizeBubbles(t.newsBubbles,t.chartData.candleWidth),t.recreateNewsBubblesTimeout=null,t=null)},ne.prototype.moveEventsBubblesY=function(t){this.moveBubblesY(t,this.eventsBubbles)},ne.prototype.moveEventsBubblesX=function(t){this.moveBubblesX(t,this.eventsBubbles)},ne.prototype.showEventsBubbles=function(){this.showBubbles(this.eventsBubbles,this.eventsBubblesContainer)},ne.prototype.resizeEventsBubbles=function(){this.resizeBubbles(this.eventsBubbles,this.chartData.candleWidth),this.setRecreateEventsBubblesTimeout()},ne.prototype.removeEventsTooltip=function(){this.removeBubblesTooltip(this.eventsBubbles)},ne.prototype.focusEventsBubbles=function(t,e){for(var a=0;a<this.eventsBubbles.length;a++){if(this.eventsBubbles[a].isFocused(t,e)){setTimeout(this.processEventsBubbleFocus.bind(this,this.eventsBubbles[a]),400),this.eventsBubbles[a].isBubbleFocused=!0;break}if(this.eventsBubbles[a].isBubbleFocused){this.eventsBubbles[a].isBubbleFocused=!1;break}this.eventsBubbles[a].tooltip&&(this.eventsBubbles[a].isBubbleFocused=!1,this.eventsBubbles[a].hideTooltip("eventsTooltip"))}},ne.prototype.processEventsBubbleFocus=function(t){if(this.newsTooltipContainer.classList.contains("tch-hidden")&&t.isBubbleFocused)if(t.tooltip)""===t.tooltip.parentDiv.innerHTML?t.tooltip.refresh():t.tooltip&&t.tooltip.leaveTimeout&&(clearTimeout(t.tooltip.leaveTimeout),t.tooltip.leaveTimeout=null);else{var e={bubble:t};t.tooltip=new W(this.chartData,e),t.tooltip.init()}},ne.prototype.updateEventsBubbles=function(){var t=this.chartData.convertValueToServerPeriod(this.chartData.period.toString());this.techChart.configuration.timeframesForEvents.indexOf(t)>=0&&this.updateBubbles(this.eventsBubbles,0,this.w-this.clipPathOffset,this.chartData.eventsData.events,this.eventsBubblesContainer,"EventsBubble")},ne.prototype.removeAllEventsBubbles=function(){for(var t=0;t<this.eventsBubbles.length;t++)this.eventsBubbles[t].remove();this.eventsBubbles=[]},ne.prototype.createEventsBubbles=function(t){this.eventsBubbles=z.getBubbles(this.chartData,t,"EventsBubble")},ne.prototype.setRecreateEventsBubblesTimeout=function(){var t=this,e=setTimeout((function(){t.processRecreateEventsBubbles(t,e)}),250);this.recreateEventsBubblesTimeout=e},ne.prototype.processRecreateEventsBubbles=function(t,e){t.recreateEventsBubblesTimeout===e&&(t.removeAllEventsBubbles(),t.setGetEventsTimeout(),t.updateEventsBubbles(),t.resizeBubbles(t.eventsBubbles,t.chartData.candleWidth),t.recreateEventsBubblesTimeout=null,t=null)},ne.prototype.moveBubblesX=function(t,e){if(e.length)for(var a=0;a<e.length;a++)e[a].moveBubbleX(t)},ne.prototype.moveBubblesY=function(t,e){if(e.length)for(var a=0;a<e.length;a++)e[a].moveBubbleY(t)},ne.prototype.resizeBubbles=function(t,e){for(var a=0;a<t.length;a++)t[a].updatePixels(),t[a].resize(e)},ne.prototype.showBubbles=function(t,e){for(var a=0;a<t.length;a++)t[a].parent||t[a].show(e)},ne.prototype.removeBubblesTooltip=function(t){for(var e=0;e<t.length;e++)t[e].removeTooltip()},ne.prototype.getExtraIntervalToRight=function(t){if(0===this.showData.length)return[];var e=this.showData[0].date,a=this.showData[this.showData.length-1].date;return t.length&&(a=t[0].getMaxItemsDate()),{from:a,to:e}},ne.prototype.getExtraIntervalToLeft=function(t){if(0===this.showData.length)return[];var e=this.showData[0].date;return t.length&&(e=t[t.length-1].getMinItemsDate()),{from:this.showData[this.showData.length-1].date,to:e}},ne.prototype.deleteRedundantBubblesLeftRight=function(t,e,a){z.deleteRedundantBubblesLeftRight(t,e,a)},ne.prototype.needsBubblesToLeft=function(t,e){return 0===t.length||parseFloat(t[t.length-1].point.x)>e},ne.prototype.needsBubblesToRight=function(t,e){return 0===t.length||parseFloat(t[0].point.x)<e},ne.prototype.updateBubbles=function(t,e,a,i,r,s){t.length?(this.needsBubblesToLeft(t,e)&&this.addBubblesToLeft(t,r,i,s),this.needsBubblesToRight(t,a)&&this.addBubblesToRight(t,r,i,s)):(this.createBubblesByType(i,s),this.showBubblesByType(s)),this.deleteRedundantBubblesLeftRight(t,e,a)},ne.prototype.addBubblesToRight=function(t,e,a,i){var r=this.getExtraIntervalToRight(t),s=z.getBubbles(this.chartData,a,i,r.from,r.to);this.addExtraBubblesToRight(t,s,e)},ne.prototype.addBubblesToLeft=function(t,e,a,i){var r=this.getExtraIntervalToLeft(t),s=z.getBubbles(this.chartData,a,i,r.from,r.to);this.addExtraBubblesToLeft(t,s,e)},ne.prototype.addExtraBubblesToRight=function(t,e,a){if(e.length)for(var i=0;i<e.length;i++)z.isTouch(t[0],e[i])?t[0].items=e[i].items.concat(t[0].items):(e[i].show(a),t.unshift(e[i]))},ne.prototype.addExtraBubblesToLeft=function(t,e,a){if(e.length)for(var i=0;i<e.length;i++)z.isTouch(t[t.length-1],e[i])?t[t.length-1].items=t[t.length-1].items.concat(e[i].items):(e[i].show(a),t.push(e[i]))},ne.prototype.createBubblesByType=function(t,e){this["create"+e+"s"](t)},ne.prototype.showBubblesByType=function(t){this["show"+t+"s"]()},ne.prototype.updateSignals=function(){this.techChart.configuration.modules.signals&&(this.signalsPanel||this.createSignalsPanel(),this.signals=Object.keys(this.chartData.signalsData),this.signalsPanel&&(this.signalsPanel.spanNumber.textContent=this.signals.length,this.signalsPanel.spanEye.classList.toggle("tch-eye-active",this.chartData.isShowAllSignals),this.fillSignalsPanelBody()),this.checkActiveSignalRelevance())},ne.prototype.getSignalsPanelHtml=function(){var t=this.chartData.isShowSignalsBody?"tch-up":"tch-down",e=this.chartData.isShowAllSignals?"tch-eye-active":"",a=this.chartData.isShowSignalsBody?"":"tch-hidden";return"<div class='tch-signals-panel-header'><span>"+this.techChart.translation.signals+"</span><span class='tch-signals-number'></span><span class='tch-signals-eye "+e+"'></span><span class='tch-signals-arrow "+t+"'></span></div></div><div class='tch-signals-panel-body "+a+"'><ul></ul></div>"},ne.prototype.getSignalsBodyRow=function(t){var e=this.chartData.signalsData[t],a=e.isVisible?"tch-eye-active":"";return"<li id='"+e.id+"'><span class='tch-signals-period'>"+e.period+"</span><span>"+this.techChart.translation[e.forecast.toLowerCase()]+"</span><span>"+e.strength+"</span><span class='tch-signals-eye "+a+"'></span></li>"},ne.prototype.fillSignalsPanelBody=function(){this.signalsPanel.body.list.innerHTML=this.getSignalsBodyRows(this.signals),this.addSignalsPanelBodyEvents()},ne.prototype.addSignalsPanelBodyEvents=function(){for(var t=this.signalsPanel.body.querySelectorAll(".tch-signals-eye"),e=this,a=0;a<t.length;a++)t[a].onclick=function(t){e.signalsPanelBodyEyeClick(t)};for(var i=this.signalsPanel.body.querySelectorAll(".tch-signals-period"),r=0;r<i.length;r++)i[r].onclick=function(t){e.signalsPanelBodyPeriodClick(t)}},ne.prototype.signalsPanelBodyPeriodClick=function(t){var e=t.target.parentNode.getAttribute("id"),a=this.chartData.signalsData[e].period;this.chartData.isShowAllSignals=!0,this.hideSignals(a),this.chartData.signalsData[e].isVisible=!0,this.chartData.period!==this.chartData.convertValueToPeriod(a)&&this.chartData.techChart.changePeriod(a),this.techChart.configuration.signalTypesData.length&&!this.techChart.configuration.signalTypesData.includes(this.chartData.typeData)&&this.chartData.techChart.changeTypeData(this.techChart.configuration.signalTypesData[0],this.chartData.techChart),this.drawActiveSignal(),this.updateSignals(),this.chartData.techChart.autoSaveParams()},ne.prototype.signalsPanelBodyEyeClick=function(t){var e=t.target.classList.toggle("tch-eye-active"),a=t.target.parentNode.getAttribute("id");if(e){var i=this.chartData.signalsData[a].period;this.hideSignals(i),this.chartData.signalsData[a].isVisible=!0,this.closeOtherEyes(a,i),this.signalsPanel.spanEye.classList.toggle("tch-eye-active",!0),this.chartData.isShowAllSignals=!0,this.drawActiveSignal()}else this.chartData.signalsData[a].isVisible=!1,this.activeSignal&&this.activeSignal.id===parseInt(a,10)&&(this.clearSignals(),this.activeSignal=null);this.updateSignals(),this.chartData.techChart.autoSaveParams()},ne.prototype.closeOtherEyes=function(t,e){for(var a=this.signalsPanel.getElementsByTagName("li"),i=0;i<a.length;i++)a[i].id!==t&&a[i].children[0].textContent===e&&a[i].children[3].classList.toggle("tch-eye-active",!1)},ne.prototype.getSignalsBodyRows=function(t){for(var e="",a=0;a<t.length;a++)t[a].isVisible&&this.signalsPanel.spanEye.classList.toggle("tch-eye-active",!0),e+=this.getSignalsBodyRow(t[a]);return e},ne.prototype.createSignalsPanel=function(){this.techChart.configuration.modules.signals&&!this.signalsPanel&&(this.signalsPanel=this.chartData.techChart.createSignalsPanel(),this.signalsPanel&&this.addSignalsPanelEvents())},ne.prototype.addSignalsPanelEvents=function(){var t=this;this.signalsPanel&&(this.signalsPanel.spanArrow.onclick=function(e){t.signalsPanelSpanArrowClick(e,t)},this.signalsPanel.spanEye.onclick=function(e){t.signalsPanelSpanEyeClick(e)})},ne.prototype.signalsPanelSpanArrowClick=function(t){var e=t.target.classList.contains("tch-down");this.applySignalsPanelListShowState(e)},ne.prototype.applySignalsPanelListShowState=function(t){this.signalsPanel.spanArrow.classList.toggle("tch-up",t),this.signalsPanel.spanArrow.classList.toggle("tch-down",!t),this.signalsPanel.body.classList.toggle("tch-hidden",!t),this.chartData.isShowSignalsBody=t,this.chartData.techChart.autoSaveParams()},ne.prototype.signalsPanelSpanEyeClick=function(t){if(this.chartData.isShowAllSignals=!this.chartData.isShowAllSignals,t.target.classList.toggle("tch-eye-active",this.chartData.isShowAllSignals),this.chartData.isShowAllSignals)this.drawActiveSignal();else{for(var e=this.signalsPanel.body.querySelectorAll(".tch-signals-eye"),a=0;a<e.length;a++)e[a].classList.toggle("tch-eye-active",!1);for(var i in this.chartData.signalsData)this.chartData.signalsData.hasOwnProperty(i)&&(this.chartData.signalsData[i].isVisible=!1);this.clearSignals()}this.chartData.isShowAllSignals||this.updateSignals(),this.chartData.techChart.autoSaveParams()},ne.prototype.drawActiveSignal=function(){var t=this.getActiveSignalData();if(this.activeSignal&&this.clearSignals(),t){var e=this.getActiveSignalClassByType(t.patternType);this.activeSignal=new e(this.chartData,{signal:t,isInstanceWithOffset:this.techChart.configuration.isInstanceWithOffset}),this.redrawActiveSignal()}},ne.prototype.getActiveSignalClassByType=function(t){switch(t){case"chartPattern":return Z;case"keyLevelsPattern":return rt;case"fibonacciPattern":return et;default:return Z}},ne.prototype.getActiveSignalData=function(){var t=null,e=this.techChart.getActiveChartData().convertValueToServerPeriod(this.chartData.period);for(var a in this.chartData.signalsData)if(this.chartData.signalsData.hasOwnProperty(a)&&this.chartData.signalsData[a].isVisible&&this.chartData.signalsData[a].period===e){t=this.chartData.signalsData[a];break}return t},ne.prototype.hideSignals=function(t){for(var e in this.chartData.signalsData)this.chartData.signalsData.hasOwnProperty(e)&&this.chartData.signalsData[e].period===t&&(this.chartData.signalsData[e].isVisible=!1)},ne.prototype.redrawActiveSignal=function(){this.activeSignal&&this.chartData.isShowAllSignals&&this.techChart.configuration.signalTypesData.includes(this.chartData.typeData)?(this.clearSignals(),this.activeSignal.calcPoints(),this.activeSignal.draw(this.canvasSignalsContext)):this.clearSignals()},ne.prototype.checkActiveSignalRelevance=function(){if(this.activeSignal){var t=this.chartData.convertValueToPeriod(this.activeSignal.data.period);-1!==this.signals.indexOf(this.activeSignal.id.toString())&&t===this.chartData.period||(this.activeSignal=null,this.clearSignals())}},ne.prototype.drawFirefly=function(){null===this.fireflyAnimationFrameId&&this.animateDrawFirefly()},ne.prototype.animateDrawFirefly=function(){var t=this;this.clearCanvas(this.canvasFirefly,this.canvasFireflyContext);var e=this.getFireflyPosition(this.showData[0]);if(this.fireflyOpacity+=this.fireflyOpacityDelta,this.fireflyOpacity>1?(this.fireflyOpacityDelta*=-1,this.fireflyOpacity=1):this.fireflyOpacity<0&&(this.fireflyOpacityDelta*=-1,this.fireflyOpacity=0),e&&e.x&&e.y){var a=e.x,i=e.y,s=this.getFireflyGradient(a,i);r.drawCircle(null,this.canvasFireflyContext,a,i,this.chartData.options.Chart.fireflyOuterRadius,null,s,null,this.fireflyOpacity),r.drawCircle(null,this.canvasFireflyContext,a,i,this.chartData.options.Chart.fireflyRadius,null,this.chartData.colors.Chart.colorFireflyInner,null,1)}this.fireflyAnimationFrameId=window.requestAnimationFrame((function(){return t.animateDrawFirefly()})),this.chartData.chart===this&&this.isDrawCurrentShowData(this.chartData,this.showData)||this.stopFireflyAnimation()},ne.prototype.getFireflyGradient=function(t,e){var a=this.canvasFireflyContext.createRadialGradient(t,e,0,t,e,this.chartData.options.Chart.fireflyOuterRadius),i=this.chartData.colors.Chart.colorFirefly.replace("rgb(","").replace(")","").split(",").map((function(t){return parseInt(t,10)})),r="".concat(i[0],",").concat(i[1],",").concat(i[2]);return a.addColorStop(0,"rgba(".concat(r,",1)")),a.addColorStop(.3,"rgba(".concat(r,",0.5)")),a.addColorStop(.6,"rgba(".concat(r,",0.2)")),a.addColorStop(1,"rgba(".concat(r,",0)")),a},ne.prototype.getFireflyPosition=function(t){if(!t||!t.posCandle)return null;var e=parseFloat(t.close)>parseFloat(t.open);return{x:t.x,y:e?t.posCandle.y1:t.posCandle.y2}},ne.prototype.stopFireflyAnimation=function(){window.cancelAnimationFrame(this.fireflyAnimationFrameId),this.fireflyAnimationFrameId=null,this.clearCanvas(this.canvasFirefly,this.canvasFireflyContext)},ot.prototype=Object.create(H.prototype),ot.prototype.constructor=ot,ht.prototype=Object.create(b.prototype),ht.prototype.constructor=ht,ht.convertFromDTO=function(t,e){var a=b.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},ht.prototype.getTopData=function(t,e,a,i){var r=e||0===e?e:pt.distanceToLine(t,a),s={};s.x=(parseFloat(t.x1)+parseFloat(t.x2))/2,s.y=(parseFloat(t.y1)+parseFloat(t.y2))/2;var n=pt.findLineAngleDeg({x1:this.points[0].x,y1:this.points[0].y,x2:this.points[1].x,y2:this.points[1].y}),o=r*Math.cos(pt.degToRad(90-n)),h=r*Math.sin(pt.degToRad(90-n)),c={};return i?(c.x=s.x+o,c.y=s.y+h,c.h=r):(c.x=s.x-o,c.y=s.y-h,c.h=r),c},ht.prototype.getMiddleData=function(t,e){var a={};return a.v=(parseFloat(t.v)+parseFloat(e.v))/2,a.d=parseInt((t.d+e.d)/2,10),a},ht.prototype.getMiddlePoint=function(t,e){var a={};return a.x=(parseFloat(t.x)+parseFloat(e.x))/2,a.y=(parseFloat(t.y)+parseFloat(e.y))/2,a},ht.prototype.getPositions=function(){var t=r.getPosition(this.points[0].x,this.width),e=r.getPosition(this.points[0].y,this.width),a=r.getPosition(this.points[1].x,this.width),i=r.getPosition(this.points[1].y,this.width);if(this.points[2]&&this.points[3])var s=r.getPosition(this.points[2].x,this.width),n=r.getPosition(this.points[2].y,this.width),o=r.getPosition(this.points[3].x,this.width),h=r.getPosition(this.points[3].y,this.width);return{x0:t,y0:e,x1:a,y1:i,x2:s,y2:n,x3:o,y3:h}},ct.prototype=Object.create(w.prototype),ct.prototype.constructor=ct,ct.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},ct.prototype.getPathString=function(t){return"<path d='M512 0c-176.732 0-320 143.268-320 320 0 320 320 704 320 704s320-384 320-704c0-176.732-143.27-320-320-320zM512 512c-106.040 0-192-85.96-192-192s85.96-192 192-192 192 85.96 192 192-85.96 192-192 192z' fill="+t+"></path>"},ct.prototype.applyPosition=function(){if(this.divText){var t=this.divText.getBoundingClientRect();this.divText.style.top=parseFloat(this.points[0].y)-t.height+"px",this.divText.style.left=parseFloat(this.points[0].x)-t.width/2+"px"}},ct.prototype.applyNoteParams=function(){this.note.style.color=this.colorLabel,this.textSpanBackground.style.fill=this.fill?this.fillColor:"",this.textSpanBackground.style.stroke=this.colorLabel;for(var t=[{x:0,y:0},{x:this.textSpanBackgroundWidth/2-10,y:0},{x:this.textSpanBackgroundWidth/2,y:this.textSpanBackgroundHeight},{x:this.textSpanBackgroundWidth/2+10,y:0},{x:this.textSpanBackgroundWidth,y:0}],e="",a=0;a<t.length;a++)e=e+(t[a].x+",")+t[a].y+" ";this.textSpanBackground.getElementsByTagName("polyline")[0].setAttribute("points",e)},ct.prototype.applyTextParams=function(){this.pText.textContent=this.textArea,this.pText.style.fontSize=this.fontSize+"px",this.pText.style.fontFamily=this.fontFamily,this.pText.style.color=this.color,this.pText.style.backgroundColor=this.fill?this.fillColor:"",this.pText.style.fontWeight="on"===this.bold?"bolder":"normal",this.pText.style.fontStyle="on"===this.italic?"italic":"normal"},ct.prototype.getStylePropsNames=function(){return["color","fontFamily","fontSize","textArea","fill","fillColor","label","colorLabel","bold","italic"]},ct.prototype.getLabelRow=function(){return[{className:"tch-ss-backgroundRow"},{text:this.chartData.techChart.translation.notecolor,options:{line:this,id:"tch-settingsStyle-input-colorLabel",forId:"tch-settingsStyle-input-label",labelClassName:"label-note",name:"colorLabel",type:"colorpicker",value:this.colorLabel,onchange:this.changeValueInput}},{text:"",options:{line:this,id:"tch-settingsStyle-input-label",afterLabelClassName:"after-label-note",name:"label",type:"checkbox",checked:this.label,onchange:this.changeCheckboxInput}}]},lt.prototype=Object.create(ct.prototype),lt.prototype.constructor=lt,lt.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},At.prototype=Object.create(w.prototype),At.prototype.constructor=At,At.convertFromDTO=function(t,e){return w.convertFromDTO(t,e)},dt.prototype=Object.create(f.prototype),dt.prototype.constructor=dt,dt.prototype.isPointOnFlag=function(t,e){this.points[0].x=parseFloat(this.points[0].x),this.points[0].y=parseFloat(this.points[0].y);var a={x1:this.points[0].x,x2:this.points[0].x+this.size,y1:this.points[0].y-this.size,y2:this.points[0].y};return pt.isPointInRect(a,{x:t,y:e},5)},dt.convertFromDTO=function(t,e){var a=ut.convertFromDTO(t,e);return a.updateCustomPropsByObj(a,e),a},dt.prototype.applyFlagParams=function(){this.divText.style.left=this.points[0].x-this.centring.x+"px",this.divText.style.top=this.points[0].y-this.size+"px",this.circles[0].points[0].x=this.points[0].x,this.circles[0].points[0].y=this.points[0].y,null===this.barNumber&&(this.barNumber=this.getBarNumber())},dt.prototype.applyPosition=function(){if(this.divText){var t=this.divText.getBoundingClientRect();this.divText.style.top=t.height+"px",this.divText.style.left=t.width/2+"px"}},dt.prototype.applyIconParams=function(){this.icon.style.color=this.flagColor},dt.prototype.getPathString=function(t){return"<rect style='fill:"+t+";stroke:#000000;stroke-width:0.3;' width='5.3' height='6' x='6.5' y='3' /><rect style='fill:"+t+";stroke:#000000;stroke-width:0.3;'width='5.3'height='6'x='1.2'y='1.5' /><line style='stroke-width:0.8;stroke:#000000' x1='0.4' y1='1.4' x2='0.4' y2='15' ></line>"},dt.prototype.getBarNumber=function(){var t=ne.binaryIndexOfCandleByTime(this.data[0].d,this.chartData.data[this.chartData.techChart.configuration.typeData]);return t>=0?t:0},dt.prototype.createDiv=function(){this.divText=document.createElement("div"),this.divText.classList.toggle("tch-divText",!0),this.divText.setAttribute("id",this.id),this.divText.style.width=this.size+"px"},dt.prototype.createIcon=function(){this.icon=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.icon.setAttribute("id",this.id+"-icon-simbol"),this.icon.classList.toggle("tch-icon-simbol",!0),this.icon.setAttribute("viewBox","0 0 17 17"),this.icon.setAttribute("heigth",this.size+"px"),this.icon.setAttribute("width",this.size+"px"),this.icon.style.display="block",this.icon.innerHTML=this.getPathString(this.flagColor)},pt.isPointOnLine=function(t,e){var a={x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2};if(pt.isPointInRect(a,e,5)){var i=t.x1*t.y2-t.x2*t.y1,r=t.y1-t.y2,s=t.x2-t.x1;return Math.abs(r*e.x+s*e.y+i)/Math.sqrt(r*r+s*s)<5}return!1},pt.isPointInRect=function(t,e,a){var i=Math.min(t.x1,t.x2)-a,r=Math.max(t.x1,t.x2)+a,s=Math.min(t.y1,t.y2)-a,n=Math.max(t.y1,t.y2)+a;return e.x>=i&&e.x<=r&&e.y>=s&&e.y<=n},pt.isPointOnCircle=function(t,e){return Math.abs(t.points[0].x-e.x)<=t.radius&&Math.abs(t.points[0].y-e.y)<=t.radius},pt.isPointOnEllipse=function(t,e,a,i){var r=((e.x-t.h)*Math.cos(a)+(e.y-t.k)*Math.sin(a))*((e.x-t.h)*Math.cos(a)+(e.y-t.k)*Math.sin(a)),s=((e.x-t.h)*Math.sin(a)-(e.y-t.k)*Math.cos(a))*((e.x-t.h)*Math.sin(a)-(e.y-t.k)*Math.cos(a)),n=r/(t.rx*t.rx)+s/(t.ry*t.ry);return Math.abs(n-1)<=i},pt.isPointInPolygon=function(t,e,a){for(var i=!1,r=a.x,s=a.y,n=r.length,o=n-1,h=0;h<n;o=h++){var c=(r[o]-r[h])*(e-s[h])/(s[o]-s[h])+r[h];(s[h]<=e&&e<s[o]||s[o]<=e&&e<s[h])&&t>c&&(i=!i)}return i},pt.arePointsOnBezier=function(t,e,a,i,r,s){var n=!1,o=[],h=0;(i>.9||i<=0)&&(i=.1);for(var c=0;c<1+i;c+=i)if(c>1&&(c=1),0===c?(o.push(pt.getPeekOnCurve(c,t,e,a)),n=pt.isPointOnLine({x1:t.x,x2:a.x,y1:t.y,y2:a.y},{x:r,y:s})):(h++,o.push(pt.getPeekOnCurve(c,t,e,a)),n=pt.isPointOnLine({x1:o[h-1].x,x2:o[h].x,y1:o[h-1].y,y2:o[h].y},{x:r,y:s})),n)return!0;return!1},pt.getPeekOnCurve=function(t,e,a,i){var r={},s=(1-t)*(1-t),n=2*t*(1-t),o=t*t;return r.x=s*e.x+n*a.x+o*i.x,r.y=s*e.y+n*a.y+o*i.y,r},pt.getControlPoint=function(t,e,a,i){var r={},s=(1-t)*(1-t),n=2*t*(1-t),o=t*t;return r.x=(a.x-s*e.x-o*i.x)/n,r.y=(a.y-s*e.y-o*i.y)/n,r},pt.createDrawingObjectByType=function(t,e){switch(t){case"ArrowMarkLeft":return new m(e[0],e[1]);case"ArrowMarkRight":return new B(e[0],e[1]);case"ArrowMarkUp":return new C(e[0],e[1]);case"ArrowMarkDown":return new D(e[0],e[1]);case"Circle":return new v(e[0],e[1]);case"TrendLine":return new b(e[0],e[1]);case"HorizontalLine":return new x(e[0],e[1]);case"VerticalLine":return new F(e[0],e[1]);case"Arrow":return new S(e[0],e[1]);case"Ray":return new P(e[0],e[1]);case"HorizontalRay":return new T(e[0],e[1]);case"TrendAngle":return new E(e[0],e[1]);case"ParallelChannel":return new L(e[0],e[1]);case"DisjointAngle":return new Q(e[0],e[1]);case"FlatTopBottom":return new O(e[0],e[1]);case"Polyline":return new U(e[0],e[1]);case"Rectangle":return new H(e[0],e[1]);case"Curve":return new k(e[0],e[1]);case"Triangle":return new N(e[0],e[1]);case"RotatedRect":return new I(e[0],e[1]);case"Arc":return new M(e[0],e[1]);case"Roulete":return new ot(e[0],e[1]);case"Ellipse":return new ht(e[0],e[1]);case"Text":return new w(e[0],e[1]);case"Note":return new ct(e[0],e[1]);case"AnchoredNote":return new lt(e[0],e[1]);case"Brush":return new K(e[0],e[1]);case"AnchoredText":return new At(e[0],e[1]);case"Flag":return new dt(e[0],e[1]);default:return new ut(e)}},pt.convertFromDTO=function(t,e){switch(e.type){case"ArrowMarkLeft":return m.convertFromDTO(t,e);case"ArrowMarkRight":return B.convertFromDTO(t,e);case"ArrowMarkUp":return C.convertFromDTO(t,e);case"ArrowMarkDown":return D.convertFromDTO(t,e);case"Circle":return v.convertFromDTO(t,e);case"TrendLine":return b.convertFromDTO(t,e);case"HorizontalLine":return x.convertFromDTO(t,e);case"VerticalLine":return F.convertFromDTO(t,e);case"Arrow":return S.convertFromDTO(t,e);case"Ray":return P.convertFromDTO(t,e);case"HorizontalRay":return T.convertFromDTO(t,e);case"TrendAngle":return E.convertFromDTO(t,e);case"ParallelChannel":return L.convertFromDTO(t,e);case"DisjointAngle":return Q.convertFromDTO(t,e);case"FlatTopBottom":return O.convertFromDTO(t,e);case"Arc":return M.convertFromDTO(t,e);case"Ellipse":return ht.convertFromDTO(t,e);case"RotatedRect":return I.convertFromDTO(t,e);case"Text":return w.convertFromDTO(t,e);case"Note":return ct.convertFromDTO(t,e);case"AnchoredNote":return lt.convertFromDTO(t,e);case"Brush":return K.convertFromDTO(t,e);case"Flag":return dt.convertFromDTO(t,e);default:return ut.convertFromDTO(t,e)}},pt.distanceToLine=function(t,e){var a=t.x1*t.y2-t.x2*t.y1,i=t.y1-t.y2,r=t.x2-t.x1;return(i*e.x+r*e.y+a)/Math.sqrt(i*i+r*r)},pt.findPointOnLineByX=function(t,e){var a=parseFloat(t.x1),i=parseFloat(t.x2),r=parseFloat(t.y1),s=parseFloat(t.y2),n=i-a;return 0===n?{x:0,y:r}:{x:e,y:(s-r)*(e-a)/n+r}},pt.findPointOnLineByY=function(t,e){var a=parseFloat(t.x1),i=parseFloat(t.x2),r=parseFloat(t.y1),s=parseFloat(t.y2)-r;return 0===s?{x:a,y:0}:{x:(i-a)/s*(e-r)+a,y:e}},pt.findLineAngleDeg=function(t){var e=parseFloat(t.x1),a=parseFloat(t.x2),i=parseFloat(t.y1),r=-1*(parseFloat(t.y2)-i),s=a-e;if(0===r)return s<0?180:0;if(0===s&&r>0)return 90;if(0===s&&r<0)return-90;var n=r/s,o=pt.radToDeg(Math.atan(n));return s<0&&(o>0?o-=180:o+=180),o},pt.radToDeg=function(t){return 180*t/Math.PI},pt.degToRad=function(t){return t*Math.PI/180},pt.getTanDeg=function(t){var e=t*Math.PI/180;return Math.tan(e)},ut.precission=7,ut.nextId=1,ut.prototype.getNextId=function(){return"tch-drw-"+ut.nextId++},ut.prototype.remove=function(){this.chartData.editDrawingObject&&this.chartData.editDrawingObject.id===this.id&&(this.chartData.editDrawingObject=null),this.chartData.activeDrawingObject&&this.chartData.activeDrawingObject.id===this.id&&(this.chartData.activeDrawingObject=null);var t=this.getIndex();t>-1&&this.chartData.drawingObjects.splice(t,1)},ut.prototype.getIndex=function(){for(var t=0;t<this.chartData.drawingObjects.length;t++)if(this.chartData.drawingObjects[t].id===this.id)return t;return-1},ut.prototype.shiftTo=function(){},ut.prototype.moveTo=function(){},ut.prototype.updateValues=function(){},ut.prototype.updatePixels=function(){for(var t=0;t<this.points.length;t++)this.points[t].x=this.chartData.chart.toXPixels(this.data[t].d),this.points[t].y=this.chartData.chart.toYPixels(this.data[t].v)},ut.prototype.fillSettingsPanel=function(){},ut.prototype.removeStyleMenuElementByNames=function(t,e){for(var a=[],i=0;i<t.length;i++){a[a.length]=[];for(var r=0;r<t[i].length;r++)t[i][r].options&&-1===e.indexOf(t[i][r].options.name)&&a[a.length-1].push(t[i][r]);0===a[a.length-1].length&&a.pop()}return a},ut.prototype.applyRestoredParams=function(t){this.data=t.data,this.points=t.points,this.drawingStage=t.drawingStage,this.state=t.state,this.id=t.id},ut.prototype.convertToDTO=function(){var t={};return t.type=this.classType,t.id=this.id,t.data=ut.cloneObject(this.data),t.points=ut.cloneObject(this.points),t.drawingStage=ut.cloneObject(this.drawingStage),t.state="normal",t},ut.convertFromDTO=function(t,e){e.type||(e.type=e.classType);var a=pt.createDrawingObjectByType(e.type,[t,e]);return a.applyRestoredParams(e),a},ut.prototype.updateByObject=function(t){var e=t.convertToDTO(),a=pt.convertFromDTO(this.chartData,e);this.applyRestoredParams(a),this.chartData.chart&&this.updatePixels()},ut.prototype.draw=function(){},ut.prototype.isFocused=function(){},ut.cloneObject=function(t){return JSON.parse(JSON.stringify(t))};var oe=function(){function t(e){!function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function i(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a}(this,"cloneObject",(function(t){if(t&&"object"===ft(t))return JSON.parse(JSON.stringify(t))})),this.techChart=e,this.defParams={pair:e.configuration.pair,period:e.configuration.period,timeMode:e.configuration.timeMode,chartType:e.configuration.chartType,indicators:e.configuration.indicators,currentValue:e.configuration.currentValue,drawingObjects:[],typeData:e.configuration.typeData,currentOptions:{},isMagnetMode:e.configuration.isMagnetMode,isStayDrawingMode:e.configuration.isStayDrawingMode,isShowDrawingObjects:e.configuration.isShowDrawingObjects,isDrawingObjectsLocked:e.configuration.isDrawingObjectsLocked,isPipsShow:e.configuration.isPipsShow,cursorType:e.configuration.defaultParams.cursorType},t.defaultParams=this.defParams,this.options=this.cloneObject(e.styles.options),this.options.Chart.typeThemes=e.configuration.typeThemes,e.styles.themes?(this.themes=this.cloneObject(e.styles.themes),this.colors=this.cloneObject(this.themes[this.options.Chart.typeThemes])):this.colors=this.cloneObject(e.styles.colors),this.id=e.configuration.pair.ID,this.chartType=e.configuration.chartType,this.period=e.configuration.period,this.timeMode=e.configuration.timeMode,this.indicators=this.cloneObject(e.configuration.indicators),this.currentValue={ask:"0.00000",bid:"0.00000",mid:"0.00000",volume:0},this.pair=this.cloneObject(e.configuration.pair),this.localization=navigator.language,this.quotationName=e.configuration.quotationName,this.data={ask:[],bid:[],mid:[]},this.images=this.cloneObject(e.configuration.images),this.hasPrevData=!0,this.hasNextData=e.configuration.hasNextData,this.rightPadding=e.configuration.rightPadding,this.startDateSeconds,this.spacing,this.candleWidth=e.configuration.candleWidth,this.dataOffset=e.configuration.dataOffset,this.precission=e.configuration.precission,this.session,this.isWaitForData=!1,this.isWaitFallBackData=!1,this.chart,this.marginTop=e.configuration.marginTop,this.marginBottom=e.configuration.marginBottom,this.scaleParams=this.cloneObject(e.configuration.scaleParams),this.prevScaleParams=null,this.numb=e.configuration.numb,this.fallBack=e.configuration.fallBack,this.zoomView=e.configuration.zoomView,this.startX=this.candleWidth,this.startY=e.configuration.startY,this._state=e.configuration.state,this.drawingObjects=this.cloneObject(e.configuration.drawingObjects),this.editDrawingObject,this.activeDrawingObject,this.isDrawingObjectsLocked=e.configuration.isDrawingObjectsLocked,this.isMinMaxPricesMarksEnabled=e.configuration.isMinMaxPricesMarksEnabled,this.isStayDrawingMode=e.configuration.isStayDrawingMode,this.isShowNews=e.configuration.modules.isShowNews,this.isShowEvents=e.configuration.modules.isShowEvents,this.isShowDrawingObjects=!0,this.isMagnetMode=!1,this.isPipsShow=e.configuration.isPipsShow,this.cursorType="arrow",this.getDataOtherChartTimeOut=null,this.zoomData={},this.zoomSteps=[],this.newsData={currentFrom:null,currentTo:null,news:[]},this.eventsData={apiFrom:null,apiTo:null,currentFrom:null,currentTo:null,events:[]},this.typeData=e.configuration.typeData,this.signalsData={},this.isShowAllSignals=!1,this.isShowSignalsBody=!1,this.isShowPriceLineOfLastBar=e.configuration.modules.chartElements.isShowPriceLineOfLastBar,this.closedOption=null,this.currentTabId=null,this.isChartInitEnabled=!0}return function e(t,a,i){a&&wt(t.prototype,a),i&&wt(t,i)}(t,[{key:"state",get:function t(){return this._state},set:function t(e){this._state=e,this.techChart&&this.techChart.onChangeState&&this.techChart.onChangeState(e)}},{key:"defaultParams",get:function t(){return this.defParams}}]),t}();oe.prototype.setDefaultParamsOnUpdate=function(){return{timeMode:this.defaultParams.timeMode,currentValue:this.defaultParams.currentValue,typeData:this.defaultParams.typeData,currentOptions:this.defaultParams.currentOptions}},oe.prototype.init=function(){this.techChart.connector.addListener(this),this.techChart.connector&&this.techChart.connector.client&&this.techChart.connector.client.connected&&this.techChart&&this.techChart.connector.updateSubscription()},oe.prototype.onConnectorMessage=function(t,e,a){a&&a.callBack?a.callBack(t,e,a):e.onMessage(t,e)},oe.prototype.onMessage=function(t,e){t.rates?e.processRates(t,e):e.processSignals(t,e)},oe.prototype.onConnect=function(){this.isWaitForData=!1,this.getFirstData(),this.techChart.configuration.modules.signals&&this.setSignalsInterval()},oe.prototype.getMiddlePrice=function(t){return((parseFloat(t.ask)+parseFloat(t.bid))/2).toFixed(this.precission)},oe.prototype.processRates=function(t,e){var a=!1;if(t.rates)for(var i=0;i<t.rates.length;i++)if(t.rates[i].security===e.pair.Name){a=!0;var r={};r.ask=t.rates[i].ask,r.bid=t.rates[i].bid,r.mid=this.getMiddlePrice(t.rates[i]),r.volume=t.rates[i].volume,this.currentValue.ask===r.ask&&this.currentValue.bid===r.bid||(this.chart?this.chart.drawCurrent(r):this.updateCurrentData(r));break}if(this.chart&&t.investarenaTime&&e.data[1]&&parseInt(t.rates[0].timestamp,10)-parseInt(e.data[1].date,10)>this.getCurrentTimeStepByServerPeriod(e.period)&&this.chart.updateChart(Object.assign({},e.data[0]),this,{}),this.chart&&t.bars&&e.data&&e.data.bid.length&&t.bars.length&&t.bars[0].name===e.pair.Name)if(t.bars[0].prevBar.bid.date>=e.data.bid[0].date){var s={bid:e.data.bid[0],ask:e.data.ask[0],mid:e.data.mid[0]};this.chart.updateChart(Object.assign({},s),this,{});var n=this.chart.clearInfo();this.chart.drawCrosshair(n,n.canvas.height,!1),this.chart.activeSignal&&this.chart.redrawActiveSignal()}else this.chart.getCurrentDataComplete(this.chart,[t.bars[0].currentBar,t.bars[0].prevBar]);if(t.mdata){if(t.mdata.args.id!==this.pair.ID||t.mdata.args.period!==this.techChart.connector.getServerPeriod(this.period.toString()))return;"update"===t.mdata.cmd&&this.data&&this.data.bid&&this.data.bid.length&&t.mdata.args.bar.bid.date>=this.data.bid[0].date&&this.addDataOnUpdate(Object.assign({},t.mdata.args.bar)),this.chart&&this.chart.initialized&&a&&e.data&&e.data.bid&&e.data.bid[0]&&e.data.bid[0].isStubBar&&(e.data.ask[0].isStubBar=!1,e.data.bid[0].isStubBar=!1,e.data.mid[0].isStubBar=!1)}},oe.prototype.getFirstData=function(){if(this.techChart.connector&&this.techChart.connector.client&&this.techChart.connector.client.connected&&this.techChart&&!this.isWaitForData){var t={pair:this.pair,period:this.period.toString(),startSeconds:this.startDateSeconds,numb:this.numb+this.fallBack,listener:this,callBack:this.getFirstDataComplete,cmd:"getFirstData",fromServer:!0,typeData:this.typeData};this.getDataOtherChart(t)||(this.isWaitForData=!0,this.techChart.connector.getBars(t),this.techChart.configuration.modules.signals&&(this.techChart.connector.getAutoChartistSignals(),"widgets"===this.techChart.connector.options.type&&this.techChart.connector.getAutoChartistSignalsList()))}},oe.prototype.getDataOtherChart=function(t){for(var e=t.listener,a=0;a<e.techChart.charts.length;a++)if(e.techChart.charts[a].chartData.pair.ID===e.pair.ID&&e.techChart.charts[a].chartData.period===e.period){if(e.techChart.charts[a].chartData.isWaitForData)return clearTimeout(e.getDataOtherChartTimeOut),e.getDataOtherChartTimeOut=setTimeout((function(){e.getDataOtherChart(t),e=null}),500),!0;if(this.techChart.charts[a].chartData.data.bid.length>this.data.bid.length){var i=this.createResultFromOtherChartData(this.techChart.charts[a].chartData);return t.fromServer=!1,this.onConnectorMessage(i,this,t),!0}}return!1},oe.prototype.createResultFromOtherChartData=function(t){var e=JSON.parse(JSON.stringify(t.data)),a={};return a.bars=e,a.precission=t.precission,a.currentValue={},a.currentValue.ask=t.currentValue.ask,a.currentValue.bid=t.currentValue.bid,a.currentValue.mid=t.currentValue.mid,a.currentValue.volume=t.currentValue.volume,a.quotation=t.quotationName,a.session=t.session,a},oe.prototype.getFirstDataComplete=function(t,e,a){var i=t.bars;e.isWaitForData=!1,i&&0!==i.bid.length&&(e.precission=t.precission,e.data=i,parseFloat(e.currentValue.bid)&&parseFloat(e.currentValue.ask)&&parseFloat(e.currentValue.mid)||(e.currentValue.ask=e.data.ask[0].close,e.currentValue.bid=e.data.bid[0].close,e.currentValue.mid=e.data.mid[0].close,e.currentValue.volume=e.data.mid[0].volume),e.startDateSeconds=e.data.bid[0].date,e.setHasData(e,i,a.numb),e.updateChartDataOnComplete(t,e),e.chart&&e.chart.init(void 0,!0))},oe.prototype.getDataOnUpdate=function(t,e){var a={pair:t.pair,period:t.period.toString(),startSeconds:t.startDateSeconds,numb:1,callBack:e,cmd:"getDataOnUpdate"};this.techChart.connector.getBars(a)},oe.prototype.getExtraData=function(t,e,a,i){if(!this.isWaitForData){var r={pair:t.pair,period:t.period.toString(),startSeconds:e,numb:a>0?a+t.fallBack:a-t.fallBack,callBack:i,listener:t,cmd:"getDataFromSeconds"};this.getDataOtherChart(r)?t=null:this.techChart.connector.getBars(r)}},oe.prototype.getExtraDataOnInitComplete=function(t,e,a){if(t){var i=t.bars;i&&0!==i.bid.length&&(e.setHasData(e,i,a.numb),e.precission=t.precission,e.addBarsToEnd(e,i),e.updateChartDataOnComplete(t,e),e.chart.init())}},oe.prototype.getFallBackDataOnMoveToRightComplete=function(t,e,a){if(e.isWaitForData=!1,t){var i=t.bars;i&&0!==i.length&&(e.setHasData(e,i,a.numb),e.precission=t.precission,e.addBarsToEnd(e,i),e.updateChartDataOnComplete(t,e),e.chart.getFallBackDataOnMoveToRightComplete(e.chart,i))}},oe.prototype.getExtraDataOnMoveToRightComplete=function(t,e,a){if(e.newsDataMoving=1,e.isWaitForData=!1,t){var i=t.bars;i&&0!==i.length&&(e.setHasData(e,i,a.numb),e.precission=t.precission,e.addBarsToEnd(e,i),e.updateChartDataOnComplete(t,e),e.chart.getDataOnMoveToRightComplete(e.chart,i))}},oe.prototype.getFallBackDataOnMoveToLeftComplete=function(t,e,a){e.isWaitForData=!1;var i=[];if(t){if(i=t.bars,e.setHasData(e,i,a.numb),!i||0===i.length)return;e.precission=t.precission,e.addBarsToStart(e,i),e.updateChartDataOnComplete(t,e)}e.chart.getFallBackDataOnMoveToLeftComplete(e.chart,i)},oe.prototype.getExtraDataOnMoveToLeftComplete=function(t,e,a){if(this.newsDataMoving=-1,e.isWaitForData=!1,!t){var i=t.bars;i&&0!==i.length&&(e.setHasData(e,i,a.numb),e.precission=t.precission,e.addBarsToStart(e,i),e.updateChartDataOnComplete(t,e),e.chart.getDataOnMoveToLeftComplete(e.chart,i))}},oe.prototype.addBarsToEnd=function(t,e){for(var a=0;a<e.bid.length;a++)t.data.bid&&0!==t.data.bid.length||(t.data={bid:[],ask:[],mid:[]},t.data.bid.push(e.bid[a]),t.data.ask.push(e.ask[a]),t.data.mid.push(e.mid[a])),e.bid[a].date<t.data.bid[t.data.bid.length-1].date&&(t.data.bid.push(e.bid[a]),t.data.ask.push(e.ask[a]),t.data.mid.push(e.mid[a]))},oe.prototype.addBarsToStart=function(t,e){for(var a=e.bid.length-1;a>=0;a--)t.data.bid&&0!==t.data.bid.length||(t.data={bid:[],ask:[],mid:[]},t.data.bid.unshift(e.bid[a]),t.data.ask.unshift(e.ask[a]),t.data.mid.unshift(e.mid[a])),e.bid[a].date>t.data.bid[t.data.bid.length-1].date&&(t.data.bid.unshift(e.bid[a]),t.data.ask.unshift(e.ask[a]),t.data.mid.unshift(e.mid[a]))},oe.prototype.updateChartDataOnComplete=function(t,e){t.quotation&&(e.quotationName=t.quotation),t.session&&(e.session=t.session),this.updateIndicatorsData()},oe.prototype.setHasData=function(t,e,a){a>0?t.hasPrevData=e.bid.length>=a:t.hasNextData=e.bid.length>=Math.abs(a)},oe.prototype.processData=function(t){for(var e=[],a=0;a<t.length;a++)if(!(t[a-1]&&t[a]&&t[a].T>=t[a-1].T)){var i=parseFloat(t[a].LB).toFixed(this.precission),r=parseFloat(t[a].HB).toFixed(this.precission),s=parseFloat(t[a].OB).toFixed(this.precission),n=parseFloat(t[a].CB).toFixed(this.precission),o=t[a].T,h={lowBid:i,highBid:r,openBid:s,closeBid:n,lowAsk:parseFloat(t[a].LA).toFixed(this.precission),highAsk:parseFloat(t[a].HA).toFixed(this.precission),openAsk:parseFloat(t[a].OA).toFixed(this.precission),closeAsk:parseFloat(t[a].CA).toFixed(this.precission),date:o};e.push(h)}return e},oe.prototype.addDataOnUpdate=function(t){var e=this.data;if(e.bid[0]||e.bid[0].isCurrentData){var a={};if(e.bid[0].isStubBar){var i=e.bid[0].date;e.ask.shift(),e.bid.shift(),e.mid.shift(),a.bid=this.createCurrentDataItem(t.bid,this.currentValue.bid),a.ask=this.createCurrentDataItem(t.ask,this.currentValue.ask),a.mid=this.createCurrentDataItem(t.mid,this.currentValue.mid),this.isPointInShowData(i)&&(this.chart.showData[0].isCurrentData&&(this.startDateSeconds=a.bid.date),this.chart.showData.shift(),this.chart.selectedData.shift())}else e.ask[0]=t.ask,e.bid[0]=t.bid,e.mid[0]=t.mid,a.bid=this.createCurrentDataItem(e.bid[0],this.currentValue.bid),a.ask=this.createCurrentDataItem(e.ask[0],this.currentValue.ask),a.mid=this.createCurrentDataItem(e.mid[0],this.currentValue.mid);e.bid.unshift(a.bid),e.ask.unshift(a.ask),e.mid.unshift(a.mid),this.chart.showData[0].isCurrentData&&(this.startDateSeconds=a.bid.date),this.chart&&(this.chart.updateChart(null,this,{}),this.chart.getStepedCursorParamsX(this.chart.crosshair.params.x,this.chart.showData[0],this.chart.showData[this.chart.showData.length-1],this.chart.showData[1]),this.chart.startCandleTimer())}},oe.prototype.isPointInShowData=function(t){return!(!this.chart||!this.chart.showData)&&this.chart.showData.some((function(e){return e.date===t}))},oe.prototype.updateCurrentData=function(t){if(t.bid=t.bid.replace(",","."),t.ask=t.ask.replace(",","."),t.mid=t.mid.replace(",","."),this.currentValue=t,this.data&&this.data.bid&&0!==this.data.bid.length){if(this.data.bid[0].isCurrentData)this.updateBarHighLow(t,this.data,this.typeData,0),this.data.bid[0].volume=t.volume,this.data.ask[0].volume=t.volume,this.data.mid[0].volume=t.volume;else{var e=this.createCurrentDataItem(this.data.bid[0],t.bid);this.data.bid.unshift(e),e=this.createCurrentDataItem(this.data.ask[0],t.ask),this.data.ask.unshift(e),e=this.createCurrentDataItem(this.data.mid[0],t.mid),this.data.mid.unshift(e)}this.startDateSeconds=this.data.bid[0].date}},oe.prototype.updateBarHighLow=function(t,e,a,i){var r=parseFloat(t[a]);r>parseFloat(e[a][i].high)?e[a][i].high=t[a]:r<parseFloat(e[a][i].low)&&(e[a][i].low=t[a]),e[a][i].close=t[a]},oe.prototype.createCurrentDataItem=function(t,e){var a=parseFloat(t.close),i=parseFloat(e),r=a<i?t.close:e,s=a>i?t.close:e;return{open:t.close,close:e,low:r,high:s,volume:0,date:t.date+this.getCurrentTimeStep(),isCurrentData:!0}},oe.prototype.getIndicatorIndex=function(t,e){for(var a=0;a<t.length;a++)if(t[a].id===e.id)return a;return-1},oe.prototype.clearIndicatorsData=function(){for(var t=0;t<this.indicators.length;t++)this.indicators[t].data={},this.indicators[t].showData=[]},oe.prototype.updateIndicatorsData=function(){for(var t=0;t<this.indicators.length;t++)if(this.indicators[t].createData(this.data[this.typeData]),this.indicators[t].createShowData(),"oscillator"===this.indicators[t].type){if(!(Object.keys(this.indicators[t].data).length>1))return;this.chart.getOscillatorsScaleParams()}this.chart&&this.chart.draw(this.chart.showData,this.chart.h)},oe.prototype.updateCurrentIndicatorsData=function(){for(var t=0;t<this.indicators.length;t++)this.indicators[t].createCurrentValue(this.data[this.typeData]),this.indicators[t].createShowData()},oe.prototype.getOscillatorChartsPrecission=function(){for(var t=0,e=0;e<this.indicators.length;e++)"oscillator"===this.indicators[e].type&&t<this.indicators[e].oscillatorPrecission&&(t=this.indicators[e].oscillatorPrecission);return t},oe.prototype.getOscillatorsCurrentValues=function(){return this.indicators.reduce((function(t,e){return[].concat(gt(t),gt(e.getCurrentValues()))}),[])},oe.prototype.getCurrentTimeStep=function(){switch(this.period.toString()){case"1":return 60;case"5":return 300;case"15":return 900;case"30":return 1800;case"60":return 3600;case"hour4":return 14400;case"hour8":return 28800;case"day":return 86400;case"week":return 604800;case"month":return 24*this.getDaysInMonth((new Date).getMonth(),(new Date).getFullYear())*60*60;default:return 60}},oe.prototype.getDaysInMonth=function(t,e){return new Date(e,t,0).getDate()},oe.prototype.waitForData=function(t,e){!function a(){t.isWaitForData?(clearTimeout(t.waitForDataTimer),t.waitForDataTimer=setTimeout(a,1)):(clearTimeout(t.waitForDataTimer),e(t))}()},oe.cloneCircle=function(t){for(var e=[],a=0;a<t.length;a++)e.push(t[a].convertToDTOCircle());return e},oe.convertDrawingObjects=function(t,e){for(var a=[],i=0;i<t.length;i++){var r=LibDrawing.createDrawingObjectByType(t[i].type,[e,t[i]]);for(var s in t[i])r[s]=t[i][s];r.state="normal",a.push(r)}return a},oe.convertValueToPeriod=function(t){switch(String(t)){case"1":case"minute":return"1";case"5":case"minute5":return"5";case"15":case"minute15":return"15";case"30":case"minute30":return"30";case"60":case"hour":return"60";case"240":case"hour4":return"hour4";case"480":case"hour8":return"hour8";case"1440":case"day":return"day";case"week":return"week";case"month":return"month";default:return"60"}},oe.prototype.convertValueToServerPeriod=function(t){switch(String(t)){case"1":return"minute";case"5":return"minute5";case"15":return"minute15";case"30":return"minute30";case"60":return"hour";case"240":return"hour4";case"480":return"hour8";case"1440":return"day";case"hour4":return"hour4";case"hour8":return"hour8";case"day":return"day";case"week":return"week";case"month":return"month";case"minute":return"minute";case"minute5":return"minute5";case"minute15":return"minute15";case"minute30":return"minute30";case"hour":return"hour";default:return"minute"}},oe.prototype.convertValueToPeriod=function(t){return oe.convertValueToPeriod(t)},oe.prototype.getCurrentTimeStepByServerPeriod=function(){switch(this.period.toString()){case"1":return 60;case"5":return 300;case"15":return 900;case"30":return 1800;case"60":return 3600;case"minute":return 60;case"minute5":return 300;case"minute15":return 900;case"minute30":return 1800;case"hour":return 3600;case"hour4":return 14400;case"hour8":return 28800;case"day":return 86400;case"week":return 604800;case"month":return 24*this.getDaysInMonth((new Date).getMonth(),(new Date).getFullYear())*60*60;default:return 60}},oe.uniqueElementsByFieldName=function(t,e){for(var a=[],i=[],r=0;r<t.length;r++)a.indexOf(t[r][e])>-1||(a.push(t[r][e]),i.push(t[r]));return a=null,i},oe.getNamePeriod=function(t){var e=t;for(var a in this.techChart.periods())this.techChart.periods()[a].value===t&&(e=this.techChart.translation[this.techChart.periods()[a].key]);return e},oe.convertDataToMs=function(t){return new Date(t).getTime()/1e3},oe.prototype.convertToDTO=function(){var t={};t.id=this.id,t.chartType=this.chartType,t.cursorType=this.cursorType,t.period=this.period,t.timeMode=this.timeMode,t.options=this.cloneObject(this.options),t.colors=this.cloneObject(this.colors),t.pair=this.cloneObject(this.pair),t.candleWidth=this.candleWidth,t.scaleParams=this.cloneObject(this.scaleParams),t.startX=this.startX,t.startY=this.startY,t.isDrawingObjectsLocked=this.isDrawingObjectsLocked,t.connectorOptions=this.connectorOptions,t.indicators=this.convertIndicatorsToDTO(),t.drawingObjects=this.convertDrawingObjectsToDTO(),t.zoomData=this.cloneObject(this.zoomData),t.zoomSteps=this.cloneObject(this.zoomSteps),t.isShowDrawingObjects=this.isShowDrawingObjects,t.isStayDrawingMode=this.isStayDrawingMode,t.isMagnetMode=this.isMagnetMode,t.isPipsShow=this.isPipsShow,t.state="drawingRoulete"===t.state?"default":this.state,t.startDateSeconds=this.startDateSeconds,t.h=this.h,t.top=this.top,t.typeData=this.typeData;var e=this.parentRect,a={bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width};return t.parentRect=this.cloneObject(a),t.isShowSignalsBody=this.isShowSignalsBody,t.isShowAllSignals=this.isShowAllSignals,t.newsData=this.cloneObject(this.newsData),t.precission=this.precission,t.isExpired=this.isExpired,t.currentTabId=this.currentTabId,t.payout=this.cloneObject(this.payout),t.closedOption=this.cloneObject(this.closedOption),t},oe.prototype.convertDrawingObjectsToDTO=function(){for(var t=[],e=0;e<this.drawingObjects.length;e++)t.push(this.drawingObjects[e].convertToDTO());return t},oe.prototype.convertIndicatorsToDTO=function(){for(var t=[],e=0;e<this.indicators.length;e++)t.push(this.indicators[e].convertToDTO());return t},oe.prototype.convertFromDTO=function(t){this.id=t.id,this.chartType=t.chartType,this.cursorType=t.cursorType,this.period=t.period,this.timeMode=t.timeMode,this.options=this.cloneObject(t.options),this.colors=this.cloneObject(t.colors),this.pair=this.cloneObject(t.pair),this.data={ask:[],bid:[],mid:[]},this.candleWidth=t.candleWidth,this.scaleParams=this.cloneObject(t.scaleParams),this.startX=t.startX,this.startY=t.startY,this.isDrawingObjectsLocked=t.isDrawingObjectsLocked,this.currentValue={bid:"0.00000",ask:"0.00000",mid:"0.00000",volume:0},this.connectorOptions=t.connectorOptions,this.indicators=this.convertIndicatorsFromDTO(t.indicators),this.drawingObjects=[],this.drawingObjects=this.convertDrawingObjectsFromDTO(t.drawingObjects),this.zoomData=this.cloneObject(t.zoomData),this.zoomSteps=this.cloneObject(t.zoomSteps),this.isShowDrawingObjects=t.isShowDrawingObjects,this.isStayDrawingMode=t.isStayDrawingMode,this.isMagnetMode=t.isMagnetMode,this.isPipsShow=t.isPipsShow,this.state=t.state,this.startDateSeconds=t.startDateSeconds,this.h=t.h,this.top=t.top,this.parentRect=this.cloneObject(t.parentRect),this.typeData=t.typeData,this.isShowSignalsBody=t.isShowSignalsBody,this.isShowAllSignals=t.isShowAllSignals,this.newsData=this.cloneObject(t.newsData),this.precission=t.precission,this.currentTabId=t.currentTabId,this.payout=this.cloneObject(t.payout),this.isExpired=!!t.isExpired&&t.isExpired,this.closedOption=t.closedOption?t.closedOption:null,this.isFreeze=!!t.isFreeze&&t.isFreeze},oe.prototype.convertIndicatorsFromDTO=function(t){this.indicators=[];for(var e=[],a=0;a<t.length;a++)e.push(A.convertFromDTO(this,t[a]));return e},oe.prototype.convertDrawingObjectsFromDTO=function(t){for(var e=[],a=0;a<t.length;a++)e.push(ut.convertFromDTO(this,t[a]));return e},oe.prototype.setSignalsInterval=function(){var t=this;this.getSignalsInterval=setInterval((function(){t.getSignals()}),12e4)},oe.prototype.getSignals=function(){this.techChart.connector.getAutoChartistSignals(),"widgets"===this.techChart.connector.options.type&&this.techChart.connector.getAutoChartistSignalsList()},oe.prototype.processSignals=function(t,e){e.updateData(t,e)},oe.prototype.updateData=function(t,e){var a=!1,i=Object.keys(t);if(0===Object.keys(e.signalsData).length&&i.length)e.signalsData=t,a=!0;else{for(var r=0;r<i.length;r++)e.signalsData[i[r]]?t[i[r]].isVisible=e.signalsData[i[r]].isVisible:a=!0;e.signalsData=t}!e.chart||!a&&e.chart.signalsPanel||e.chart.updateSignals()},oe.prototype.getNews=function(t,e){if(!this.isShowNews||isNaN(t)||isNaN(e))return!1;var a=!1;if(null===this.newsData.currentFrom)this.newsData.currentFrom=t,this.newsData.currentTo=e,this.getNewsData(this.newsData.currentFrom,this.newsData.currentTo),a=!0;else{var i=this.newsData.currentFrom-t,r=e-this.newsData.currentTo;i>0?(this.getNewsData(t,this.newsData.currentFrom),this.newsData.currentFrom=t,a=!0):r>0&&(this.getNewsData(this.newsData.currentTo,e),this.newsData.currentTo=e,a=!0)}return a},oe.prototype.getNewsData=function(t,e){var a={listener:this,callBack:this.getNewsDataComplete,interval:{from:t,to:e},cmd:"getNewsData"};this.techChart.connector.getNews(a)},oe.prototype.getNewsDataComplete=function(t,e){t.length&&(e.updateNews(t),e.chart.updateNewsBubbles())},oe.prototype.updateNews=function(t){var e=t.reduce((function(t,e){return e&&e.Image&&(e.Image=e.Image.replace(/@/gi,"")),[].concat(gt(t),[e])}),[]),a=this.newsData.news.concat(e),i=oe.uniqueElementsByFieldName(a,"ID");this.newsData.news=i.sort((function(t,e){var a=e.PublishDate-t.PublishDate;return 0===a?t.ID-e.ID:a}))},oe.prototype.getEvents=function(t,e){if(!this.isShowEvents||isNaN(t)||isNaN(e))return!1;if(!this.techChart.configuration.quotationCountries)return!1;var a=!1;if(null===this.eventsData.currentFrom)this.eventsData.currentFrom=t,this.eventsData.currentTo=e,this.eventsData.apiFrom=this.techChart.connector.convertUnixToEventsAPIDate(this.eventsData.currentFrom),this.eventsData.apiTo=this.techChart.connector.convertUnixToEventsAPIDate(this.eventsData.currentTo),this.getEventsData(this.eventsData.currentFrom,this.eventsData.currentTo),a=!0;else{var i=this.eventsData.currentFrom-t,r=e-this.eventsData.currentTo;if(i>0){var s=this.techChart.connector.convertUnixToEventsAPIDate(t);this.eventsData.apiFrom!==s&&(this.eventsData.apiFrom=s,this.getEventsData(t,this.eventsData.currentFrom),this.eventsData.currentFrom=t,a=!0)}if(r>0){var n=this.techChart.connector.convertUnixToEventsAPIDate(e);this.eventsData.apiTo!==n&&(this.eventsData.apiTo=n,this.getEventsData(this.eventsData.currentTo,e),this.eventsData.currentTo=e,a=!0)}}return a},oe.prototype.getEventsData=function(t,e){var a={listener:this,callBack:this.getEventsDataComplete,interval:{from:t,to:e},lang:this.techChart.configuration.lang,cmd:"getEventsData",countries:this.techChart.configuration.quotationCountries[this.pair.Name]};this.techChart.connector.getEvents(a)},oe.prototype.getEventsDataComplete=function(t,e){t.length&&(e.updateEvents(t),e.chart.updateEventsBubbles())},oe.prototype.updateEvents=function(t){var e=this.eventsData.events.concat(t),a=oe.uniqueElementsByFieldName(e,"IdEcoCalendarDate");this.eventsData.events=a.sort((function(t,e){return z.getDateEventsBubble(e)-z.getDateEventsBubble(t)}))},vt.detectBrowser=function(t,e){var a,i;if(-1!==t.navigator.userAgent.indexOf("Opera")||-1!==t.navigator.userAgent.indexOf("OPR")){try{a=t.navigator.userAgent.split("OPR/")[1].split(" ")[0]}catch(r){a="0"}i={bro:"opera",ver:a}}else if(-1!==t.navigator.userAgent.indexOf("MSIE")||e.documentMode){try{a=t.navigator.userAgent.split("rv:")[1].split(")")[0]}catch(r){a="0"}i={bro:"ie",ver:a}}else if(t.StyleMedia){try{a=t.navigator.userAgent.split("Edge/")[1].split(" ")[0]}catch(r){a="0"}i={bro:"edge",ver:a}}else if(-1!==t.navigator.userAgent.indexOf("Chrome")){try{a=t.navigator.userAgent.split("Chrome/")[1].split(" ")[0]}catch(r){a="0"}i={bro:"chrome",ver:a}}else if(-1!==t.navigator.userAgent.indexOf("Safari")){try{a=t.navigator.userAgent.split("Safari/")[1].split(" ")[0]}catch(r){a="0"}i={bro:"safari",ver:a}}else if(-1!==t.navigator.userAgent.indexOf("Firefox")){try{a=t.navigator.userAgent.split("Firefox/")[1].split(" ")[0]}catch(r){a="0"}i={bro:"firefox",ver:a}}else i={bro:"unknown",ver:"unknown"};return i},vt.isBrowOk=function(t,e){var a=Object.keys(t).indexOf(e.bro);if(a>-1){var i=t[Object.keys(t)[a]];i=i.split(".");for(var r=e.ver.split("."),s=0;s<r.length;s++){if(parseInt(i[s],10)<parseInt(r[s],10))return!0;if(parseInt(i[s],10)>parseInt(r[s],10))return!1}return!0}return!1},vt.warningBrowser=function(){var t=vt.detectBrowser(window,document);return vt.isBrowOk(vt.validBrowsers,t)},vt.showWarningBrowser=function(t,e){var a=void 0===t?vt.alertMag:t,i=void 0===e?document.body:e,r=document.createElement("div");r.parent=i,r.classList.toggle("tch-divAlert",!0);var s=document.createElement("span");s.classList.toggle("tch-spanAlert",!0),s.innerHTML=a,r.appendChild(s),r.addEventListener("click",(function(t){vt.removeAlert(t.target)})),i.appendChild(r)},vt.removeAlert=function(t){(t=t||this).parent.removeChild(t)},vt.validBrowsers={opera:"43.0",edge:"14.14393",chrome:"56.0.2924.87",safari:"9.1.3",firefox:"51.0.1"},vt.alertMag="<p>Отображение и работа графика могут быть не верными в текущей версии браузера.</p><span>Кликните, чтобы продолжить.</span>";var he=i("./src/scripts/Libs/html2canvas.min.js"),ce=i.n(he);yt.prototype.show=function(t,e,a,i,s,n){if(t||!this.useCanvas){var o,h,c,l,A=t.getContext("2d"),d=parseFloat(this.high),p=parseFloat(this.low),u=parseFloat(this.open),g=parseFloat(this.close),f=parseFloat(this.y),w=parseFloat(this.y)-(d-p)/this.scale,v=Math.abs(u-g)/this.scale,y=v>0?v:1,m=parseFloat(this.y)+parseFloat(p-Math.max(u,g))/this.scale,B=a[n].candleBool,C=a[n].candleBear,D=a[n].candleLineBool,b=a[n].candleLineBear,x=a[n].candleBoolBorder,F=a[n].candleBearBorder;u>g?(h=C,c=b,l=F):(h=B,c=D,l=x);var S=i.widthWickLine;o=r.getPosition(parseFloat(this.x),S);var P=Math.round(f),T=Math.round(w);this.posWick={x:o,y1:P,y2:T,width:S},i.needWick&&r.drawLine(null,A,o,P,o,T,c,[],S);var E,L,Q,O,U,H=e,k=2*i.widthBorderLine,N=i.widthBorderLine;H=2*((o=r.getPosition(parseFloat(this.x),H))-Math.round(o-H/2)),E=Math.round(m),L=Math.round(m+y),Q=Math.round(m+N),O=Math.round(m+y-N),U=H-k,i.needBorder?(r.drawLine(null,A,o,E,o,L,l,[],H),r.drawLine(null,A,o,Q,o,O,a.Chart.backgroundColor,[],U),r.drawLine(null,A,o,Q,o,O,h,[],U)):(r.drawLine(null,A,o,E,o,L,a.Chart.backgroundColor,[],H),r.drawLine(null,A,o,E,o,L,h,[],H)),this.posCandle={x:o,y1:E,y2:L,width:H},this.posBorderCandle={x:o,y1:Q,y2:O,width:U}}};var le=function(t){function e(t,a,i){var s;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=function o(t,e){return!e||"object"!==mt(e)&&"function"!==typeof e?function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Bt(e).call(this,t,a,i))).classType="CandleChart",s.getFractalItemY=function(t,e){return"low"===e?s.toYPixels(t.fractalLow):"high"===e?s.toYPixels(t.fractalHigh):void 0},s.drawCrosshair=function(t,e,a){var i=s.drawCrosshairChart(t);if(i&&s.isShowCrosshair&&(!s.chartData.editDrawingObject||!s.chartData.editDrawingObject.isFocused)&&(!s.chartData.activeDrawingObject||!s.chartData.activeDrawingObject.isFocused)){var n=s.chartData.colors.Chart.crosshair,o=(Math.round(s.chartData.candleWidth),parseFloat(i.low),parseFloat(i.open)),h=parseFloat(i.close),c=(parseFloat(i.x),parseFloat(i.y),"transparent");if(s.chartData.options[s.classType].widthBorderLine,s.curX<s.w-8){var l;if(s.canvasInfoContext.save(),s.canvasInfoContext.beginPath(),s.canvasInfoContext.rect(0,0,s.w-8,s.h),s.canvasInfoContext.closePath(),s.canvasInfoContext.clip(),c=o>h?s.chartData.colors[s.classType].candleBear:s.chartData.colors[s.classType].candleBool,i.posWick&&i.posWick.x)l=i.posWick.x;else{if(!i.posCandle||!i.posCandle.x)return;l=i.posCandle.x}var A=i.posWick.y1,d=i.posWick.y2,p=i.posWick.width;s.chartData.options[s.classType].needWick&&r.drawLine(null,t,l,A,l,d,n,[],p),l=i.posCandle.x;var u=i.posCandle.y1,g=i.posCandle.y2,f=i.posCandle.width;r.drawLine(null,t,l,u,l,g,n,[],f),l=i.posBorderCandle.x;var w=i.posBorderCandle.y1,v=i.posBorderCandle.y2,y=i.posBorderCandle.width;r.drawLine(null,t,l,w,l,v,s.chartData.colors.Chart.backgroundColor,[],y),r.drawLine(null,t,l,w,l,v,c,[],y),a&&s.chartData.isPipsShow&&s.chartData.currentValue&&s.drawPips(t),s.canvasInfoContext.restore()}}},s.getElementIndexByPositionX=function(t,e){if(0!==t.length){var a=0,i=.5*s.chartData.candleWidth;if(e>=t[0].x-i)a=0;else if(t[t.length-2]&&e<t[t.length-2].x-i)a=t.length-1;else for(var r=0;r<t.length;r++)if(t[r+1]&&e<t[r].x-i&&e>=t[r+1].x-i){a=r+1;break}return a}},s.isPositionValid=function(){return parseFloat(s.showData[0].x)<s.w-s.chartData.rightPadding+s.chartData.spacing},s.resizeShowDataValuesY=function(t,e,a){for(var i=0;i<t.length;i++)s.resizeShowItemValuesY(t[i],e,a)},s.resizeShowItemValuesY=function(t,e,a){var i=s.getCoordinateY(t.low,e,a.minB,a.deltaY);t.y=i,t.scale=a.deltaY},s.getNumberOfDataToRight=function(t,e,a,i){return parseInt((e-a-t)/i,10)},s.moveElementsX=function(t,e){for(var a=0;a<t.length;a++){var i=parseFloat(t[a].x)-e;t[a-1]&&parseFloat(t[a-1].x)-i<s.chartData.spacing&&(i=parseFloat(t[a-1].x)-s.chartData.spacing),t[a].x=i.toFixed(1)}},s.moveElementsY=function(t,e){for(var a=0;a<t.length;a++){var i=parseFloat(t[a].y)-e;t[a].y=i.toFixed(1)}},s.needsElementToRight=function(t,e,a,i){return parseFloat(t[0].x)+i<e-a},s.needsElementToLeft=function(t,e){return parseFloat(t[t.length-1].x)>e},s.drawCurrentShowData=function(t,e){var a=t[s.chartData.typeData],i=parseFloat(a),r=parseFloat(s.showData[0].low),n=parseFloat(s.showData[0].high);r>i?s.showData[0].low=a:n<i&&(s.showData[0].high=a),e&&(s.showData[0].open=e[s.chartData.typeData].open,s.showData[0].close=e[s.chartData.typeData].close,s.showData[0].low=e[s.chartData.typeData].low,s.showData[0].high=e[s.chartData.typeData].high);var o=s.getCoordinateY(s.showData[0].low,s.h,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY),h=s.getCoordinateY(s.showData[0].high,s.h,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY);s.chartData.options.Chart.autoScale&&(parseFloat(h)-s.chartData.marginTop<0||parseFloat(o)+s.chartData.marginBottom>s.h)&&(s.chartData.scaleParams=s.getScaleParams(s.selectedData,s.h,s.chartData.precission),s.resizeShowDataValuesY(s.showData,s.h,s.chartData.scaleParams),s.chartData.options.Chart.scaleSeriesOnly||s.resizeShowDataByTrendIndicators(),s.draw(s.showData,s.h),s.valueAxis=s.getValueAxis(s.chartData.scaleParams.minB,s.chartData.scaleParams.maxB,5,s.w,s.h,s.chartData.options.Chart.scalesFontSize,s.chartData.precission),s.clearGrid(),s.drawValueAxis(s.valueAxis),s.drawOscillatorChartsAxis(),s.drawTimeAxis(s.timeAxis),s.drawChartBorder()),s.showData[0].close=a,s.showData[0].y=o,s.showData[0].isCurrentData=!0;var c=s.canvasRatePixelatedContext.canvas;s.canvasRatePixelatedContext.save(),s.canvasRatePixelatedContext.beginPath(),s.canvasRatePixelatedContext.rect(0,0,s.w-8,s.h),s.canvasRatePixelatedContext.closePath(),s.canvasRatePixelatedContext.clip();var l=s.showData[1]?s.showData[1].close:s.showData[0].open;s.showData[0].show(c,s.chartData.candleWidth,s.chartData.colors,s.chartData.options[s.classType],l,s.classType),s.canvasRatePixelatedContext.restore(),s.curX&&s.curY&&(s.clearInfo(),s.drawActiveDrawingObjects(),s.drawCrosshair(s.canvasInfoContext,null,s.techChart.configuration.modules.headerButtons.createPipsButton))},s.getCoordinateX=function(t,e,a,i,r){if(t=parseFloat(t),e=parseFloat(e),a=parseFloat(a),i=parseFloat(i),!(isNaN(t)||isNaN(e)||isNaN(a)||isNaN(i))){var s=parseFloat(t-e-i*a);return s=s>0?s:0,(s-=r).toFixed(1)}},s.processDataToShow=function(t,e,a,i,r,n,o,h){o=void 0===o?0:o,s.chartData.scaleParams=h||s.getScaleParams(t,r,n);for(var c=[],l=0;l<t.length;l++){var A=t[l];n||(n=ne.countDigits(A.high));var d=s.getCoordinateX(i,e,a,l,o);if(d<=0)break;var p=s.getCoordinateY(A.low,r,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY),u=new yt(parseFloat(A.low).toFixed(n),parseFloat(A.high).toFixed(n),parseFloat(A.open).toFixed(n),parseFloat(A.close).toFixed(n),parseFloat(A.date),d,p,s.chartData.scaleParams.deltaY,s.useCanvas);A.isCurrentData&&(u.isCurrentData=!0),c.push(u)}return c},s.createShowDataItem=function(t,e){var a=new yt(parseFloat(t.low).toFixed(e),parseFloat(t.high).toFixed(e),parseFloat(t.open).toFixed(e),parseFloat(t.close).toFixed(e),t.date,"0.0","0.0",1,s.useCanvas);return t.isCurrentData&&(a.isCurrentData=!0),a},s.setChartElementsSize=function(t){var e=s.getChartElementsSize();e.candleWidth&&(t.candleWidth=e.candleWidth),t.spacing=1.5*t.candleWidth},s.getMaxValue=function(t){for(var e=Number.MIN_VALUE,a=0;a<t.length;a++){var i=parseFloat(t[a].high);e<i&&(e=i)}return e},s.getMinValue=function(t){for(var e=Number.MAX_VALUE,a=0;a<t.length;a++){var i=parseFloat(t[a].low);e>i&&(e=i)}return e},s.deleteRedundantElements=function(t,e,a,i){for(var r=t.length-1;r>=0;r--)parseFloat(t[r].x)>a-i?t.length>1?t.splice(r,1):t[r].x=a-i:parseFloat(t[r].x)<=0&&t.length>1&&t.splice(r,1)},s.draw=function(t,e){if(s.chartData.drawingObjects.length)for(var a=0;a<s.chartData.drawingObjects.length;a++)"active"===s.chartData.drawingObjects[a].state&&r.clearRect(null,s.canvasDrawingActiveContext,0,0,s.canvasDrawingActive.width,s.canvasDrawingActive.height),s.redrawActiveDrawingObjects(!0);if(s.drawChart(t,e))for(var i=s.canvasDataPixelatedContext.canvas,n=0;n<t.length;n++)t[n].isCurrentData||t[n].show(i,s.chartData.candleWidth,s.chartData.colors,s.chartData.options[s.classType],null,s.classType)},s.getMinMaxPricesPosition=function(t){var e=t.showData,a=t.mode,i={},r={},n=e[0],o=e[0];if("low_high"===a&&(e.forEach((function(t){parseFloat(n.high)<parseFloat(t.high)&&(n=t),parseFloat(o.low)>parseFloat(t.low)&&(o=t)})),i={x:n&&n.posWick&&parseFloat(n.posWick.x),y:n&&n.posWick&&parseFloat(n.posWick.y2),value:n&&parseFloat(n.high)},r={x:n&&n.posWick&&parseFloat(o.posWick.x),y:n&&n.posWick&&parseFloat(o.posWick.y1),value:o&&parseFloat(o.low)}),"open_close"===a){e.forEach((function(t){Math.max(parseFloat(n.open),parseFloat(n.close))<Math.max(parseFloat(t.open),parseFloat(t.close))&&(n=t),Math.min(parseFloat(o.open),parseFloat(o.close))>Math.min(parseFloat(t.open),parseFloat(t.close))&&(o=t)}));var h=n&&parseFloat(n.open),c=n&&parseFloat(n.close),l=o&&parseFloat(o.open),A=o&&parseFloat(o.close);i={x:n&&n.posCandle&&parseFloat(n.posCandle.x),y:h>c?s.chartData.chart.toYPixels(h):s.chartData.chart.toYPixels(c),value:Math.max(h,c)},r={x:o&&o.posCandle&&parseFloat(o.posCandle.x),y:l<A?s.chartData.chart.toYPixels(l):s.chartData.chart.toYPixels(A),value:Math.min(l,A)}}return{max:i,min:r}},s}return function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(e,t),e}(ne),Ae=function(t){function e(t,a,i){var s;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=function o(t,e){return!e||"object"!==bt(e)&&"function"!==typeof e?St(t):e}(this,xt(e).call(this,t,a,i)),function h(t,e,a){e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a}(St(St(s)),"draw",(function(){s.draw()})),s.classType="LineChart",s.getFractalItemY=function(t){for(var e=0,a=s.selectedData,i=0;i<a.length;i++)if(a[i].date===t.T){var r=parseFloat(a[i].high),n=parseFloat(a[i].low);parseFloat(a[i].open),parseFloat(a[i].close),e=parseFloat(((r+n)/2).toFixed(s.chartData.precission));break}return s.toYPixels(e)},s.isPositionValid=function(){return parseFloat(s.showData[0].x)<s.w-s.chartData.rightPadding+s.chartData.spacing},s.resizeShowDataValuesY=function(t,e,a){for(var i=0;i<t.length;i++)s.resizeShowItemValuesY(t[i],e,a)},s.resizeShowItemValuesY=function(t,e,a){var i=s.getCoordinateY(t.value,e,a.minB,a.deltaY);t.y=i,t.scale=a.deltaY},s.getNumberOfDataToRight=function(t,e,a,i){return Math.ceil((e-a-t)/i)},s.moveElementsX=function(t,e,a,i){for(var r,s=t.length-1;s>=0;s--)(r=parseFloat(t[s].x)-e)<0&&(r=0),r>a-i&&(r=a-i),t[s].x=r.toFixed(1)},s.moveElementsY=function(t,e){for(var a=0;a<t.length;a++){var i=parseFloat(t[a].y)-e;t[a].y=i.toFixed(1)}},s.needsElementToRight=function(t,e,a){return parseFloat(t[0].x)<e-a},s.needsElementToLeft=function(t){return parseFloat(t[t.length-1].x)>0},s.getCoordinateX=function(t,e,a,i,r){if(t=parseFloat(t),e=parseFloat(e),a=parseFloat(a),i=parseFloat(i),!(isNaN(t)||isNaN(e)||isNaN(a)||isNaN(i))){var s=parseFloat(t-e-i*a);return s=s>0?s:0,(s-=r).toFixed(1)}},s.setChartElementsSize=function(t){var e=s.getChartElementsSize();e.lineSpacing&&(t.spacing=e.lineSpacing)},s.getMinValue=function(t,e){if(t&&0!==t.length)return void 0===t[0].high&&void 0===t[0].low?s.getMinShowDataValue(t,e):s.getMinSelectedDataValue(t,e)},s.getMaxValue=function(t,e){if(t&&0!==t.length)return void 0===t[0].high&&void 0===t[0].low?s.getMaxShowDataValue(t,e):s.getMaxSelectedDataValue(t,e)},s.getMaxShowDataValue=function(t){for(var e=0,a=0;a<t.length;a++){var i=parseFloat(t[a].value);e<i&&(e=i)}return e},s.getMaxSelectedDataValue=function(t){for(var e=0,a=0;a<t.length;a++){var i=parseFloat(t[a].high),r=(parseFloat(t[a].low),parseFloat(i));e<r&&(e=r)}return e},s.getMinShowDataValue=function(t){for(var e=Number.MAX_VALUE,a=0;a<t.length;a++){var i=parseFloat(t[a].value);e>i&&(e=i)}return e},s.getMinSelectedDataValue=function(t){for(var e=Number.MAX_VALUE,a=0;a<t.length;a++){parseFloat(t[a].high);var i=parseFloat(t[a].low),r=parseFloat(i);e>r&&(e=r)}return e},s.createShowDataItem=function(t,e){var i=a.options.LineChart.priceSource,r=new Dt(s.getValueFromTypePrice(t,i,e),t.date,"0.0","0.0",t);return t.isCurrentData&&(r.isCurrentData=!0),r},s.processDataToShow=function(t,e,i,r,n,o,h,c){h=void 0===h?0:h,s.chartData.scaleParams=c||s.getScaleParams(t,n,o);for(var l=[],A=s.chartData.chart.classType,d=a.options[A].priceSource,p=0;p<t.length;p++){var u=t[p],g=s.getValueFromTypePrice(u,d,o),f=s.getCoordinateX(r,e,i,p,h),w=s.getCoordinateY(parseFloat(g),n,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY),v=s.createShowDataItem(u,o);if(v.x=f,v.y=w,u.isCurrentData&&(v.isCurrentData=!0),l.push(v),f<=0)break}return l},s.getValueFromTypePrice=function(t,e,a){var i;switch(e){case"Open":i=parseFloat(t.open).toFixed(a);break;case"High":i=parseFloat(t.high).toFixed(a);break;case"Low":i=parseFloat(t.low).toFixed(a);break;case"Close":i=parseFloat(t.close).toFixed(a);break;case"(H+L)/2":i=((parseFloat(t.high)+parseFloat(t.low))/2).toFixed(a);break;case"(H+L+C)/3":i=((parseFloat(t.high)+parseFloat(t.low)+parseFloat(t.close))/3).toFixed(a);break;case"(O+H+L+C)/4":i=((parseFloat(t.open)+parseFloat(t.high)+parseFloat(t.low)+parseFloat(t.close))/4).toFixed(a);break;default:return((parseFloat(t.high)+parseFloat(t.low))/2).toFixed(a)}return i},s.drawLastBarPrice=function(t){if(t){var e,a=s.chartData.chart.classType,i=s.parent.querySelector(".tch-rate-value");e=s.chartData.colors[a].priceLine;var r=s.parent.querySelector(".tch-timer-value"),n=s.toYPixels(t.value);if(n>0&&n<s.h){var o=s.getValueFromTick(parseFloat(t.value),s.chartData.options.Chart.typeTick);s.drawPrice(o,n,i,!0,e),s.chartData.options.Chart.candleTimer&&s.drawPrice(null,n+s.priceTextHeight,r,!0,e)}else i.parentNode.style.display="none",r.parentNode.style.display="none"}},s.drawCrosshair=function(t,e,a){s.drawCrosshairChart(t)&&a&&s.chartData.isPipsShow&&s.chartData.currentValue&&s.drawPips(t)},s.drawCurrentShowData=function(t){if(s.showData[0].isCurrentData){var e=s.showData[0].x,a=s.getCoordinateY(parseFloat(t[s.chartData.typeData]),s.h,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY);s.chartData.options.Chart.autoScale&&(parseFloat(a)-s.chartData.marginTop<0||parseFloat(a)+s.chartData.marginBottom>s.h)&&(s.chartData.scaleParams=s.getScaleParams(s.selectedData,s.h,s.chartData.precission),s.resizeShowDataValuesY(s.showData,s.h,s.chartData.scaleParams),s.chartData.options.Chart.scaleSeriesOnly||s.resizeShowDataByTrendIndicators(),s.draw(s.showData,s.h),s.valueAxis=s.getValueAxis(s.chartData.scaleParams.minB,s.chartData.scaleParams.maxB,5,s.w,s.h,s.chartData.options.Chart.scalesFontSize,s.chartData.precission),s.clearGrid(),s.drawValueAxis(s.valueAxis),s.drawOscillatorChartsAxis(),s.drawTimeAxis(s.timeAxis),s.drawChartBorder()),s.curX&&s.curY&&(s.clearInfo(),s.drawActiveDrawingObjects(),s.drawCrosshair(s.canvasInfoContext,null,s.techChart.configuration.modules.headerButtons.createPipsButton)),s.showData[0]=new Dt(t[s.chartData.typeData],s.showData[0].date,e,a),s.showData[0].isCurrentData=!0;var i=[];"Step"===s.chartData.options.LineChart.typeLine?(i.push([s.showData[0].x,s.showData[0].y]),s.showData[1]?(i.push([s.showData[1].x,s.showData[0].y]),i.push([s.showData[1].x,s.showData[1].y]),i.push([s.showData[1].x,s.h])):(i.push([s.showData[0].x,s.showData[0].y]),i.push([s.showData[0].x,s.showData[0].y]),i.push([s.showData[0].x,s.h])),i.push([s.showData[0].x,s.h])):(i.push([s.showData[0].x,s.showData[0].y]),s.showData[1]?(i.push([s.showData[1].x,s.showData[1].y]),i.push([s.showData[1].x,s.h])):(i.push([s.showData[0].x,s.showData[0].y]),i.push([s.showData[0].x,s.h])),i.push([s.showData[0].x,s.h]));var n=s.canvasRateNormalContext,o=s.chartData.colors.LineChart.colorLine,h=s.chartData.options.LineChart.widthLine;if("WithMarkers"===s.chartData.options.LineChart.typeLine){var c=parseFloat(h)+2.5/parseFloat(h);r.drawCircle(null,n,s.showData[0].x,s.showData[0].y,c,null,o,o,1)}r.drawPolygon(null,n,i,null,o,!1,h,i.length-2)}},s.draw=function(t,e){if(s.chartData.drawingObjects.length)for(var a=0;a<s.chartData.drawingObjects.length;a++)"active"===s.chartData.drawingObjects[a].state&&r.clearRect(null,s.canvasDrawingActiveContext,0,0,s.canvasDrawingActive.width,s.canvasDrawingActive.height),s.redrawActiveDrawingObjects(!0);if(s.drawChart(t,e)){for(var i=[],n=t[0].isCurrentData?1:0,o=s.canvasDataNormalContext,h=s.chartData.colors.LineChart.colorLine,c=s.chartData.options.LineChart.widthLine,l=parseFloat(c)+2.5/parseFloat(c),A=0;A<t.length;A++){if(isNaN(parseFloat(t[A].x))||isNaN(parseFloat(t[A].y)))return;t[A-1]||(t[A-1]=t[A]),t[A].isCurrentData||("Step"===s.chartData.options.LineChart.typeLine?(i.push([t[A].x,t[A-1].y]),i.push([t[A].x,t[A].y])):i.push([t[A].x,t[A].y]),"WithMarkers"===s.chartData.options.LineChart.typeLine&&r.drawCircle(null,o,t[A].x,t[A].y,l,null,h,h,1))}i.push([t[t.length-1].x,s.h]),t[n]?i.push([t[n].x,s.h]):i.push([t[0].x,s.h]),r.drawPolygon(null,o,i,null,h,!1,c,i.length-2)}},s.deleteRedundantElements=function(t,e,a,i,r){for(var n=t.length-1;n>=0;n--)t[n+1]&&(e>0&&parseFloat(t[n].x)<=parseFloat(t[n+1].x)?t.splice(n+1,1):e<0&&parseFloat(t[n].x)<=parseFloat(t[n+1].x)&&t.splice(n,1));s.fixFirstAndLastElementsX(t,a,i,r)},s.fixFirstAndLastElementsX=function(t,e,a,i){var r;s.showData[0]&&s.showData[1]&&parseFloat(s.showData[0].x)-parseFloat(s.showData[1].x)<i&&((r=parseFloat(s.showData[1].x)+i)>e-a&&(r=e-a),s.showData[0].x=r.toFixed(1)),s.showData[s.showData.length-1]&&s.showData[s.showData.length-2]&&parseFloat(s.showData[s.showData.length-1].x)-parseFloat(s.showData[s.showData.length-2].x)<i&&((r=parseFloat(s.showData[s.showData.length-2].x)-i)<0&&(r=0),s.showData[s.showData.length-1].x=r.toFixed(1))},s.getFireflyPosition=function(t){return{x:t.x,y:t.y}},s.getMinMaxPricesPosition=function(t){var e=t.showData,a=e[0],i=e[0];return e.forEach((function(t){parseFloat(a.value)<parseFloat(t.value)&&(a=t),parseFloat(i.value)>parseFloat(t.value)&&(i=t)})),{max:{x:a&&parseFloat(a.x),y:a&&parseFloat(a.y),value:a&&parseFloat(a.value)},min:{x:i&&parseFloat(i.x),y:i&&parseFloat(i.y),value:i&&parseFloat(i.value)}}},s}return function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ft(t,e)}(e,t),e}(ne),de=function(t){function e(t,a,i){var s;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=function o(t,e){return!e||"object"!==Pt(e)&&"function"!==typeof e?function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Tt(e).call(this,t,a,i))).isFill=!0,s.classType="AreaChart",s.drawCurrentShowData=function(t){if(s.showData[0].isCurrentData){var e=t[s.chartData.typeData],a=s.showData[0].x,i=s.getCoordinateY(parseFloat(e),s.h,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY);s.chartData.options.Chart.autoScale&&(parseFloat(i)-s.chartData.marginTop<0||parseFloat(i)+s.chartData.marginBottom>s.h)&&(s.chartData.scaleParams=s.getScaleParams(s.selectedData,s.h,s.chartData.precission),s.resizeShowDataValuesY(s.showData,s.h,s.chartData.scaleParams),s.chartData.options.Chart.scaleSeriesOnly||s.resizeShowDataByTrendIndicators(),s.draw(s.showData,s.h),s.valueAxis=s.getValueAxis(s.chartData.scaleParams.minB,s.chartData.scaleParams.maxB,5,s.w,s.h,s.chartData.options.Chart.scalesFontSize,s.chartData.precission),s.clearGrid(),s.drawValueAxis(s.valueAxis),s.drawOscillatorChartsAxis(),s.drawTimeAxis(s.timeAxis),s.drawChartBorder()),s.curX&&s.curY&&(s.clearInfo(),s.drawActiveDrawingObjects(),s.drawCrosshair(s.canvasInfoContext,null,s.techChart.configuration.modules.headerButtons.createPipsButton)),s.showData[0]=new Dt(e,s.showData[0].date,a,i),s.showData[0].isCurrentData=!0;var n=[];n.push([s.showData[0].x,s.showData[0].y]),s.showData[1]?(n.push([s.showData[1].x,s.showData[1].y]),n.push([s.showData[1].x,s.h])):(n.push([s.showData[0].x,s.showData[0].y]),n.push([s.showData[0].x,s.h])),n.push([s.showData[0].x,s.h]);var o=s.canvasRateNormalContext;if(s.isFill){var h=o.createLinearGradient(0,s.h/7,0,s.h);h.addColorStop(0,s.chartData.colors.AreaChart.colorStop),h.addColorStop(1,s.chartData.colors.AreaChart.colorStopEnd),r.drawPolygon(null,o,n,h,null,null,null,null,.5)}r.drawPolygon(null,o,n,null,s.chartData.colors.AreaChart.colorLine,!1,s.chartData.options.AreaChart.widthLine,n.length-2)}},s.draw=function(t,e){if(s.chartData.drawingObjects.length)for(var a=0;a<s.chartData.drawingObjects.length;a++)"active"===s.chartData.drawingObjects[a].state&&r.clearRect(null,s.canvasDrawingActiveContext,0,0,s.canvasDrawingActive.width,s.canvasDrawingActive.height),s.redrawActiveDrawingObjects(!0);if(s.drawChart(t,e)){for(var i=[],n=t[0].isCurrentData?1:0,o=0;o<t.length;o++){if(isNaN(parseFloat(t[o].x))||isNaN(parseFloat(t[o].y)))return;t[o].isCurrentData||i.push([t[o].x,t[o].y])}i.push([t[t.length-1].x,s.h]),t[n]?i.push([t[n].x,s.h]):i.push([t[0].x,s.h]);var h=s.canvasDataNormalContext;if(s.isFill){var c=h.createLinearGradient(0,s.h/7,0,s.h);c.addColorStop(0,s.chartData.colors.AreaChart.colorStop),c.addColorStop(1,s.chartData.colors.AreaChart.colorStopEnd),r.drawPolygon(null,h,i,c,null,null,null,null,.5)}r.drawPolygon(null,h,i,null,s.chartData.colors.AreaChart.colorLine,!1,s.chartData.options.AreaChart.widthLine,i.length-2)}},s}return function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Et(t,e)}(e,t),e}(Ae);Lt.prototype.show=function(t,e,a,i){if(t||!this.useCanvas){var s,n,o=a.BarChart.candleBool,h=a.BarChart.candleBear,c=parseFloat(this.high),l=parseFloat(this.low),A=parseFloat(this.open),d=parseFloat(this.close),p=parseFloat(this.x),u=parseFloat(this.y),g=p,f=u,w=u-Math.abs(l-c)/this.scale,v=e,y=t.getContext("2d");n=A>d?h:o;var m=this.lineWidth,B=r.getPosition(g,m);r.drawLine(null,y,B,Math.round(f),B,Math.round(w),a.Chart.backgroundColor,[],m),r.drawLine(null,y,B,Math.round(f),B,Math.round(w),n,[],m),g=Math.round(B),s=Math.round(g-parseFloat(v)/2),f=u-Math.abs(l-A)/this.scale;var C=r.getPosition(f,m);i.needOpen||(r.drawLine(null,y,g,C,s,C,a.Chart.backgroundColor,[],m),r.drawLine(null,y,g,C,s,C,n,[],m)),s=Math.round(g+parseFloat(v)/2),C=r.getPosition(u-Math.abs(l-d)/this.scale,m),r.drawLine(null,y,g,C,s,C,a.Chart.backgroundColor,[],m),r.drawLine(null,y,g,C,s,C,n,[],m)}};var pe=function(t){function e(t,a,i){var s;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=function o(t,e){return!e||"object"!==Qt(e)&&"function"!==typeof e?function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Ot(e).call(this,t,a,i))).classType="BarChart",s.getFractalItemY=function(t,e){return"low"===e?s.toYPixels(t.fractalLow):"high"===e?s.toYPixels(t.fractalHigh):void 0},s.drawCrosshair=function(t,e,a){var i=s.drawCrosshairChart(t);if(i){var n=s.chartData.colors.Chart.colorCrossHair,o=s.curX,h=(s.curY,s.chartData.candleWidth),c=parseFloat(i.high),l=parseFloat(i.low),A=parseFloat(i.open),d=parseFloat(i.close),p=i.lineWidth+2,u=r.getPosition(parseFloat(i.x),i.lineWidth),g=r.getPosition(parseFloat(i.y),i.lineWidth),f=r.getPosition(parseFloat(u),p),w=r.getPosition(parseFloat(g),p),v=f,y=r.getPosition(r.getPosition(w-(c-l)/i.scale,i.lineWidth),p);o<s.w-8&&(s.canvasInfoContext.save(),s.canvasInfoContext.beginPath(),s.canvasInfoContext.rect(0,0,s.w-8,s.h),s.canvasInfoContext.closePath(),s.canvasInfoContext.clip(),r.drawLine(null,t,f,w,v,y,n,[],p),v=r.getPosition(f-parseFloat(h)/2,p),y=w=r.getPosition(w-Math.abs(l-A)/i.scale,p),s.chartData.options.BarChart.needOpen||r.drawLine(null,t,f+1,w,v,y,n,[],p),f=r.getPosition(parseFloat(i.x),p),w=r.getPosition(parseFloat(i.y),p),v=r.getPosition(f+parseFloat(h)/2,p),y=w=r.getPosition(w-Math.abs(l-d)/i.scale,p),r.drawLine(null,t,f,w,v,y,n,[],p),i.show(t.canvas,s.chartData.candleWidth,s.chartData.colors,s.chartData.options.BarChart),i.show(t.canvas,s.chartData.candleWidth,s.chartData.colors,s.chartData.options.BarChart),a&&s.chartData.isPipsShow&&s.chartData.currentValue&&s.drawPips(t),s.canvasInfoContext.restore())}},s.getElementIndexByPositionX=function(t,e){if(t.length){var a=0,i=.5*s.chartData.candleWidth;if(e>=t[0].x-i)a=0;else if(t[t.length-2]&&e<t[t.length-2].x-i)a=t.length-1;else for(var r=0;r<t.length;r++)if(t[r+1]&&e<t[r].x-i&&e>=t[r+1].x-i){e=t[r+1].x,a=r+1;break}return a}},s.isPositionValid=function(){return parseFloat(s.showData[0].x)<s.w-s.chartData.rightPadding+s.chartData.spacing},s.resizeShowDataValuesY=function(t,e,a){for(var i=0;i<t.length;i++)s.resizeShowItemValuesY(t[i],e,a)},s.resizeShowItemValuesY=function(t,e,a){var i=s.getCoordinateY(t.low,e,a.minB,a.deltaY);t.y=i,t.scale=a.deltaY},s.getNumberOfDataToRight=function(t,e,a,i){return parseInt((e-a-t)/i,10)},s.moveElementsX=function(t,e){for(var a=0;a<t.length;a++){var i=parseFloat(t[a].x)-e;t[a-1]&&parseFloat(t[a-1].x)-i<s.chartData.spacing&&(i=parseFloat(t[a-1].x)-s.chartData.spacing),t[a].x=i.toFixed(1)}},s.moveElementsY=function(t,e){for(var a=0;a<t.length;a++){var i=parseFloat(t[a].y)-e;t[a].y=i.toFixed(1)}},s.needsElementToRight=function(t,e,a,i){return parseFloat(t[0].x)+i<e-a},s.needsElementToLeft=function(t,e){return parseFloat(t[t.length-1].x)>e},s.drawCurrentShowData=function(t,e){var a=t[s.chartData.typeData],i=parseFloat(a),r=parseFloat(s.showData[0].low),n=parseFloat(s.showData[0].high);r>i?s.showData[0].low=a:n<i&&(s.showData[0].high=a),e&&(s.showData[0].open=e[s.chartData.typeData].open,s.showData[0].close=e[s.chartData.typeData].close,s.showData[0].low=e[s.chartData.typeData].low,s.showData[0].high=e[s.chartData.typeData].high);var o=s.getCoordinateY(s.showData[0].low,s.h,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY),h=s.getCoordinateY(s.showData[0].high,s.h,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY);s.chartData.options.Chart.autoScale&&(parseFloat(h)-s.chartData.marginTop<0||parseFloat(o)+s.chartData.marginBottom>s.h)&&(s.chartData.scaleParams=s.getScaleParams(s.selectedData,s.h,s.chartData.precission),s.resizeShowDataValuesY(s.showData,s.h,s.chartData.scaleParams),s.chartData.options.Chart.scaleSeriesOnly||s.resizeShowDataByTrendIndicators(),s.draw(s.showData,s.h),s.valueAxis=s.getValueAxis(s.chartData.scaleParams.minB,s.chartData.scaleParams.maxB,5,s.w,s.h,s.chartData.options.Chart.scalesFontSize,s.chartData.precission),s.clearGrid(),s.drawValueAxis(s.valueAxis),s.drawOscillatorChartsAxis(),s.drawTimeAxis(s.timeAxis),s.drawChartBorder()),s.showData[0]=new Lt(s.showData[0].low,s.showData[0].high,s.showData[0].open,a,s.showData[0].date,s.showData[0].x,o,s.chartData.scaleParams.deltaY,!0),s.showData[0].isCurrentData=!0;var c=s.canvasRatePixelatedContext.canvas;s.canvasRatePixelatedContext.save(),s.canvasRatePixelatedContext.beginPath(),s.canvasRatePixelatedContext.rect(0,0,s.w-8,s.h),s.canvasRatePixelatedContext.closePath(),s.canvasRatePixelatedContext.clip(),s.showData[0].show(c,s.chartData.candleWidth,s.chartData.colors,s.chartData.options),s.canvasRatePixelatedContext.restore(),s.curX&&s.curY&&(s.clearInfo(),s.drawActiveDrawingObjects(),s.drawCrosshair(s.canvasInfoContext,null,s.techChart.configuration.modules.headerButtons.createPipsButton))},s.getCoordinateX=function(t,e,a,i,r){if(t=parseFloat(t),e=parseFloat(e),a=parseFloat(a),i=parseFloat(i),!(isNaN(t)||isNaN(e)||isNaN(a)||isNaN(i))){var s=parseFloat(t-e-i*a);return s=s>0?s:0,(s-=r).toFixed(1)}},s.processDataToShow=function(t,e,a,i,r,n,o,h){o=void 0===o?0:o,s.chartData.scaleParams=h||s.getScaleParams(t,r,n);for(var c=[],l=0;l<t.length;l++){var A=t[l];n||(n=ne.countDigits(A.high));var d=s.getCoordinateX(i,e,a,l,o);if(d<=0)break;var p=s.getCoordinateY(A.low,r,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY),u=new Lt(parseFloat(A.low).toFixed(n),parseFloat(A.high).toFixed(n),parseFloat(A.open).toFixed(n),parseFloat(A.close).toFixed(n),parseFloat(A.date),d,p,s.chartData.scaleParams.deltaY,s.useCanvas);A.isCurrentData&&(u.isCurrentData=!0),c.push(u)}return c},s.createShowDataItem=function(t,e){var a=new Lt(parseFloat(t.low).toFixed(e),parseFloat(t.high).toFixed(e),parseFloat(t.open).toFixed(e),parseFloat(t.close).toFixed(e),t.date,"0.0","0.0",1,s.useCanvas);return t.isCurrentData&&(a.isCurrentData=!0),a},s.setChartElementsSize=function(t){var e=s.getChartElementsSize();e.candleWidth&&(t.candleWidth=e.candleWidth),t.spacing=1.5*t.candleWidth},s.getMaxValue=function(t){for(var e=0,a=0;a<t.length;a++){var i=parseFloat(t[a].high);e<i&&(e=i)}return e},s.getMinValue=function(t){for(var e=Number.MAX_VALUE,a=0;a<t.length;a++){var i=parseFloat(t[a].low);e>i&&(e=i)}return e},s.deleteRedundantElements=function(t,e,a,i){for(var r=t.length-1;r>=0;r--)parseFloat(t[r].x)>a-i?t.length>1?t.splice(r,1):t[r].x=a-i:parseFloat(t[r].x)<=0&&t.length>1&&t.splice(r,1)},s.draw=function(t,e){if(s.chartData.drawingObjects.length)for(var a=0;a<s.chartData.drawingObjects.length;a++)"active"===s.chartData.drawingObjects[a].state&&r.clearRect(null,s.canvasDrawingActiveContext,0,0,s.canvasDrawingActive.width,s.canvasDrawingActive.height),s.redrawActiveDrawingObjects(!0);if(s.drawChart(t,e))for(var i=s.canvasDataPixelatedContext.canvas,n=0;n<t.length;n++)t[n].isCurrentData||t[n].show(i,s.chartData.candleWidth,s.chartData.colors,s.chartData.options.BarChart)},s.getFireflyPosition=function(t){var e=t.low,a=t.x,i=t.y,r=t.scale,s=t.close;return{x:a,y:r?i-Math.abs(e-s)/r:i}},s.getMinMaxPricesPosition=function(t){var e=t.showData,a=t.mode,i={},r={},n=e[0],o=e[0];if("low_high"===a&&(e.forEach((function(t){parseFloat(n.high)<parseFloat(t.high)&&(n=t),parseFloat(o.low)>parseFloat(t.low)&&(o=t)})),i={x:n&&parseFloat(n.x),y:n&&s.chartData.chart.toYPixels(parseFloat(n.high)),value:n&&parseFloat(n.high)},r={x:o&&parseFloat(o.x),y:o&&s.chartData.chart.toYPixels(parseFloat(o.low)),value:o&&parseFloat(o.low)}),"open_close"===a){e.forEach((function(t){Math.max(parseFloat(n.open),parseFloat(n.close))<Math.max(parseFloat(t.open),parseFloat(t.close))&&(n=t),Math.min(parseFloat(o.open),parseFloat(o.close))>Math.min(parseFloat(t.open),parseFloat(t.close))&&(o=t)}));var h=n&&parseFloat(n.open),c=n&&parseFloat(n.close),l=o&&parseFloat(o.open),A=o&&parseFloat(o.close);i={x:n&&parseFloat(n.x),y:h>c?s.chartData.chart.toYPixels(h):s.chartData.chart.toYPixels(c),value:Math.max(h,c)},r={x:o&&parseFloat(o.x),y:l<A?s.chartData.chart.toYPixels(l):s.chartData.chart.toYPixels(A),value:Math.min(l,A)}}return{max:i,min:r}},s}return function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(e,t),e}(ne);Ht.prototype.show=function(t,e,a,i,s){if(t||!this.useCanvas){var n,o,h,c,l=a.HollowChart.candleBool,A=a.HollowChart.candleBear,d=a.HollowChart.candleLineBool,p=a.HollowChart.candleLineBear,u=a.HollowChart.candleBoolBorder,g=a.HollowChart.candleBearBorder,f=parseFloat(this.high),w=parseFloat(this.low),v=parseFloat(this.open),y=parseFloat(this.close),m=parseFloat(this.y),B=parseFloat(this.y)-(f-w)/this.scale,C=Math.abs(v-y)/this.scale,D=C>0?C:1,b=parseFloat(this.y)+parseFloat(w-Math.max(v,y))/this.scale,x=t.getContext("2d");y>=s&&y>=v?(o="transparent",h=d,c=l):y<s&&y>=v?(o="transparent",h=p,c=A):y>=s&&y<v?(o=l,h=d,c=i.needBorder?u:o):y<s&&y<v&&(o=A,h=p,c=i.needBorder?g:o);var F=e;n=r.getPosition(parseFloat(this.x),F);var S=Math.round(n-F/2),P=r.getPosition(parseFloat(n-F/2),1),T=r.getPosition(parseFloat(n+F/2),1),E=r.getPosition(b,1),L=r.getPosition(b+D,1);D=Math.round(D),i.needBorder&&"transparent"!==o?(r.drawLine(null,x,n,Math.round(E),n,Math.round(L),o,[],F),r.drawLine(null,x,P,E,P,L,c,[],1),r.drawLine(null,x,P,L,T,L,c,[],1),r.drawLine(null,x,T,E,T,L,c,[],1),r.drawLine(null,x,P,E,T,E,c,[],1),this.hollowCandlePriceLine=o):"transparent"===o?(r.drawLine(null,x,P,E,P,L,c,[],1),r.drawLine(null,x,P,L,T,L,c,[],1),r.drawLine(null,x,T,E,T,L,c,[],1),r.drawLine(null,x,P,E,T,E,c,[],1),this.hollowCandlePriceLine=c):(r.drawLine(null,x,n,Math.round(E),n,Math.round(L),o,[],F),this.hollowCandlePriceLine=o),this.posCandle={x:S,y1:E,y2:L,width:F,height:D};var Q=i.widthWickLine;if(i.needWick){n=r.getPosition(parseFloat(this.x),Q);var O=Math.round(m),U=Math.round(B);r.drawLine(null,x,n,O,n,L,h,[],Q),r.drawLine(null,x,n,E,n,U,h,[],Q),this.posWick={x:n,y1:O,y2:U,width:Q}}}};var ue=function(t){function e(t,a,i){var s;return function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=function o(t,e){return!e||"object"!==kt(e)&&"function"!==typeof e?function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Nt(e).call(this,t,a,i))).classType="HollowChart",s.drawCrosshair=function(t,e,a){var i=s.drawCrosshairChart(t);if(i.posWick&&i){var n=s.chartData.colors.Chart.crosshair,o=Math.round(s.chartData.candleWidth),h=parseFloat(i.low),c=parseFloat(i.open),l=parseFloat(i.close),A=parseFloat(i.x),d=parseFloat(i.y);if(s.chartData.options[s.classType].widthBorderLine,s.curX<s.w-8){s.canvasInfoContext.save(),s.canvasInfoContext.beginPath(),s.canvasInfoContext.rect(0,0,s.w-8,s.h),s.canvasInfoContext.closePath(),s.canvasInfoContext.clip();var p=Math.round(A-parseFloat(o/2)),u=Math.round(d+parseFloat(h-Math.max(c,l))/i.scale);p=r.getPosition(p,2),u=r.getPosition(u,2);var g=s.chartData.options[s.classType].widthBorderLine;c>l?s.chartData.colors[s.classType].candleBear:s.chartData.colors[s.classType].candleBool;var f=i.posWick.x,w=i.posWick.y1,v=i.posWick.y2,y=i.posWick.width;s.chartData.options[s.classType].needWick&&r.drawLine(null,t,f,w,f,v,n,[],y);var m=i.posCandle.x,B=i.posCandle.y1,C=i.posCandle.width,D=i.posCandle.height;r.drawRectangle(null,t,m,B,C,D,"transparent",n,g),a&&s.chartData.isPipsShow&&s.chartData.currentValue&&s.drawPips(t),s.canvasInfoContext.restore()}}},s.processDataToShow=function(t,e,a,i,r,n,o,h){o=void 0===o?0:o,s.chartData.scaleParams=h||s.getScaleParams(t,r,n);for(var c=[],l=0;l<t.length;l++){var A=t[l];n||(n=ne.countDigits(A.high));var d=s.getCoordinateX(i,e,a,l,o);if(d<=0)break;var p=s.getCoordinateY(A.low,r,s.chartData.scaleParams.minB,s.chartData.scaleParams.deltaY),u=new Ht(parseFloat(A.low).toFixed(n),parseFloat(A.high).toFixed(n),parseFloat(A.open).toFixed(n),parseFloat(A.close).toFixed(n),parseFloat(A.date),d,p,s.chartData.scaleParams.deltaY,s.useCanvas);A.isCurrentData&&(u.isCurrentData=!0),c.push(u)}return c},s.draw=function(t,e){if(s.chartData.drawingObjects.length)for(var a=0;a<s.chartData.drawingObjects.length;a++)"active"===s.chartData.drawingObjects[a].state&&r.clearRect(null,s.canvasDrawingActiveContext,0,0,s.canvasDrawingActive.width,s.canvasDrawingActive.height),s.redrawActiveDrawingObjects(!0);if(s.drawChart(t,e))for(var i=s.canvasDataPixelatedContext.canvas,n=t.length,o=0;o<n;o++)if(t[o].isCurrentData&&s.chartData.isExpired||!t[o].isCurrentData){var h=t[o].close;if(o===n-1&&(h=s.getPrevClose(t[o])),o===n-1){var c=s.getIndexByDate(s.chartData.data,t[n-1].date);c>-1&&c<s.chartData.data.length-1&&(h=s.chartData.data[c+1].close)}else h=t[o+1].close;t[o].show(i,s.chartData.candleWidth,s.chartData.colors,s.chartData.options.HollowChart,h)}},s.getPrevClose=function(t){var e=t.close,a=s.chartData.data[s.techChart.configuration.typeData],i=t.date,r=ne.binaryIndexOfCandleByTime(i,a);return a[r+1]&&(e=a[r+1].close),e},s.createShowDataItem=function(t,e){var a=new Ht(parseFloat(t.low).toFixed(e),parseFloat(t.high).toFixed(e),parseFloat(t.open).toFixed(e),parseFloat(t.close).toFixed(e),t.date,"0.0","0.0",1,s.useCanvas);return t.isCurrentData&&(a.isCurrentData=!0),a},s}return function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&It(t,e)}(e,t),e}(le),ge=function(t){function e(t,a,i){var r;return function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function n(t,e){return!e||"object"!==Mt(e)&&"function"!==typeof e?function a(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}(this,Rt(e).call(this,t,a,i))).classType="HeikinAshiChart",r.processDataToShow=function(t,e,a,i,s,n,o,h){o=o||0,r.chartData.scaleParams=h||r.getScaleParams(t,s,n);for(var c=[],l=t.length,A=0;A<l;A++){var d=t[A];n||(n=ne.countDigits(d.high));var p=r.getCoordinateX(i,e,a,A,o);if(p<=0)break;var u,g=r.getCoordinateY(d.low,s,r.chartData.scaleParams.minB,r.chartData.scaleParams.deltaY);u=A===l-1?r.getPrevCandle(t[A],r.chartData.typeData):t[A+1];var f=r.createHeikinCandle(d,u,n,p,g);c.push(f)}return c},r.createDataForCandle=function(t,e){var a=parseFloat(t.low),i=parseFloat(t.high),r=parseFloat(t.open),s=parseFloat(t.close);return{close:(a+i+r+s)/4,open:(parseFloat(e.open)+parseFloat(e.close))/2,high:Math.max(i,r,s),low:Math.min(a,r,s)}},r.createShowDataItem=function(t,e){var a=r.getPrevCandle(t,r.chartData.typeData);return r.createHeikinCandle(t,a,e,"0.0","0.0")},r.getPrevCandle=function(t,e){var a=r.chartData.data[e],i=t.date,s=ne.binaryIndexOfCandleByTime(i,a);return a[s+1]?a[s+1]:t},r.createHeikinCandle=function(t,e,a,i,s){var n=r.createDataForCandle(t,e),o=n.low,h=n.high,c=n.open,l=n.close,A=t.date,d=t.isCurrentData,p=new yt(o.toFixed(a),h.toFixed(a),c.toFixed(a),l.toFixed(a),parseFloat(A),i,s,r.chartData.scaleParams.deltaY,r.useCanvas);return d&&(p.isCurrentData=d),p},r.updateCurval=function(t,e){return t.ask=r.createCurCandle(t.ask,"ask").close.toFixed(e),t.bid=r.createCurCandle(t.bid,"bid").close.toFixed(e),t.mid=r.createCurCandle(t.mid,"mid").close.toFixed(e),t},r.createCurCandle=function(t,e){var a=parseFloat(t),i=r.chartData.data[e][0];i.close=a;var s=r.getPrevCandle(i,e);return r.createDataForCandle(i,s)},r.checkPositionHeiki=function(t,e,a){var i,s=a/2,n=r.chartData.options.Chart.candleTimer?1.5*a:a/2;return e-s>=t+n||e+s<=t-s?i=e:e-s<t+n?i=t+n:e+s>t-s&&(i=t-a),i},r}return function a(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kt(t,e)}(e,t),e}(le),fe=function t(e,a){var r=this;if(function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),$t(this,"createParent",(function(t,e){var a=t.firstElementChild,i=document.createElement("div");return i.setAttribute("class","widget-container tch-technical-chart-container-".concat(e)),t.insertBefore(i,a),i})),$t(this,"mappingConfiguration",(function(t){t.id&&(r.ID=t.id);var e=Wt(r.defaultAllConfiguration.config,t.config?t.config:{});if(r.configuration=r.setParamsConverter(qt(e)),t&&t.styles&&Object.keys(t.styles).length){var a=Wt(r.defaultAllConfiguration.styles,t.styles);r.isExternalStyle=!0,r.styles.colors=a.colors,r.styles.options=a.options}else r.isExternalStyle=!1,r.styles=r.defaultAllConfiguration.styles;r.languages=r.defaultAllConfiguration.translate,t&&t.translate&&Object.keys(t.translate).length&&(r.languages=t.translate),Object.keys(r.languages).includes(r.configuration.lang)&&"default"!==r.configuration.lang||(r.configuration.lang=r.configuration.defaultLang),r.translation=r.languages[r.configuration.lang]})),$t(this,"chartHeaderMenus",(function(){var t={candle:r.translation.candle,area:r.translation.area,line:r.translation.line,bar:r.translation.bar,hollow:r.translation.hollow,heikin:r.translation.heikin};return Gt(r.configuration.dropDown.chartTypes,t)})),$t(this,"sideBarMenus",(function(){return{cursorType:r.configuration.modules.sideBarButtons.cursorTypeButton?{arrow:r.translation.arrow,dot:r.translation.dot,cross:r.translation.cross}:null,lineType:r.configuration.modules.sideBarButtons.drawingObjectsButton?{drawingVerticalLine:r.translation["vertical-line"],drawingHorizontalLine:r.translation["horizontal-line"],drawingTrendLine:r.translation["trend-line"],drawingTrendAngle:r.translation["trend-angle"],drawingHorizontalRay:r.translation["horizontal-ray"],drawingArrow:r.translation.arrow,drawingRay:r.translation.ray,drawingParallelChannel:r.translation["parallel-channel"],drawingDisjointAngle:r.translation["disjoint-angle"],drawingFlatTopBottom:r.translation["flat-top/bottom"]}:null,brushType:r.configuration.modules.sideBarButtons.brushTypeButton?{drawingBrush:r.translation.brush,drawingRectangle:r.translation.rectangle,drawingRotatedRect:r.translation["rotated-rectangle"],drawingEllipse:r.translation.ellipse,drawingTriangle:r.translation.triangle,drawingPolyline:r.translation.polyline,drawingCurve:r.translation.curve,drawingArc:r.translation.arc}:null,textType:r.configuration.modules.sideBarButtons.textTypeButton?{drawingText:r.translation.text,drawingAnchoredText:r.translation["anchored-text"],drawingArrowMarkLeft:r.translation["arrow-mark-left"],drawingArrowMarkRight:r.translation["arrow-mark-right"],drawingArrowMarkUp:r.translation["arrow-mark-up"],drawingArrowMarkDown:r.translation["arrow-mark-down"],drawingFlag:r.translation.flag,drawingNote:r.translation.note,drawingAnchoredNote:r.translation["anchored-note"]}:null}})),$t(this,"typeDatas",(function(){var t={bid:{key:"bid",value:"bid",text:r.translation.bid},ask:{key:"ask",value:"ask",text:r.translation.ask},mid:{key:"mid",value:"mid",text:r.translation.mid}};return Gt(r.configuration.dropDown.typeDatas,t)})),$t(this,"periods",(function(){var t={minute:{key:"1-minute",value:"1",text:r.translation["1m"]},minute5:{key:"5-minutes",value:"5",text:r.translation["5m"]},minute15:{key:"15-minutes",value:"15",text:r.translation["15m"]},minute30:{key:"30-minutes",value:"30",text:r.translation["30m"]},hour:{key:"1-hour",value:"60",text:r.translation["1h"]},hour4:{key:"4-hours",value:"hour4",text:r.translation["4h"]},hour8:{key:"8-hours",value:"hour8",text:r.translation["8h"]},day:{key:"1-day",value:"day",text:r.translation["1D"]},week:{key:"1-week",value:"week",text:r.translation["1W"]},month:{key:"1-month",value:"month",text:r.translation["1M"]}};return Gt(r.configuration.dropDown.periods,t)})),$t(this,"getPeriods",(function(){return{1:{key:"1-minute",name:"1",value:"minute",text:"1m"},5:{key:"5-minutes",name:"5",value:"minute5",text:"5m"},15:{key:"15-minutes",name:"15",value:"minute15",text:"15m"},30:{key:"30-minutes",name:"30",value:"minute30",text:"30m"},60:{key:"1-hour",name:"60",value:"hour",text:"1h"},hour4:{key:"4-hours",name:"hour4",value:"hour4",text:"4h"},hour8:{key:"8-hours",name:"hour8",value:"hour8",text:"8h"},day:{key:"1-day",name:"day",value:"day",text:"1D"},week:{key:"1-week",name:"week",value:"week",text:"1W"},month:{key:"1-month",name:"month",value:"month",text:"1M"}}})),$t(this,"spliterTemplates",(function(){return[{count:1,template:[!1]},{count:2,template:[[!1,!1]]},{count:2,template:[!1,!1]},{count:3,template:[[!1,!1,!1]]},{count:3,template:[!1,!1,!1]},{count:3,template:[[[!1,!1],!1]]},{count:3,template:[!1,[!1,!1]]},{count:6,template:[[[!1,!1,!1],[!1,!1,!1]]]},{count:8,template:[[[!1,!1,!1,!1],[!1,!1,!1,!1]]]}]})),$t(this,"getDefaultAllConfiguration",(function(){return{config:Zt({},Xt(te)),styles:Zt({},Xt(ee)),translate:Zt({},Xt(ae))}})),$t(this,"setParamsConverter",(function(t){return t.isConfigPage&&(t.isAutoRestore=!1),t.typeThemes&&(t.typeThemes=r.convertTheme(t.typeThemes)),t.lang&&(t.lang=t.lang.toLowerCase()),t.chartType&&(t.chartType=r.convertChartType(t.chartType)),t})),$t(this,"convertChartType",(function(t){switch(t){case"candles":return"candle";case"area":return"area";case"line":return"line";case"bars":return"bar";case"hollowcandles":return"hollow";case"heikinashi":return"heikin";default:return t}})),$t(this,"convertTheme",(function(t){switch(t){case"default":return"defaultthema";case"grey":return"greythema";case"black":return"blackthema";case"blue":return"bluethema";case"dark":return"darkthema";case"white":return"whitethema";default:return"defaultthema"}})),!e.container)throw new Error("parameters.container isRequired");if(this.ID="",this.isExternalStyle=!1,this.defaultAllConfiguration=this.getDefaultAllConfiguration(),this.connector=null,this.configuration={},this.styles={},this.translation={},this.languages={},this.mappingConfiguration(e),a&&Object.keys(a).length)this.connector=a;else{var n=i("./src/scripts/Connector/Connector.js").default;this.connector=new n(e.connectorOptions)}this.parent=this.createParent(e.container,e.id),this.chartTypes=Gt(this.configuration.dropDown.chartTypes,{candle:"Candles",area:"Area",line:"Line",bar:"Bars",hollow:"Hollow Candles",heikin:"Heikin Ashi"}),this.typeData={ask:"Ask",bid:"Bid",mid:"Middle"},this.defaultParams={activeSpliter:this.configuration.defaultParams.activeSpliter,activeChartIndex:this.configuration.defaultParams.activeChartIndex,cursorType:this.configuration.defaultParams.cursorType,setTimeoutforSave:this.configuration.defaultParams.setTimeoutforSave,paramsPanels:this.configuration.defaultParams.paramsPanels},this.dropForHidden=[],this.activeMenuContainer=[],this.arrowForHidden=[],this.changedGlobalSettings={},this.settings={},this.chartsContainerRect={},this.chartsOff=6,this.charts=[],this.activeSpliter=this.defaultParams.activeSpliter,this.cursorType=this.defaultParams.cursorType,this.activeChartIndex=this.defaultParams.activeChartIndex,this.autoSaveTimeout=null,this.chartsArray=[],this.groupCharts={},this.activeTab="",this.canAddTab=!0,this.maxTabsQuantity=this.configuration.tabsQuantity,this.priceOffset=6,this.signalsList=[],this.defaultTopDataPanel=this.configuration.defaultTopPositionDataWindowOnChart,this.defaultLeftDataPanel=10,this.isNoOptions=!1,this.sideBarListItemps=[]};fe.prototype.htmlSettingsStyleCandles=function(){return"<div class='tch-layout-style-candle tch-style-layouts'>\n            <div>\n                <input name='options-CandleChart-colorPrevious' type='checkbox' />\n                <label class='tch-color-bar-based' tch-text='color-bars-based'>".concat(this.translation.borders,"</label>\n            </div>\n            <table>\n                <tr>\n                    <td>\n                        <label tch-text='candle'>").concat(this.translation.candle,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-CandleChart-candleBool'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-CandleChart-candleBear'></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input name='options-CandleChart-needBorder' type='checkbox' />\n                        <label tch-text='borders'>").concat(this.translation.borders,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-CandleChart-candleBoolBorder'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-CandleChart-candleBearBorder'></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input name='options-CandleChart-needWick' type='checkbox' />\n                        <label tch-text='wick'>").concat(this.translation.wick,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-CandleChart-candleLineBool'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-CandleChart-candleLineBear'></div>\n                        </div>\n                    </td>\n                </tr>\n            </table>\n            <table>\n                <tr>\n                    <td>\n                        <input name='options-Chart-needPriceLine' type='checkbox'  checked/>\n                        <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                    </td>\n                    <td>\n                        <input name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                    </td>\n                </tr>\n                <tr class='scale-hidden'>\n                    <td>\n                        <label tch-text='scale'>Scale</label>\n                    </td>\n                    <td>\n                        <select>\n                            <option value='Right' tch-text='right'>Right</option>\n                            <option value ='Left' tch-text='left'>Left</option>\n                        </select>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label tch-text='override-min'>").concat(this.translation["override-min"],"</label>\n                    </td>\n                    <td>\n                        <select name ='options-Chart-typeTick'>\n                            <option value ='Default' tch-text='default' >").concat(this.translation.default,"</option>\n                            <option value ='1'>1/1</option>\n                            <option value ='10'>1/10</option>\n                            <option value ='100'>1/100</option>\n                            <option value ='1000'>1/1000</option>\n                            <option value ='10000'>1/10000</option>\n                            <option value ='100000'>1/100000</option>\n                            <option value ='1000000'>1/1000000</option>\n                        </select>\n                    </td>\n                </tr>\n            </table>\n        </div>")},fe.prototype.htmlSettingsStyleArea=function(){return"<div class='tch-layout-style-area tch-style-layouts tch-hidden'>\n             <table>\n                <tr>\n                    <td>\n                        <label for='tch-priceSource' tch-text='price-source'>".concat(this.translation["price-source"],"</label>\n                    </td>\n                    <td>\n                        <select name ='options-AreaChart-priceSource' class='tch-style-price-source' id='tch-priceSource'>\n                            <option value ='Open'>Open</option>\n                            <option value ='High'>High</option>\n                            <option value ='Low'>Low</option>\n                            <option value ='Close'>Close</option>\n                            <option value ='(H+L)/2'>&lrm;(H+L)/2</option>\n                            <option value ='(H+L+C)/3'>&lrm;(H+L+C)/3</option>\n                            <option value ='(O+H+L+C)/4'>&lrm;(O+H+L+C)/4</option>\n                        </select>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for='tch-settingsStyle-area-line' tch-text='line'>").concat(this.translation.line,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-AreaChart-colorLine'></div>\n                        </div>\n                        <input name='options-AreaChart-widthLine' class='tch-settings-area-range' type='range' min='1' max='10' value= '1'/>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label for='tch-settingsStyle-area-fill' tch-text='fill'>").concat(this.translation.fill,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-AreaChart-colorStop'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-AreaChart-colorStopEnd'></div>\n                        </div>\n                    </td>\n                </tr>\n            </table>\n            <table>\n                <tr>\n                    <td>\n                        <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                        <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                    </td>\n                    <td>\n                        <input name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label tch-text='override-min'>").concat(this.translation["override-min"],"</label>\n                    </td>\n                    <td>\n                        <select name ='options-Chart-typeTick'>\n                            <option value ='Default' tch-text='default'>").concat(this.translation.default,"</option>\n                            <option value ='1'>1/1</option>\n                            <option value ='10'>1/10</option>\n                            <option value ='100'>1/100</option>\n                            <option value ='1000'>1/1000</option>\n                            <option value ='10000'>1/10000</option>\n                            <option value ='100000'>1/100000</option>\n                            <option value ='1000000'>1/1000000</option>\n                        </select>\n                    </td>\n                </tr>\n            </table>\n         </div>")},fe.prototype.htmlSettingsStyleLine=function(){return"<div class='tch-layout-style-line tch-style-layouts tch-hidden'>\n                <table>\n                    <tr>\n                        <td>\n                            <label tch-text='price-source'>".concat(this.translation["price-source"],"</label>\n                        </td>\n                        <td>\n                            <select name ='options-LineChart-priceSource' class='tch-style-price-source'>\n                                <option value ='Open'>Open</option>\n                                <option value ='High'>High</option>\n                                <option value ='Low'>Low</option>\n                                <option value ='Close'>Close</option>\n                                <option value ='(H+L)/2'>&lrm;(H+L)/2</option>\n                                <option value ='(H+L+C)/3'>&lrm;(H+L+C)/3</option>\n                                <option value ='(O+H+L+C)/4'>&lrm;(O+H+L+C)/4</option>\n                            </select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='type'>").concat(this.translation.type,"</label>\n                        </td>\n                        <td>\n                            <select name ='options-LineChart-typeLine'>\n                                <option value ='Simple'>").concat(this.translation.simple,"</option>\n                                <option value ='WithMarkers'>").concat(this.translation["with-markers"],"</option>\n                                <option value ='Step'>").concat(this.translation.step,"</option>\n                            </select>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='line'>").concat(this.translation.line,"</label>\n                        </td>\n                        <td>\n                            <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name='colors-LineChart-colorLine'></div>\n                            </div>\n                            <input name='options-LineChart-widthLine' class='tch-lineChart-widthLine-range' type='range' min='1' max='10' value= '1'/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                            <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                        </td>\n                        <td>\n                            <input name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='override-min'>").concat(this.translation["override-min"],"</label>\n                        </td>\n                        <td>\n                            <select name ='options-Chart-typeTick'>\n                                <option value ='Default' tch-text='default' >").concat(this.translation.default,"</option>\n                                <option value ='1'>1/1</option>\n                                <option value ='10'>1/10</option>\n                                <option value ='100'>1/100</option>\n                                <option value ='1000'>1/1000</option>\n                                <option value ='10000'>1/10000</option>\n                                <option value ='100000'>1/100000</option>\n                                <option value ='1000000'>1/1000000</option>\n                            </select>\n                        </td>\n                    </tr>\n                </table>\n          </div>")},fe.prototype.htmlSettingsStyleBar=function(){return"<div class='tch-layout-style-bar tch-style-layouts tch-hidden'>\n            <div>\n                <input name='options-BarChart-colorPrevious' type='checkbox' />\n                <label class='tch-color-bar-based' tch-text='color-bars-based'>".concat(this.translation["color-bars-based"],"</label>\n            </div>\n            <table>\n                <tr>\n                    <td>\n                        <input name='options-BarChart-needOpen' type='checkbox' />\n                        <label class='tch-color-bar-based' tch-text='hlc-bars'>").concat(this.translation["hlc-bars"],"</label>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label tch-text='up-color'>").concat(this.translation["up-color"],"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-BarChart-candleBool'></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label tch-text='down-color'>").concat(this.translation["down-color"],"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-BarChart-candleBear'></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                        <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                    </td>\n                    <td>\n                        <input name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                    </td>\n                </tr>\n                <tr class='scale-hidden'>\n                    <td>\n                        <label tch-text='scale'>Scale</label>\n                    </td>\n                    <td>\n                        <select>\n                            <option value ='Left' tch-text='left'>Left</option>\n                            <option value ='Right' tch-text='right'>Right</option>\n                        </select>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label tch-text='override-min'>").concat(this.translation["override-min"],"</label>\n                    </td>\n                    <td>\n                        <select name ='options-Chart-typeTick'>\n                            <option value ='Default' tch-text='default'>").concat(this.translation.default,"</option>\n                            <option value ='1'>1/1</option>\n                            <option value ='10'>1/10</option>\n                            <option value ='100'>1/100</option>\n                            <option value ='1000'>1/1000</option>\n                            <option value ='10000'>1/10000</option>\n                            <option value ='100000'>1/100000</option>\n                            <option value ='1000000'>1/1000000</option>\n                        </select>\n                    </td>\n                </tr>\n            </table>\n        </div>")},fe.prototype.htmlSettingsStyleHollowCandles=function(){return"<div class='tch-layout-style-hollow tch-style-layouts tch-hidden'>\n            <table>\n                <tr>\n                    <td>\n                        <label tch-text='hollow'>".concat(this.translation.hollow,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HollowChart-candleBool'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HollowChart-candleBear'></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input name='options-HollowChart-needBorder' type='checkbox'/>\n                        <label tch-text='borders'>").concat(this.translation.borders,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HollowChart-candleBoolBorder'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HollowChart-candleBearBorder'></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input name='options-HollowChart-needWick' type='checkbox'/>\n                        <label tch-text='wick'>").concat(this.translation.wick,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name='colors-HollowChart-candleLineBool'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HollowChart-candleLineBear'></div>\n                        </div>\n                    </td>\n                </tr>\n            </table>\n            <table>\n                <tr>\n                    <td>\n                        <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                        <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                    </td>\n                    <td>\n                        <input  name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label tch-text='override-min'>").concat(this.translation["override-min"],"</label>\n                    </td>\n                    <td>\n                        <select name ='options-Chart-typeTick'>\n                            <option value ='Default' tch-text='default'>").concat(this.translation.default,"</option>\n                            <option value ='1'>1/1</option>\n                            <option value ='10'>1/10</option>\n                            <option value ='100'>1/100</option>\n                            <option value ='1000'>1/1000</option>\n                            <option value ='10000'>1/10000</option>\n                            <option value ='100000'>1/100000</option>\n                            <option value ='1000000'>1/1000000</option>\n                        </select>\n                    </td>\n                </tr>\n            </table>\n        </div>")},fe.prototype.htmlSettingsStyleHeikinAshiChart=function(){return"<div class='tch-layout-style-heikin tch-style-layouts tch-hidden'>\n            <table>\n                <tr>\n                    <td>\n                        <label tch-text='heikin'>".concat(this.translation.heikin,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HeikinAshiChart-candleBool'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HeikinAshiChart-candleBear'></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input name='options-HeikinAshiChart-needBorder' type='checkbox'/>\n                        <label tch-text='borders'>").concat(this.translation.borders,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HeikinAshiChart-candleBoolBorder'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HeikinAshiChart-candleBearBorder'></div>\n                        </div>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <input name='options-HeikinAshiChart-needWick' type='checkbox'/>\n                        <label tch-text='wick'>").concat(this.translation.wick,"</label>\n                    </td>\n                    <td>\n                        <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name='colors-HeikinAshiChart-candleLineBool'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HeikinAshiChart-candleLineBear'></div>\n                        </div>\n                    </td>\n                </tr>\n            </table>\n            <table>\n                <tr>\n                    <td>\n                        <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                        <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                    </td>\n                    <td>\n                        <input  name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                    </td>\n                </tr>\n                <tr>\n                    <td>\n                        <label tch-text='override-min'>").concat(this.translation["override-min"],"</label>\n                    </td>\n                    <td>\n                        <select name ='options-Chart-typeTick'>\n                            <option value ='Default' tch-text='default'>").concat(this.translation.default,"</option>\n                            <option value ='1'>1/1</option>\n                            <option value ='10'>1/10</option>\n                            <option value ='100'>1/100</option>\n                            <option value ='1000'>1/1000</option>\n                            <option value ='10000'>1/10000</option>\n                            <option value ='100000'>1/100000</option>\n                            <option value ='1000000'>1/1000000</option>\n                        </select>\n                    </td>\n                </tr>\n            </table>\n        </div>")},fe.prototype.htmlSettingsStyleChartType=function(){return"<select name = options-Chart-typeChart class='tch-style-select-chart-type'>\n            ".concat(this.filterChartType(this.configuration.dropDown.chartTypes),"\n        </select>")},fe.prototype.htmlSettingsStyle=function(){return this.applyThemeOverridedMethod("htmlSettingsStyle")||"<div class='tch-settings-style'>\n        ".concat(this.htmlSettingsStyleChartType(),"\n        ").concat(this.htmlSettingsStyleCandles(),"\n        ").concat(this.htmlSettingsStyleArea(),"\n        ").concat(this.htmlSettingsStyleLine(),"\n        ").concat(this.htmlSettingsStyleBar(),"\n        ").concat(this.htmlSettingsStyleHollowCandles(),"\n        ").concat(this.htmlSettingsStyleHeikinAshiChart(),"\n        </div>")},fe.prototype.filterChartType=function(t){var e=this;return Object.keys(t).reduce((function(a,i){return"".concat(a,"\n             <option value=").concat(t[i]," tch-text=").concat(t[i],">\n                ").concat(e.translation[t[i]],"\n             </option>")}),"")},fe.prototype.htmlSettingsStyleCandlesSecondDesign=function(){return"<div class='tch-layout-style-candle tch-style-layouts'>\n            <div>\n                <input name='options-CandleChart-colorPrevious' type='checkbox' />\n                <label class='tch-color-bar-based' tch-text='color-bars-based'>".concat(this.translation.borders,"</label>\n            </div>\n          \n            <div class='tch-settings-row'>\n                <label tch-text='candle'>").concat(this.translation.candle,"</label>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-CandleChart-candleBool'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-CandleChart-candleBear'></div>\n                    </div>\n                </div>\n            </div>\n                \n            <div class='tch-settings-row'>\n            <div class='tch-settings-row-block'>\n                <input name='options-CandleChart-needBorder' type='checkbox' />\n                <label tch-text='borders'>").concat(this.translation.borders,"</label>\n                </div>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-CandleChart-candleBoolBorder'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-CandleChart-candleBearBorder'></div>\n                    </div>\n                </div>\n            </div>\n                \n            <div class='tch-settings-row'>\n            <div class='tch-settings-row-block'>\n                <input name='options-CandleChart-needWick' type='checkbox' />\n                <label tch-text='wick'>").concat(this.translation.wick,"</label>\n                </div>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-CandleChart-candleLineBool'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-CandleChart-candleLineBear'></div>\n                    </div>\n                </div>\n            </div>\n            \n            <div class='tch-settings-row'>\n            <div class='tch-settings-row-block'>\n                <input name='options-Chart-needPriceLine' type='checkbox'  checked/>\n                <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                </div>\n\n                <div class='tch-settings-row-block'>\n                    <input name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                </div>\n            </div>\n        </div>")},fe.prototype.htmlSettingsStyleAreaSecondDesign=function(){return"<div class='tch-layout-style-area tch-style-layouts tch-hidden'>\n            <div class='tch-settings-row'>\n                <label for='tch-priceSource' tch-text='price-source'>".concat(this.translation["price-source"],"</label>\n                <div>\n                        <select name ='options-AreaChart-priceSource' class='tch-style-price-source' id='tch-priceSource'>\n                            <option value ='Open'>Open</option>\n                            <option value ='High'>High</option>\n                            <option value ='Low'>Low</option>\n                            <option value ='Close'>Close</option>\n                            <option value ='(H+L)/2'>&lrm;(H+L)/2</option>\n                            <option value ='(H+L+C)/3'>&lrm;(H+L+C)/3</option>\n                            <option value ='(O+H+L+C)/4'>&lrm;(O+H+L+C)/4</option>\n                        </select>\n                </div>\n            </div> \n                \n            <div class='tch-settings-row'>\n                <label for='tch-settingsStyle-area-line' tch-text='line'>").concat(this.translation.line,"</label>\n                <div class='tch-settings-row-block tch-setting-width-input'>\n                    <input name='options-AreaChart-widthLine' class='tch-settings-area-range' type='range' min='1' max='10' value= '1'/>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-AreaChart-colorLine'></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class='tch-settings-row'>\n                <label for='tch-settingsStyle-area-fill' tch-text='fill'>").concat(this.translation.fill,"</label>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-AreaChart-colorStop'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-AreaChart-colorStopEnd'></div>\n                    </div>\n                </div>\n            </div>\n            \n            <div class='tch-settings-row'>\n                <div class='tch-settings-row-block'>\n                    <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                    <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                </div>\n                <div class='tch-settings-row-block'>\n                    <input name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                </div>\n            </div>\n         </div>")},fe.prototype.htmlSettingsStyleLineSecondDesign=function(){return"<div class='tch-layout-style-line tch-style-layouts tch-hidden'>\n                \n        <div class='tch-settings-row'>\n            <label tch-text='price-source'>".concat(this.translation["price-source"],"</label>\n            <div>\n                    <select name ='options-LineChart-priceSource' class='tch-style-price-source'>\n                        <option value ='Open'>Open</option>\n                        <option value ='High'>High</option>\n                        <option value ='Low'>Low</option>\n                        <option value ='Close'>Close</option>\n                        <option value ='(H+L)/2'>&lrm;(H+L)/2</option>\n                        <option value ='(H+L+C)/3'>&lrm;(H+L+C)/3</option>\n                        <option value ='(O+H+L+C)/4'>&lrm;(O+H+L+C)/4</option>\n                    </select>\n            </div>\n        </div>\n\n        <div class='tch-settings-row'>\n            <label tch-text='type'>").concat(this.translation.type,"</label>\n            <div>\n                    <select name ='options-LineChart-typeLine'>\n                        <option value ='Simple'>").concat(this.translation.simple,"</option>\n                        <option value ='WithMarkers'>").concat(this.translation["with-markers"],"</option>\n                        <option value ='Step'>").concat(this.translation.step,"</option>\n                    </select>\n            </div>\n        </div>\n\n        <div class='tch-settings-row'>\n            <label tch-text='line'>").concat(this.translation.line,"</label>\n            <div class='tch-settings-row-block tch-setting-width-input'>\n            <input name='options-LineChart-widthLine' class='tch-lineChart-widthLine-range' type='range' min='1' max='10' value= '1'/>\n                <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-LineChart-colorLine'></div>\n                </div>\n            </div>\n        </div>\n\n        <div class='tch-settings-row'>\n            <div class='tch-settings-row-block'>\n                <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n            </div>\n            <div>\n                <input name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n            </div>\n        </div>\n    </div>")},fe.prototype.htmlSettingsStyleBarhtmlSettingsStyleBarSecondDesign=function(){return"<div class='tch-layout-style-bar tch-style-layouts tch-hidden'>\n            <div>\n                <input name='options-BarChart-colorPrevious' type='checkbox' />\n                <label class='tch-color-bar-based' tch-text='color-bars-based'>".concat(this.translation["color-bars-based"],"</label>\n            </div>\n\n           <div class='tch-settings-row'>\n           <div class='tch-settings-row-block'>\n                <input name='options-BarChart-needOpen' type='checkbox' />\n                <label class='tch-color-bar-based' tch-text='hlc-bars'>").concat(this.translation["hlc-bars"],"</label>\n            </div>\n            </div>\n               \n            <div class='tch-settings-row'>\n                <label tch-text='up-color'>").concat(this.translation["up-color"],"</label>\n                <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-BarChart-candleBool'></div>\n                </div>\n            </div>\n            \n            <div class='tch-settings-row'>\n                <label tch-text='down-color'>").concat(this.translation["down-color"],"</label>\n                <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-BarChart-candleBear'></div>\n                </div>\n            </div>\n            \n            <div class='tch-settings-row'>\n                <div class='tch-settings-row-block'>\n                    <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                        <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                </div>\n                    <div class='tch-settings-row-block'>\n                        <input name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                    </div>\n            </div>\n        </div>")},fe.prototype.htmlSettingsStyleHollowCandlesSecondDesign=function(){return"<div class='tch-layout-style-hollow tch-style-layouts tch-hidden'>\n            <div class='tch-settings-row'>\n                <label tch-text='hollow'>".concat(this.translation.hollow,"</label>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HollowChart-candleBool'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HollowChart-candleBear'></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class='tch-settings-row'>\n                <div class='tch-settings-row-block'>\n                    <input name='options-HollowChart-needBorder' type='checkbox'/>\n                    <label tch-text='borders'>").concat(this.translation.borders,"</label>\n                </div>\n                <div class='tch-settings-row-block'>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HollowChart-candleBoolBorder'></div>\n                        </div>\n                        <div class='tch-color-picker-container'>\n                            <div class='tch-color-picker' name='colors-HollowChart-candleBearBorder'></div>\n                        </div>\n                </div>\n            </div>\n\n            <div class='tch-settings-row'>\n                <div class='tch-settings-row-block'>\n                        <input name='options-HollowChart-needWick' type='checkbox'/>\n                        <label tch-text='wick'>").concat(this.translation.wick,"</label>\n                </div>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HollowChart-candleLineBool'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HollowChart-candleLineBear'></div>\n                    </div>\n                </div>\n            </div>\n           \n            <div class='tch-settings-row'>\n                <div class='tch-settings-row-block'>\n                    <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                    <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                </div>\n                <div class='tch-settings-row-block'>\n                    <input  name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                </div>\n            </div>\n\n\n        </div>")},fe.prototype.htmlSettingsStyleHeikinAshiChartSecondDesign=function(){return"<div class='tch-layout-style-heikin tch-style-layouts tch-hidden'>\n            <div class='tch-settings-row'>\n                <label tch-text='heikin'>".concat(this.translation.heikin,"</label>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HeikinAshiChart-candleBool'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HeikinAshiChart-candleBear'></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class='tch-settings-row'>\n                <div class='tch-settings-row-block'>\n                    <input name='options-HeikinAshiChart-needBorder' type='checkbox'/>\n                    <label tch-text='borders'>").concat(this.translation.borders,"</label>\n                </div>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HeikinAshiChart-candleBoolBorder'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HeikinAshiChart-candleBearBorder'></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class='tch-settings-row'>\n                <div class='tch-settings-row-block'>\n                    <input name='options-HeikinAshiChart-needWick' type='checkbox'/>\n                    <label tch-text='wick'>").concat(this.translation.wick,"</label>\n                </div>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HeikinAshiChart-candleLineBool'></div>\n                    </div>\n                    <div class='tch-color-picker-container'>\n                        <div class='tch-color-picker' name='colors-HeikinAshiChart-candleLineBear'></div>\n                    </div>\n                </div>\n            </div>\n\n            <div class='tch-settings-row'>\n                <div class='tch-settings-row-block'>\n                    <input name='options-Chart-needPriceLine' type='checkbox' checked/>\n                    <label tch-text='price-line'>").concat(this.translation["price-line"],"</label>\n                </div>\n                    <div class='tch-settings-row-block'>\n                        <input  name='options-Chart-widthPriceLine' type='range' min='1' max='10' value='1'/>\n                    </div>\n                </div>\n            </div>\n\n            <div class='tch-settings-row'>\n                <label tch-text='override-min'>").concat(this.translation["override-min"],"</label>\n                <div class='tch-settings-row-block'>\n                    <select name ='options-Chart-typeTick'>\n                        <option value ='Default' tch-text='default'>").concat(this.translation.default,"</option>\n                        <option value ='1'>1/1</option>\n                        <option value ='10'>1/10</option>\n                        <option value ='100'>1/100</option>\n                        <option value ='1000'>1/1000</option>\n                        <option value ='10000'>1/10000</option>\n                        <option value ='100000'>1/100000</option>\n                        <option value ='1000000'>1/1000000</option>\n                    </select>\n                </div>\n        </div>")},fe.prototype.htmlSettingsStyleSecondDesign=function(){return"<div class='tch-settings-style'>\n        <div class='tch-settings-scales-row tch-settings-scales-select'>\n            ".concat(this.htmlSettingsStyleChartType(),"\n        </div>\n        ").concat(this.htmlSettingsStyleCandlesSecondDesign(),"\n        ").concat(this.htmlSettingsStyleAreaSecondDesign(),"\n        ").concat(this.htmlSettingsStyleLineSecondDesign(),"\n        ").concat(this.htmlSettingsStyleBarhtmlSettingsStyleBarSecondDesign(),"\n        ").concat(this.htmlSettingsStyleHollowCandlesSecondDesign(),"\n        ").concat(this.htmlSettingsStyleHeikinAshiChartSecondDesign(),"\n        </div>")},fe.prototype.htmlSettingsScales=function(){return this.applyThemeOverridedMethod("htmlSettingsScales")||"<div class='tch-settings-scales tch-hidden'>\n            <div>\n                <div>\n                    <input type='checkbox' name='options-Chart-autoScale'/>\n                    <label tch-text='auto-scale'>".concat(this.translation["auto-scale"],"</label>\n                </div>\n                <div>\n                    <input type='checkbox' name='options-Chart-scaleSeriesOnly'/>\n                    <label tch-text='scale-series'>").concat(this.translation["scale-series"],"</label>\n                </div>\n            </div>\n        </div>")},fe.prototype.htmlSettingsBackground=function(){return this.applyThemeOverridedMethod("htmlSettingsBackground")||"<div class='tch-settings-background tch-hidden'>\n            <table>\n                <tbody>\n                    <tr>\n                        <td>\n                            <label tch-text='background'>".concat(this.translation.background,"</label>\n                            <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name='colors-Chart-backgroundColor'></div>\n                            </div>\n                        </td>\n                        <td>\n                            <input name ='options-Chart-symbolDescription' type='checkbox' />\n                            <label tch-text='symbol-description'>").concat(this.translation["symbol-description"],"</label>\n                        </td>\n                        <td>\n                            <input name ='options-Chart-candleTimer' type='checkbox' />\n                            <label tch-text='candle-timer'>").concat(this.translation["candle-timer"],"</label>\n                    </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='vert-grid-lines'>").concat(this.translation["vert-grid-lines"],"</label>\n                            <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name = 'colors-Chart-vertGridLines'></div>\n                            </div>\n                        </td>\n                        <td>\n                            <select name ='options-Chart-typeVertGridLines'>\n                                <option value ='normal'>________</option>\n                                <option value ='dash'>--------</option>\n                                <option value ='points'>-.-.-.-.</option>\n                            </select>\n                        </td>\n                        <td>\n                            <input name ='options-Chart-ohlcValues' type='checkbox' />\n                            <label tch-text='ohlc-values'>").concat(this.translation["ohlc-values"],"</label>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='horz-grid-lines'>").concat(this.translation["horz-grid-lines"],"</label>\n                            <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker'name='colors-Chart-horzGridLines'></div>\n                            </div>\n                        </td>\n                        <td>\n                            <select name ='options-Chart-typeHorzGridLines'>\n                                <option value ='normal'>________</option>\n                                <option value ='dash'>--------</option>\n                                <option value ='points'>-.-.-.-.</option>\n                            </select>\n                        </td>\n                        <td>\n                            <input name ='options-Chart-indicatorTitles' type='checkbox' />\n                            <label tch-text='indicator-titles'>").concat(this.translation["indicator-titles"],"</label>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='scales-text'>").concat(this.translation["scales-text"],"</label>\n                            <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name='colors-Chart-scalesText'></div>\n                            </div>\n                        </td>\n                        <td>\n                            <select name ='options-Chart-scalesFontSize'>\n                                <option value = '10'>10</option>\n                                <option value = '11'>11</option>\n                                <option value = '12'>12</option>\n                                <option value = '14'>14</option><option value = '16'>16</option>\n                                <option value = '20'>20</option><option value = '24'>24</option>\n                                <option value = '28'>28</option><option value = '32'>32</option>\n                            </select>\n                        </td>\n                        <td>\n                            <input name ='options-Chart-indicatorArguments' type='checkbox' />\n                            <label tch-text='indicator-arguments'>").concat(this.translation["indicator-arguments"],"</label>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='scales-lines'>").concat(this.translation["scales-lines"],"</label>\n                            <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name='colors-Chart-colorScalesLines'></div>\n                            </div>\n                        </td>\n                        <td></td>\n                        <td>\n                            <input name ='options-Chart-indicatorValues' type='checkbox' />\n                            <label tch-text='indicator-values'>").concat(this.translation["indicator-values"],"</label>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='watermark'>").concat(this.translation.watermark,"</label>\n                            <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name='colors-Chart-watermarkColor'></div>\n                            </div>\n                        </td>\n                        <td></td>\n                        <td>\n                            ").concat(this.createMinMaxPricesCheckbox(),"\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <label tch-text='crosshair'>").concat(this.translation.crosshair,"</label>\n                            <div class='tch-color-picker-container'>\n                                <div class='tch-color-picker' name='colors-Chart-crossLineColor'></div>\n                            </div>\n                        </td>\n                        <td>\n                            <select name ='options-Chart-typeCrossHair'>\n                                <option value ='normal'>________</option>\n                                <option value ='dash'>--------</option>\n                                <option value ='points'>-.-.-.-.</option>\n                            </select>\n                        </td>\n                        <td>\n                            <input name ='options-Chart-widthCrossHair' type='range' min='1' max='4' value='1'/>\n                        </td>\n                    </tr>\n                    <tr>\n                        ").concat(this.createThemeDropDown(),"                     \n                    </tr>\n                </tbody>\n            </table>\n        </div>")},fe.prototype.createMinMaxPricesCheckbox=function(){return this.configuration.isMinMaxPricesMarksEnabled?"<input name='options-Chart-minMaxPricesMarks' type='checkbox' />\n             <label tch-text='min-max-prices'>".concat(this.translation["min-max-prices"],"</label>"):""},fe.prototype.createThemeDropDown=function(){return this.isExternalStyle?"":"<td>\n                <label tch-text='themes'>".concat(this.translation.themes,"</label>\n            </td>\n            <td colspan='2'>\n                <select  name ='options-Chart-typeThemes' >\n                    ").concat(this.filterTypeTheme(this.styles.options.Chart.listThemes),"\n                </select>\n            </td>")},fe.prototype.filterTypeTheme=function(t){var e=this;return t.reduce((function(t,a){return"".concat(t,"\n             <option value=").concat(a," tch-text=").concat(a,">\n                ").concat(e.translation[a.replace("thema","")],"\n             </option>")}),"")},fe.prototype.htmlSettingsTimeZone=function(){return"<div class='tch-settings-timezone tch-hidden'>\n            <label tch-text='timezone'>Time Zone</label>\n            <select>\n                <option>(UTC+2)</option>\n                <option>(UTC+3)</option>\n                <option>(UTC+4)</option>\n            </select>\n        </div>\n        <ul class='tch-settings-dropdown-footer tch-dropdown-footer tch-clearfix'>\n            <li>\n                <input type='button' class='tch-btn tch-btn-default' value='Defaults' tch-text='default'/>\n            </li>\n            <li>\n                <input type='button' class='tch-btn tch-btn-submit' tch-text='ok' value='".concat(this.translation.ok,"'/>\n                <input type='button' class='tch-btn tch-btn-cancel' tch-text='cancel' value='").concat(this.translation.cancel,"'/>\n            </li>\n        </ul>")},fe.prototype.htmlSettings=function(){return"".concat(this.htmlSettingsStyle(),"\n        ").concat(this.htmlSettingsScales(),"\n        ").concat(this.htmlSettingsBackground(),"\n        ").concat(this.htmlSettingsTimeZone())},fe.prototype.htmlSearchQuotationButton=function(){return this.configuration.modules.headerButtons.searchQuotationButton?"<div class='tch-search-container tch-dropdown-container'>\n                <input class='tch-search' type='text' spellcheck='false'>\n                <div class='tch-search-dropdown tch-dropdown-list'>\n                    <div class='tch-tabs'>\n                        <ul class='tch-tabs-list tch-dropdown-header'></ul>\n                    </div>\n                    <div class='tch-filtered-quatation'>\n                        <table>\n                            <tbody></tbody>\n                        </table>\n                    </div>\n                </div>\n            </div>\n            <div class='tch-divide-horizontal'></div>":""},fe.prototype.htmlPeriodsButton=function(){return this.configuration.modules.headerButtons.periodsButton?"<div class='tch-periods-container'>\n                <div class='tch-dropdown-container-periods tch-dropdown-container'>\n                    <div class='tch-period-btn tch-dropdown-btn'></div>\n                    <div class='tch-period-select tch-pointer'></div>\n                    <ul class='tch-periods-dropdown tch-dropdown-list'></ul>\n                </div>\n            </div>\n            <div class='tch-divide-horizontal'></div>":""},fe.prototype.createPipsButton=function(){return this.configuration.modules.headerButtons.createPipsButton?"<input type='button' class='tch-pips-btn'/>":""},fe.prototype.htmlTypeDataButton=function(){return this.configuration.modules.headerButtons.createTypeDataButton?"<div class='tch-typedata-container'>\n                <div class='tch-dropdown-container-typedata tch-dropdown-container'>\n                    <div class='tch-typedata-button tch-dropdown-btn'></div>\n                    <div class='tch-typedata-select tch-pointer'></div>\n                    <ul class='tch-typedata-dropdown tch-dropdown-list'></ul>\n                </div>\n            </div>\n            <div class='tch-divide-horizontal'></div>":""},fe.prototype.htmlChartTypeButton=function(){return this.configuration.modules.headerButtons.chartTypeButton?"<div class='tch-chart-type-container tch-dropdown-container'>\n                <div class='tch-chart-type-button tch-dropdown-btn'></div>\n                <div class='tch-chart-type-select tch-pointer'></div>\n                <ul class='tch-chart-type-dropdown tch-dropdown-list'></ul>\n            </div>\n            <div class='tch-divide-horizontal'></div>":""},fe.prototype.htmlIndicatorButton=function(){return this.configuration.modules.headerButtons.indicatorButton?"<div class='tch-indicator-container tch-dropdown-container'>\n                <div class='tch-indicator-button tch-dropdown-btn'></div>\n                <div class='tch-pointer'></div>\n                <div class='tch-indicator-dropdown tch-dropdown-list'>\n                    <ul class='tch-dropdown-header'>\n                        <li tch-text='indicators'>".concat(this.translation.indicators,"</li>\n                    </ul>\n                    <input class='tch-indicator-search' type='text' tch-text='type-indicator' placeholder='").concat(this.translation["type-indicator"],"'/>\n                    <ul class='tch-indicators-list'></ul>\n                </div>\n            </div>\n            <div class='tch-divide-horizontal'></div>"):""},fe.prototype.htmlSettingsButton=function(){return this.configuration.modules.headerButtons.settingsButton?"<div class='tch-settings-button tch-dropdown-btn tch-dropdown-container' data-at='at-chart-settingsbtn'>\n                ".concat(this.htmlSettingsDropDown(),"\n            </div>\n            <div class='tch-divide-horizontal'></div>"):""},fe.prototype.htmlSettingsDropDown=function(){return this.configuration.modules.headerButtons.settingsButton?"<div class='tch-settings-dropdown tch-dropdown-list'>\n                    <div class='tch-tabs'>\n                        <ul class='tch-tabs-list tch-dropdown-header'>\n                            <li class='tch-tab-selected' tch-text='style'>".concat(this.translation.style,"</li>\n                            <li tch-text='scales'>").concat(this.translation.scales,"</li>\n                            <li tch-text='background'>").concat(this.translation.background,"</li>\n                        </ul>\n                    </div>\n                    ").concat(this.htmlSettings(),"\n            </div>"):""},fe.prototype.htmlSplitterButton=function(){return this.configuration.modules.headerButtons.splitterButton?"<div class='tch-chart-layouts-container tch-dropdown-container'>\n                <div class='tch-chart-type-button tch-layout-button tch-dropdown-btn' tch-spliter-template='1'></div>\n                <div class='tch-chart-type-select tch-pointer'></div>\n                <div class='tch-chart-layouts-dropdown'>\n                    <ul class='tch-layout-header'>\n                        <li class='tch-selected' tch-spliter-template='1'></li>\n                        <li tch-spliter-template='2'></li>\n                        <li tch-spliter-template='3'></li>\n                        <li tch-spliter-template='4'></li>\n                        <li tch-spliter-template='5'></li>\n                        <li tch-spliter-template='6'></li>\n                        <li tch-spliter-template='7'></li>\n                        <li tch-spliter-template='8'></li>\n                        <li tch-spliter-template='9'></li>\n                    </ul>\n                </div>\n            </div>\n            <div class='tch-divide-horizontal'></div>":""},fe.prototype.fullScreenButton=function(){return this.configuration.modules.headerButtons.fullScreenButton?"<div class='tch-fullscreen-btn' data-at='at-chart-fullscrbtn'></div>":""},fe.prototype.createTabButton=function(){return this.configuration.modules.headerButtons.createTabButton?"<div class='tch-tab-btn'  data-at='at-chart-newtabbtn'>\n                <span></span>\n            </div>\n            <div class='tch-divide-horizontal'></div>":""},fe.prototype.createScreenshotButton=function(){var t=vt.detectBrowser(window,document);return this.configuration.modules.headerButtons.screenshotButton&&"safari"!==t.bro?"<div class='tch-screenshot-btn'>\n                <span></span>\n            </div>\n            <div class='tch-divide-horizontal'></div>":""},fe.prototype.htmlHeader=function(){var t=this.configuration.modules,e=t.headerButtons;if(!t.isHeaderCreate){for(var a in e)e[a]=!1;return"<div class='tch-header'></div>"}return"<div class='tch-header'>\n            <div class='tch-header-container'>\n               <div class='tch-top-buttons'>\n                   ".concat(this.htmlSearchQuotationButton(),"\n                   ").concat(this.htmlPeriodsButton(),"\n                   ").concat(this.htmlChartTypeButton(),"\n                   ").concat(this.htmlIndicatorButton(),"\n                   ").concat(this.htmlSettingsButton(),"\n                   ").concat(this.createTabButton(),"\n                   ").concat(this.htmlTypeDataButton(),"\n                   ").concat(this.createPipsButton(),"\n                   <div class='tch-header-empty'></div>\n                   <div class='tch-header-right-side tch-clearfix'>\n                       ").concat(this.createScreenshotButton(),"\n                       ").concat(this.htmlSplitterButton(),"\n                       ").concat(this.fullScreenButton(),"\n                   </div>\n               </div>\n            </div>\n            <div class='tch-header-close-panel'>\n                <span class='tch-header-close-panel'></span>\n            </div>\n       </div>")},fe.prototype.htmlFooter=function(){return this.configuration.footer.isFooterCreate?"<div class='tch-footer'></div>":""},fe.prototype.htmlMoreButton=function(){return"<div class='tch-more-container'>\n            <div class='tch-tooltip tch-icon-container'>\n            <input type='button' class='tch-more-btn tch-icon tch-icon-sidebar'/>\n            <span class='tch-tooltiptext' tch-text='more'>".concat(this.translation.more,"</span>\n            </div> \n        </div>")},fe.prototype.cursorTypeButton=function(){return this.configuration.modules.sideBarButtons.cursorTypeButton?"<div class='tch-cursorType-container tch-dropdown-container'>\n                <div class='tch-cursorType-button tch-dropdown-btn tch-icon-container'></div>\n                <div class='tch-pointer tch-dropdown-pointer'></div>\n                <ul class='tch-cursorType-dropdown tch-dropdown-list'></ul>\n            </div>\n            <div class='tch-divide-vertical'></div>":""},fe.prototype.drawingObjectsButton=function(){return this.configuration.modules.sideBarButtons.drawingObjectsButton?"<div class='tch-lineType-container tch-dropdown-container'>\n                <div class='tch-lineType-button tch-dropdown-btn tch-icon-container' actualtype='trend'></div>\n                <div class='tch-pointer tch-dropdown-pointer'></div>\n                <ul class='tch-lineType-dropdown tch-dropdown-list'></ul>\n            </div>\n            <div class='tch-divide-vertical'></div>":""},fe.prototype.brushTypeButton=function(){return this.configuration.modules.sideBarButtons.brushTypeButton?"<div class='tch-brushType-container tch-dropdown-container'>\n                <div class='tch-brushType-button tch-dropdown-btn tch-icon-container' actualtype='brush'></div>\n                <div class='tch-pointer tch-dropdown-pointer'></div>\n                <ul class='tch-brushType-dropdown tch-dropdown-list'></ul>\n            </div>\n            <div class='tch-divide-vertical'></div>":""},fe.prototype.textTypeButton=function(){return this.configuration.modules.sideBarButtons.textTypeButton?"<div class='tch-textType-container tch-dropdown-container'>\n                <div class='tch-textType-button tch-dropdown-btn tch-icon-container' actualtype='text'></div>\n                <div class='tch-pointer tch-dropdown-pointer'></div>\n                <ul class='tch-textType-dropdown tch-dropdown-list'></ul>\n            </div>\n            <div class='tch-divide-vertical'></div>":""},fe.prototype.zoomButton=function(){return this.configuration.modules.sideBarButtons.zoomButton?"<div class='tch-zoom-container'>\n                <div class='tch-tooltip tch-icon-container tch-zoomin'>\n                    <input type='button' class='tch-zoomin-btn tch-icon tch-icon-sidebar'/>\n                    <span class='tch-tooltiptext' tch-text='zoom-in'>".concat(this.translation["zoom-in"],"</span>\n                </div>\n                <div class='tch-tooltip tch-icon-container tch-zoomout'>\n                    <input type='button' class='tch-zoomout-btn tch-icon tch-icon-sidebar' disabled/>\n                    <span class='tch-tooltiptext' tch-text='zoom-out'>").concat(this.translation["zoom-out"],"</span>\n                </div>\n                <div class='tch-tooltip tch-icon-container tch-zoomzero'>\n                <input type='button' class='tch-zoomzero-btn tch-icon tch-icon-sidebar' disabled/>\n                <span class='tch-tooltiptext' tch-text='zoom-out'>").concat(this.translation["zoom-zero"],"</span>\n            </div>\n            </div>\n            <div class='tch-divide-vertical'></div>"):""},fe.prototype.lockButton=function(){return this.configuration.modules.sideBarButtons.lockButton?"<div class='tch-lock-container'>\n                <div class='tch-tooltip tch-icon-container'>\n                    <input type='button' class='tch-lock-btn tch-icon tch-icon-sidebar'/>\n                    <span class='tch-tooltiptext' tch-text='lock'>".concat(this.translation.lock,"</span>\n                </div>\n            </div>\n            <div class='tch-divide-vertical'></div>"):""},fe.prototype.basketButton=function(){return this.configuration.modules.sideBarButtons.basketButton?"<div class='tch-basket-container'>\n                <div class='tch-tooltip tch-icon-container'>\n                    <input type='button' class='tch-basket-btn tch-icon tch-icon-sidebar'/>\n                    <span class='tch-tooltiptext' tch-text='clear'>".concat(this.translation.clear,"</span>\n                </div>\n            </div>\n            <div class='tch-divide-vertical'></div>"):""},fe.prototype.saveRestoreButtons=function(){return this.applyThemeOverridedMethod("saveRestoreButtons")||(this.configuration.modules.sideBarButtons.saveRestoreButtons?"<div class='tch-settings-container'>\n                <div class='tch-tooltip tch-icon-container tch-link-container tch-save-btn-wrap'>\n                    <a id='tch-save-btn' class='tch-save-btn tch-icon tch-icon-sidebar' href='#' download=''></a>\n                    <span class='tch-tooltiptext' tch-text='save'>".concat(this.translation.save,"</span>\n                </div>\n                <div class='tch-tooltip tch-icon-container tch-restore-btn-wrap'>\n                    <label class='tch-restore-btn tch-icon tch-icon-sidebar'>\n                        <input id='tch-restore-btn' type='file' class='tch-restore-file tch-icon tch-icon-sidebar'/>\n                    </label>\n                    <span class='tch-tooltiptext' tch-text='restore'>").concat(this.translation.restore,"</span>\n                </div>\n                <div class='tch-tooltip tch-icon-container tch-default-btn-wrap'>\n                    <input type='button' class='tch-default-btn tch-icon tch-icon-sidebar'/>\n                    <span class='tch-tooltiptext' tch-text='default'>").concat(this.translation.default,"</span>\n                </div>\n            </div>\n            <div class='tch-divide-vertical'></div>"):"")},fe.prototype.stayDrawingModeButton=function(){return this.configuration.modules.sideBarButtons.stayDrawingModeButton?"<div class='tch-stay-drawing-mode tch-tooltip tch-icon-container'>\n                <input type='button' class='tch-stay-drawing-mode-btn tch-icon tch-icon-sidebar'/>\n                <span class='tch-tooltiptext' tch-text='stay-in-drawing'>".concat(this.translation["stay-in-drawing"],"</span>\n            </div>\n            <div class='tch-divide-vertical'></div>"):""},fe.prototype.hideDrowingObjectButton=function(){return this.configuration.modules.sideBarButtons.hideDrowingObjectButton?"<div class='tch-show-hide-drawing tch-tooltip tch-icon-container'>\n                <input type='button' class='tch-show-hide-drawing-btn tch-icon tch-icon-sidebar'/>\n                <span class='tch-tooltiptext' tch-text='show-hide' >".concat(this.translation["show-hide"],"</span>\n            </div>\n            <div class='tch-divide-vertical'></div>"):""},fe.prototype.magnetModeButton=function(){return this.configuration.modules.sideBarButtons.magnetModeButton?"<div class='tch-magnet-mode tch-tooltip tch-icon-container'>\n                <input type='button' class='tch-magnet-mode-btn tch-icon tch-icon-sidebar'/>\n                <span class='tch-tooltiptext' tch-text='magnet-mode'>".concat(this.translation["magnet-mode"],"</span>\n            </div>\n            <div class='tch-divide-vertical'></div>"):""},fe.prototype.rouleteButton=function(){return this.configuration.modules.sideBarButtons.rouleteButton?"<div class='tch-roulete-drawing tch-tooltip tch-icon-container'>\n                <input type='button' class='tch-roulete-drawing-btn tch-icon tch-icon-sidebar'/>\n                <span class='tch-tooltiptext' tch-text='roulette-mode'>".concat(this.translation["roulette-mode"],"</span>\n            </div>"):""},fe.prototype.sidebarCloseButton=function(){return this.configuration.modules.isSideBarCreate?"<div class='tch-sidebar-close-panel'>\n                <span class='tch-sidebar-close-panel'></span>\n            </div>":""},fe.prototype.htmlSideBarContainer=function(){return this.applyThemeOverridedMethod("htmlSideBarContainer")||"<div class='tch-sidebar-container'>\n                <div class='tch-logo'></div>\n                <div class='tch-divide-vertical'></div>\n                <div class='tch-sidebar-buttons'>\n                    ".concat(this.cursorTypeButton(),"\n                    ").concat(this.drawingObjectsButton(),"\n                    ").concat(this.brushTypeButton(),"\n                    ").concat(this.textTypeButton(),"\n                    ").concat(this.zoomButton(),"\n                    ").concat(this.lockButton(),"\n                    ").concat(this.basketButton(),"\n                    ").concat(this.saveRestoreButtons(),"\n                    ").concat(this.stayDrawingModeButton(),"\n                    ").concat(this.hideDrowingObjectButton(),"\n                    ").concat(this.magnetModeButton(),"\n                    ").concat(this.rouleteButton(),"\n                </div>\n            </div>\n             ").concat(this.sidebarCloseButton())},fe.prototype.htmlSidebar=function(){if(!this.configuration.modules.isSideBarCreate){for(var t in this.configuration.modules.sideBarButtons)this.configuration.modules.sideBarButtons[t]=!1;return"<div class='tch-sidebar'></div>"}return"<div class='tch-sidebar'>\n            ".concat(this.htmlSideBarContainer(),"\n        </div>")},fe.prototype.recreateSettingPanel=function(){if(this.configuration.modules.headerButtons.settingsButton){var t=this.parent.querySelector(".tch-header").querySelector(".tch-settings-button");this.removeEventsSettingPanel(),t.innerHTML=this.htmlSettingsDropDown(),this.addChartSettingBtnEvent(),this.addChartSettingsEvent(),this.colorPickerInit(),this.addSettingBtnEvent(t),this.fillChartSettingsPanel()}},fe.prototype.saveRestoreButtonsWithoutWrapper=function(){return this.configuration.modules.sideBarButtons.saveRestoreButtons?"<div class='tch-tooltip tch-icon-container tch-default-btn-wrap'>\n                <input type='button' class='tch-default-btn tch-icon tch-icon-sidebar'/>\n                <span class='tch-tooltiptext' tch-text='default'>".concat(this.translation.default,"</span>\n            </div>\n            <div class='tch-tooltip tch-icon-container tch-link-container tch-save-btn-wrap'>\n                <a id='tch-save-btn' class='tch-save-btn tch-icon tch-icon-sidebar' href='#' download=''></a>\n                <span class='tch-tooltiptext' tch-text='save'>").concat(this.translation.save,"</span>\n            </div>\n            <div class='tch-tooltip tch-icon-container tch-restore-btn-wrap'>\n                <label class='tch-restore-btn tch-icon tch-icon-sidebar'>\n                <input id='tch-restore-btn' type='file' class='tch-restore-file tch-icon tch-icon-sidebar'/>\n                </label>\n                <span class='tch-tooltiptext' tch-text='restore'>").concat(this.translation.restore,"</span>\n            </div>\n               \n            <div class='tch-divide-vertical'></div>"):""},fe.prototype.zoomButtonSecondDesign=function(){return this.configuration.modules.sideBarButtons.zoomButton?"<div class='tch-tooltip tch-icon-container tch-zoomzero'>\n                <input type='button' class='tch-zoomzero-btn tch-icon tch-icon-sidebar' disabled/>\n                <span class='tch-tooltiptext' tch-text='zoom-out'>".concat(this.translation["zoom-zero"],"</span>\n            </div>\n            <div class='tch-tooltip tch-icon-container tch-zoomin'>\n                <input type='button' class='tch-zoomin-btn tch-icon tch-icon-sidebar'/>\n                <span class='tch-tooltiptext' tch-text='zoom-in'>").concat(this.translation["zoom-in"],"</span>\n            </div>\n            <div class='tch-tooltip tch-icon-container tch-zoomout'>\n                <input type='button' class='tch-zoomout-btn tch-icon tch-icon-sidebar' disabled/>\n                <span class='tch-tooltiptext' tch-text='zoom-out'>").concat(this.translation["zoom-out"],"</span>\n            </div>\n               \n            <div class='tch-divide-vertical'></div>"):""},fe.prototype.htmlSettingsBackgroundSecondDesign=function(){return"<div class='tch-settings-background tch-hidden'>\n            <div>\n                <div class='tch-settings-row'>\n                <label tch-text='background'>".concat(this.translation.background,"</label>\n                <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-Chart-backgroundColor'></div>\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='vert-grid-lines'>").concat(this.translation["vert-grid-lines"],"</label>\n                <div class='tch-settings-row-block'>\n                    <select name='options-Chart-typeVertGridLines'>\n                    <option value='normal'>________</option>\n                    <option value='dash'>--------</option>\n                    <option value='points'>-.-.-.-.</option>\n                    </select>\n                    <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-Chart-vertGridLines'></div>\n                    </div>\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='horz-grid-lines'>").concat(this.translation["horz-grid-lines"],"</label>\n                <div class='tch-settings-row-block'>\n                    <select name='options-Chart-typeHorzGridLines'>\n                    <option value='normal'>________</option>\n                    <option value='dash'>--------</option>\n                    <option value='points'>-.-.-.-.</option>\n                    </select>\n                    <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-Chart-horzGridLines'></div>\n                    </div>\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='scales-text'>").concat(this.translation["scales-text"],"</label>\n                <div class='tch-settings-row-block'>\n                    <select name='options-Chart-scalesFontSize'>\n                    <option value='10'>10</option>\n                    <option value='11'>11</option>\n                    <option value='12'>12</option>\n                    <option value='14'>14</option>\n                    <option value='16'>16</option>\n                    <option value='20'>20</option>\n                    <option value='24'>24</option>\n                    <option value='28'>28</option>\n                    <option value='32'>32</option>\n                    </select>\n                    <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-Chart-scalesText'></div>\n                    </div>\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='scales-lines'>").concat(this.translation["scales-lines"],"</label>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-Chart-colorScalesLines'></div>\n                    </div>\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='watermark'>").concat(this.translation.watermark,"</label>\n                <div class='tch-settings-row-block'>\n                    <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-Chart-watermarkColor'></div>\n                    </div>\n                </div>\n                </div>\n\n                <div class='tch-settings-row tch-settings-row3'>\n                <label tch-text='crosshair'>").concat(this.translation.crosshair,"</label>\n                <div class='tch-settings-row-block'>\n                    <select name='options-Chart-typeCrossHair'>\n                    <option value='normal'>________</option>\n                    <option value='dash'>--------</option>\n                    <option value='points'>-.-.-.-.</option>\n                    </select>\n                    <div class='tch-color-picker-container'>\n                    <div class='tch-color-picker' name='colors-Chart-crossLineColor'></div>\n                    </div>\n                </div>\n                </div>\n                \n                <div class='tch-settings-row'>\n                <div>\n                </div>\n                <div>\n                    <input name='options-Chart-widthCrossHair' type='range' min='1' max='4' value='1' />\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                ").concat(this.createThemeDropDownDiv(),"\n                </div>\n                              \n                ").concat(this.createMinMaxPricesDiv(),"               \n\n                <div class='tch-settings-row'>\n                <label tch-text='symbol-description'>").concat(this.translation["symbol-description"],"</label>\n                <div>\n                    <input name='options-Chart-symbolDescription' type='checkbox' />\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='candle-timer'>").concat(this.translation["candle-timer"],"</label>\n                <div>\n                    <input name='options-Chart-candleTimer' type='checkbox' />\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='ohlc-values'>").concat(this.translation["ohlc-values"],"</label>\n                <div>\n                    <input name='options-Chart-ohlcValues' type='checkbox' />\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='indicator-titles'>").concat(this.translation["indicator-titles"],"</label>\n                <div>\n                    <input name='options-Chart-indicatorTitles' type='checkbox' />\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='indicator-arguments'>").concat(this.translation["indicator-arguments"],"</label>\n                <div>\n                    <input name='options-Chart-indicatorArguments' type='checkbox' />\n                </div>\n                </div>\n\n                <div class='tch-settings-row'>\n                <label tch-text='indicator-values'>").concat(this.translation["indicator-values"],"</label>\n                <div>\n                    <input name='options-Chart-indicatorValues' type='checkbox' />\n                </div>\n                </div>\n\n            </div>\n            </div>")},fe.prototype.htmlSideBarContainerSecondDesign=function(){return"<div class='tch-sidebar-container'>\n                <div class='tch-logo'></div>\n                <div class='tch-divide-vertical'></div>\n                <div class='tch-sidebar-buttons'>\n                    ".concat(this.cursorTypeButton(),"\n                    ").concat(this.drawingObjectsButton(),"\n                    ").concat(this.textTypeButton(),"\n                    ").concat(this.brushTypeButton(),"\n                    ").concat(this.stayDrawingModeButton(),"\n                    ").concat(this.lockButton(),"\n                    ").concat(this.basketButton(),"\n                    ").concat(this.saveRestoreButtons(),"\n                    ").concat(this.zoomButtonSecondDesign(),"\n                    ").concat(this.hideDrowingObjectButton(),"\n                    ").concat(this.magnetModeButton(),"\n                    ").concat(this.rouleteButton(),"\n                </div>\n            </div>\n             ").concat(this.sidebarCloseButton())},fe.prototype.createMinMaxPricesDiv=function(){return this.configuration.isMinMaxPricesMarksEnabled?"<div class='tch-settings-row'>\n                <label tch-text='min-max-prices'>".concat(this.translation["min-max-prices"],"</label>\n                <div>\n                    <input name='options-Chart-minMaxPricesMarks' type='checkbox' />\n                </div>\n            </div>"):""},fe.prototype.createThemeDropDownDiv=function(){return this.isExternalStyle?"":"<label tch-text='themes'>".concat(this.translation.themes,"</label>\n            <div>\n                <select  name ='options-Chart-typeThemes' >\n                    ").concat(this.filterTypeTheme(this.styles.options.Chart.listThemes),"\n                </select>\n            </div>")},fe.prototype.htmlSettingsScalesSecondDesign=function(){return"<div class='tch-settings-scales tch-hidden'>\n        \n            <div class='tch-settings-scales-row'>\n                    <input type='checkbox' name='options-Chart-autoScale'/>\n                    <div>\n                        <label tch-text='auto-scale'>".concat(this.translation["auto-scale"],"</label>\n                    </div>\n            </div>\n            <div class='tch-settings-scales-row'>\n                    <input type='checkbox' name='options-Chart-scaleSeriesOnly'/>\n                    <div>\n                        <label tch-text='scale-series'>").concat(this.translation["scale-series"],"</label>\n                    </div>\n            </div>\n            \n        </div>")},fe.prototype.htmlDataPanel=function(){return this.configuration.modules.chartElements.isDataPanelCreate?"<div class = 'tch-data-panel tch-move tch-small'>\n                <div class='tch-data-panel-header tch-data-panel-row'>\n                    <span id='name'></span>\n                    <span id='period'></span>\n                    <span id='date'></span>\n                    <span id='value'></span>\n                    <span class='tch-up tch-close-btn'></span>\n                </div>\n                <div class='tch-data-panel-body tch-hidden'>\n                    <ul class='tch-data-candle tch-data-panel-row'></ul>\n                <div class ='tch-data-indicators tch-data-panel-row'>\n            </div>\n            ".concat(this.configuration.modules.signals?"<div class ='tch-data-signals tch-data-panel-row'></div>":""):""},fe.prototype.htmlIndicatorSettingPanel=function(){return"<div class='tch-indicator-form tch-indicator-panel tch-hidden tch-move'>\n            <ul class='tch-indicator-panel-header tch-dropdown-header'>\n                <li class='tch-tab-selected'>".concat(this.translation.inputs,"</li>\n                <li>").concat(this.translation.style,"</li>\n            </ul>\n            <div class='tch-indicator-panel-main'>\n                <div class='tch-indicator-inputs'>\n                    <table>\n                        <tbody>\n                        </tbody>\n                    </table>\n                </div>\n                <div class='tch-indicator-style tch-hidden'>\n                    <table>\n                        <tbody>\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n            <ul class='tch-dropdown-footer tch-clearfix'>\n                <li>\n                    <input type='button' class='tch-btn tch-btn-default'  tch-text='default' value='Default'/>\n                </li>\n                <li>\n                    <input type='button' class='tch-btn tch-btn-submit' tch-text='ok' value='").concat(this.translation.ok,"'>\n                    <input type='button' class='tch-btn tch-btn-cancel' tch-text='cancel' value='").concat(this.translation.cancel,"'>\n                </li>\n            </ul>\n        </div>")},fe.prototype.htmlContainer=function(){return"<div class='tch-container'>\n            ".concat(this.htmlHeader(),"\n            <div class='tch-chart-alert'></div>\n            <div class='tch-tabs-container'></div>\n            <div class='tch-charts-container'></div>\n            ").concat(this.htmlFooter(),"\n            ").concat(this.htmlIndicatorSettingPanel(),"\n            ").concat(this.htmlDataPanel(),"\n        </div>")},fe.prototype.htmlTrading=function(){return this.configuration.modules.trading?"<div class='trading-module-container' id='tradingModule'></div>":""},fe.prototype.html=function(){return"".concat(this.htmlSidebar(),"\n        ").concat(this.htmlContainer(),"\n        ").concat(this.htmlTrading())},fe.prototype.createSideBarMenu=function(t,e){switch(t){case"cursorType":this.cursorChangeImage(e),this.getActiveChartData().state&&"drawingRoulete"!==this.getActiveChartData().state||this.setState("default");break;case"lineType":case"brushType":case"textType":return this.setState(e)}},fe.prototype.createSideBarMenuType=function(){if(this.configuration.modules.isSideBarCreate){var t=this,e=this.sideBarMenus();for(var a in this.sideBarListItemps=[],e)if(e.hasOwnProperty(a)&&e[a]){var i=t.parent.querySelector(".tch-"+a+"-container");this.activeMenuContainer.push(i);var r=i.querySelector(".tch-dropdown-btn"),s=i.querySelector(".tch-dropdown-list");for(var n in e[a])if(e[a].hasOwnProperty(n)){var o=document.createElement("li"),h=e[a][n];o.container=i,o.btn=r,o.key=n,o.itemM=a,o.classList.toggle(n,!0),o.innerHTML=e[a][n],o.setAttribute("tch-text",h),this.sideBarListItemps.push(o),o.onclick=function(){t.createSideBarMenu(this.itemM,this.key)&&(t.deactivateMenuTypeAll(),"default"!==t.getActiveChart().chartData.state&&(this.container.setAttribute("actualtype",this.key),this.container.classList.toggle("active",!0)))},s.appendChild(o)}}this.createSubMenu()}},fe.prototype.createSubMenu=function(){var t=this.parent.querySelector(".tch-sidebar-container"),e=t.querySelectorAll(".tch-sidebar-buttons .tch-icon-container"),a=this.getOutsideElementIndex(t,e,"bottom");if(!(a<0)){var i=this.hideOutsideElementsSubMenu(e[a],t),r=t.querySelector(".tch-sidebar-buttons");this.addMoreButton(r,i),i.style.boxSizing="content-box",this.setWidthMoreMenu(i)}},fe.prototype.setWidthMoreMenu=function(t){t.classList.toggle("divMoreMenuForSize",!0);var e=parseFloat(getComputedStyle(t.firstChild).width),a=parseFloat(getComputedStyle(t.lastChild).width),i=0;e%a!==0&&(i=1),t.style.width=(Math.floor(e/a)+i)*a+"px",t.classList.toggle("divMoreMenuForSize",!1)},fe.prototype.getOutsideElementIndex=function(t,e,a){for(var i=t.getBoundingClientRect(),r=0;r<e.length;r++)if(e[r].getBoundingClientRect()[a]>i[a])return r-1;return-1},fe.prototype.addMoreButton=function(t,e){var a=document.createElement("div");a.classList.toggle("tch-more-btn",!0),a.innerHTML=this.htmlMoreButton(),a.appendChild(e),a.oncloseall=function(){this.classList.toggle("tch-more-active",!1)},this.dropForHidden.push(a),t.appendChild(a);var i=this;if(a.onclick=function(t){i.dropDownClickMore(a,t)},a.getBoundingClientRect().bottom>=t.getBoundingClientRect().bottom){var r=t.querySelectorAll(".tch-divide-vertical");r&&r.length&&t.removeChild(r[r.length-1],r[r.length-2])}},fe.prototype.hideOutsideElementsSubMenu=function(t,e){for(var a,i=e.querySelectorAll(".tch-sidebar-buttons>div"),r=t.getBoundingClientRect().bottom,s=-1,n=i.length-1;i[n]&&Math.ceil(i[n].getBoundingClientRect().bottom)>=r;n--)if(-1===s&&(s=0,a=this.createMoreMenu("divMoreMenu")),i[n].classList.contains("tch-divide-vertical"))i[n].parentElement.removeChild(i[n]);else{var o=document.createElement("li");if(o.addEventListener("click",(function(t){t.stopPropagation()})),o.appendChild(i[n]),i[n].classList.contains("tch-settings-container")){s++,o.classList.toggle("tch-more-order-0",!0);for(var h=i[n].querySelectorAll(".tch-icon-container"),c=0;c<h.length;c++){var l=document.createElement("label");l.appendChild(h[c]),i[n].appendChild(l)}a.insertBefore(o,a.firstChild)}else a.insertBefore(o,a.childNodes[s])}return a},fe.prototype.createMoreMenu=function(t){var e=document.createElement("ul");return e.classList.toggle(t,!0),e},fe.prototype.createChartTypesMenu=function(){if(this.configuration.modules.headerButtons.chartTypeButton){var t=this,e=this.parent.querySelector(".tch-chart-type-dropdown"),a=this.parent.querySelector(".tch-chart-type-button"),i=this.parent.querySelector(".tch-chart-type-container"),r=this.parent.querySelector(".tch-style-select-chart-type"),s=this.chartHeaderMenus();for(var n in s)if(s.hasOwnProperty(n)){var o=document.createElement("li");o.textContent=s[n],o.className="tch-"+n,o.setAttribute("tch-text",s[n]),n===t.configuration.chartType&&(this.connector&&this.connector.options&&"widgets"===this.connector.options.type?a.setAttribute("actualtype-active",this.configuration.chartType):a.setAttribute("actualtype",this.configuration.chartType),o.classList.toggle("tch-chart-type-selected",!0)),o.addEventListener("click",(function(i){for(var s=e.querySelectorAll("li"),n=0;n<s.length;++n)s[n].classList.toggle("tch-chart-type-selected",!1);if(t.configuration.modules.headerButtons.settingsButton)for(var o in s)if(s.hasOwnProperty(o)&&s[o]===i.target){r.selectedIndex=o,r.dispatchEvent(new Event("change"));break}this.classList.add("tch-chart-type-selected");var h=i.target.classList[0].replace("tch-","");a.setAttribute("actualtype",h),t.getActiveChartData().options.Chart.typeChart=h,t.setChartType(h);var c=t.getActiveChartData(),l=c.chart.parent;t.charts[t.activeChartIndex]=t.createChart(l,c),t.charts[t.activeChartIndex].init(!0),t.autoSaveParams()})),e.appendChild(o)}this.dropForHidden.push(i)}},fe.prototype.createTypeDataMenu=function(){if(this.configuration.modules.headerButtons.createTypeDataButton){var t,e,a=this.parent.querySelector(".tch-typedata-container").querySelector(".tch-dropdown-container-typedata");this.dropForHidden.push(a);var i=a.querySelector(".tch-dropdown-list"),r=a.querySelector(".tch-typedata-button"),s=this,n=this.translation,o=this.typeDatas();for(var h in o)if(o.hasOwnProperty(h)){if(t=document.createElement("li"),e=document.createElement("span"),t.appendChild(e),e.innerText=n[h],i.appendChild(t),o[h].name=h,o[h].btn=t,t.item=o[h],t.setAttribute("name",h),o[h].value===this.configuration.typeData){t.classList.toggle("tch-selected",!0);var c=document.createElement("span");c.innerText=o[h].text,r.appendChild(c)}o[h].btn.addEventListener("click",(function(t){s.closeAll(),t.stopPropagation();var e=t.target.item;e||(e=t.target.parentNode.item),this.classList.contains("tch-selected")||s.changeTypeData(e.name,s)}))}}},fe.prototype.changeTypeData=function(t,e){e.setTypeDataBtn(t),e.setTypeData(t),e.autoSaveParams()},fe.prototype.setTypeData=function(t){var e=this.getActiveChart();e.chartData.typeData=t,e.redraw()},fe.prototype.setTypeDataBtn=function(t){if(this.configuration.modules.headerButtons.createTypeDataButton){var e=this.parent.querySelector(".tch-dropdown-container-typedata"),a=e.querySelector("li[name='"+t+"']").item;this.removeRoulete();for(var i=e.querySelectorAll("li"),r=0;r<i.length;r++)i[r].classList.toggle("tch-selected",!1);a.btn.parentElement.lastChild.childNodes[0].classList.toggle("tch-selected",!1),a.btn.classList.toggle("tch-selected",!0),e.querySelector("div.tch-typedata-button>span").innerText=a.text}},fe.prototype.createPeriodsMenu=function(){if(this.configuration.modules.headerButtons.periodsButton){var t,e,a=this.parent.querySelector(".tch-periods-container").querySelector(".tch-dropdown-container-periods");this.dropForHidden.push(a);var i=a.querySelector(".tch-dropdown-list"),r=a.querySelector(".tch-period-btn"),s=this,n=this.periods();for(var o in n)if(n.hasOwnProperty(o)){var h=s.makeTchTextValue(this.translation[n[o].key]);if(t=document.createElement("li"),e=document.createElement("span"),t.appendChild(e),e.innerText=this.translation[n[o].key],e.setAttribute("tch-text",h),i.appendChild(t),n[o].name=o,n[o].btn=t,t.item=n[o],t.setAttribute("name",o),n[o].value===this.configuration.period){t.classList.toggle("tch-selected",!0);var c=document.createElement("span");c.innerText=n[o].text,r.appendChild(c)}n[o].btn.addEventListener("click",(function(t){s.closeAll(),t.stopPropagation();var e=t.target.item;e||(e=t.target.parentNode.item),this.classList.contains("tch-selected")||s.changePeriod(e.name)}))}}},fe.prototype.changePeriod=function(t){this.initializationDone=!1,this.setPeriodBtn(t),this.setPeriod(t),this.setSelectedFooterBtn(t),this.autoSaveParams()},fe.prototype.setPeriodBtn=function(t){if(this.configuration.modules.headerButtons.periodsButton){var e=this.parent.querySelector(".tch-dropdown-container-periods"),a=e.querySelector("li[name='"+t+"']").item;this.removeRoulete();for(var i=e.querySelectorAll("li"),r=0;r<i.length;r++)i[r].classList.toggle("tch-selected",!1);a.btn.parentElement.lastChild.childNodes[0].classList.toggle("tch-selected",!1),a.btn.classList.toggle("tch-selected",!0),e.querySelector("div.tch-period-btn>span").innerText=a.text}},fe.prototype.setPeriodSelectBtnClick=function(){if(this.configuration.modules.headerButtons.periodsButton){var t=this.parent.querySelector(".tch-dropdown-container-periods"),e=this;t.addEventListener("click",(function(a){e.continueDrawing(a)||e.dropDownClick(t,void 0,a)}))}},fe.prototype.setTypeDataSelectBtnClick=function(){if(this.configuration.modules.headerButtons.createTypeDataButton){var t=this.parent.querySelector(".tch-dropdown-container-typedata"),e=this;t.addEventListener("click",(function(a){e.dropDownClick(t,void 0,a)}))}},fe.prototype.setChartTypeSelectBtnClick=function(){if(this.configuration.modules.headerButtons.chartTypeButton){var t=this.parent.querySelector(".tch-chart-type-container"),e=this;t.addEventListener("click",(function(a){e.continueDrawing(a)||(e.dropDownClick(t,void 0,a),e.fillChartSettingsPanel())}))}},fe.prototype.recreateSideBarMenu=function(){this.parent.querySelector(".tch-sidebar").innerHTML=this.htmlSideBarContainer(),this.removeSideBarMenuEvents(),this.createSideBarMenuType(),this.addSideBarMenuEvents(),this.addSidebarClosePanelEvents(),this.createSubMenu(),this.setActiveIcon()},fe.prototype.setActiveIcon=function(){var t=this.getActiveChartData();t&&(t.isDrawingObjectsLocked&&this.parent.querySelector(".tch-lock-btn").classList.add("tch-active"),t.isStayDrawingMode&&(this.parent.querySelector(".tch-stay-drawing-mode-btn").classList.add("tch-active"),this.setActiveDrawingModeStateIcon()),t.isShowDrawingObjects||this.parent.querySelector(".tch-show-hide-drawing-btn").classList.add("tch-active"),t.isMagnetMode&&this.parent.querySelector(".tch-magnet-mode-btn").classList.add("tch-active"),"default"!==t.state&&this.setActiveDrawingModeStateIcon())},fe.prototype.addTabsBtnEvent=function(){if(this.configuration.modules.headerButtons.createTabButton){var t=this.parent.querySelector(".tch-tab-btn"),e=this;t.addEventListener("click",(function(){e.createTab()}))}},fe.prototype.createTab=function(t){this.canAddTab=!1,this.setCanAddTab(),this.canAddTab&&Object.keys(this.groupCharts).length<this.maxTabsQuantity&&(this.createTabs(t),this.setTabsContainerHeight(),this.deactivateTab(),this.activateTabContent(!0))},fe.prototype.setCanAddTab=function(){var t=!0,e=Object.keys(this.groupCharts);this.connector.chartQuantity&&(this.connector.chartQuantity=e.length),e.length===this.maxTabsQuantity&&(t=!1),this.canAddTab=t,this.activateAddTabBtn()},fe.prototype.activateAddTabBtn=function(){if(this.configuration.modules.headerButtons.createTabButton){var t=this.parent.querySelector(".tch-tab-btn");t||(t=this.createAddTabsBtn()),t.classList.toggle("tch-tab-btn-disable",!this.canAddTab)}},fe.tabsId=1,fe.getTabName=function(){return"tab-"+fe.tabsId++},fe.prototype.setActiveDrawingModeStateIcon=function(){var t=this.getActiveChartData().state;if("default"!==t&&"drawingRoulete"!==t){var e=this.parent.querySelector(".".concat(t)).parentNode.parentNode;this.connector&&this.connector.options&&"widgets"===this.connector.options.type?e.setAttribute("actualtype-active",t):e.setAttribute("actualtype",t),e.classList.toggle("active",!0)}},fe.prototype.setActiveDrawingObjectsLockedStateIcon=function(){this.getActiveChartData().isDrawingObjectsLocked&&this.parent.querySelector(".".concat("tch-lock-btn")).classList.toggle("tch-active",!0)},fe.prototype.createNewTabContainer=function(t){var e=this.parent.querySelector(".tch-tabs-container"),a=document.createElement("div");a.id=t,a.classList.toggle("tch-chart-tab",!0);var i=document.createElement("div");i.id=t,i.classList.toggle("tch-chart-divName",!0);var r=document.createElement("span");r.id="nameChart_"+t,r.classList.toggle("tch-chart-spanName",!0),r.innerText=this.getPairSettings(this.settings.quotations,this.configuration.pair.ID).Name;var s=document.createElement("span");s.classList.toggle("tch-chart-spanPayout",!0);var n=this;a.onclick=function(t){n.continueDrawing(t)||(n.selectTab(t.target),t.stopPropagation(),n.setShowHideDrawing(),n.setMagnetModeBtn(),n.getActiveChartData().isStayDrawingMode&&(n.setActiveDrawingModeStateIcon(),n.setStayDrawingModeBtn()),n.setActiveDrawingObjectsLockedStateIcon())},a.onmousedown=function(t){2===t.which&&(n.closeTab(t.target),t.stopPropagation())},i.appendChild(r),i.appendChild(s);var o=document.createElement("div");o.id=t,o.classList.toggle("tch-chart-divClose",!0);var h=document.createElement("span");h.innerText="",h.addEventListener("click",(function(t){n.closeTab(t.target),t.stopPropagation()})),o.appendChild(h),a.appendChild(i),a.appendChild(o),e.appendChild(a),this.setTabActive(t)},fe.prototype.setTabsContainerHeight=function(){var t=this.parent.querySelector(".tch-container");Object.keys(this.groupCharts).length>1?t.classList.contains("tch-tabs-hidden")&&t.classList.toggle("tch-tabs-hidden",!1):t.classList.contains("tch-tabs-hidden")||t.classList.toggle("tch-tabs-hidden",!0),this.resize(),this.autoSaveParams()},fe.prototype.closeTab=function(t){var e;if(e=this.parent.querySelector("#".concat(t.parentNode.id)),delete this.groupCharts[e.id],e.parentNode.removeChild(e),this.setTabsContainerHeight(),this.activeTab===e.id){var a=Object.keys(this.groupCharts);this.setTabActive(a[a.length-1]),this.activateTabContent()}this.setCanAddTab(),this.getActiveChart().updateSignals()},fe.prototype.setTabActive=function(t){this.activeTab=t;for(var e=this.parent.querySelectorAll(".tch-chart-tab"),a=0;a<e.length;a++)e[a].getAttribute("id")===t?e[a].classList.toggle("tch-tab-active",!0):e[a].classList.toggle("tch-tab-active",!1)},fe.prototype.deactivateTab=function(){for(var t=this.groupCharts[this.activeTab].chartData,e=0;e<t.length;e++)t[e].chart=null},fe.prototype.selectTab=function(t){"span"===t.tagName.toLowerCase()&&(t=t.parentNode);var e=t.id;this.activeTab!==e&&(this.deactivateTab(),this.setTabActive(e),this.activeTab=e,this.activateTabContent(),this.getActiveChart().updateSignals())},fe.prototype.clearTabContainer=function(){this.parent.querySelector(".tch-tabs-container").innerHTML=""},fe.prototype.setTabName=function(t){var e=this.parent.querySelector("#".concat("nameChart_"+t));null!==e&&(e.innerText=this.groupCharts[t].name)},fe.prototype.createTabObject=function(t,e){return{name:t,activeIndex:0,activeTabSpliter:0,chartData:null===e?[]:e}},fe.prototype.setTabObjectName=function(){for(var t in this.groupCharts)if(this.groupCharts.hasOwnProperty(t)){var e=this.groupCharts[t],a=e.chartData[e.activeIndex],i=this.getPairSettings(this.settings.quotations,a.pair.ID).FullName;e.name=i,this.setTabNameById(t,i)}},fe.prototype.setActiveChartProps=function(t){this.activeChartIndex=t.index,this.groupCharts[this.activeTab].activeIndex=t.index,this.groupCharts[this.activeTab].name=t.pair.FullName,this.setTabName(this.activeTab)},fe.prototype.setTabNameById=function(t,e){this.groupCharts[t].name=e,this.setTabName(t)},fe.prototype.applySettingsFooter=function(){if(this.configuration.footer.isFooterCreate){var t=this.parent.querySelector(".tch-container"),e=t.querySelector(".tch-footer");t&&e&&(t.classList.toggle("tch-footer-on",this.configuration.footer.isFooterCreate),this.createFooterPeriodsMenu(e),this.resize(!0))}},fe.prototype.createFooterPeriodsMenu=function(t){var e=this,a=this.getFooterPeriods();Object.entries(a).forEach((function(a){var i=Jt(a,2),r=i[0],s=i[1];return t.appendChild(e.createFooterPeriodButton([r,s]))}))},fe.prototype.createFooterPeriodButton=function(t){var e=this,a=Jt(t,2),i=a[0],r=a[1],s=this.makeTchTextValue(this.translation[r.key]),n=document.createElement("div");n.classList.add("tch-footer-period-btn");var o=document.createElement("span");return n.appendChild(o),o.innerText=this.translation[r.key],o.setAttribute("tch-text",s),r.name=i,r.btn=n,n.item=r,n.setAttribute("name",i),r.value===this.configuration.period&&n.classList.toggle("tch-selected",!0),r.btn.addEventListener("click",(function(t){e.closeAll(),t.stopPropagation();var a=t.target.item;a||(a=t.target.parentNode.item),t.currentTarget.classList.contains("tch-selected")||(e.changePeriod(a.name),e.setSelectedFooterBtn(a.name))})),n},fe.prototype.getFooterPeriods=function(){var t=this,e=this.periods();return Object.keys(e).reduce((function(a,i){return t.configuration.footer.periods.includes(i)?Zt({},a,$t({},i,e[i])):a}),{})},fe.prototype.setSelectedFooterBtn=function(t){if(this.configuration.footer.isFooterCreate){var e=this.parent.querySelector(".tch-container"),a=e.querySelector(".tch-footer");e&&a&&a.querySelectorAll(".tch-footer-period-btn").forEach((function(e){e.classList.toggle("tch-selected",!1),e.item.name===t&&e.classList.toggle("tch-selected",!0)}))}},fe.prototype.setActiveFooterBtn=function(t){if(this.configuration.footer.isFooterCreate){var e=this.getPeriods()[t];this.setSelectedFooterBtn(e.value)}},fe.prototype.window_keyDown=function(t,e){switch(t.which){case 46:case 8:e.removeEditDrawingObject();break;case 13:if("Enter"===t.key&&"tch-stay-drawing-mode-btn tch-icon tch-icon-sidebar tch-active"===t.target.className||"tch-show-hide-drawing-btn tch-icon tch-icon-sidebar tch-active"===t.target.className||"tch-magnet-mode-btn tch-icon tch-icon-sidebar tch-active"===t.target.className||"tch-lock-btn tch-icon tch-icon-sidebar tch-active"===t.target.className){t.preventDefault(),t.stopPropagation();break}e.chartData.session="open",e.updateChart();break;case 90:t.ctrlKey&&(t.preventDefault(),t.stopPropagation())}},fe.prototype.init=function(){var t=this;this.parent.style.overflow="hidden",this.parent.classList.toggle("tch-arabic","ar"===this.configuration.lang),this.parent.classList.toggle("tch-opera",-1!==navigator.userAgent.indexOf("OPR/")),this.parent.innerHTML=this.html(),this.alertBrowse(),this.getSettings(),this.configuration.modules.isShowEvents&&this.connector.getQuotationCountries((function(e){return t.configuration.quotationCountries=e})),this.colorPickerInit(),this.fullscreenModeInit(),this.createMenu(),this.addEvents(),this.dataPanelInit(),this.setDefaultParamsPanel(this.configuration),this.applySettingsHeaderHidden(),this.applySettingsSidebarHidden(),this.applySettingsFullscreenBtn(),this.applySettingsDataPanelHidden(),this.applySettingsFooter()},fe.prototype.mappingUpdateConfiguration=function(t){if(t){t.id&&(this.ID=t.id);var e=t.config?t.config:{},a=Wt(this.configuration,e);this.configuration=this.setParamsConverter(qt(a));var i=t.styles?t.styles:{};this.isExternalStyle=Boolean(Object.keys(i).length);var r=Wt(this.styles,i);this.styles=r,t.config&&t.config.lang&&(this.translation=this.languages[this.configuration.lang])}},fe.prototype.mappingGroupCharts=function(t){var e=this.groupCharts[this.activeTab],a=e.chartData[e.activeIndex],i=this.cloneChartData(e.chartData[e.activeIndex]);i.chartType=t.chartType?t.chartType:a.chartType,i.id=t.pair&&t.pair.ID?t.pair.ID:a.id,i.colors=t.styles&&t.styles.colors?t.styles.colors:a.colors,i.options=t.styles&&t.styles.options?t.styles.options:a.options,i.pair=t.pair?t.pair:a.pair,i.period=t.period?t.period:a.period,i.typeData=t.typeData?t.typeData:a.typeData;var r=Zt({},this.groupCharts);return t&&t.pair&&(r[this.activeTab].name=t.pair.FullName),r[this.activeTab].chartData[e.activeIndex]=i,r},fe.prototype.updateConfig=function(t){var e;this.mappingUpdateConfiguration(t),this.checkLocalStorage(),this.init(),e=t&&t.config&&Object.keys(t.config).length?this.mappingGroupCharts({chartType:t.config.chartType,id:t.config.pair&&t.config.pair.ID,pair:t.config.pair,period:t.config.period,typeData:t.config.typeData,styles:t.styles}):this.groupCharts,this.restoreParams({version:this.configuration.version,isSidebarHidden:this.configuration.isSidebarHidden,isHeaderHidden:this.configuration.isHeaderHidden,isFullScreen:this.configuration.isFullScreen,isDataPanel:this.configuration.isDataPanel,lang:this.configuration.lang,activeSpliter:this.activeSpliter,activeChartIndex:this.activeChartIndex,params:this.configuration,settings:this.settings,activeTab:this.activeTab,groupCharts:e})},fe.prototype.initialization=function(){this.init(),this.chartsLoad()},fe.prototype.checkLocalStorage=function(){return this.getKeyForLocalStorage(),null},fe.prototype.chartsLoad=function(){var t=this.checkLocalStorage();t?this.restoreParams(t):(this.createTabs(),this.resize(),this.setTabsContainerHeight(),this.activateTabContent())},fe.prototype.getChartDatas=function(t){return t.map((function(t){return t.chartData}))},fe.prototype.createAddTabsBtn=function(){var t=this.parent.querySelector(".tch-tabs-container"),e=document.createElement("div"),a=this.parent.querySelectorAll(".tch-tab-btn");if(a)for(var i=0;i<a.length;i++)a[i].remove();e.classList.toggle("tch-tab-btn",!0);var r=document.createElement("span"),s=this;return e.onclick=function(t){s.continueDrawing(t)||(s.createTab(),t.stopPropagation())},e.appendChild(r),t&&t.appendChild(e),e},fe.prototype.createTabs=function(t){t&&(this.configuration.pair=t);var e,a,i=this.configuration.pair;this.activeSpliter=0,this.activeChatIndex=0,e=this.createChartsArray([]),a=this.getChartDatas(e);var r=this.createTabObject(a[0].pair.FullName,a),s=fe.getTabName();r.chartData[0].currentTabId=s,this.groupCharts[s]=r,this.updateConnectorListeners(this.groupCharts),this.createNewTabContainer(s),t&&(this.configuration.pair=i)},fe.prototype.updateConnectorListeners=function(t){for(var e in this.connector.listeners=[],t)if(t.hasOwnProperty(e))for(var a=0;a<t[e].chartData.length;a++)this.connector.listeners.push(t[e].chartData[a])},fe.prototype.activateTabContent=function(t){var e=this.groupCharts[this.activeTab];this.activeChartIndex=e.activeIndex;var a=[];this.activeSpliter=e.activeTabSpliter;for(var i=this.createChartContainers(),r=0;r<e.chartData.length;r++)a.push(this.createChart(null,e.chartData[r]));this.configuration.modules.headerButtons.createPipsButton&&this.parent.querySelector(".tch-pips-btn").classList.toggle("tch-pips-btn-active",e.chartData[0].isPipsShow),this.charts=a,this.createCharts(i,t),this.setActiveChartParams(),this.setActiveSpliterButton()},fe.prototype.createChartsArray=function(t){var e,a,i=[],r=this.spliterTemplates()[this.activeSpliter].count;if(t.length>r){for(var s=0;s<r;s++)i.push(t[s]);this.activeChartIndex>=r&&(e=t[this.activeChartIndex].chartData,i[r-1]=this.createChart(null,e),this.activeChartIndex=r-1)}else for(var n=0;n<r;n++)if(n<t.length)i.push(t[n]);else if(t[this.activeChartIndex]){var o=Xt(t[this.activeChartIndex].chartData.data);(e=this.cloneChartData(t[this.activeChartIndex].chartData)).data=o,a=this.createChart(null,e),i.push(a)}else e=new oe(this),a=this.createChart(null,e),i.push(a),this.activeChartIndex=0;for(var h=0;h<i.length;h++)i[h].chartData.techChart=this,i[h].chartData.init();return i},fe.prototype.colorPickerInit=function(){new g(this.parent,this)},fe.prototype.createChart=function(t,e){switch(e.chartType){case"area":return new de(t,e,this);case"line":return new Ae(t,e,this);case"candle":return new le(t,e,this);case"bar":return new pe(t,e,this);case"hollow":return new ue(t,e,this);case"heikin":return new ge(t,e,this)}},fe.prototype.createCharts=function(t,e){for(var a=0;a<t.length;a++)this.charts[a].parent=t[a],this.charts[a].chartData.index=a,this.charts[a].init(void 0,e);this.charts[this.activeChartIndex].setActiveChart(!0)},fe.prototype.createChartContainers=function(){var t=this.parent.querySelector(".tch-charts-container");t.innerHTML="",this.chartsContainerRect=t.getBoundingClientRect();var e=this.chartsContainerRect.width-this.chartsOff,a=this.chartsContainerRect.height-this.chartsOff;return this.activeSpliter>0?this.splitCharts(t,this.spliterTemplates()[this.activeSpliter].template,e,a,0,0,!0):this.createChartContainer(t,this.chartsContainerRect.width,this.chartsContainerRect.height,0,0,0),t.querySelectorAll(".tch-chart-content")},fe.prototype.setActiveSpliterButton=function(){if(this.configuration.modules.headerButtons.splitterButton){var t=this.parent.querySelector(".tch-layout-button");this.connector&&this.connector.options&&"widgets"===this.connector.options.type?t.setAttribute("tch-spliter-template-active",this.activeSpliter+1):t.setAttribute("tch-spliter-template",this.activeSpliter+1);for(var e=this.parent.querySelectorAll(".tch-layout-header li"),a=0;a<e.length;a++)e[a].classList.toggle("tch-selected",!1);this.parent.querySelector(".tch-layout-header li[tch-spliter-template='"+(this.activeSpliter+1)+"']").classList.toggle("tch-selected",!0)}},fe.prototype.cloneChartData=function(t){var e=t.convertToDTO();return(t=new oe(this)).convertFromDTO(e),t},fe.prototype.resizeChartsContainers=function(t){var e=this.parent.querySelector(".tch-charts-container"),a=e.cloneNode(!0),i=e.getBoundingClientRect();a.innerHTML="";var r=i.width-this.chartsOff,s=i.height-this.chartsOff;this.activeSpliter>0?this.splitCharts(a,this.spliterTemplates()[this.activeSpliter].template,r,s,0,0,!0):this.createChartContainer(a,i.width,i.height,0,0,0);var n=a.querySelectorAll(".tch-chart-content"),o=e.querySelectorAll(".tch-chart-content");if(0!==o.length)for(var h=0;h<n.length;h++)o[h].style.width=n[h].style.width,o[h].style.height=n[h].style.height,o[h].style.top=n[h].style.top,o[h].style.left=n[h].style.left,this.charts[h]&&this.charts[h].init(!0,t)},fe.prototype.splitCharts=function(t,e,a,i,r,s,n){if(e.length)for(var o,h,c=0;c<e.length;c++)n?(o=a/e.length,h=i,this.splitCharts(t,e[c],o,h,r+c*o,s,!1)):(o=a,h=i/e.length,this.splitCharts(t,e[c],o,h,r,s+c*h,!0));else this.createChartContainer(t,a,i,r,s,this.chartsOff)},fe.prototype.createChartContainer=function(t,e,a,i,r,s){var n=document.createElement("div");n.classList.add("tch-chart-content"),e-=s+2,a-=s+2,i+=s,r+=s,n.style.width=e.toFixed(0)+"px",n.style.height=a.toFixed(0)+"px",n.style.left=i.toFixed(0)+"px",n.style.top=r.toFixed(0)+"px",t.appendChild(n)},fe.prototype.getKeyForLocalStorage=function(){return"techAuto".concat(this.ID)},fe.prototype.fullscreenModeInit=function(){this.getKeyForLocalStorage(),this.parent.classList.toggle("tch-fullscreen-mode-on",this.configuration.isFullScreen)},fe.prototype.createMenu=function(){this.createSideBarMenuType(),this.createPeriodsMenu(),this.createChartTypesMenu(),this.setActiveSpliterButton(),this.createTypeDataMenu()},fe.prototype.applySettingsHeaderHidden=function(){this.parent.querySelector(".tch-container").classList.toggle("tch-header-hidden",!this.configuration.modules.isHeaderCreate||this.configuration.isHeaderHidden)},fe.prototype.applySettingsSidebarHidden=function(){this.parent.querySelector(".tch-sidebar").classList.toggle("tch-sidebar-hidden",!this.configuration.modules.isSideBarCreate||this.configuration.isSidebarHidden)},fe.prototype.applySettingsFullscreenBtn=function(){var t=this.parent.querySelector(".tch-fullscreen-btn");!1!==this.configuration.isFullScreenButton&&"false"!==this.configuration.isFullScreenButton||(t.style.display="none")},fe.prototype.applySettingsDataPanelHidden=function(){var t=this.parent.querySelector(".tch-data-panel-body"),e=this.parent.querySelector(".tch-close-btn");t&&e&&(t.classList.toggle("tch-hidden",!this.configuration.isDataPanelBodyOpened),e.classList.toggle("tch-down",!this.configuration.isDataPanelBodyOpened),e.classList.toggle("tch-up",this.configuration.isDataPanelBodyOpened))},fe.prototype.alertBrowse=function(){vt.warningBrowser()||vt.showWarningBrowser(void 0,this.parent.querySelector(".tch-chart-alert"))},fe.prototype.getSettings=function(){var t=this;this.settings.quotations&&this.settings.quotations.length?this.onGetSettingsComplete(JSON.stringify(this.settings.quotations)):this.connector.getSettings((function(e){return t.onGetSettingsComplete(e)}))},fe.prototype.onGetSettingsComplete=function(t){var e=JSON.parse(t);if(e.sort((function(t,e){return t.FullName>e.FullName?1:t.FullName<e.FullName?-1:0})),this.configuration.rowsid.length?this.settings.quotations=this.setQuotationsfromParams(e,this.configuration.rowsid):this.settings.quotations=e,this.configuration.defaultId){var a=this.getPairSettings(this.settings.quotations,this.configuration.defaultId);this.configuration.pair=a,this.setDefaultPair(a),this.setTabObjectName()}this.fillQuotationsSettings();var i=Gt(this.configuration.dropDown.indicators,this.indicators);this.fillIndicatorsDropdown(i)},fe.prototype.setDefaultPair=function(t){for(var e=0;e<this.charts.length;e++)parseInt(this.charts[e].chartData.pair.ID,10)===t.ID&&(this.charts[e].chartData.pair=t)},fe.prototype.setQuotationDropDownValue=function(t){if(this.configuration.modules.headerButtons.searchQuotationButton){var e=this.setTextWidth(),a=e.maxWidth,i=e.optimalWidth;if(t.length>=a){var r=t.substring(0,i).concat("...");this.parent.querySelector(".tch-search").value=r}else this.parent.querySelector(".tch-search").value=t}},fe.prototype.setActiveStatePipsCalc=function(){if(this.configuration.modules.headerButtons.createPipsButton){var t=this.parent.querySelector(".tch-pips-btn"),e=this.charts[this.activeChartIndex].chartData.isPipsShow;t.classList.toggle("tch-pips-btn-active",e)}},fe.prototype.dataPanelInit=function(){this.moveElements=new re;for(var t=this.parent.querySelectorAll(".tch-move"),e=0;e<t.length;e++)this.moveElements.addDragObject(t[e]);this.setDropTargetContainer()},fe.prototype.getPairSettings=function(t,e){if(!t)return{ID:e,Name:"",FullName:""};e=parseInt(e,10);for(var a={},i=0;i<t.length;i++)if(t[i].ID===e){a={ID:t[i].ID,Name:t[i].Name,FullName:t[i].FullName,Category:t[i].Category};break}return 0===Object.keys(a).length&&(a={ID:t[0].ID,Name:t[0].Name,FullName:t[0].FullName,Category:t[0].Category}),a},fe.prototype.setQuotationsfromParams=function(t,e){for(var a=[],i=0;i<t.length;i++)-1!==e.indexOf(t[i].ID.toString())&&a.push(t[i]);return a},fe.prototype.setDropTargetContainer=function(){var t=getComputedStyle(this.parent.querySelector(".tch-charts-container")),e=this.parent.parentNode.querySelector(".tch-header").getBoundingClientRect(),a={left:(isNaN(parseFloat(t.left))?0:parseFloat(t.left))+parseFloat(t.marginLeft)+parseFloat(t.borderLeftWidth)+5,top:(isNaN(parseFloat(t.top))?0:parseFloat(t.top))+e.height+parseFloat(t.marginTop)+parseFloat(t.borderTopWidth)+5,right:(isNaN(parseFloat(t.left))?0:parseFloat(t.left))+parseFloat(t.marginLeft)+parseFloat(t.width)-5,bottom:e.height+(isNaN(parseFloat(t.left))?0:parseFloat(t.left))+parseFloat(t.height)-2*parseFloat(t.marginTop)-10+2};this.moveElements.setContainer(a)},fe.prototype.addEvents=function(){var t=this;this.ID||(window.onkeydown=null,window.onkeydown=function(e){t.window_keyDown(e,t.charts[t.activeChartIndex])}),this.addResizeEvent(),this.addFullscreenEvent(),this.addHeaderClosePanelEvents(),this.addSidebarClosePanelEvents(),this.setPeriodSelectBtnClick(),this.setTypeDataSelectBtnClick(),this.setChartTypeSelectBtnClick(),this.addClickTabQuatation(),this.addSearchQuatationEvents(),this.addChartSettingBtnEvent(),this.addSearchIndicatorEvents(),this.addIndicatorBtn(),this.addLayoutBtnEvents(),this.addSideBarMenuEvents(),this.addPanelIndicatorEvent(),this.addHiddenDataPanelEvent(),this.addHiddenIndicatorPanelInputStyleEvent(),this.addHiddenStyle(),this.addChartSettingsEvent(),this.addTabsBtnEvent(),this.addScreenshotBtnEvent(),this.addPipsEvent()},fe.prototype.addSideBarMenuEvents=function(){this.addCursorTypeEvent(),this.addLineTypeEvent(),this.addBrushTypeEvent(),this.addTextTypeEvent(),this.addSaveBtnEvent(),this.addRestoreBtnEvent(),this.addDefaultBtnEvent(),this.addStayDrawingModeBtn(),this.addShowHideDrawing(),this.addZoomInBtnEvent(),this.addZoomOutBtnEvent(),this.addZoomZeroBtnEvent(),this.addBasketBtnEvent(),this.addLockBtnEvent(),this.addMagnetModeEvent(),this.AddRouleteEvent()},fe.prototype.removeSideBarMenuEvents=function(){this.configuration.modules.sideBarButtons.cursorTypeButton&&(this.parent.querySelector(".tch-cursorType-container").onclick=null),this.configuration.modules.sideBarButtons.drawingObjectsButton&&(this.parent.querySelector(".tch-lineType-container").onclick=null),this.configuration.modules.sideBarButtons.brushTypeButton&&(this.parent.querySelector(".tch-brushType-container").onclick=null),this.configuration.modules.sideBarButtons.textTypeButton&&(this.parent.querySelector(".tch-textType-container").onclick=null),this.configuration.modules.sideBarButtons.saveRestoreButtons&&(this.parent.querySelector(".tch-save-btn").onclick=null),this.configuration.modules.sideBarButtons.saveRestoreButtons&&(this.parent.querySelector(".tch-restore-btn").onchange=null),this.configuration.modules.sideBarButtons.saveRestoreButtons&&(this.parent.querySelector(".tch-default-btn").onclick=null),this.configuration.modules.sideBarButtons.stayDrawingModeButton&&(this.parent.querySelector(".tch-stay-drawing-mode-btn").onclick=null),this.configuration.modules.sideBarButtons.hideDrowingObjectButton&&(this.parent.querySelector(".tch-show-hide-drawing-btn").onclick=null),this.configuration.modules.sideBarButtons.zoomButton&&(this.parent.querySelector(".tch-zoomin-btn").onclick=null),this.configuration.modules.sideBarButtons.zoomButton&&(this.parent.querySelector(".tch-zoomout-btn").onclick=null),this.configuration.modules.sideBarButtons.zoomButton&&(this.parent.querySelector(".tch-zoomzero-btn").onclick=null),this.configuration.modules.sideBarButtons.basketButton&&(this.parent.querySelector(".tch-basket-btn").onclick=null),this.configuration.modules.sideBarButtons.lockButton&&(this.parent.querySelector(".tch-lock-btn").onclick=null),this.configuration.modules.sideBarButtons.magnetModeButton&&(this.parent.querySelector(".tch-magnet-mode-btn").onclick=null),this.configuration.modules.sideBarButtons.rouleteButton&&(this.parent.querySelector(".tch-roulete-drawing-btn").onclick=null),this.configuration.modules.isSideBarCreate&&(this.parent.querySelector(".tch-sidebar-close-panel").onclick=null),this.configuration.modules.isSideBarCreate&&this.sideBarListItemps.forEach((function(t){return t.onclick=null,!0}))},fe.prototype.backDrawingObjectsToNormalState=function(){if(this.charts.length){for(var t=this.getActiveChartData(),e=this.getActiveChart(),a=0;a<t.drawingObjects.length;a++)t.drawingObjects[a].state="edit",t.editDrawingObject&&(t.editDrawingObject.state="normal"),t.editDrawingObject=t.drawingObjects[a],t.activeDrawingObject&&(t.activeDrawingObject.state="normal",t.activeDrawingObject=null),e.drawActiveDrawingObjects(),e.redrawDrawingObjects();t.editDrawingObject&&(t.editDrawingObject.isPressed?(t.editDrawingObject.isPressed=!1,t.editDrawingObject.updateValues()):(t.editDrawingObject.state="normal",t.isShowDrawingObjects&&t.editDrawingObject.draw(e.canvasDrawingContext),t.editDrawingObject=null),this.charts[this.activeChartIndex].drawActiveDrawingObjects()),!1===t.isStayDrawingMode&&(t.state="default")}},fe.prototype.resizeFunction=function(){this.resize(),this.backDrawingObjectsToNormalState(),this.recreateSideBarMenu()},fe.prototype.addResizeEvent=function(){var t=this;window.addEventListener("resize",(function(){t.resizeFunction()}))},fe.prototype.resize=function(t,e){var a=this.parent.querySelector(".tch-charts-container");a=a?a.getBoundingClientRect():a,(t||a.width!==this.chartsContainerRect.width||a.height!==this.chartsContainerRect.height)&&(this.chartsContainerRect=a,this.resizeChartsContainers(e),this.setDropTargetContainer(),this.moveElements.moveResize())},fe.prototype.close=function(){var t=this;this.connector.close(),window.removeEventListener("resize",(function(){t.resizeFunction()}))},fe.prototype.fillChartSettingsPanel=function(){if(this.configuration.modules.headerButtons.settingsButton){var t,e,a=this.parent.querySelector(".tch-settings-dropdown"),i=a.querySelectorAll("input"),r=a.querySelectorAll("select"),s=a.querySelectorAll(".tch-color-picker"),n=this;this.parent.querySelector(".tch-settings-button").oncloseall=function(){delete this.oncloseall,n.autoSaveParams()};var o=this.getActiveChartData();if(o){for(var h=0;h<i.length;h++)i[h].name?(e=o[(t=i[h].name.split("-"))[0]][t[1]][t[2]],"minMaxPricesMarks"===t[2]&&(e=e.isShow),fe.setInputValue(e,i[h]),i[h].oldValue=fe.getInputValue(i[h]),i[h].onchange=function(t){var e=fe.getFunctionName("set",t.target.name),a=fe.getInputValue(t.target);n[e](a)}):i[h].classList.contains("tch-btn-submit")||i[h].classList.contains("tch-btn-cancel")||(i[h].disabled="disabled");for(var c=0;c<r.length;c++)r[c].name?("options-Chart-typeChart"===r[c].name&&this.setOptionsChartTypeChart(o.chartType),e=o[(t=r[c].name.split("-"))[0]][t[1]][t[2]],fe.setSelectValue(e,r[c]),r[c].oldValue=o[t[0]][t[1]][t[2]],r[c].onchange=function(t){var e=fe.getFunctionName("set",t.target.name),a=t.target.selectedOptions[0].value;n[e](a)}):r[c].disabled="disabled";for(var l=0;l<s.length;l++){var A=s[l].getAttribute("name");A&&(e=o[(t=A.split("-"))[0]][t[1]][t[2]],e=fe.getColor(e),s[l].style.backgroundColor=e,s[l].oldValue=s[l].style.backgroundColor,s[l].onchange=function(t){var e=this.getAttribute("name"),a=fe.getFunctionName("set",e);n[a](t)})}}}},fe.getInputValue=function(t){var e;return"checkbox"==t.type&&(e=t.checked),"color"==t.type&&(e=t.value.toLowerCase()),"range"==t.type&&(e=t.value),e},fe.getColor=function(t){return 0!==t.indexOf("#")?0===t.indexOf("rgba")?t:0===t.indexOf("rgb")?t.replace(")",", 1)").replace("rgb","rgba"):t:/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3==(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),"rgba("+[(e="0x"+e.join(""))>>16&255,e>>8&255,255&e].join(",")+",1)"):void 0;var e},fe.setInputValue=function(t,e){"checkbox"===e.type&&(e.checked=t,t&&(e.disabled=!1)),"color"===e.type&&(e.value=t),"range"===e.type&&(e.value=t)},fe.setSelectValue=function(t,e){for(var a=0;a<e.length;a++)e[a].value.toLowerCase()!==t.toString().toLowerCase()||(e[a].selected=!0)},fe.getSelectValue=function(t){return t.value},fe.getFunctionName=function(t,e){var a=t,i=e.split("-");for(var r in i)i.hasOwnProperty(r)&&(a+=i[r][0].toUpperCase()+i[r].slice(1));return a},fe.prototype.setOptionsChartAutoScale=function(t){var e=this.getActiveChartData();t?e.prevScaleParams=Xt(e.scaleParams):e.prevScaleParams&&(e.scaleParams=Xt(e.prevScaleParams)),e.options.Chart.autoScale=t,e.chart.createShowData(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.cleanPrevScaleParams=function(){this.getActiveChartData().prevScaleParams=null},fe.prototype.setColorsChartBackgroundColor=function(t){this.getActiveChart().setBackgroundColor(t)},fe.prototype.setOptionsChartTypeThemes=function(t){var e=this.getActiveChartData();t&&(e.options.Chart.typeThemes=t,e.chart.setChartThemes(t)),this.recreateSideBarMenu(),this.recreateSettingPanel(),this.setQuotationDropDownValue(e.pair.FullName)},fe.prototype.setColorsChartScalesText=function(t){var e=this.getActiveChartData();e.colors.Chart.scalesText=t,e.chart.axisTextContainer.innerHTML="",e.chart.drawValueAxis(e.chart.valueAxis),e.chart.drawTimeAxis(e.chart.timeAxis)},fe.prototype.setOptionsChartScalesFontSize=function(t){var e=this.getActiveChartData();e.options.Chart.oldScalesFontSize=e.options.Chart.scalesFontSize,e.options.Chart.scalesFontSize=t,e.chart.init(!0),delete e.options.Chart.oldScalesFontSize},fe.prototype.setColorsChartColorScalesLines=function(t){var e=this.getActiveChartData();e.colors.Chart.colorScalesLines=t,e.chart.clearGrid(),e.chart.drawValueAxis(e.chart.valueAxis),e.chart.drawTimeAxis(e.chart.timeAxis),e.chart.drawChartBorder()},fe.prototype.setColorsChartWatermarkColor=function(t){var e=this.getActiveChartData();e.colors.Chart.watermarkColor=t,e.chart.waterMarkContainer.style.color=t},fe.prototype.setOptionsChartSymbolDescription=function(t){this.getActiveChartData().options.Chart.symbolDescription=t,this.hiddenSymbolDescription(t)},fe.prototype.setOptionsChartOhlcValues=function(t){this.getActiveChartData().options.Chart.ohlcValues=t,this.hiddenOhlcValue(t)},fe.prototype.setOptionsChartCandleTimer=function(t){this.getActiveChartData().options.Chart.candleTimer=t,this.hiddenCandleTimer(t)},fe.prototype.setOptionsChartIndicatorTitles=function(t){var e=this.getActiveChartData();e.options.Chart.indicatorTitles=t,t||(e.options.Chart.indicatorArguments=t),this.hiddenIndicatorTitles(t)},fe.prototype.setOptionsChartIndicatorArguments=function(t){this.getActiveChartData().options.Chart.indicatorArguments=t,this.hiddenIndicatorArguments(t)},fe.prototype.setOptionsChartIndicatorValues=function(t){this.getActiveChartData().options.Chart.indicatorValues=t,this.hiddenIndicatorValues(t)},fe.prototype.setOptionsChartMinMaxPricesMarks=function(t){this.getActiveChartData().options.Chart.minMaxPricesMarks.isShow=t,t&&this.getActiveChart().drawMinMaxPrices(),!t&&this.getActiveChart().clearMinMaxPrices()},fe.prototype.setColorsChartColorCrossHair=function(t){var e=this.getActiveChartData();e.colors.Chart.colorCrossHair=t,e.colors.Chart.crosshair=t,e.colors.Chart.crossLineColor=t,e.colors.Chart.crossLabelBackgroundColor=t,e.chart.priceTextColor=e.chart.getPriceTextColor(t),e.chart.crosshair.text.spanValue.style.backgroundColor=t,e.chart.crosshair.text.spanValue.parentNode.style.backgroundColor=t,e.chart.crosshair.text.spanDate.style.backgroundColor=t,e.chart.crosshair.text.spanDate.parentNode.style.backgroundColor=t,e.chart.redrawInfo()},fe.prototype.setOptionsChartTypeCrossHair=function(t){var e=this.getActiveChartData();e.options.Chart.typeCrossHair=t,e.chart.redrawInfo()},fe.prototype.setOptionsChartWidthCrossHair=function(t){var e=this.getActiveChartData();e.options.Chart.widthCrossHair=t,e.chart.redrawInfo()},fe.prototype.setOptionsChartTypeVertGridLines=function(t){var e=this.getActiveChartData();e.options.Chart.typeVertGridLines=t,e.chart.clearGrid(),e.chart.drawValueAxis(e.chart.valueAxis),e.chart.drawTimeAxis(e.chart.timeAxis),e.chart.drawChartBorder()},fe.prototype.setOptionsChartTypeHorzGridLines=function(t){var e=this.getActiveChartData();e.options.Chart.typeHorzGridLines=t,e.chart.clearGrid(),e.chart.drawValueAxis(e.chart.valueAxis),e.chart.drawTimeAxis(e.chart.timeAxis),e.chart.drawChartBorder()},fe.prototype.setColorsChartVertGridLines=function(t){var e=this.getActiveChartData(),a=this.getActiveChart();e.colors.Chart.vertGridLines=t,a.clearGrid(),a.drawValueAxis(a.valueAxis),a.drawTimeAxis(a.timeAxis),e.chart.drawChartBorder()},fe.prototype.setColorsChartHorzGridLines=function(t){var e=this.getActiveChartData(),a=this.getActiveChart();e.colors.Chart.horzGridLines=t,a.clearGrid(),a.drawValueAxis(a.valueAxis),a.drawTimeAxis(a.timeAxis),e.chart.drawChartBorder()},fe.prototype.setOptionsChartScaleSeriesOnly=function(t){var e=this.getActiveChartData(),a=this.getActiveChart();e.options.Chart.scaleSeriesOnly=t,t?(a.createShowData(),a.draw(a.showData,a.h)):a.resizeShowDataByTrendIndicators()&&a.draw(a.showData,a.h)},fe.prototype.setOptionsChartTypeChart=function(t){var e=this.getActiveChart();e.chartData.options.Chart.typeChart=t;var a=this.parent.querySelector(".tch-settings-dropdown");[].slice.call(a.querySelectorAll(".tch-style-layouts")).forEach((function(e){e.classList.toggle("tch-hidden",!0),e.classList.contains("tch-layout-style-"+t)&&e.classList.toggle("tch-hidden",!1)}));var i=this.parent.querySelector(".tch-chart-type-button");i&&(this.connector&&this.connector.options&&"widgets"===this.connector.options.type?i.setAttribute("actualtype-active",e.chartData.chartType):i.setAttribute("actualtype",e.chartData.chartType));var r=e.parent;e.chartData.chartType!==t&&(this.setChartType(t),this.charts[this.activeChartIndex]=this.createChart(r,e.chartData),this.charts[this.activeChartIndex].init())},fe.prototype.setOptionsChartNeedPriceLine=function(t){this.getActiveChartData().options.Chart.needPriceLine=t,this.getActiveChart().drawCurrentValue()},fe.prototype.setOptionsChartWidthPriceLine=function(t){var e=this.getActiveChartData();e.options.Chart.widthPriceLine=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setOptionsChartTypeTick=function(t){var e=this.getActiveChartData();e.options.Chart.typeTick=t,e.chart.init(!0)},fe.prototype.setColorsCandleChartCandleBear=function(t){var e=this.getActiveChartData();e.colors.CandleChart.candleBear=t,e.chart.drawCurrentValue(),e.chart.draw(this.getActiveChart().showData,this.getActiveChart().h)},fe.prototype.setColorsCandleChartCandleBool=function(t){var e=this.getActiveChartData();e.colors.CandleChart.candleBool=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsCandleChartCandleBearBorder=function(t){var e=this.getActiveChartData();e.colors.CandleChart.candleBearBorder=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsCandleChartCandleBoolBorder=function(t){var e=this.getActiveChartData();e.colors.CandleChart.candleBoolBorder=t,e.chart.drawCurrentValue(),e.chart.draw(this.getActiveChart().showData,this.getActiveChart().h)},fe.prototype.setOptionsCandleChartNeedBorder=function(t){var e=this.getActiveChartData();e.options.CandleChart.needBorder=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setOptionsCandleChartNeedWick=function(t){var e=this.getActiveChartData();e.options.CandleChart.needWick=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsCandleChartCandleLineBear=function(t){var e=this.getActiveChartData();e.colors.CandleChart.candleLineBear=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsCandleChartCandleLineBool=function(t){var e=this.getActiveChartData();e.colors.CandleChart.candleLineBool=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHollowChartCandleBear=function(t){var e=this.getActiveChartData();e.colors.HollowChart.candleBear=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHollowChartCandleBool=function(t){var e=this.getActiveChartData();e.colors.HollowChart.candleBool=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHollowChartCandleBearBorder=function(t){var e=this.getActiveChartData();e.colors.HollowChart.candleBearBorder=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHollowChartCandleBoolBorder=function(t){var e=this.getActiveChartData();e.colors.HollowChart.candleBoolBorder=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setOptionsHollowChartNeedBorder=function(t){var e=this.getActiveChartData();e.options.HollowChart.needBorder=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setOptionsHollowChartNeedWick=function(t){var e=this.getActiveChartData();e.options.HollowChart.needWick=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHollowChartCandleLineBear=function(t){var e=this.getActiveChartData();e.colors.HollowChart.candleLineBear=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHollowChartCandleLineBool=function(t){var e=this.getActiveChartData();e.colors.HollowChart.candleLineBool=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHeikinAshiChartCandleBear=function(t){var e=this.getActiveChartData();e.colors.HeikinAshiChart.candleBear=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHeikinAshiChartCandleBool=function(t){var e=this.getActiveChartData();e.colors.HeikinAshiChart.candleBool=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHeikinAshiChartCandleBearBorder=function(t){var e=this.getActiveChartData();e.colors.HeikinAshiChart.candleBearBorder=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHeikinAshiChartCandleBoolBorder=function(t){var e=this.getActiveChartData();e.colors.HeikinAshiChart.candleBoolBorder=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setOptionsHeikinAshiChartNeedBorder=function(t){var e=this.getActiveChartData();e.options.HeikinAshiChart.needBorder=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setOptionsHeikinAshiChartNeedWick=function(t){var e=this.getActiveChartData();e.options.HeikinAshiChart.needWick=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHeikinAshiChartCandleLineBear=function(t){var e=this.getActiveChartData();e.colors.HeikinAshiChart.candleLineBear=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsHeikinAshiChartCandleLineBool=function(t){var e=this.getActiveChartData();e.colors.HeikinAshiChart.candleLineBool=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setOptionsBarChartNeedOpen=function(t){var e=this.getActiveChartData();e.options.BarChart.needOpen=t,e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsBarChartCandleBear=function(t){var e=this.getActiveChartData();e.colors.BarChart.candleBear=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsBarChartCandleBool=function(t){var e=this.getActiveChartData();e.colors.BarChart.candleBool=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsAreaChartColorLine=function(t){var e=this.getActiveChartData();e.colors.AreaChart.colorLine=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsAreaChartColorStop=function(t){var e=this.getActiveChartData();e.colors.AreaChart.colorStop=t,e.chart.draw(e.chart.showData,e.chart.h),e.chart.drawCurrentValue()},fe.prototype.setColorsAreaChartColorStopEnd=function(t){var e=this.getActiveChartData();e.colors.AreaChart.colorStopEnd=t,e.chart.draw(e.chart.showData,e.chart.h),e.chart.drawCurrentValue()},fe.prototype.setOptionsAreaChartWidthLine=function(t){var e=this.getActiveChartData();e.options.AreaChart.widthLine=t,e.chart.draw(e.chart.showData,e.chart.h),e.chart.drawCurrentValue()},fe.prototype.setOptionsAreaChartPriceSource=function(t){var e=this.getActiveChartData();e.options.AreaChart.priceSource=t,e.chart.showData=e.chart.processDataToShow(e.chart.selectedData,e.rightPadding,e.spacing,e.chart.w,e.chart.h,e.precission,e.startX,e.scaleParams),e.chart.draw(e.chart.showData,e.chart.h),e.chart.drawCurrentValue(),e.chart.timeAxis=e.chart.getTimeAxis(e.chart.showData,e.chart.w,e.chart.parentRect.height-e.chart.offY,e.period,e.timeMode,e.localization),e.chart.getOscillatorChartsAxis(),e.chart.clearGrid(),e.chart.drawTimeAxis(e.chart.timeAxis),e.chart.drawValueAxis(e.chart.valueAxis),e.chart.drawOscillatorChartsAxis(),e.chart.drawChartBorder()},fe.prototype.setOptionsLineChartWidthLine=function(t){var e=this.getActiveChartData();e.options.LineChart.widthLine=t,e.chart.draw(e.chart.showData,e.chart.h),e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setColorsLineChartColorLine=function(t){var e=this.getActiveChartData();e.colors.LineChart.colorLine=t,e.chart.drawCurrentValue(),e.chart.draw(e.chart.showData,e.chart.h)},fe.prototype.setOptionsLineChartPriceSource=function(t){var e=this.getActiveChartData();e.options.LineChart.priceSource=t,e.chart.showData=e.chart.processDataToShow(e.chart.selectedData,e.rightPadding,e.spacing,e.chart.w,e.chart.h,e.precission,e.startX,e.scaleParams),e.chart.draw(e.chart.showData,e.chart.h),e.chart.drawCurrentValue(),e.chart.timeAxis=e.chart.getTimeAxis(e.chart.showData,e.chart.w,e.chart.parentRect.height-e.chart.offY,e.period,e.timeMode,e.localization),e.chart.getOscillatorChartsAxis(),e.chart.clearGrid(),e.chart.drawTimeAxis(e.chart.timeAxis),e.chart.drawValueAxis(e.chart.valueAxis),e.chart.drawOscillatorChartsAxis(),e.chart.drawChartBorder()},fe.prototype.setOptionsLineChartTypeLine=function(t){var e=this.getActiveChartData();e.options.LineChart.typeLine=t,e.chart.showData=e.chart.processDataToShow(e.chart.selectedData,e.rightPadding,e.spacing,e.chart.w,e.chart.h,e.precission,e.startX,e.scaleParams),e.chart.draw(e.chart.showData,e.chart.h),e.chart.drawCurrentValue()},fe.prototype.addSettingBtnEvent=function(t){var e=this;t.addEventListener("click",(function(a){e.continueDrawing(a)||(e.dropDownClick(t,void 0,a),e.fillChartSettingsPanel())}))},fe.prototype.addChartSettingBtnEvent=function(){if(this.configuration.modules.headerButtons.settingsButton){var t=this.parent.querySelector(".tch-settings-button");this.dropForHidden.push(t),this.addSettingBtnEvent(t);var e=this.parent.querySelector(".tch-settings-dropdown");e.addEventListener("click",(function(t){t.stopPropagation()}));var a=this.parent.querySelectorAll(".tch-settings-dropdown .tch-tabs-list li"),i=[];i.push(e.querySelector(".tch-settings-style")),i.push(e.querySelector(".tch-settings-scales")),i.push(e.querySelector(".tch-settings-background")),i.push(e.querySelector(".tch-settings-timezone"));for(var r=0;r<a.length;r++)a[r].addEventListener("click",(function(t){for(var e=0;e<a.length;e++)a[e].classList.toggle("tch-tab-selected",!1),i[e].classList.toggle("tch-hidden",!0);t.target.classList.toggle("tch-tab-selected",!0);var r=Array.prototype.indexOf.call(a,t.target);i[r].classList.toggle("tch-hidden",!1)}))}},fe.prototype.addChartSettingsEvent=function(){if(this.configuration.modules.headerButtons.settingsButton){var t=this;this.parent.querySelector(".tch-settings-dropdown .tch-btn-default").onclick=function(){t.setDefaultChartSettings()};var e=this.parent.querySelector(".tch-settings-dropdown  .tch-btn-submit"),a=this.parent.querySelector(".tch-settings-dropdown .tch-btn-cancel");e.onclick=function(){t.submitChangedChartSettings(),t.closeAll(),t.autoSaveParams()},a.onclick=function(){t.cancelChangedChartSettings(),t.closeAll()}}},fe.prototype.submitChangedChartSettings=function(){for(var t,e=this.parent.querySelector(".tch-settings-dropdown"),a=e.querySelectorAll("input"),i=e.querySelectorAll("select"),r=e.querySelectorAll(".tch-color-picker"),s=0;s<a.length;s++)a[s].name&&(t=fe.getInputValue(a[s]),a[s].oldValue=t);for(var n=0;n<i.length;n++)i[n].name&&(t=fe.getSelectValue(a[n]),i[n].oldValue=t);for(var o=0;o<r.length;o++)r[o].getAttribute("name")&&(t=r[o].style.backgroundColor,r[o].oldValue=t);this.cleanPrevScaleParams()},fe.prototype.cancelChangedChartSettings=function(){for(var t,e=this.parent.querySelector(".tch-settings-dropdown"),a=e.querySelectorAll("input"),i=e.querySelectorAll("select"),r=e.querySelectorAll(".tch-color-picker"),s=0;s<a.length;s++)a[s].name&&(t=fe.getInputValue(a[s]),a[s].oldValue!==t&&(fe.setInputValue(a[s].oldValue,a[s]),this[fe.getFunctionName("set",a[s].name)](a[s].oldValue)));for(var n=0;n<i.length;n++)i[n].name&&(t=fe.getSelectValue(i[n]),i[n].oldValue.toString().toLowerCase()!==t.toString().toLowerCase()&&(fe.setSelectValue(i[n].oldValue,i[n]),this[fe.getFunctionName("set",i[n].name)](i[n].oldValue)));for(var o=0;o<r.length;o++){var h=r[o].getAttribute("name");h&&(t=r[o].style.backgroundColor,r[o].oldValue!==t&&(r[o].style.backgroundColor=r[o].oldValue,this[fe.getFunctionName("set",h)](r[o].oldValue)))}this.cleanPrevScaleParams()},fe.prototype.setDefaultChartSettings=function(){var t=this.parent.querySelector(".tch-settings-dropdown"),e=t.querySelectorAll("input"),a=t.querySelectorAll("select"),i=t.querySelectorAll(".tch-color-picker");this.setDefaultParamsOptions(e),this.setDefaultParamsOptions(a);for(var r=0;r<i.length;r++){var s=i[r].getAttribute("name"),n=s.split("-");s&&(i[r].oldValue=this.styles[n[0]][n[1]][n[2]],this[fe.getFunctionName("set",s)](i[r].oldValue))}},fe.prototype.setDefaultParamsOptions=function(t){for(var e,a,i=0;i<t.length;i++)if(t[i].name){var r=t[i].name.split("-");a=this.styles[r[0]][r[1]][r[2]],t[i].oldValue!==a&&("select"===t[i].tagName.toLocaleLowerCase()?fe.setSelectValue(a,t[i]):"input"===t[i].tagName.toLocaleLowerCase()&&fe.setInputValue(a,t[i]),this[e=fe.getFunctionName("set",t[i].name)]&&this[e](t[i].value))}},fe.prototype.indicators={Volume:{name:"Volume",fullName:"Volume",type:"oscillator",colors:{"up-color":"rgba(47, 194, 101, 0.4)","down-color":"rgba(209, 25, 62, 0.4)",line:"rgba(38, 56, 69, 1)"}},OBV:{name:"OBV",fullName:"On Balance Volume",colors:{line:"#820582"},lineWidth:{line:1},type:"oscillator"},StochRsi:{name:"StochRsi",fullName:"Stochastic RSI",params:{RSIP:14,K:14,D:3},colors:{KLine:"#0000CD",DLine:"#CD0000"},lineWidth:{KLine:1,DLine:1},type:"oscillator"},Bears:{name:"Bears",fullName:"Bears Power",params:{period:14},colors:{line:"#F54337"},lineWidth:{line:1},type:"oscillator"},Bulls:{name:"Bulls",fullName:"Bulls Power",params:{period:14},colors:{line:"#66CC69"},lineWidth:{line:1},type:"oscillator"},SO:{name:"SO",fullName:"Stochastic",params:{K:14,D:3},colors:{KLine:"#0000CD",DLine:"#CD0000"},lineWidth:{KLine:1,DLine:1},type:"oscillator"},ATR:{name:"ATR",fullName:"ATR",params:{period:14},colors:{line:"#FF0000"},lineWidth:{line:1},type:"oscillator"},RSI:{name:"RSI",fullName:"RSI",params:{period:14},colors:{line:"#820582"},lineWidth:{line:1},type:"oscillator"},WILLIAMSR:{name:"WILLIAMSR",fullName:"Williams %R",params:{period:14},colors:{line:"#0D0D86"},lineWidth:{line:1},type:"oscillator"},ADX:{name:"ADX",fullName:"ADX",params:{period:14},colors:{ADX:"#00FF00",DIM:"#0000FF",DIP:"#FF0000"},lineWidth:{ADX:1,DIM:1,DIP:1},type:"oscillator"},MACD:{name:"MACD",fullName:"MACD",params:{fastLength:12,slowLength:26,signalLength:9},colors:{histogram:"#ff0000",macd:"#0000ff",signal:"#00ff00"},lineWidth:{histogram:1,macd:1,signal:1},type:"oscillator"},SMA:{name:"SMA",fullName:"Simple Moving Average",params:{period:5},colors:{line:"#ff3333"},lineWidth:{line:1},type:"trend"},EMA:{name:"EMA",fullName:"Exponential Moving Average",params:{period:5},colors:{line:"#0000FF"},lineWidth:{line:1},type:"trend"},BB:{name:"BB",fullName:"Bollinger Bands",params:{period:5},colors:{U:"rgba(0, 0, 255,1)",M:"rgba(0, 0, 255,1)",L:"rgba(0, 0, 255,1)",cloud:"rgba(153,153,255,0.3)"},opacity:{cloud:.3},lineWidth:{U:1,M:1,L:1},type:"trend"},Fractal:{name:"Fractal",fullName:"Williams Fractal",params:{period:5},colors:{line:"#0000FF"},type:"trend"},Ichimoku:{name:"Ichimoku",fullName:"Ichimoku Cloud",params:{smallPeriod:12,middlePeriod:26,largePeriod:52},colors:{TenkanSen:"rgba(165, 42, 42, 1)",KijunSen:"rgba(0, 0, 255, 1)",ChinkouSpan:"rgba(255, 165, 0, 1)",SenkouSpanA:"rgba(255, 0, 0, 1)",SenkouSpanB:"rgba(0, 128, 0, 1)",A:"rgba(255, 153, 153, 0.3)",B:"rgba(153, 255, 153, 0.3)"},opacity:{A:.3,B:.3},lineWidth:{TenkanSen:1,KijunSen:1,ChinkouSpan:1,SenkouSpanA:1,SenkouSpanB:1},type:"trend"},Env:{name:"Env",fullName:"Envelope",params:{length:20,percent:25,average:"SMA"},colors:{U:"rgba(0, 0, 205, 1)",M:"rgba(205, 77, 0, 1)",L:"rgba(0, 0, 205, 1)",cloud:"rgba(153, 153, 255, 0.3)"},opacity:{cloud:.3},lineWidth:{U:1,M:1,L:1},type:"trend"},DEMA:{name:"DEMA",fullName:"Double Exponential Moving Average",params:{period:5},colors:{line:"#B83116"},lineWidth:{line:1},type:"trend"},Sar:{name:"Sar",fullName:"Parabolic Sar",params:{startAf:2,stepAf:2,maxAf:20},colors:{line:"#00FF00"},type:"trend"},STD:{name:"STD",fullName:"Standard Deviation",params:{period:14},colors:{line:"#0000FF"},lineWidth:{line:1},type:"oscillator"},Keltner:{name:"Keltner",fullName:"Keltner Channels",params:{period:20,multi:1},colors:{U:"rgba(0, 0, 255,1)",M:"rgba(0, 0, 255,1)",L:"rgba(0, 0, 255,1)",cloud:"rgba(153,153,255,0.3)"},opacity:{cloud:.3},lineWidth:{U:1,M:1,L:1},type:"trend"},Donchian:{name:"Donchian",fullName:"Donchian Channel",params:{period:20},colors:{U:"rgba(0, 0, 255,1)",M:"rgba(0, 0, 255,1)",L:"rgba(0, 0, 255,1)",cloud:"rgba(153,153,255,0.3)"},opacity:{cloud:.3},lineWidth:{U:1,M:1,L:1},type:"trend"},AO:{name:"AO",fullName:"Awesome Oscillator",params:{},colors:{lineUp:"#66CC69",lineDown:"#F54337"},lineWidth:{line:1},type:"oscillator"},AC:{name:"AC",fullName:"Acceleration/Deceleration",params:{},colors:{lineUp:"#66CC69",lineDown:"#F54337"},lineWidth:{line:1},type:"oscillator"},LRI:{name:"LRI",fullName:"Linear Regression Channel",params:{period:100,deviation:2},colors:{U:"rgba(0, 0, 255,1)",M:"rgba(0, 0, 255,1)",L:"rgba(0, 0, 255,1)",cloudU:"rgba(0,0,255,0.3)",cloudL:"rgba(255,0,0,0.3)"},opacity:{cloudU:.3,cloudL:.3},lineWidth:{U:1,M:1,L:1},type:"trend"}},fe.id=0,fe.prototype.getColorForIndicatorLine=function(t){return t?"#66CC69":"#F54337"},fe.prototype.createIndicator=function(t,e){var a=e.getActiveChart(),i=new A(a.chartData,t);if("oscillator"===i.type&&a){var r=parseInt(a.parent.style.height,10),s=a.calculateHeightOnCreate(a.oscillatorCharts,a.h,r);a.applyChartHight(s),(i=new A(a.chartData,t)).applyIndicatorHeight(s.newElement,a),e.addIndicator(i),a.applyIndicatorsHeights(s);var n=a.chartData.indicators.length-1;a.chartData.indicators.length>1&&Math.abs(a.chartData.indicators[n].top-a.chartData.indicators[n-1].top+a.chartData.indicators[n-1].h)>0&&e.refreshIndicatorsTopValues(a),a.init()}else{e.addIndicator(i),i.createData(a.chartData.data[a.chartData.typeData]),i.createShowData(),i.draw();var o=a.chartData.data[e.configuration.typeData];o&&o[0]&&e.updateIndicatorsDataPanel(o[0].date)}},fe.prototype.refreshIndicatorsTopValues=function(t){for(var e=t.chartData.indicators,a=0;a<e.length-1;a++)"oscillator"===e[a].type&&(e[a+1].top=e[a].top+e[a].h)},fe.prototype.createIndicatorsDataPanel=function(t,e){var a=document.createElement("ul");a.className="tch-indicator-id"+t.id+" tch-indicator-row tch-data-panel-row",e.appendChild(a);var i=this.getActiveChartData(),r=Object.values(t.params),s=r.length?"(".concat(r.join(", "),")"):"",n=[t.name,s,"","","","",""],o=document.createElement("div");o.classList.toggle("tch-indicator-titles",!0);for(var h=0;h<n.length;h++){var c=document.createElement("li");if(0===h&&(c.appendChild(o),a.appendChild(c)),h<2){var l=document.createElement("span");l.textContent=n[h],0===h&&i.options.Chart.indicatorTitles&&(l.classList.toggle("tch-indicator-name",!0),o.appendChild(l)),1===h&&i.options.Chart.indicatorArguments&&(l.classList.toggle("tch-indicator-arguments",!0),o.appendChild(l))}else c.textContent=n[h],a.appendChild(c);i.options.Chart.indicatorValues||6===h&&(c.style.display="none")}var A=a.querySelector("li:nth-last-child(2)"),d=a.querySelector("li:nth-last-child(3)"),p=a.querySelector("li:nth-last-child(4)"),u=!t.hidden;a.classList.toggle("tch-indicator-hidden",!u),p.indicator=t,A.indicator=t,d.indicator=t;var g=this;return p.onclick=function(t){g.hideIndicator(t),g.closePanelSettingIndicator(t)},A.onclick=function(t){g.closePanelIndicator(t,g)},d.onclick=function(t){g.createIndicatorSettingsPanel(t,g)},a},fe.prototype.updateIndicatorsDataPanel=function(t){var e=this.getActiveChartData();if(e){var a=t||e.chart.showData.length&&e.chart.showData[0].date;this.clearIndicatorsDataPanel();for(var i=0;i<e.indicators.length;i++){var r=e.indicators[i],s=this.parent.querySelector(".tch-indicator-id"+r.id);if(!s){var n=void 0;"trend"===r.type?n=this.parent.querySelector(".tch-data-indicators"):e.chart.oscillatorCharts&&e.chart.oscillatorCharts[r.id]&&e.chart.oscillatorCharts[r.id].dataPanelContainer&&(n=e.chart.oscillatorCharts[r.id].dataPanelContainer),n&&(s=this.createIndicatorsDataPanel(r,n))}if(s){var o=s.querySelector(".tch-indicator-arguments"),h=Object.values(r.params);if(o&&(o.textContent=h.length?"(".concat(h.join(", "),")"):""),r.data&&r.data[a]){var c=e.options.Chart.indicatorValues,l=s.querySelector("li:nth-last-child(1)");l.style.display=c?"block":"none",l.innerHTML="";var A=r.data[a],d=r.colors;for(var p in A)if(A.hasOwnProperty(p)&&"T"!==p&&!isNaN(A[p])){var u=document.createElement("span"),g="oscillator"===r.type?parseInt(e.precission,10)+1:parseInt(e.precission,10);u.textContent=A[p].toFixed(g);var f=d[p];f||(f=d.line),f||(f=d[p.replace("Line","")]),f||(f=d[p+"Line"]),u.style.color=f,l.appendChild(u)}}}}}},fe.prototype.createIndicatorButton=function(t,e,a,i){var r=document.createElement("div");return r.className=e,r.innerText=a,r.addEventListener("click",i),t.appendChild(r),r},fe.prototype.createIndicatorSettingsPanel=function(t,e){var a=e.parent.querySelector(".tch-indicator-inputs"),i=e.parent.querySelector(".tch-indicator-style");a.classList.toggle("tch-hidden",!1),i.classList.toggle("tch-hidden",!0);var r=e.parent.querySelector(".tch-indicator-panel");r.indicator=t.target.indicator,r.indicator.oldParams.period=JSON.parse(JSON.stringify(t.target.indicator.params)),r.indicator.oldParams.lineWidth=JSON.parse(JSON.stringify(t.target.indicator.lineWidth)),e.fillIndicatorSettingsPanel(t.target.indicator),r.classList.toggle("tch-hidden",!1)},fe.prototype.fillIndicatorSettingsPanel=function(t,e){var a,i,r,s,n,o=this,h=this.parent.querySelector(".tch-indicator-inputs table tbody"),c=this.parent.querySelector(".tch-indicator-style table tbody"),l=this.parent.querySelector(".tch-indicator-panel-header");e=e||l.children[0].textContent;for(var A=0;A<l.children.length;A++)l.children[A].classList.toggle("tch-tab-selected",!1),l.children[A].textContent===e&&l.children[A].classList.toggle("tch-tab-selected",!0);h.innerHTML="",c.innerHTML="";var d=t.params;for(var p in d)d.hasOwnProperty(p)&&(a=document.createElement("tr"),(i=document.createElement("td")).innerText=this.translation[p],a.appendChild(i),r=document.createElement("td"),"average"===p?function(){var t=document.createElement("select");t.setAttribute("name",p),t.setAttribute("id","tch-indicator-inputs-average");var e=document.createElement("option");e.setAttribute("value","SMA"),e.innerHTML="SMA";var a=document.createElement("option");a.setAttribute("value","EMA"),a.innerHTML="EMA",t.appendChild(e),t.appendChild(a),"SMA"===d[p]?t.options.selectedIndex=0:t.options.selectedIndex=1,r.appendChild(t),t.onchange=function(){1===t.options.selectedIndex?(d.average="EMA",o.setPeriodIndicator(d)):(d.average="SMA",o.setPeriodIndicator(d))},t.onmousedown=function(t){t.stopPropagation()}}():function(){var t=o.getActiveChartData().options.Chart.indicatorMaxParam,e=document.createElement("input");e.setAttribute("type","number"),e.setAttribute("required","true"),e.setAttribute("name",p),e.setAttribute("min",1),e.setAttribute("max",t),e.setAttribute("step",1),e.setAttribute("value",d[p]),e.setAttribute("currVal",d[p]),e.oninput=function(e){!isNaN(e.target.value)&&e.target.value>=1&&e.target.value<=t?e.target.setAttribute("currVal",parseInt(e.target.value,10)):e.target.value=e.target.getAttribute("currVal"),d[e.target.name]=parseInt(e.target.value,10),o.setPeriodIndicator(d)},e.onmousedown=function(t){t.stopPropagation()},r.appendChild(e)}(),a.appendChild(r),h.appendChild(a));var u=t.colors;for(var g in u)u.hasOwnProperty(g)&&(a=document.createElement("tr"),(i=document.createElement("td")).innerText=this.translation[g],a.appendChild(i),(s=document.createElement("td")).innerHTML="<div class='tch-color-picker-container'><div class='tch-color-picker' name='"+g+"'></div></div>",a.appendChild(s),c.appendChild(a));var f=t.opacity;for(var w in f)if(f.hasOwnProperty(w)){a=document.createElement("tr"),(i=document.createElement("td")).innerText=this.translation[w],a.appendChild(i),n=document.createElement("td");var v=o.getOpacityFromColor(w);n.innerHTML="<input type='range' required  name='"+w+"' min='0.1' max='1' step='0.1'  value="+v+">",n.onmousedown=function(t){t.stopPropagation()},n.oninput=function(t){f[t.target.name]=t.target.value,this.querySelector("input").value=t.target.value,o.setLineOpacity("1",t.target.name,t.target.value),o.setOpacity(t.target.name,t.target.value);var e=o.getActiveChart();e.draw(e.showData,e.h),e.drawCurrent(e.chartData.currentValue)},a.appendChild(n),c.appendChild(a)}var y=t.lineWidth;for(var m in y)y.hasOwnProperty(m)&&(a=document.createElement("tr"),(i=document.createElement("td")).innerText=this.translation[m],a.appendChild(i),(n=document.createElement("td")).innerHTML="<input type='range' required  name='"+m+"' min='1' max='10' value="+y[m]+">",n.onmousedown=function(t){t.stopPropagation()},n.oninput=function(t){y[t.target.name]=t.target.value,o.setWidthLineIndicator(y)},a.appendChild(n),c.appendChild(a));for(var B,C=c.querySelectorAll(".tch-color-picker"),D=0;D<C.length;D++){var b=C[D].getAttribute("name");b&&(b.split("-"),B=u[b],B=fe.getColor(B),C[D].style.backgroundColor=B,C[D].oldValue=C[D].style.backgroundColor,C[D].indicator=t,C[D].onchange=function(t){var e=this.getAttribute("name");o.setLine(this.indicator.id,e,t),"A"!==e&&"B"!==e&&"cloud"!==e||o.setOpacity(e)})}this.colorPickerInit();var x=this.parent.querySelector(".tch-indicator-inputs"),F=this.parent.querySelector(".tch-indicator-style"),S=this.parent.querySelector(".tch-indicator-panel-header li:first-child "),P=this.parent.querySelector(".tch-indicator-panel-header li:last-child ");0===Object.keys(d).length?(x.classList.add("tch-hidden"),F.classList.remove("tch-hidden"),S.classList.toggle("tch-tab-selected",!1),S.classList.toggle("tch-hidden",!0),P.classList.toggle("tch-tab-selected",!0)):S.classList.toggle("tch-hidden",!1)},fe.prototype.setLineOpacity=function(t,e,a){var i=this.parent.querySelector(".tch-indicator-panel"),r=i.indicator.colors[e],s=r.substring(4,r.length-1).replace(/ /g,"").split(",");s[3]=a;var n="rgba"+s[0]+","+s[1]+","+s[2]+","+s[3]+")";i.indicator.colors[e]=n},fe.prototype.setOpacity=function(t){var e=this.parent.querySelector(".tch-indicator-panel"),a=this.convertRGBtoRGBA(e.indicator.colors[t]),i=a.substring(4,a.length-1).replace(/ /g,"").split(",");e.querySelector("input[name="+t+"]").value=i[3],e.querySelector(".tch-color-picker[name="+t+"]").style.backgroundColor=a},fe.prototype.convertRGBtoRGBA=function(t){return t.indexOf("rgba")>-1?t:t.indexOf("rgb")>-1?t.replace(")",","+a+" )").replace("rgb","rgba"):void 0},fe.prototype.getOpacityFromColor=function(t){var e=this.parent.querySelector(".tch-indicator-panel").indicator.colors[t];return e.substring(4,e.length-1).replace(/ /g,"").split(",")[3]},fe.prototype.setLine=function(t,e,a){this.parent.querySelector(".tch-indicator-panel").indicator.colors[e]=a;var i=this.getActiveChart();i.draw(i.showData,i.h),i.drawCurrent(i.chartData.currentValue)},fe.prototype.setPeriodIndicator=function(t){var e=this.parent.querySelector(".tch-indicator-panel"),a=this.getActiveChart();for(var i in t)t.hasOwnProperty(i)&&(e.indicator.params[i]=t[i]);this.addIndicator(e.indicator),a.chartData.updateIndicatorsData(),a.chartData.updateCurrentIndicatorsData(),this.updateIndicatorsDataPanel(),a.redrawOscillators()},fe.prototype.setWidthLineIndicator=function(t){var e=this.getActiveChart(),a=this.parent.querySelector(".tch-indicator-panel");for(var i in t)t.hasOwnProperty(i)&&(a.indicator.lineWidth[i]=t[i]);e.draw(e.showData,e.h),e.drawCurrent(e.chartData.currentValue)},fe.prototype.closePanelIndicator=function(t,e){t.target.indicator.chartData.chart.setActiveChart();var a=e.getActiveChart();a.removeIndicator(t.target.indicator),t.target.parentElement.parentElement.removeChild(t.target.parentElement),e.closePanelSettingIndicator(t,e),a.init(!0),e.autoSaveParams()},fe.prototype.hideIndicator=function(t){t.target.indicator.chartData.chart.setActiveChart();var e=this.getActiveChart(),a=e.chartData.getIndicatorIndex(e.chartData.indicators,t.target.indicator);e.chartData.indicators[a].hidden=!e.chartData.indicators[a].hidden,t.target.parentNode.classList.toggle("tch-indicator-hidden",e.chartData.indicators[a].hidden),e.init(!0),this.autoSaveParams()},fe.prototype.addPanelIndicatorEvent=function(){var t=this.parent.querySelector(".tch-indicator-panel"),e=t.querySelector(".tch-btn-cancel"),a=t.querySelector(".tch-btn-submit"),i=t.querySelector(".tch-btn-default"),r=this;e.addEventListener("click",(function(e){r.cancelChangedIndicatorSettings(),r.closePanelSettingIndicator(e,t)})),a.addEventListener("click",(function(e){r.submitIndicator(e,t),r.autoSaveParams()})),i.addEventListener("click",(function(e){r.setDefaultIndicatorSettings(e,t),e.preventDefault(),e.stopPropagation()}))},fe.prototype.cancelChangedIndicatorSettings=function(){for(var t,e=this.parent.querySelector(".tch-indicator-panel"),a=e.querySelectorAll(".tch-color-picker"),i=0;i<a.length;i++){var r=a[i].getAttribute("name");r&&(t=a[i].style.backgroundColor,t=fe.getColor(t),a[i].oldValue!==t&&(a[i].style.backgroundColor=a[i].oldValue,this.setLine(e.indicator.id,r,a[i].oldValue)))}var s=this.getActiveChart();this.setPeriodIndicator(e.indicator.oldParams.period),this.setWidthLineIndicator(e.indicator.oldParams.lineWidth),s.redrawOscillators()},fe.prototype.setDefaultIndicatorSettings=function(t,e){var a=e.querySelector(".tch-indicator-panel-header").querySelector(".tch-tab-selected").textContent,i=this.indicators[e.indicator.name];this.fillIndicatorSettingsPanel(i,a)},fe.prototype.closePanelSettingIndicator=function(t){var e=this.parent.querySelector(".tch-indicator-panel"),a=this.parent.querySelector(".tch-indicator-inputs"),i=this.parent.querySelector(".tch-indicator-style");e.classList.toggle("tch-hidden",!0),a.classList.toggle("tch-hidden",!1),i.classList.toggle("tch-hidden",!0),t.preventDefault(),t.stopPropagation()},fe.prototype.getInputByName=function(t,e,a){var i=t.querySelectorAll("input[name='"+e+"']");return i[a]?i[a]:i[i.length-1]},fe.prototype.getInputByNameColor=function(t,e){for(var a=t.querySelectorAll(".tch-color-picker","[name='"+e+"']"),i=0;i<a.length;i++)if(a[i].getAttribute("name")===e)return a[i].style.backgroundColor},fe.prototype.getSelectByName=function(t,e,a){return t.querySelectorAll("select[name='"+e+"']")[a]},fe.prototype.submitIndicator=function(t,e){var a=e.indicator.params,i=!1;for(var r in a){var s;a.hasOwnProperty(r)&&(s="average"===r?this.getSelectByName(e,r,0).selectedOptions[0].value:parseInt(this.getInputByName(e,r,0).value,10),e.indicator.params[r]!==s&&(i=!0),e.indicator.params[r]=s)}var n=e.indicator.colors;for(var o in n)if(n.hasOwnProperty(o)){var h=this.getInputByNameColor(e,o,0);e.indicator.colors[o]=h}var c=e.indicator.opacity;for(var l in c){var A=this.getInputByName(e,l,0).value;e.indicator.opacity[l]=A}var d=e.indicator.lineWidth;for(var p in d)if(d.hasOwnProperty(p)){var u=this.getInputByName(e,p,1).value;e.indicator.lineWidth[p]=u}this.addIndicator(e.indicator);var g=this.getActiveChart();i?g.chartData.updateIndicatorsData():(g.draw(g.showData,g.h),g.drawCurrent(g.chartData.currentValue)),this.updateIndicatorsDataPanel(),e.classList.toggle("tch-hidden",!0)},fe.prototype.addIndicator=function(t){var e=this.getActiveChartData(),a=e.getIndicatorIndex(e.indicators,t);a>-1?(e.indicators[a].params=t.params,e.indicators[a].lineWidth=t.lineWidth,e.indicators[a].colors=t.colors,e.indicators[a].opacity&&(e.indicators[a].opacity=t.opacity)):e.indicators.push(t)},fe.prototype.addHiddenIndicatorPanelInputStyleEvent=function(){var t=this.parent.querySelector(".tch-indicator-inputs"),e=this.parent.querySelector(".tch-indicator-style"),a=this.parent.querySelector(".tch-indicator-panel-header li:first-child "),i=this.parent.querySelector(".tch-indicator-panel-header li:last-child ");t.classList.remove("tch-hidden"),e.classList.add("tch-hidden"),a.classList.toggle("tch-tab-selected",!0),i.classList.toggle("tch-tab-selected",!1),a.addEventListener("click",(function(){t.classList.remove("tch-hidden"),e.classList.add("tch-hidden"),a.classList.toggle("tch-tab-selected",!0),i.classList.toggle("tch-tab-selected",!1)})),i.addEventListener("click",(function(){t.classList.add("tch-hidden"),e.classList.remove("tch-hidden"),a.classList.toggle("tch-tab-selected",!1),i.classList.toggle("tch-tab-selected",!0)}))},fe.prototype.convertToDTO=function(){var t={};return t.version=this.configuration.version,t.isSidebarHidden=this.isSidebarHidden,t.isHeaderHidden=this.isHeaderHidden,t.isFullScreen=this.isFullScreen,t.isDataPanel=this.isDataPanel,t.lang=this.configuration.lang,t.activeSpliter=this.activeSpliter,t.activeChartIndex=this.activeChartIndex,t.params=Xt(this.configuration),t.settings=Xt(this.settings),t.activeTab=this.activeTab,t.groupCharts=this.convertGroupChartsToDTO(),t.initializationDone=this.initializationDone,t},fe.prototype.convertGroupChartsToDTO=function(){var t={};for(var e in this.groupCharts)if(this.groupCharts.hasOwnProperty(e)){var a=this.groupCharts[e];t[e]={},t[e].activeIndex=a.activeIndex,t[e].activeTabSpliter=a.activeTabSpliter,t[e].name=a.name,t[e].chartData=[];for(var i=0;i<a.chartData.length;i++){var r=a.chartData[i].convertToDTO();t[e].chartData.push(r)}}return t},fe.prototype.setChartDatasState=function(t){for(var e in this.groupCharts)if(this.groupCharts.hasOwnProperty(e))for(var a=this.groupCharts[e],i=0;i<a.chartData.length;i++)a.chartData[i].state=t},fe.prototype.saveParamsToFile=function(){return this.setChartDatasState("default"),JSON.stringify(this.convertToDTO())},fe.prototype.restoreParams=function(t){this.charts=[],this.convertFromDTO(t),this.initializationDone=!1,this.setTabsContainerHeight(),this.applyRestoredParams(this.groupCharts[this.activeTab].chartData[this.groupCharts[this.activeTab].activeIndex])},fe.prototype.autoSaveParams=function(){this.autoSaveTimeout&&clearTimeout(this.autoSaveTimeout);var t=this;this.autoSaveTimeout=setTimeout((function(){t.autoSave()}),this.defaultParams.setTimeoutforSave)},fe.prototype.autoSave=function(){Object.keys(this.groupCharts).length<5&&this.activateAddTabBtn(!0)},fe.prototype.applyDefaultParams=function(){if(this.initializationDone){this.initializationDone=!1,this.getKeyForLocalStorage(),this.setDefaultParamsPanel(),this.closeSettingsPanel(),this.charts=[],this.groupCharts={},this.activeSpliter=this.defaultParams.activeSpliter,fe.tabsId=1,this.clearTabContainer(),this.createTabs(),this.setTabsContainerHeight(),this.setDefaultSideBar();var t=this.setDefaultParamsChart(this.groupCharts[this.activeTab].chartData[0]);this.activateTabContent(),this.applyRestoredParams(t),this.setOptionsChartTypeThemes("defaultThema"),this.autoSaveTimeout=setTimeout((function(){}),this.defaultParams.setTimeoutforSave)}},fe.prototype.setDefaultSideBar=function(){if(this.configuration.modules.isSideBarCreate){for(var t=this.parent.querySelector(".tch-sidebar-container"),e=t.querySelectorAll(".tch-dropdown-container.active"),a=0;a<e.length;a++)e[a].classList.toggle("active",!1);this.deactivateSideBarElements(t);var i=this.getActiveChartData();!i&&null===i||i.isStayDrawingMode||(i.state="default")}},fe.prototype.setDefaultParamsChart=function(t,e){var a,i=t;for(var r in a=e?t.setDefaultParamsOnUpdate():oe.defaultParams)a.hasOwnProperty(r)&&(i[r]=JSON.parse(JSON.stringify(a[r])));return i},fe.prototype.setDefaultParamsPanel=function(t){t?(this.isHeaderHidden=t.isHeaderHidden?t.isHeaderHidden:this.defaultParams.paramsPanels.isHeaderHidden,this.isSidebarHidden=t.isSidebarHidden?t.isSidebarHidden:this.defaultParams.paramsPanels.isSidebarHidden,this.isFullScreen=void 0!==t.isFullScreen?t.isFullScreen:this.defaultParams.paramsPanels.isFullScreen,this.isDataPanel=t.isDataPanel?t.isDataPanel:this.defaultParams.paramsPanels.isDataPanel):(this.isSidebarHidden=this.defaultParams.paramsPanels.isSidebarHidden,this.isHeaderHidden=this.defaultParams.paramsPanels.isHeaderHidden,this.isFullScreen=this.defaultParams.paramsPanels.isFullScreen,this.isDataPanel=this.defaultParams.paramsPanels.isDataPanel)},fe.prototype.closeSettingsPanel=function(){var t=this.parent.querySelector(".tch-line-settings-container"),e=this.parent.querySelector(".tch-indicator-panel");t&&t.classList.toggle("tch-hidden",!0),e&&e.classList.toggle("tch-hidden",!0)},fe.prototype.fillQuotationsSettings=function(){var t=this.settings.quotations;this.createQuotationsTabs(t),this.fillquotationsDropdown(t);var e=this.getActiveChartData();null!==e&&this.setQuotationDropDownValue(e.pair.FullName)},fe.prototype.convertFromDTO=function(t){this.activeSpliter=t.activeSpliter,this.activeChartIndex=t.activeChartIndex,this.settings=t.settings,this.isSidebarHidden=t.isSidebarHidden,this.isHeaderHidden=t.isHeaderHidden,this.isFullScreen=t.isFullScreen,this.isDataPanel=t.isDataPanel,this.groupCharts=t.groupCharts,this.initializationDone=t.initializationDone,this.applyParamsDTO(),this.convertChartsArrayFromDTO(t)},fe.prototype.applyParamsDTO=function(){this.parent.classList.toggle("tch-fullscreen-mode-on",this.isFullScreen),this.resize(),this.recreateSideBarMenu(),this.recreateSettingPanel()},fe.prototype.convertChartsArrayFromDTO=function(t){this.groupChartsInit(),this.setListenersOnChartData(),this.refreshTabContainer(t),this.setTabsContainerHeight(),this.activateTabContent(),5===Object.keys(this.groupCharts).length&&this.activateAddTabBtn(!1)},fe.prototype.groupChartsInit=function(){for(var t in this.groupCharts)if(this.groupCharts.hasOwnProperty(t)){for(var e=[],a=0;a<this.groupCharts[t].chartData.length;a++){var i=new oe(this);i.convertFromDTO(this.groupCharts[t].chartData[a]),e.push(i)}this.groupCharts[t].chartData=e}},fe.prototype.setListenersOnChartData=function(){for(var t in this.connector.listeners=[],this.groupCharts)if(this.groupCharts.hasOwnProperty(t))for(var e=0;e<this.groupCharts[t].chartData.length;e++)this.groupCharts[t].chartData[e].techChart=this,this.groupCharts[t].chartData[e].init()},fe.prototype.refreshTabContainer=function(t){this.clearTabContainer();var e=Object.keys(this.groupCharts),a=e[e.length-1].split("-");for(var i in fe.tabsId=parseInt(a[1],10)+1,this.groupCharts)this.groupCharts.hasOwnProperty(i)&&(this.createNewTabContainer(i),this.setTabName(i));this.setTabActive(t.activeTab)},fe.prototype.applyRestoredParams=function(t){this.setQuotationDropDownValue(t.pair.FullName),this.setCursorType(t.cursorType),this.setChartType(t.chartType),this.setPeriod(t.period),this.setActiveChartPeriod(t.period),this.setPeriodBtn(this.setActiveChartPeriod(t.period)),this.setActiveDrawingObjectsLockedStateIcon(),this.setMagnetModeBtn(),this.setRouleteBtn(this.charts[0].chartData.state),this.setStayDrawingModeBtn(),this.setShowHideDrawing(),this.setActiveSpliterButton(),this.clearIndicatorsDataPanel(),this.applySettingsDataPanelHidden(),this.applySettingsSidebarHidden(),this.applySettingsHeaderHidden(),this.applySettingsFullscreenBtn(),this.moveElements.moveResize()},fe.prototype.clearIndicatorsDataPanel=function(){this.configuration.modules.chartElements.isDataPanelCreate&&(this.parent.querySelector(".tch-data-indicators").innerHTML="")},fe.prototype.setActiveChartPeriod=function(t){var e,a=this.getPeriods();for(var i in a)if(a.hasOwnProperty(i)&&(a[i].value===t||a[i].name===t)){e=a[i].value;break}return e},fe.prototype.setActiveChartParams=function(){var t=this.getActiveChartData();this.setTypeDataBtn(t.typeData),this.setPeriodBtn(this.setActiveChartPeriod(t.period)),this.setActiveFooterBtn(t.period),this.setActiveCursorType(t.cursorType),this.setActiveChartType(t.chartType),this.setQuotationDropDownValue(t.pair.FullName),this.setActiveStatePipsCalc(),this.hiddenSymbolDescription(t.options.Chart.symbolDescription),this.hiddenOhlcValue(t.options.Chart.ohlcValues),this.setActiveChartZoomBtn(t.zoomSteps),this.hideElementDataPanel(),this.setDefaultSideBar(),this.hiddenCandleTimer(t.options.Chart.candleTimer),this.setOptionsChartTypeThemes(t.options.Chart.typeThemes)},fe.prototype.setActiveChartZoomBtn=function(t){this.configuration.modules.sideBarButtons.zoomButton&&(this.parent.querySelector(".tch-zoomout-btn").disabled=!t.length)},fe.prototype.deactivateSideBarElements=function(t){t.querySelectorAll(".tch-active").forEach((function(t){return t.classList.toggle("tch-active",!1)}))},fe.prototype.setState=function(t){var e=this.getActiveChartData();if(this.removeRoulete(t),"default"!==e.state&&e.editDrawingObject&&!e.isStayDrawingMode)return!1;if(e.editDrawingObject&&e.isStayDrawingMode&&e.editDrawingObject.drawingStage.max>=e.editDrawingObject.drawingStage.current)return!1;if(e.state=e.state===t?"default":t,e.state.indexOf("drawing")>-1){if(!e.chart)return!1;var a=!1;e.editDrawingObject&&(e.editDrawingObject.state="normal",e.editDrawingObject=null,a=!0),e.activeDrawingObject&&(e.activeDrawingObject.state="normal",e.activeDrawingObject=null,a=!0),a&&(e.chart.redrawInfo(),e.chart.redrawDrawingObjects())}return!0},fe.prototype.getActiveChartData=function(){return this.charts.length>this.activeChartIndex?this.charts[this.activeChartIndex].chartData:null},fe.prototype.getActiveChart=function(){return this.charts.length>this.activeChartIndex?this.charts[this.activeChartIndex]:null},fe.prototype.getVersion=function(){return this.configuration.version},fe.prototype.cursorChangeImage=function(t){this.configuration.modules.sideBarButtons.cursorTypeButton&&this.parent.querySelector(".tch-cursorType-container").setAttribute("actualtype",t)},fe.prototype.deactivateMenuTypeAll=function(){this.activeMenuContainer.forEach((function(t){t.classList.toggle("active",!1)}))},fe.prototype.makeTchTextValue=function(t){return t.toLowerCase().replace(/\s/,"-").replace(/\s.+/,"")},fe.prototype.sortIndicatorsfromName=function(t){var e=this;return Object.values(t).sort((function(t,a){var i=e.makeTchTextValue(t.fullName);t=e.translation[i];var r=e.makeTchTextValue(a.fullName);return t>(a=e.translation[r])?1:t<a?-1:0}))},fe.prototype.fillIndicatorsDropdown=function(t){var e=this;if(this.configuration.modules.headerButtons.indicatorButton&&this.configuration.modules.isHeaderCreate){var a=this.parent.querySelector(".tch-indicators-list");a.innerHTML="",t&&0!==Object.keys(t).length?(t=this.sortIndicatorsfromName(t),Object.keys(t).forEach((function(i){var r=t[i],s=document.createElement("li"),n=e.makeTchTextValue(r.fullName);s.innerText=e.translation[n],s.setAttribute("tch-text",n),s.addEventListener("click",(function(){e.createIndicator(r,e),e.autoSaveParams()})),a.appendChild(s)}))):a.innerHTML="<li style='text-align: center' tch-text='no-indicators-mached' >"+this.translation["indicator-not-found"]+"</li>"}},fe.prototype.sortAnyCase=function(t,e){return t.FullName.toLowerCase()>e.FullName.toLowerCase()?1:t.FullName.toLowerCase()<e.FullName.toLowerCase()?-1:0},fe.prototype.createQuotationsTabs=function(t){var e=this;if(this.configuration.modules.headerButtons.searchQuotationButton){var a=this.parent.querySelector(".tch-tabs-list"),i=[],r=t.map((function(t){return t.Category})).filter((function(t){return-1===i.indexOf(t)&&i.push(t)})).sort();if(r.length>=1){var s=document.createElement("li");s.textContent=this.translation.all,s.setAttribute("tch-text","all"),s.className="tch-tab-selected",a.appendChild(s),r.forEach((function(t){var i=e.makeTchTextValue(t);(s=document.createElement("li")).textContent=e.translation[i],s.setAttribute("tch-text",i),a.appendChild(s)}))}}},fe.prototype.fillquotationsDropdown=function(t){var e=this;if(this.configuration.modules.headerButtons.searchQuotationButton){var a=this.parent.querySelector(".tch-filtered-quatation tbody"),i=this.parent.querySelector(".tch-search");if(i.style.direction="ltr",a.innerHTML="",t&&0!==t.length){(t=t.sort(this.sortAnyCase)).forEach((function(r){var s=document.createElement("tr");s.classList.add("tch-row-quatation");var n=s.insertCell(-1);n.innerText=r.ID,n.style.display="none";var o=r.FullName+"&#x200E;",h=s.insertCell(-1);h.innerHTML="<span>".concat(o,"</span>");var c=s.insertCell(-1);c.innerText=e.translation[r.Category.toLocaleLowerCase()],c.setAttribute("tch-text",e.makeTchTextValue(r.Category));var l=s.insertCell(-1);l.innerText="",h.style.width="65%",c.style.width="30%",l.style.width="5%",s.onclick=function(a){return e.onSelectInstrument(a,r,t,e,i)},a.appendChild(s)})),this.configuration.modules.signals&&this.signalsList&&this.updateSignalsDropdown(this.signalsList);var r=this.parent.querySelector(".tch-search-container");r.oncloseall=function(){if(r.classList.contains("tch-dropdown-container-active")){var t=e.getActiveChartData(),a=e.setTextWidth(),s=a.maxWidth,n=a.optimalWidth,o=t.pair.FullName;o.length>=s?i.value=o.substring(0,n).concat("..."):i.value=o}}}else a.innerHTML="<tr><td tch-text='no-financial' style='text-align: left'>".concat(this.translation["no-financial"],"</td></tr>")}},fe.prototype.setTextWidth=function(){var t=14,e=13,a=this.getActiveChartData().options.Chart.typeThemes;return this.configuration.listTemesDesign.includes(a)&&(t=24,e=25),{maxWidth:t,optimalWidth:e}},fe.prototype.onSelectInstrument=function(t,e,a,i,r){i.charts[i.activeChartIndex].chartData.editDrawingObject=null,i.charts[i.activeChartIndex].chartData.state="default",i.charts[i.activeChartIndex].chartData.isWaitForData=!1,i.deactivateMenuTypeAll(),i.setQuotation(e),r&&(r.value=e.FullName),i.groupCharts[i.activeTab].name=e.FullName,i.setTabName(i.activeTab),i.autoSaveParams()},fe.prototype.addBasketBtnEvent=function(){var t=this;this.configuration.modules.sideBarButtons.basketButton&&(this.parent.querySelector(".tch-basket-btn").onclick=function(e){var a=t.getActiveChart();t.continueDrawing(e),a&&(a.removeAllDrawingObjects(),a.chartData.state="default",t.setRouleteBtn("Off"),a.removeAllDrawingObjectsOtherCharts(),t.autoSaveParams()),t.deactivateMenuTypeAll(),t.closeAll(),t.deactivateMenuTypeAll()})},fe.prototype.addLockBtnEvent=function(){var t=this;this.configuration.modules.sideBarButtons.lockButton&&(this.parent.querySelector(".tch-lock-btn").onclick=function(e){t.continueDrawing(e),t.switchLockBtn(),t.closeAll(),t.autoSaveParams()})},fe.prototype.checkStateLockBtn=function(){var t=this.parent.querySelector(".tch-lock-btn"),e=this.getActiveChartData();t.classList.toggle("tch-active",e.isDrawingObjectsLocked),t.parentElement.classList.toggle("tch-active",e.isDrawingObjectsLocked)},fe.prototype.switchLockBtn=function(){this.parent.querySelector(".tch-lock-btn").classList.toggle("tch-active",!this.getActiveChartData().isDrawingObjectsLocked);for(var t=0;t<this.charts.length;t++){var e=this.charts[t].chartData;e.isDrawingObjectsLocked=!e.isDrawingObjectsLocked}},fe.prototype.addMagnetModeEvent=function(){var t=this;this.configuration.modules.sideBarButtons.magnetModeButton&&(this.parent.querySelector(".tch-magnet-mode-btn").onclick=function(e){t.continueDrawing(e);for(var a=0;a<t.charts.length;a++)t.charts[a].chartData.isMagnetMode=!t.charts[a].chartData.isMagnetMode;t.setMagnetModeBtn(),t.closeAll(),t.autoSaveParams()})},fe.prototype.setMagnetModeBtn=function(){this.configuration.modules.sideBarButtons.magnetModeButton&&this.parent.querySelector(".tch-magnet-mode-btn").classList.toggle("tch-active",this.getActiveChartData().isMagnetMode)},fe.prototype.continueDrawing=function(){return!1},fe.prototype.finishDrawing=function(){var t=this.getActiveChartData();t.editDrawingObject&&("drawingEllipse"===t.state&&t.editDrawingObject.drawingStage.current<2&&t.editDrawingObject.remove(),"drawingPolyline"===t.state&&t.editDrawingObject.updateLastPointForBreak(),this.lostFocusDrawingObject())},fe.prototype.addZoomInBtnEvent=function(){var t=this;if(this.configuration.modules.sideBarButtons.zoomButton){var e=this.parent.querySelector(".tch-zoomin-btn");e.onclick=function(a){t.continueDrawing(a)||(t.finishDrawing(),t.getActiveChartData().state="zoomIn",t.deactivateMenuTypeAll(),e.classList.toggle("tch-active",!0),t.closeAll())}}},fe.prototype.addZoomOutBtnEvent=function(){var t=this;if(this.configuration.modules.sideBarButtons.zoomButton){var e=this.parent.querySelector(".tch-zoomout-btn");e.disabled=!0,e.onclick=function(e){t.continueDrawing(e)||(t.getActiveChart().zoomOut(),t.autoSaveParams(),t.closeAll())}}},fe.prototype.addZoomZeroBtnEvent=function(){var t=this;if(this.configuration.modules.sideBarButtons.zoomButton){var e=this.parent.querySelector(".tch-zoomzero-btn");e.disabled=!0,e.onclick=function(e){t.continueDrawing(e)||(t.getActiveChart().zoomOutZero(),t.autoSaveParams(),t.closeAll())}}},fe.prototype.addSaveBtnEvent=function(){var t=this;this.configuration.modules.sideBarButtons.saveRestoreButtons&&(this.parent.querySelector(".tch-save-btn").onclick=function(e){t.continueDrawing(e);var a=t.saveParamsToFile(),i=new Date,r=i.getDate(),s=i.getMonth()+1,n=i.getFullYear();e.currentTarget.href=window.URL.createObjectURL(new Blob([a],{type:"octet/stream"})),e.currentTarget.download="saveparams"+r+s+n+".json"})},fe.prototype.addScreenshotBtnEvent=function(){var t=this,e=vt.detectBrowser(window,document);if(this.configuration.modules.headerButtons.screenshotButton&&"safari"!==e.bro){var a=this;this.parent.querySelector(".tch-screenshot-btn").onclick=function(e){t.continueDrawing(e);var i=a.parent.querySelector(".tch-container");t.prepareContainer(i),ce()(i,{useCORS:!1}).then((function(e){var i=e.toDataURL("image/jpeg",.9);i.replace("image/jpeg","image/octet-stream");var r=t.createNameScreenShot(a);t.downloadBase64File(i,r)})),t.prepareContainer(i)}}},fe.prototype.downloadBase64File=function(t,e){var a=document.createElement("a");document.body.appendChild(a),a.href=t,a.target="_self",a.download=e,a.click()},fe.prototype.createNameScreenShot=function(t){var e=new Date,a=e.getDate(),i=e.getMonth()+1,r=e.getFullYear(),s=t.getActiveChartData(),n=s.period;return s.pair.FullName+"_"+n+"_"+a+i+r+".jpeg"},fe.prototype.prepareContainer=function(t){t.classList.toggle("tch-header-hidden"),this.isHeaderHidden=t.classList.contains("tch-header-hidden"),this.resize(),this.setTabsContainerHeight()},fe.prototype.addRestoreBtnEvent=function(){var t=this;this.configuration.modules.sideBarButtons.saveRestoreButtons&&(this.parent.querySelector(".tch-restore-btn").onchange=function(e){t.continueDrawing(e),t.readFile(e.target.files[0]),e.stopPropagation(),e.preventDefault()})},fe.prototype.readFile=function(t){var e=this,a=new FileReader;a.onload=function(){e.restoreParams(JSON.parse(a.result)),e.autoSaveParams()},a.readAsText(t)},fe.prototype.addDefaultBtnEvent=function(){var t=this;this.configuration.modules.sideBarButtons.saveRestoreButtons&&(this.parent.querySelector(".tch-default-btn").onclick=function(){t.lostFocusDrawingObject(),t.applyDefaultParams();var e=t.parent.querySelector(".tch-data-panel");e&&(e.style.top=t.defaultTopDataPanel+"px",e.style.left=t.defaultLeftDataPanel+"px"),t.resize()},this.setRouleteBtn("Off"))},fe.prototype.addStayDrawingModeBtn=function(){var t=this;this.configuration.modules.sideBarButtons.stayDrawingModeButton&&(this.parent.querySelector(".tch-stay-drawing-mode-btn").onclick=function(e){t.continueDrawing(e);for(var a=0;a<t.charts.length;a++)t.charts[a].chartData.isStayDrawingMode=!t.charts[a].chartData.isStayDrawingMode;t.setStayDrawingModeBtn(),t.closeAll(),t.autoSaveParams()})},fe.prototype.setStayDrawingModeBtn=function(){this.configuration.modules.sideBarButtons.stayDrawingModeButton&&this.parent.querySelector(".tch-stay-drawing-mode-btn").classList.toggle("tch-active",this.getActiveChartData().isStayDrawingMode)},fe.prototype.addShowHideDrawing=function(){var t=this;if(this.configuration.modules.sideBarButtons.hideDrowingObjectButton){var e=this.parent.querySelector(".tch-show-hide-drawing-btn");e.onclick=function(a){t.continueDrawing(a)||(t.hiddeAllDrawing(e),t.closeAll(),t.autoSaveParams())}}},fe.prototype.hiddeAllDrawing=function(){for(var t=0;t<this.charts.length;t++)this.charts[t].chartData.isShowDrawingObjects=!this.charts[t].chartData.isShowDrawingObjects,this.charts[t]&&this.charts[t].chartData.drawingObjects.length&&(this.charts[t].redrawInfo(),this.charts[t].redrawDrawingObjects());this.setShowHideDrawing(),this.autoSaveParams()},fe.prototype.setShowHideDrawing=function(){this.configuration.modules.sideBarButtons.hideDrowingObjectButton&&this.parent.querySelector(".tch-show-hide-drawing-btn").classList.toggle("tch-active",!this.getActiveChartData().isShowDrawingObjects)},fe.prototype.addClickTabQuatation=function(){var t=this;if(this.configuration.modules.headerButtons.searchQuotationButton){var e=this.parent.querySelector(".tch-search"),a=this.parent.querySelector(".tch-search-dropdown .tch-tabs-list");a.addEventListener("click",(function(i){if("li"===i.target.localName){[].slice.call(a.querySelectorAll(".tch-tabs-list li")).forEach((function(t){t.classList.toggle("tch-tab-selected",!1)})),i.target.classList.toggle("tch-tab-selected",!0);var r=i.target.getAttribute("tch-text"),s=e.value.replace(/[^A-Za-zА-Яа-яЁё0-9]/g,""),n=t.filterQuotation(r,s);t.fillquotationsDropdown(n,r)}}))}},fe.prototype.filterQuotation=function(t,e){e=e.replace(/[^A-Za-zА-Яа-я0-9]/g,"");var a=t.toLowerCase(),i=this.settings.quotations;"all"!==a&&(i=i.filter((function(t){return t.Category.toLowerCase()===a})));var r=new RegExp(e,"i","g");return""!==e&&(i=i.filter((function(t){return r.test(t.FullName.replace(/[^A-Za-zА-Яа-я0-9]/g,""))}))),i},fe.prototype.addIndicatorBtn=function(){var t=this;if(this.configuration.modules.headerButtons.indicatorButton){var e=this.parent.querySelector(".tch-indicator-container"),a=e.querySelector(".tch-indicator-search");this.dropForHidden.push(e),e.addEventListener("click",(function(i){t.continueDrawing(i)||(a.value="",t.filtrIndicator(),t.dropDownClick(e,void 0,i),a.focus())}))}},fe.prototype.addLayoutBtnEvents=function(){var t=this;if(this.configuration.modules.headerButtons.splitterButton){var e=this.parent.querySelector(".tch-chart-layouts-container");this.dropForHidden.push(e),e.addEventListener("click",(function(a){t.dropDownClick(e,void 0,a)})),e.querySelector(".tch-chart-layouts-dropdown .tch-layout-header").addEventListener("click",(function(t){return t.stopPropagation()})),e.querySelectorAll(".tch-chart-layouts-dropdown li").forEach((function(a){a.addEventListener("click",(function(a){var i=parseInt(a.target.getAttribute("tch-spliter-template"),10);if(t.activeSpliter!==i-1){t.activeSpliter=i-1,t.setActiveSpliterButton(),t.charts=t.createChartsArray(t.charts),t.groupCharts[t.activeTab].chartData=t.getChartDatas(t.charts);for(var r=t.groupCharts[t.activeTab].chartData.length,s=0;s<r;s++)t.groupCharts[t.activeTab].chartData[s].hasPrevData=!1;t.groupCharts[t.activeTab].activeTabSpliter=t.activeSpliter,t.groupCharts[t.activeTab].activeIndex=t.activeChartIndex;var n=t.createChartContainers();t.createCharts(n),t.autoSaveParams()}e.classList.toggle("tch-dropdown-container-active",!1)}))}))}},fe.prototype.addCursorTypeEvent=function(){var t=this;if(this.configuration.modules.sideBarButtons.cursorTypeButton){var e=this.parent.querySelector(".tch-cursorType-container");this.dropForHidden.push(e),e.onclick=function(a){t.continueDrawing(a),t.dropDownClick(e,void 0,a);var i=e.getAttribute("actualtype");t.setCursorType(i)},this.connector&&this.connector.options&&"widgets"===this.connector.options.type?e.setAttribute("actualType-active",this.cursorType):e.setAttribute("actualType",this.cursorType)}},fe.prototype.addLineTypeEvent=function(){var t=this;if(this.configuration.modules.sideBarButtons.drawingObjectsButton){var e=this.parent.querySelector(".tch-lineType-container");this.dropForHidden.push(e),e.onclick=function(a){t.continueDrawing(a),t.dropDownClick(e,void 0,a)}}},fe.prototype.addBrushTypeEvent=function(){var t=this;if(this.configuration.modules.sideBarButtons.brushTypeButton){var e=this.parent.querySelector(".tch-brushType-container");this.dropForHidden.push(e),e.onclick=function(a){t.continueDrawing(a),t.dropDownClick(e,void 0,a)}}},fe.prototype.addTextTypeEvent=function(){var t=this;if(this.configuration.modules.sideBarButtons.textTypeButton){var e=this.parent.querySelector(".tch-textType-container");this.dropForHidden.push(e),e.onclick=function(a){t.continueDrawing(a),t.dropDownClick(e,void 0,a)}}},fe.prototype.dropDownClick=function(t,e,a){a.stopPropagation();var i=t.classList.contains("tch-dropdown-container-active");this.closeAll(),t.classList.toggle("tch-dropdown-container-active",e||!i)},fe.prototype.dropDownClickMore=function(t,e){e.stopPropagation();var a=this.parent.querySelector(".tch-more-btn"),i=a.classList.contains("tch-more-active");this.closeAll(),a.classList.toggle("tch-more-active",!i),a.firstElementChild.firstElementChild.classList.toggle("tch-more-active",!i)},fe.prototype.addSearchIndicatorEvents=function(){var t=this;if(this.configuration.modules.headerButtons.indicatorButton){var e=this.parent.querySelector(".tch-indicator-search"),a=this.parent.querySelector(".tch-indicator-dropdown .tch-dropdown-header"),i=Gt(this.configuration.dropDown.indicators,this.indicators),r=Object.keys(i).map((function(t){return i[t]}));a.addEventListener("click",(function(t){return t.stopPropagation()})),e.addEventListener("click",(function(t){return t.stopPropagation()})),e.addEventListener("keypress",(function(t){(!t.key.match(/[A-Za-zА-Яа-яЁё\s\/\%]/)||t.key.match(/(Add)/)||t.key.match(/(Subtract)/)||t.key.match(/(Multiply)/)||t.key.match(/(Decimal)/))&&t.preventDefault()})),e.addEventListener("keyup",(function(){var a=r.filter((function(a){var i=t.makeTchTextValue(a.fullName),r=t.translation[i].toLowerCase();r=r.replace(/[^A-Za-zА-Яа-яЁё\s\/\%]/gi,"");var s=!1,n=e.value.toLowerCase();if(n===r.substring(0,n.length))s=!0;else for(var o=r.split(" "),h=0;h<o.length;h++)n===o[h].substring(0,n.length)&&(s=!0);return s}));t.fillIndicatorsDropdown(a)}))}},fe.prototype.filtrIndicator=function(){var t=Gt(this.configuration.dropDown.indicators,this.indicators),e=Object.keys(t).map((function(e){return t[e]}));this.fillIndicatorsDropdown(e)},fe.prototype.setPositionOfInstrDropdown=function(){var t=this.parent.querySelector(".tch-search-dropdown");t.offsetLeft<0&&(t.style.right="inherit",t.style.left="0")},fe.prototype.addSearchQuatationEvents=function(){var t=this;if(this.configuration.modules.headerButtons.searchQuotationButton){var e=this.parent.querySelector(".tch-search"),a=this.parent.querySelector(".tch-search-container"),i=a.querySelector(".tch-tabs");this.dropForHidden.push(a),e.addEventListener("click",(function(e){if(!t.continueDrawing(e)){var i=t.parent.querySelector(".tch-tabs-list [tch-text].tch-tab-selected").getAttribute("tch-text"),r=t.filterQuotation(i,"");t.fillquotationsDropdown(r,i),t.dropDownClick(a,!0,e),t.setPositionOfInstrDropdown(),e.currentTarget.value=""}})),i.addEventListener("click",(function(t){return t.stopPropagation()})),e.addEventListener("keyup",(function(e){if(e.target.parentNode.classList.contains("tch-dropdown-container-active")){if(t.continueDrawing(e))return;var a=t.parent.querySelector(".tch-tabs-list [tch-text].tch-tab-selected").getAttribute("tch-text"),i=t.filterQuotation(a,e.currentTarget.value);t.fillquotationsDropdown(i,a),t.setPositionOfInstrDropdown()}})),e.addEventListener("keypress",(function(t){(!t.key.match(/[A-Za-zА-Яа-яЁё0-9\s\\/]/)||t.key.match(/(Add)/)||t.key.match(/(Subtract)/)||t.key.match(/(Multiply)/)||t.key.match(/(Decimal)/))&&t.preventDefault()})),e.addEventListener("paste",(function(a){return t.onPaste(a,e)}))}},fe.prototype.onPaste=function(t,e){var a=(t.clipboardData||window.clipboardData).getData("Text");t.stopPropagation(),t.preventDefault();var i=a.replace(/[^A-Za-zА-Яа-яЁё0-9\s\\/]/g,"").trim();e&&(e.value=i)},fe.prototype.fullScreenToggle=function(){this.parent.classList.contains("tch-fullscreen-mode-on")?(this.parent.classList.toggle("tch-fullscreen-mode-on",!1),this.isFullScreen=!1):(this.parent.classList.toggle("tch-fullscreen-mode-on",!0),this.isFullScreen=!0)},fe.prototype.addFullscreenEvent=function(){var t=this;this.configuration.modules.headerButtons.fullScreenButton&&this.parent.querySelector(".tch-fullscreen-btn").addEventListener("click",(function(){var e=t.parent.offsetTop,a=t.parent.offsetLeft,i=t.parent.offsetTop,r={left:t.parent.offsetLeft-a,top:i-e},s=t.parent.querySelector(".tch-cursorType-container"),n=s?s.getAttribute("actualtype"):"arrow";if(t.fullScreenToggle(),t.resize(!0),t.configuration.modules.isSideBarCreate&&(t.recreateSideBarMenu(),t.createSideBarMenu("cursorType",n)),t.autoSaveParams(),t.moveElements.moveResize(r),t.configuration.modules.chartElements.isDataPanelCreate){var o=t.parent.querySelector(".tch-tabs-container"),h=o?o.scrollHeight:0,c=t.parent.querySelector(".tch-data-panel");c&&(40===h?(c.style.top=t.defaultTopDataPanel+h+"px",c.style.left=t.defaultLeftDataPanel+"px"):(c.style.top=t.defaultTopDataPanel+"px",c.style.left=t.defaultLeftDataPanel+"px"))}}))},fe.prototype.addPipsEvent=function(){var t=this;this.configuration.modules.headerButtons.createPipsButton&&this.parent.querySelector(".tch-pips-btn").addEventListener("click",(function(e){var a=!t.charts[t.activeChartIndex].chartData.isPipsShow;e.currentTarget.classList.toggle("tch-pips-btn-active",a),t.charts[t.activeChartIndex].chartData.isPipsShow=a,t.autoSaveParams()}))},fe.prototype.addSidebarClosePanelEvents=function(){var t=this;if(this.configuration.modules.isSideBarCreate){var e=this.parent.querySelector(".tch-sidebar-close-panel"),a=e.parentElement;e.addEventListener("click",(function(){a.classList.toggle("tch-sidebar-hidden"),t.isSidebarHidden=a.classList.contains("tch-header-hidden"),t.createSubMenu(),t.resize(),t.autoSaveParams()}))}},fe.prototype.addHeaderClosePanelEvents=function(){var t=this;if(this.configuration.modules.isHeaderCreate){var e=this.parent.querySelector(".tch-header-close-panel"),a=this.parent.querySelector(".tch-container");e.addEventListener("click",(function(){a.classList.toggle("tch-header-hidden"),t.isHeaderHidden=a.classList.contains("tch-header-hidden"),t.resize(),t.setTabsContainerHeight(),t.autoSaveParams()}))}},fe.prototype.setCursorType=function(t){for(var e=0;e<this.charts.length;e++)this.charts[e].setCursorType(t);this.charts&&this.getActiveChart()&&this.getActiveChartData()&&(this.setActiveCursorType(t),this.autoSaveParams())},fe.prototype.setActiveCursorType=function(t){this.configuration.modules.sideBarButtons.cursorTypeButton&&this.parent.querySelector(".tch-cursorType-container").setAttribute("actualType",t)},fe.prototype.setPeriod=function(t){var e=this.getActiveChartData();if(e.period=oe.convertValueToPeriod(t),e.data={ask:[],bid:[],mid:[]},e.clearIndicatorsData(),e.hasPrevData=!0,e.startX=e.candleWidth,e.startDateSeconds=!1,e.candleWidth=this.configuration.candleWidth,e.indicators.length){var a=!0,i=!1,r=void 0;try{for(var s,n=e.indicators[Symbol.iterator]();!(a=(s=n.next()).done);a=!0)if("oscillator"===s.value.type&&("5"===e.period||"1"===e.period)){this.charts[this.activeChartIndex]=this.createChart(e.chart.parent,e);break}}catch(o){i=!0,r=o}finally{try{a||null==n.return||n.return()}finally{if(i)throw r}}}this.charts[this.activeChartIndex].init(),this.connector.updateSubscription()},fe.prototype.setQuotation=function(t){var e=this.getActiveChartData();e.chart.dropZoomSteps(),e.id=t.ID,e.pair=t,e.data={ask:[],bid:[],mid:[]},e.clearIndicatorsData(),e.hasPrevData=!0,e.currentValue={ask:"",bid:"",mid:"",volume:0},e.precission="",e.options.Chart.autoScale=!0,e.drawingObjects=e.convertDrawingObjectsFromDTO(e.drawingObjects),this.charts[this.activeChartIndex]=this.createChart(e.chart.parent,e),this.charts[this.activeChartIndex].init(),this.connector.updateSubscription()},fe.prototype.setChartType=function(t){this.getActiveChartData().chartType=t,this.setActiveChartType(t)},fe.prototype.setActiveChartType=function(t){if(this.configuration.modules.headerButtons.chartTypeButton){for(var e=this.parent.querySelector(".tch-chart-type-button"),a=this.parent.querySelector(".tch-chart-type-dropdown"),i=0;i<a.children.length;i++)a.children[i].classList.toggle("tch-chart-type-selected",!1);for(var r in this.chartTypes)this.chartTypes.hasOwnProperty(r)&&r===t&&(e.setAttribute("actualtype",t),a.querySelector("li.tch-"+r).classList.toggle("tch-chart-type-selected",!0))}},fe.prototype.addHiddenDataPanelEvent=function(){var t=this;if(this.configuration.modules.chartElements.isDataPanelCreate){var e=this.parent.querySelector(".tch-data-panel .tch-close-btn"),a=this.parent.querySelector(".tch-data-panel-body"),i=this.parent.querySelector(".tch-data-panel");this.configuration.isDataPanel&&(e.classList.toggle("tch-up",!1),e.classList.toggle("tch-down",!0)),e.addEventListener("click",(function(e){a.classList.toggle("tch-hidden"),i.classList.toggle("tch-small");var r=e.currentTarget.classList.contains("tch-up");t.closeAll(),e.currentTarget.classList.toggle("tch-up",!r),e.currentTarget.classList.toggle("tch-down",r),t.isDataPanel=a.classList.contains("tch-hidden"),t.autoSaveParams(),t.moveElements.resizeDragObjects()}))}},fe.prototype.addHiddenStyle=function(){var t=this;this.parent.onclick=null,this.parent.onclick=function(){t.closeAll()}},fe.prototype.hideElementDataPanel=function(){var t=this.getActiveChartData();t&&(this.hiddenSymbolDescription(t.options.Chart.symbolDescription),this.hiddenOhlcValue(t.options.Chart.ohlcValues),this.hiddenIndicatorArguments(t.options.Chart.indicatorArguments),this.hiddenIndicatorTitles(t.options.Chart.indicatorTitles),this.hiddenIndicatorValues(t.options.Chart.indicatorValues),this.hiddenCandleTimer(t.options.Chart.candleTimer))},fe.prototype.hiddenSymbolDescription=function(t){if(this.configuration.modules.chartElements.isDataPanelCreate){var e=this.parent.querySelector(".tch-data-panel-header span:nth-child(2)"),a=this.parent.querySelector(".tch-data-panel-header span:nth-child(3)");e&&e.classList.toggle("tch-hidden",!t),a&&a.classList.toggle("tch-hidden",!t)}},fe.prototype.hiddenOhlcValue=function(t){var e=this.parent.querySelector(".tch-data-candle");e&&e.classList.toggle("tch-hidden",!t)},fe.prototype.hiddenCandleTimer=function(t){var e=this.parent.querySelector(".tch-timer-value");e&&(t?this.getActiveChart().startCandleTimer():e.parentNode.style.display="none")},fe.prototype.hiddenIndicatorTitles=function(t){this.setDisplayPanelElements(this.collectAllIndicatorsPanels(),".tch-indicator-name",t),!t&&this.hiddenIndicatorArguments(t),this.redrawIndicatorsDataPanel();var e=this.parent.querySelector(".tch-settings-background input[name='options-Chart-indicatorArguments']"),a=this.parent.querySelector(".tch-settings-background input[name='options-Chart-indicatorTitles']");e&&a&&(a.checked=t,t?e.disabled=!1:(e.checked=t,e.disabled="disabled"))},fe.prototype.redrawIndicatorsDataPanel=function(){this.updateIndicatorsDataPanel()},fe.prototype.hiddenIndicatorArguments=function(t){this.setDisplayPanelElements(this.collectAllIndicatorsPanels(),".tch-indicator-arguments",t),this.redrawIndicatorsDataPanel()},fe.prototype.hiddenIndicatorValues=function(t){this.setDisplayPanelElements(this.collectAllIndicatorsPanels(),".tch-indicator-values",t),this.redrawIndicatorsDataPanel()},fe.prototype.setDisplayPanelElements=function(t,e,a){for(var i=0;i<t.length;i++)for(var r=t[i].querySelectorAll(e),s=0;s<r.length;s++)r[s].style&&(r[s].style.display=a?"inherit":"none")},fe.prototype.collectAllIndicatorsPanels=function(){var t=this.getActiveChart(),e=t.dataPanel?[].slice.call(t.dataPanel.querySelectorAll(".tch-data-indicators")):[],a=[].slice.call(t.chartOscillatorContainer.querySelectorAll(".tch-oscillator-data-panel"));return e.concat(a)},fe.prototype.closeAll=function(){this.removeClassInList(this.dropForHidden,"tch-dropdown-container-active"),this.closeDrawingObjectSettings()},fe.prototype.removeClassInList=function(t,e){if(t.forEach)t.forEach((function(t){t.oncloseall&&t.oncloseall(),t.classList.toggle(e,!1)}));else for(var a in t)t.hasOwnProperty(a)&&(t[a].classList.toggle(e,!1),t[a].oncloseall&&t[a].oncloseall())},fe.prototype.alertBrowse=function(){vt.warningBrowser()||vt.showWarningBrowser(null,this.parent.querySelector(".tch-chart-alert"))},fe.prototype.closeDrawingObjectSettings=function(){var t=this.parent.querySelector(".tch-line-settings-container");t&&("undefined"!==t.closeCounter&&t.closeCounter>0?t.closeCounter--:(t.classList.toggle("tch-hidden",!0),t.oncloseall&&t.oncloseall()))},fe.prototype.AddRouleteEvent=function(t){var e=this;this.configuration.modules.sideBarButtons.rouleteButton&&(this.parent.querySelector(".tch-roulete-drawing-btn").onclick=function(a){e.continueDrawing(a)||("start"===t?e.setRouleteBtn("default"):e.setRouleteBtn("button"),e.closeAll(),e.autoSaveParams())})},fe.prototype.setRouleteBtn=function(t){if(this.configuration.modules.sideBarButtons.rouleteButton){var e=this.parent.querySelector(".tch-roulete-drawing-btn"),a=this.getActiveChartData();"button"===t&&("drawingRoulete"===a.state&&e.classList.contains("tch-active")?(this.removeRoulete("default"),a.state="default",e.classList.toggle("tch-active",!1)):"drawingRoulete"!==a.state||e.classList.contains("tch-active")?(a.state="drawingRoulete",e.classList.toggle("tch-active",!0)):(this.removeRoulete("default"),a.state="drawingRoulete",e.classList.toggle("tch-active",!0))),"default"===t?(this.removeRoulete("default"),this.setState("default"),e.classList.toggle("tch-active",!1)):"Off"===t&&e.classList.toggle("tch-active",!1)}},fe.prototype.removeRoulete=function(t){var e=this.getActiveChartData();if("RouleteButtonOff"===t)this.setRouleteBtn("Off");else for(var a=0;a<e.drawingObjects.length;a++)e.drawingObjects[a]instanceof ot&&(e.drawingObjects[a].remove(),this.setRouleteBtn("Off"),e.chart.redrawDrawingObjects(),e.chart.redrawInfo())},fe.prototype.lostFocusDrawingObject=function(){this.getActiveChart().deactivateChart()},fe.prototype.backDrawingObjectsToNormalState=function(){if(this.charts.length){for(var t=this.getActiveChartData(),e=this.getActiveChart(),a=0;a<t.drawingObjects.length;a++)t.drawingObjects[a].state="edit",t.editDrawingObject&&(t.editDrawingObject.state="normal"),t.editDrawingObject=t.drawingObjects[a],t.activeDrawingObject&&(t.activeDrawingObject.state="normal",t.activeDrawingObject=null),e.drawActiveDrawingObjects(),e.redrawDrawingObjects();t.editDrawingObject&&(t.editDrawingObject.isPressed?(t.editDrawingObject.isPressed=!1,t.editDrawingObject.updateValues()):(t.editDrawingObject.state="normal",t.editDrawingObject.draw(e.canvasDrawingContext),t.editDrawingObject=null),e.drawActiveDrawingObjects()),!1===t.isStayDrawingMode&&(t.state="default")}},fe.prototype.toXPixels=function(t){return this.charts[0].toXPixels(t)},fe.prototype.createSignalsPanel=function(){if(!this.configuration.modules.signals||!this.configuration.modules.chartElements.isDataPanelCreate)return!1;var t=this.parent.querySelector(".tch-data-signals");return t.innerHTML=this.getActiveChart().getSignalsPanelHtml(),t.spanNumber=t.querySelector(".tch-signals-number"),t.spanArrow=t.querySelector(".tch-signals-arrow"),t.spanEye=t.querySelector(".tch-signals-eye"),t.body=t.querySelector(".tch-signals-panel-body"),t.body.list=t.body.querySelector("ul"),t},fe.prototype.updateSignalsDropdown=function(t){for(var e=this.parent.querySelector(".tch-filtered-quatation").querySelectorAll(".tch-row-quatation"),a=0;a<e.length;a++){var i=e[a].querySelectorAll("td"),r=i[1].innerText.replace("/","");r=r.replace(/[^\x00-\x7F]/g,""),-1!==t.indexOf(r)?(i[3].innerText="*",i[3].style.color="green"):i[3].innerText=""}},fe.prototype.removeEventsSettingPanel=function(){this.parent.querySelector(".tch-settings-button").onclick=null,this.removeColorPickerEvents(),this.removeEventsSettingDropdown(),this.removeEventsSettingButtons()},fe.prototype.removeEventsSettingDropdown=function(){for(var t=this.parent.querySelectorAll(".tch-settings-dropdown .tch-tabs-list li"),e=0;e<t.length;e++)t[e].onclick=null},fe.prototype.removeColorPickerEvents=function(){for(var t=this.parent.querySelectorAll(".tch-color-picker"),e=0;e<t.length;e++)t[e].onclick=null},fe.prototype.removeEventsSettingButtons=function(){this.parent.querySelector(".tch-settings-dropdown .tch-btn-default").onclick=null,this.parent.querySelector(".tch-settings-dropdown  .tch-btn-submit").onclick=null,this.parent.querySelector(".tch-settings-dropdown .tch-btn-cancel").onclick=null},fe.prototype.applyThemeOverridedMethod=function(t,e){var a=this.getActiveChartData();return this.configuration.listTemesDesign.includes(this.configuration.typeThemes)&&!a&&this["".concat(t,"_").concat(this.configuration.typeThemes)]?this["".concat(t,"_").concat(this.configuration.typeThemes)](e):a&&this.configuration.listTemesDesign.includes(a.options.Chart.typeThemes)&&this["".concat(t,"_").concat(a.options.Chart.typeThemes)]?this["".concat(t,"_").concat(a.options.Chart.typeThemes)](e):void 0},fe.prototype.saveRestoreButtons_darkthema=fe.prototype.saveRestoreButtonsWithoutWrapper,fe.prototype.saveRestoreButtons_whitethema=fe.prototype.saveRestoreButtonsWithoutWrapper,fe.prototype.htmlSettingsBackground_darkthema=fe.prototype.htmlSettingsBackgroundSecondDesign,fe.prototype.htmlSettingsBackground_whitethema=fe.prototype.htmlSettingsBackgroundSecondDesign,fe.prototype.htmlSideBarContainer_darkthema=fe.prototype.htmlSideBarContainerSecondDesign,fe.prototype.htmlSideBarContainer_whitethema=fe.prototype.htmlSideBarContainerSecondDesign,fe.prototype.htmlSettingsScales_darkthema=fe.prototype.htmlSettingsScalesSecondDesign,fe.prototype.htmlSettingsScales_whitethema=fe.prototype.htmlSettingsScalesSecondDesign,fe.prototype.htmlSettingsStyle_darkthema=fe.prototype.htmlSettingsStyleSecondDesign,fe.prototype.htmlSettingsStyle_whitethema=fe.prototype.htmlSettingsStyleSecondDesign,i("./src/styles/common.less"),function t(){window.TechnicalChart=fe;var e=JSON.parse(document.getElementById("pair").innerText),a=document.getElementById("timeframe").innerText;console.log("pair",e),console.log("timeframe",a),new fe({container:document.querySelector("#container"),connectorOptions:{url:"https://informer.investforum.ru/wss/api/quotation/",wsUrl:"https://informer.investforum.ru/wss/Server.ashx",quotationCountriesUrl:"https://informer.investforum.ru/wss/quotation/getsettingsFromFile/quotation_countries?json",eventsSourceUrl:"https://informer.investforum.ru/adminapi/settings/geteventssource/",newsSourceUrl:"https://informer.investforum.ru/adminapi/settings/getnewssource/",settingsUrl:"https://informer.investforum.ru/wss/quotation/getsettings?tch=true",type:"widgets"},config:{version:"1.1",pair:e||{ID:23,Name:"EURUSD",FullName:"EUR/USD",Category:"Currency"},period:a||"1",lang:"en",defaultLang:"en",isHeaderHidden:!0,isSidebarHidden:!0,isFullScreen:!1,isDataPanel:!1,defaultId:23,typeThemes:"dark",listTemesDesign:["darkthema","whitethema"],offsetChart:.2,modules:{isSideBarCreate:!1,isHeaderCreate:!1,chartElements:{hiddenDataPanel:!0,isDataPanelCreate:!1}},footer:{isFooterCreate:!1}}},null).initialization()}()},"./src/styles/common.less":function(){},1:function(t,e,a){t.exports=a("./src/scripts/index.js")}});